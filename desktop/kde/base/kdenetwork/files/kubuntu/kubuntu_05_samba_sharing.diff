diff -urN kdenetwork-4.6.1/filesharing//advanced/CMakeLists.txt filesharing//advanced/CMakeLists.txt
--- kdenetwork-4.6.1/filesharing/advanced/CMakeLists.txt	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/CMakeLists.txt	1970-01-01 00:00:00.000000000 +0000
@@ -1,2 +0,0 @@
-add_subdirectory(kcm_sambaconf)
-add_subdirectory(propsdlgplugin)
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/ChangeLog filesharing//advanced/kcm_sambaconf/ChangeLog
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/ChangeLog	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/ChangeLog	1970-01-01 00:00:00.000000000 +0000
@@ -1,53 +0,0 @@
-- 0.5 
-    * New features :
-        - Added new options of Samba 3.0.2
-    * Bugfixes :
-        - Fixed a crash if files are deleted from a directory 
-          that is configured by KSambaPlugin at the same time.
-- 0.5 Beta 2
-    * New features :
-        - Support of Samba 3.0.1
-    * Bugfixes :         
-        - Should now be compileable with Qt 3.0
-- 0.5 Beta
-    * New features :
-        - Works with Samba 3.x
-        - Supports all options of Samba 3.0 and Samba 2.x
-        - Supports loading and saving of remote Samba configuration files
-          with KIO slaves (e.g. fish)
-        - Complete rewrite of the user permission tab
-        - Accelerator keys added where possible
-        - Tab ordering fixed everywhere
-        - Redesigned big parts of the interface
-
-    * Bugfixes :
-        - Fixed crash, when smb.conf wasn't found
-        - Some other bugs fixed
-
-- 0.4.1
-  * Bugfixes :
-    - "user only" changed to "only user"
-    - Changings in the advanced tab will enable the apply button
-  * New options :
-    - Many new options have been added to the Share dialog
-    - The layout of the Share dialog has been changed
-  * Automake :
-    - Doesn't depend on automake 1.7, but on version 1.5.x
-
-- 0.4b
-  * Bugfixes :
-    - General :
-      * adding a blank line between two sections in the smb.conf
-    - Konqueror Plugin :
-      * availabe changed to available
-      * when changing a share to be not shared the entry is removed from the smb.conf
-    - KControl Center Module :
-      * Changing of the socket options works now
-  * New layout :
-    - The KControl Center module layout has changed much
-    - The Konqueror plugin layout has been changed a little
-  * New options :
-    - Many new options have been added to the KControl Center module
-
-
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/CMakeLists.txt filesharing//advanced/kcm_sambaconf/CMakeLists.txt
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/CMakeLists.txt	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/CMakeLists.txt	1970-01-01 00:00:00.000000000 +0000
@@ -1,22 +0,0 @@
-set(kcm_kcmsambaconf_PART_SRCS kcmsambaconf.cpp kcminterface.cpp ${libfilesharesamba_SRCS})
-
-add_definitions(-D_KDEPRINT_COMPILE )
-
-kde4_add_ui3_files(kcm_kcmsambaconf_PART_SRCS socketoptionsdlg.ui userselectdlg.ui
-    groupselectdlg.ui usertab.ui filemodedlg.ui
-    joindomaindlg.ui
-)
-
-kde4_add_ui_files(kcm_kcmsambaconf_PART_SRCS share.ui kcminterface.ui expertuserdlg.ui)
-
-kde4_add_plugin(kcm_kcmsambaconf  ${kcm_kcmsambaconf_PART_SRCS})
-
-target_link_libraries(kcm_kcmsambaconf ${KDE4_KDEUI_LIBS} ${KDE4_KDE3SUPPORT_LIBS})
-
-install(TARGETS kcm_kcmsambaconf DESTINATION ${PLUGIN_INSTALL_DIR})
-
-########### install files ###############
-
-install(FILES kcmsambaconf.desktop DESTINATION  ${SERVICES_INSTALL_DIR} )
-
-kde4_install_icons(${ICON_INSTALL_DIR})
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/common.cpp filesharing//advanced/kcm_sambaconf/common.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/common.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/common.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,73 +0,0 @@
-/***************************************************************************
-                          common.cpp  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#include <qstring.h>
-#include <kcombobox.h>
-#include <q3listbox.h>
-
-#include "common.h"
-
-void setComboToString(QComboBox* combo,const QString & s)
-{
-  int i = /*combo->model()->index(*/combo->findText( s )/*)*/;//model()->findItem(s,Qt::ExactMatch));
-  combo->setCurrentItem(i);
-}
-
-bool boolFromText(const QString & value, bool testTrue)
-{
-  QString lower = value.toLower();
-  
-  if (testTrue) {
-    if (lower=="yes" ||
-        lower=="1" ||
-        lower=="true" ||
-        lower=="on")
-      return true;
-    else
-      return false;
-  } else {
-    if (lower=="no" ||
-        lower=="0" ||
-        lower=="false" ||
-        lower=="off" ||
-        lower=="disabled")
-      return false;
-    else
-      return true;
-  }
-}
-
-QString textFromBool(bool value)
-{
-  if (value)
-    return "yes";
-  else
-    return "no";
-}
-
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/common.h filesharing//advanced/kcm_sambaconf/common.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/common.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/common.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,40 +0,0 @@
-/***************************************************************************
-                          common.h  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef COMMON_H
-#define COMMON_H
-
-class QString;
-class QComboBox;
-
-
-void setComboToString(QComboBox*,const QString &);
-bool boolFromText(const QString & value,bool testTrue=true);
-QString textFromBool(bool value);
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/dictmanager.cpp filesharing//advanced/kcm_sambaconf/dictmanager.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/dictmanager.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/dictmanager.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,228 +0,0 @@
-/***************************************************************************
-                          dictmanager.cpp  -  description
-                             -------------------
-    begin                : Wed Jan 1 2003
-    copyright            : (C) 2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
- 
-#include <qlineedit.h>
-#include <qcheckbox.h>
-#include <qspinbox.h>
-#include <qcombobox.h>
-#include <qstringlist.h>
-
-#include <kurlrequester.h> 
-#include <klocale.h>
-#include <kdebug.h>
- 
-#include "sambashare.h"
-#include "dictmanager.h" 
-#include "common.h"
-
-#define DEBUG 5009
- 
-DictManager::DictManager(SambaShare* share):
-  lineEditDict(40,false),
-  checkBoxDict(40,false),
-  urlRequesterDict(40,false),
-  spinBoxDict(40,false),
-  comboBoxDict(20,false),
-  comboBoxValuesDict(20,false)
-{
-  _share = share;
-}
-
-DictManager::~DictManager() {
-}
-
-void DictManager::handleUnsupportedWidget(const QString & s, QWidget* w) {
-  kDebug(DEBUG) << s << endl;
-  Q_ASSERT(w);
-  w->setEnabled(false);
-  w->setToolTip(i18n("The option <em>%1</em> is not supported by your Samba version", s));
-}
-
-void DictManager::add(const QString & key, QLineEdit* lineEdit) {
-  kDebug(DEBUG) << key << " : QLineEdit" << endl;
-  if (_share->optionSupported(key)) {
-    lineEditDict.insert(key,lineEdit);
-    connect(lineEdit, SIGNAL(textChanged(const QString &)), this, SLOT(changedSlot()));
-  } else
-    handleUnsupportedWidget(key,lineEdit);
-}
-
-void DictManager::add(const QString & key, QCheckBox* checkBox){
-  kDebug(DEBUG) << key << " : QCheckBox " << endl;
-  if (_share->optionSupported(key)) {
-    checkBoxDict.insert(key,checkBox);
-    connect(checkBox, SIGNAL(clicked()), this, SLOT(changedSlot()));
-  } else
-    handleUnsupportedWidget(key,checkBox);
-}
-
-void DictManager::add(const QString & key, KUrlRequester* urlRq){
-  kDebug(DEBUG) << key << " : KUrlRequester " << endl;
-  if (_share->optionSupported(key)) {
-    urlRequesterDict.insert(key,urlRq);
-    connect(urlRq, SIGNAL(textChanged(const QString &)), this, SLOT(changedSlot()));
-  } else
-    handleUnsupportedWidget(key,urlRq);
-}
-
-void DictManager::add(const QString & key, QSpinBox* spinBox){
-  kDebug(DEBUG) << key << " : QSpinBox " << endl;
-  if (_share->optionSupported(key)) {
-    spinBoxDict.insert(key,spinBox);
-    connect(spinBox, SIGNAL(valueChanged(int)), this, SLOT(changedSlot()));
-  } else
-    handleUnsupportedWidget(key,spinBox);
-}
-              
-void DictManager::add(const QString & key, QComboBox* comboBox, QStringList* values){
-  kDebug(DEBUG) << key << endl;
-  if (_share->optionSupported(key)) {
-    comboBoxDict.insert(key,comboBox);
-    comboBoxValuesDict.insert(key,values);
-    connect(comboBox, SIGNAL(activated(int)), this, SLOT(changedSlot()));
-  } else
-    handleUnsupportedWidget(key,comboBox);
-}
-
-
-void DictManager::load(SambaShare* share, bool globalValue, bool defaultValue){
-  Q3DictIterator<QCheckBox> checkBoxIt( checkBoxDict ); 
-   
-  for( ; checkBoxIt.current(); ++checkBoxIt )	{
-    checkBoxIt.current()->setChecked(share->getBoolValue(checkBoxIt.currentKey(),globalValue,defaultValue));
-  }
-
-  Q3DictIterator<QLineEdit> lineEditIt( lineEditDict ); 
- 
-  for( ; lineEditIt.current(); ++lineEditIt )	{
-    lineEditIt.current()->setText(share->getValue(lineEditIt.currentKey(),globalValue,defaultValue));
-  }
-
-  Q3DictIterator<KUrlRequester> urlRequesterIt( urlRequesterDict ); 
- 
-  for( ; urlRequesterIt.current(); ++urlRequesterIt )	{
-    urlRequesterIt.current()->setUrl(share->getValue(urlRequesterIt.currentKey(),globalValue,defaultValue));
-  }
-
-  Q3DictIterator<QSpinBox> spinBoxIt( spinBoxDict ); 
-   
-  for( ; spinBoxIt.current(); ++spinBoxIt )	{
-    spinBoxIt.current()->setValue(share->getValue(spinBoxIt.currentKey(),globalValue,defaultValue).toInt());
-  }
-
-  loadComboBoxes(share,globalValue,defaultValue);
-
-}
-
-void DictManager::loadComboBoxes(SambaShare* share, bool globalValue, bool defaultValue) {
-  Q3DictIterator<QComboBox> comboBoxIt( comboBoxDict ); 
-   
-  for( ; comboBoxIt.current(); ++comboBoxIt )	{
-    QStringList *v = comboBoxValuesDict[comboBoxIt.currentKey()];
-    QString value = share->getValue(comboBoxIt.currentKey(),globalValue,defaultValue);
-
-    if (value.isNull())
-        continue;
-        
-    value = value.toLower();
-
-    
-    int comboIndex = 0;
-                                
-    QStringList::iterator it;
-    for ( it = v->begin(); it != v->end(); ++it ) {
-      QString lower = (*it).toLower();
-      if ( lower == "yes" &&
-           boolFromText(value))
-           break;
-
-      if ( lower == "no" &&
-           ! boolFromText(value,false))
-           break;
-
-      if ( lower == value ) 
-           break;                            
-      
-      comboIndex++;
-    }
-
-    comboBoxIt.current()->setCurrentItem(comboIndex);
-  }
-}
-
-
-void DictManager::save(SambaShare* share, bool globalValue, bool defaultValue){
-  Q3DictIterator<QCheckBox> checkBoxIt( checkBoxDict ); 
- 
-  for( ; checkBoxIt.current(); ++checkBoxIt )	{
-    share->setValue(checkBoxIt.currentKey(),checkBoxIt.current()->isChecked(), globalValue, defaultValue );
-  }
-
-  Q3DictIterator<QLineEdit> lineEditIt( lineEditDict ); 
-   
-  for( ; lineEditIt.current(); ++lineEditIt )	{
-    share->setValue(lineEditIt.currentKey(),lineEditIt.current()->text(), globalValue, defaultValue );
-  }
-
-  Q3DictIterator<KUrlRequester> urlRequesterIt( urlRequesterDict ); 
- 
-  for( ; urlRequesterIt.current(); ++urlRequesterIt )	{
-    share->setValue(urlRequesterIt.currentKey(),urlRequesterIt.current()->url().pathOrUrl(), globalValue, defaultValue );
-  }
-
-  Q3DictIterator<QSpinBox> spinBoxIt( spinBoxDict ); 
- 
-  for( ; spinBoxIt.current(); ++spinBoxIt )	{
-    share->setValue(spinBoxIt.currentKey(),spinBoxIt.current()->value(), globalValue, defaultValue );
-  }
-
-  Q3DictIterator<QComboBox> comboBoxIt( comboBoxDict );
-  
-  for( ; comboBoxIt.current(); ++comboBoxIt )	{
-    QStringList* values = comboBoxValuesDict[comboBoxIt.currentKey()];
-    
-    int i = comboBoxIt.current()->currentItem();
-    if (i >= 0) {
-      share->setValue(comboBoxIt.currentKey(),(*values)[i], globalValue, defaultValue );
-    } else {
-      kDebug(DEBUG) << comboBoxIt.currentKey() << " not set! " << endl;
-    }
-  }  
-    
-}
-
-void DictManager::changedSlot() {
-  emit changed();
-}
-
-
-
-#include "dictmanager.moc"
-
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/dictmanager.h filesharing//advanced/kcm_sambaconf/dictmanager.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/dictmanager.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/dictmanager.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,80 +0,0 @@
-/***************************************************************************
-                          dictmanager.h  -  description
-                             -------------------
-    begin                : Wed Jan 1 2003
-    copyright            : (C) 2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef _DICTMANAGER_H_
-#define _DICTMANAGER_H_
-
-class SambaShare;
-class QLineEdit;
-class QCheckBox;
-class QSpinBox;
-class QComboBox;
-class QString;
-class SambaShare;
-class QStringList;
-
-/**
- * @author Jan Schäfer
- **/
-class DictManager : public QObject
-{
-Q_OBJECT
-  public :
-    DictManager(SambaShare *share);
-    virtual ~DictManager();
-    
-    void add(const QString &, QLineEdit*);
-    void add(const QString &, QCheckBox*);
-    void add(const QString &, KUrlRequester*);
-    void add(const QString &, QSpinBox*);
-    void add(const QString &, QComboBox*, QStringList*);
-              
-    void load(SambaShare* share, bool globalValue=true, bool defaultValue=true);
-    void save(SambaShare* share, bool globalValue=true, bool defaultValue=true);
-
-  protected :
-    Q3Dict<QLineEdit> lineEditDict;
-    Q3Dict<QCheckBox> checkBoxDict;
-    Q3Dict<KUrlRequester> urlRequesterDict;
-    Q3Dict<QSpinBox> spinBoxDict;
-    Q3Dict<QComboBox> comboBoxDict;
-    Q3Dict<QStringList> comboBoxValuesDict;
-    
-    SambaShare* _share;
-    
-    void handleUnsupportedWidget(const QString &, QWidget*);
-    void loadComboBoxes(SambaShare*, bool, bool);
-    
-  protected slots:
-    void changedSlot();
-    
-  signals:
-    void changed();  
-};
- 
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/expertuserdlg.ui filesharing//advanced/kcm_sambaconf/expertuserdlg.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/expertuserdlg.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/expertuserdlg.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,245 +0,0 @@
-<ui version="4.0" stdsetdef="1" >
-  <class>ExpertUserDlg</class>
-  <widget class="QDialog" name="ExpertUserDlg" >
-    <property name="geometry" >
-      <rect>
-        <x>0</x>
-        <y>0</y>
-        <width>463</width>
-        <height>221</height>
-      </rect>
-    </property>
-    <property name="windowTitle" >
-      <string>User Settings</string>
-    </property>
-    <property name="sizeGripEnabled" >
-      <bool>true</bool>
-    </property>
-    <layout class="QGridLayout" >
-      <item row="0" column="0" >
-        <widget class="QLabel" name="TextLabel12" >
-          <property name="sizePolicy" >
-            <sizepolicy>
-              <hsizetype>1</hsizetype>
-              <vsizetype>5</vsizetype>
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-            </sizepolicy>
-          </property>
-          <property name="text" >
-            <string>&amp;Valid users:</string>
-          </property>
-          <property name="buddy" stdset="0" >
-            <cstring>validUsersEdit</cstring>
-          </property>
-          <property name="wordWrap" >
-            <bool>false</bool>
-          </property>
-        </widget>
-      </item>
-      <item row="0" column="1" >
-        <widget class="QLineEdit" name="validUsersEdit" />
-      </item>
-      <item row="3" column="0" >
-        <widget class="QLabel" name="TextLabel12_2_2_2" >
-          <property name="sizePolicy" >
-            <sizepolicy>
-              <hsizetype>1</hsizetype>
-              <vsizetype>5</vsizetype>
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-            </sizepolicy>
-          </property>
-          <property name="text" >
-            <string>&amp;Admin users:</string>
-          </property>
-          <property name="buddy" stdset="0" >
-            <cstring>adminUsersEdit</cstring>
-          </property>
-          <property name="wordWrap" >
-            <bool>false</bool>
-          </property>
-        </widget>
-      </item>
-      <item row="3" column="1" >
-        <widget class="QLineEdit" name="adminUsersEdit" />
-      </item>
-      <item row="4" column="0" >
-        <widget class="QLabel" name="TextLabel12_2_2_2_2" >
-          <property name="sizePolicy" >
-            <sizepolicy>
-              <hsizetype>1</hsizetype>
-              <vsizetype>5</vsizetype>
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-            </sizepolicy>
-          </property>
-          <property name="text" >
-            <string>&amp;Invalid users:</string>
-          </property>
-          <property name="buddy" stdset="0" >
-            <cstring>invalidUsersEdit</cstring>
-          </property>
-          <property name="wordWrap" >
-            <bool>false</bool>
-          </property>
-        </widget>
-      </item>
-      <item row="4" column="1" >
-        <widget class="QLineEdit" name="invalidUsersEdit" />
-      </item>
-      <item rowspan="1" row="6" column="0" colspan="2" >
-        <widget class="Q3Frame" name="frame16" >
-          <property name="frameShape" >
-            <enum>HLine</enum>
-          </property>
-          <property name="frameShadow" >
-            <enum>Raised</enum>
-          </property>
-        </widget>
-      </item>
-      <item rowspan="1" row="7" column="0" colspan="2" >
-        <layout class="QHBoxLayout" >
-          <property name="margin" >
-            <number>0</number>
-          </property>
-          <property name="spacing" >
-            <number>6</number>
-          </property>
-          <item>
-            <spacer name="Qt::Horizontal Spacing2" >
-              <property name="sizeHint" >
-                <size>
-                  <width>20</width>
-                  <height>20</height>
-                </size>
-              </property>
-              <property name="sizeType" >
-                <enum>QSizePolicy::Expanding</enum>
-              </property>
-              <property name="orientation" >
-                <enum>Qt::Horizontal</enum>
-              </property>
-            </spacer>
-          </item>
-          <item>
-            <widget class="QPushButton" name="buttonOk" >
-              <property name="text" >
-                <string>&amp;OK</string>
-              </property>
-              <property name="shortcut" >
-                <string/>
-              </property>
-              <property name="autoDefault" >
-                <bool>true</bool>
-              </property>
-              <property name="default" >
-                <bool>true</bool>
-              </property>
-            </widget>
-          </item>
-          <item>
-            <widget class="QPushButton" name="buttonCancel" >
-              <property name="text" >
-                <string>&amp;Cancel</string>
-              </property>
-              <property name="shortcut" >
-                <string/>
-              </property>
-              <property name="autoDefault" >
-                <bool>true</bool>
-              </property>
-            </widget>
-          </item>
-        </layout>
-      </item>
-      <item row="5" column="1" >
-        <spacer name="spacer97" >
-          <property name="sizeHint" >
-            <size>
-              <width>20</width>
-              <height>40</height>
-            </size>
-          </property>
-          <property name="sizeType" >
-            <enum>QSizePolicy::Expanding</enum>
-          </property>
-          <property name="orientation" >
-            <enum>Qt::Vertical</enum>
-          </property>
-        </spacer>
-      </item>
-      <item row="2" column="0" >
-        <widget class="QLabel" name="TextLabel12_2" >
-          <property name="sizePolicy" >
-            <sizepolicy>
-              <hsizetype>1</hsizetype>
-              <vsizetype>5</vsizetype>
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-            </sizepolicy>
-          </property>
-          <property name="text" >
-            <string>&amp;Write list:</string>
-          </property>
-          <property name="buddy" stdset="0" >
-            <cstring>writeListEdit</cstring>
-          </property>
-          <property name="wordWrap" >
-            <bool>false</bool>
-          </property>
-        </widget>
-      </item>
-      <item row="2" column="1" >
-        <widget class="QLineEdit" name="writeListEdit" />
-      </item>
-      <item row="1" column="1" >
-        <widget class="QLineEdit" name="readListEdit" />
-      </item>
-      <item row="1" column="0" >
-        <widget class="QLabel" name="TextLabel12_2_2" >
-          <property name="sizePolicy" >
-            <sizepolicy>
-              <hsizetype>1</hsizetype>
-              <vsizetype>5</vsizetype>
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-            </sizepolicy>
-          </property>
-          <property name="text" >
-            <string>&amp;Read list:</string>
-          </property>
-          <property name="buddy" stdset="0" >
-            <cstring>readListEdit</cstring>
-          </property>
-          <property name="wordWrap" >
-            <bool>false</bool>
-          </property>
-        </widget>
-      </item>
-    </layout>
-  </widget>
-    <tabstops>
-    <tabstop>validUsersEdit</tabstop>
-    <tabstop>readListEdit</tabstop>
-    <tabstop>writeListEdit</tabstop>
-    <tabstop>adminUsersEdit</tabstop>
-    <tabstop>invalidUsersEdit</tabstop>
-    <tabstop>buttonOk</tabstop>
-    <tabstop>buttonCancel</tabstop>
-  </tabstops>
-  <connections>
-    <connection>
-      <sender>buttonOk</sender>
-      <signal>clicked()</signal>
-      <receiver>ExpertUserDlg</receiver>
-      <slot>accept()</slot>
-    </connection>
-    <connection>
-      <sender>buttonCancel</sender>
-      <signal>clicked()</signal>
-      <receiver>ExpertUserDlg</receiver>
-      <slot>reject()</slot>
-    </connection>
-  </connections>
-</ui>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/filemodedlgimpl.cpp filesharing//advanced/kcm_sambaconf/filemodedlgimpl.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/filemodedlgimpl.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/filemodedlgimpl.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,118 +0,0 @@
-/***************************************************************************
-                          filemodedlgimpl.cpp  -  description
-                             -------------------
-    begin                : Thu Jul 18 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#include <assert.h>
-
-#include <stdio.h>
-
-#include <qlineedit.h>
-#include <qcheckbox.h>
-
-#include "filemodedlgimpl.h"
-
-FileModeDlgImpl::FileModeDlgImpl(QWidget* parent, QLineEdit* edit)
-  : FileModeDlg(parent)
-{
-  assert(edit);
-  _edit = edit;
-
-  init();
-}
-
-FileModeDlgImpl::~FileModeDlgImpl()
-{
-}
-
-void FileModeDlgImpl::init()
-{
-  bool ok;
-  int mod = _edit->text().toInt(&ok,8);
-
-  if (!ok)
-     mod = 0;
-
-  stickyBitChk->setChecked( mod & 01000 );
-  setGIDChk->setChecked( mod & 02000 );
-  setUIDChk->setChecked( mod & 04000 );
-
-  ownerExecChk->setChecked( mod & 0100 );
-  ownerWriteChk->setChecked( mod & 0200 );
-  ownerReadChk->setChecked( mod & 0400 );
-
-  groupExecChk->setChecked( mod & 010 );
-  groupWriteChk->setChecked( mod & 020 );
-  groupReadChk->setChecked( mod & 040 );
-
-  othersExecChk->setChecked( mod & 01 );
-  othersWriteChk->setChecked( mod & 02 );
-  othersReadChk->setChecked( mod & 04 );
-
-}
-
-void FileModeDlgImpl::accept()
-{
-  QString s = ""; 
-
-  s += QString::number(
-        (stickyBitChk->isChecked() ? 1 : 0) +
-        (setGIDChk->isChecked() ? 2 : 0) +
-        (setUIDChk->isChecked() ? 4 : 0)
-       );
-
-  s += QString::number(
-        (ownerExecChk->isChecked() ? 1 : 0) +
-        (ownerWriteChk->isChecked() ? 2 : 0) +
-        (ownerReadChk->isChecked() ? 4 : 0)
-       );
-
-  s += QString::number(
-        (groupExecChk->isChecked() ? 1 : 0) +
-        (groupWriteChk->isChecked() ? 2 : 0) +
-        (groupReadChk->isChecked() ? 4 : 0)
-       );
-
-  s += QString::number(
-        (othersExecChk->isChecked() ? 1 : 0) +
-        (othersWriteChk->isChecked() ? 2 : 0) +
-        (othersReadChk->isChecked() ? 4 : 0)
-       );
-
-  // it's an octal number so start with a 0
-  // but remove all the other trailing 0's
-  s = QString::number( s.toInt());
-  s = '0'+s;
-
-  _edit->setText(s);
-
-
-
-  FileModeDlg::accept();
-}
-
-#include "filemodedlgimpl.moc"
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/filemodedlgimpl.h filesharing//advanced/kcm_sambaconf/filemodedlgimpl.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/filemodedlgimpl.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/filemodedlgimpl.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,64 +0,0 @@
-/***************************************************************************
-                          filemodedlgimpl.cpp  -  description
-                             -------------------
-    begin                : Thu Jul 18 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef FILEMODEDLGIMPL_H
-#define FILEMODEDLGIMPL_H
-
-/**
-  *@author Jan Schäfer
-  */
-
-#include "filemodedlg.h"
-
-class QLineEdit;
-
-/**
- * Small dialog to change the UNIX access rights
- * It is called with a QLineEdit as parameter.
- * The class then takes the text from the QLineEdit and
- * interprets it as an oktal UNIX access right string
- * e.g. 0744
- * After the user has changed the access rights with the dialog
- * the class sets the new access rights as a new octal string
- * of the QLineEdit
- * Implements the filemodedlg.ui interface
- **/  
-class FileModeDlgImpl : public FileModeDlg
-{
-Q_OBJECT
-public: 
-	FileModeDlgImpl(QWidget* parent, QLineEdit* edit);
-	~FileModeDlgImpl();
-protected:
-  QLineEdit* _edit;
-  void init();
-protected slots:
-  virtual void accept();  
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/filemodedlg.ui filesharing//advanced/kcm_sambaconf/filemodedlg.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/filemodedlg.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/filemodedlg.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,429 +0,0 @@
-<!DOCTYPE UI><UI version="3.0" stdsetdef="1">
-<class>FileModeDlg</class>
-<widget class="QDialog">
-    <property name="name">
-        <cstring>FileModeDlg</cstring>
-    </property>
-    <property name="geometry">
-        <rect>
-            <x>0</x>
-            <y>0</y>
-            <width>370</width>
-            <height>220</height>
-        </rect>
-    </property>
-    <property name="windowTitle">
-        <string>Access Modifiers</string>
-    </property>
-    <property name="sizeGripEnabled">
-        <bool>true</bool>
-    </property>
-    <vbox>
-        <property name="name">
-            <cstring>unnamed</cstring>
-        </property>
-        <widget class="QGroupBox">
-            <property name="name">
-                <cstring>GroupBox1</cstring>
-            </property>
-            <property name="font">
-                <font>
-                </font>
-            </property>
-            <property name="title">
-                <string>Access Permissions</string>
-            </property>
-            <grid>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="Line" row="0" column="4" rowspan="4" colspan="1">
-                    <property name="name">
-                        <cstring>Line4</cstring>
-                    </property>
-                    <property name="frameShape">
-                        <enum>VLine</enum>
-                    </property>
-                    <property name="frameShadow">
-                        <enum>Sunken</enum>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Vertical</enum>
-                    </property>
-                </widget>
-                <spacer row="4" column="1" rowspan="1" colspan="2">
-                    <property name="name">
-                        <cstring>Spacer37</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Vertical</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>20</width>
-                            <height>43</height>
-                        </size>
-                    </property>
-                </spacer>
-                <spacer row="1" column="6" rowspan="2" colspan="1">
-                    <property name="name">
-                        <cstring>Spacer38</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>70</width>
-                            <height>20</height>
-                        </size>
-                    </property>
-                </spacer>
-                <widget class="QLabel" row="3" column="0">
-                    <property name="name">
-                        <cstring>TextLabel3</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Others</string>
-                    </property>
-                </widget>
-                <widget class="QLabel" row="0" column="1">
-                    <property name="name">
-                        <cstring>TextLabel4</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Read</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="3" column="1">
-                    <property name="name">
-                        <cstring>othersReadChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QLabel" row="0" column="3">
-                    <property name="name">
-                        <cstring>TextLabel6</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Exec</string>
-                    </property>
-                </widget>
-                <widget class="QLabel" row="0" column="2">
-                    <property name="name">
-                        <cstring>TextLabel5</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Write</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="2" column="2">
-                    <property name="name">
-                        <cstring>groupWriteChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="3" column="2">
-                    <property name="name">
-                        <cstring>othersWriteChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="1" column="2">
-                    <property name="name">
-                        <cstring>ownerWriteChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="3" column="3">
-                    <property name="name">
-                        <cstring>othersExecChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="2" column="1">
-                    <property name="name">
-                        <cstring>groupReadChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="1" column="1">
-                    <property name="name">
-                        <cstring>ownerReadChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QLabel" row="1" column="0">
-                    <property name="name">
-                        <cstring>TextLabel1</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Owner</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="2" column="3">
-                    <property name="name">
-                        <cstring>groupExecChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QLabel" row="2" column="0">
-                    <property name="name">
-                        <cstring>TextLabel2</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Group</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="1" column="3">
-                    <property name="name">
-                        <cstring>ownerExecChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string></string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="3" column="5">
-                    <property name="name">
-                        <cstring>stickyBitChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Sticky</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="2" column="5">
-                    <property name="name">
-                        <cstring>setGIDChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Set GID</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="1" column="5">
-                    <property name="name">
-                        <cstring>setUIDChk</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Set UID</string>
-                    </property>
-                </widget>
-                <widget class="QLabel" row="0" column="5">
-                    <property name="name">
-                        <cstring>TextLabel8</cstring>
-                    </property>
-                    <property name="font">
-                        <font>
-                        </font>
-                    </property>
-                    <property name="text">
-                        <string>Special</string>
-                    </property>
-                </widget>
-            </grid>
-        </widget>
-        <widget class="QLayoutWidget">
-            <property name="name">
-                <cstring>Layout1</cstring>
-            </property>
-            <hbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>0</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonHelp</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Help</string>
-                    </property>
-                    <property name="accel">
-                        <string>F1</string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <spacer>
-                    <property name="name">
-                        <cstring>Qt::Horizontal Spacing2</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>20</width>
-                            <height>20</height>
-                        </size>
-                    </property>
-                </spacer>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonOk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;OK</string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                    <property name="default">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonCancel</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Cancel</string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-            </hbox>
-        </widget>
-    </vbox>
-</widget>
-<connections>
-    <connection>
-        <sender>buttonOk</sender>
-        <signal>clicked()</signal>
-        <receiver>FileModeDlg</receiver>
-        <slot>accept()</slot>
-    </connection>
-    <connection>
-        <sender>buttonCancel</sender>
-        <signal>clicked()</signal>
-        <receiver>FileModeDlg</receiver>
-        <slot>reject()</slot>
-    </connection>
-</connections>
-<tabstops>
-    <tabstop>ownerReadChk</tabstop>
-    <tabstop>ownerWriteChk</tabstop>
-    <tabstop>ownerExecChk</tabstop>
-    <tabstop>groupReadChk</tabstop>
-    <tabstop>groupWriteChk</tabstop>
-    <tabstop>groupExecChk</tabstop>
-    <tabstop>othersReadChk</tabstop>
-    <tabstop>othersWriteChk</tabstop>
-    <tabstop>othersExecChk</tabstop>
-    <tabstop>setUIDChk</tabstop>
-    <tabstop>setGIDChk</tabstop>
-    <tabstop>stickyBitChk</tabstop>
-    <tabstop>buttonHelp</tabstop>
-    <tabstop>buttonOk</tabstop>
-    <tabstop>buttonCancel</tabstop>
-</tabstops>
-</UI>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/groupselectdlg.ui filesharing//advanced/kcm_sambaconf/groupselectdlg.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/groupselectdlg.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/groupselectdlg.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,444 +0,0 @@
-<!DOCTYPE UI><UI version="3.0" stdsetdef="1">
-<class>GroupSelectDlg</class>
-<widget class="QDialog">
-    <property name="name">
-        <cstring>GroupSelectDlg</cstring>
-    </property>
-    <property name="geometry">
-        <rect>
-            <x>0</x>
-            <y>0</y>
-            <width>406</width>
-            <height>370</height>
-        </rect>
-    </property>
-    <property name="windowTitle">
-        <string>Select Groups</string>
-    </property>
-    <property name="sizeGripEnabled">
-        <bool>true</bool>
-    </property>
-    <grid>
-        <property name="name">
-            <cstring>unnamed</cstring>
-        </property>
-        <property name="margin">
-            <number>11</number>
-        </property>
-        <property name="spacing">
-            <number>6</number>
-        </property>
-        <widget class="QLayoutWidget" row="4" column="0" rowspan="1" colspan="2">
-            <property name="name">
-                <cstring>Layout1</cstring>
-            </property>
-            <hbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>0</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <spacer>
-                    <property name="name">
-                        <cstring>Qt::Horizontal Spacing2</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>285</width>
-                            <height>20</height>
-                        </size>
-                    </property>
-                </spacer>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonOk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;OK</string>
-                    </property>
-                    <property name="accel">
-                        <number>0</number>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                    <property name="default">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonCancel</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Cancel</string>
-                    </property>
-                    <property name="accel">
-                        <number>0</number>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-            </hbox>
-        </widget>
-        <widget class="QFrame" row="3" column="0" rowspan="1" colspan="2">
-            <property name="name">
-                <cstring>frame16</cstring>
-            </property>
-            <property name="frameShape">
-                <enum>HLine</enum>
-            </property>
-            <property name="frameShadow">
-                <enum>Raised</enum>
-            </property>
-        </widget>
-        <spacer row="2" column="1">
-            <property name="name">
-                <cstring>spacer90</cstring>
-            </property>
-            <property name="orientation">
-                <enum>Qt::Vertical</enum>
-            </property>
-            <property name="sizeType">
-                <enum>Expanding</enum>
-            </property>
-            <property name="sizeHint">
-                <size>
-                    <width>20</width>
-                    <height>20</height>
-                </size>
-            </property>
-        </spacer>
-        <widget class="QGroupBox" row="0" column="0" rowspan="3" colspan="1">
-            <property name="name">
-                <cstring>groupBox87</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>7</hsizetype>
-                    <vsizetype>5</vsizetype>
-                    <horstretch>100</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="title">
-                <string>Selec&amp;t Groups</string>
-            </property>
-            <vbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QListView">
-                    <column>
-                        <property name="text">
-                            <string>Name</string>
-                        </property>
-                        <property name="clickable">
-                            <bool>true</bool>
-                        </property>
-                        <property name="resizeable">
-                            <bool>true</bool>
-                        </property>
-                    </column>
-                    <column>
-                        <property name="text">
-                            <string>GID</string>
-                        </property>
-                        <property name="clickable">
-                            <bool>true</bool>
-                        </property>
-                        <property name="resizeable">
-                            <bool>true</bool>
-                        </property>
-                    </column>
-                    <property name="name">
-                        <cstring>groupListView</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>7</hsizetype>
-                            <vsizetype>7</vsizetype>
-                            <horstretch>100</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="selectionMode">
-                        <enum>Extended</enum>
-                    </property>
-                </widget>
-            </vbox>
-        </widget>
-        <widget class="QButtonGroup" row="0" column="1">
-            <property name="name">
-                <cstring>accessBtnGrp</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>1</hsizetype>
-                    <vsizetype>5</vsizetype>
-                    <horstretch>0</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="title">
-                <string>Acc&amp;ess</string>
-            </property>
-            <vbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>defaultRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Default</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388676</number>
-                    </property>
-                    <property name="checked">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>readRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Read access</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388690</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>writeRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Write access</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388695</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>adminRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Admin access</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388673</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>noAccessRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>&amp;No access at all</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388686</number>
-                    </property>
-                </widget>
-            </vbox>
-        </widget>
-        <widget class="QButtonGroup" row="1" column="1">
-            <property name="name">
-                <cstring>kindBtnGrp</cstring>
-            </property>
-            <property name="title">
-                <string>&amp;Kind of Group</string>
-            </property>
-            <vbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>unixRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>&amp;UNIX group</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388693</number>
-                    </property>
-                    <property name="checked">
-                        <bool>false</bool>
-                    </property>
-                    <property name="buttonGroupId">
-                        <number>0</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>nisRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>NI&amp;S group</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388691</number>
-                    </property>
-                    <property name="checked">
-                        <bool>false</bool>
-                    </property>
-                    <property name="buttonGroupId">
-                        <number>1</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>bothRadio</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>0</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>UNIX and NIS gr&amp;oup</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388687</number>
-                    </property>
-                    <property name="checked">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-            </vbox>
-        </widget>
-    </grid>
-</widget>
-<connections>
-    <connection>
-        <sender>buttonOk</sender>
-        <signal>clicked()</signal>
-        <receiver>GroupSelectDlg</receiver>
-        <slot>accept()</slot>
-    </connection>
-    <connection>
-        <sender>buttonCancel</sender>
-        <signal>clicked()</signal>
-        <receiver>GroupSelectDlg</receiver>
-        <slot>reject()</slot>
-    </connection>
-</connections>
-<tabstops>
-    <tabstop>groupListView</tabstop>
-    <tabstop>defaultRadio</tabstop>
-    <tabstop>bothRadio</tabstop>
-    <tabstop>buttonOk</tabstop>
-    <tabstop>buttonCancel</tabstop>
-</tabstops>
-<includes>
-    <include location="local" impldecl="in declaration">qstringlist.h</include>
-    <include location="local" impldecl="in implementation">passwd.h</include>
-    <include location="local" impldecl="in implementation">groupselectdlg.ui.h</include>
-</includes>
-<variables>
-    <variable>QString groupKind;</variable>
-    <variable>int access;</variable>
-    <variable>QStringList selectedGroups;</variable>
-</variables>
-<slots>
-    <slot>init( const QStringList &amp; specifiedGroups )</slot>
-    <slot access="protected">accept()</slot>
-    <slot returnType="QStringList">getSelectedGroups()</slot>
-    <slot returnType="int">getAccess()</slot>
-    <slot returnType="QString">getGroupKind()</slot>
-</slots>
-</UI>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/groupselectdlg.ui.h filesharing//advanced/kcm_sambaconf/groupselectdlg.ui.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/groupselectdlg.ui.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/groupselectdlg.ui.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,67 +0,0 @@
-/****************************************************************************
-** ui.h extension file, included from the uic-generated form implementation.
-**
-** If you wish to add, delete or rename functions or slots use
-** Qt Designer which will update this file, preserving your code. Create an
-** init() function in place of a constructor, and a destroy() function in
-** place of a destructor.
-*****************************************************************************/
-
-#ifndef KCM_SAMBACONF_GROUPSELECTDLG_UI_H
-#define KCM_SAMBACONF_GROUPSELECTDLG_UI_H
-
-void GroupSelectDlg::init(const QStringList & specifiedGroups)
-{
-  QStringList unixGroups = getUnixGroups();
-
-  for (QStringList::Iterator it = unixGroups.begin(); it != unixGroups.end(); ++it)
-  {
-      if ( ! specifiedGroups.contains(*it))
-	  new Q3ListViewItem(groupListView, *it, QString::number(getGroupGID(*it)));
-  }
-}
-
-void GroupSelectDlg::accept()
-{
-  Q3ListViewItemIterator it( groupListView);
-
-  for ( ; it.current(); ++it ) {
-      if ( it.current()->isSelected() )
-	  selectedGroups << it.current()->text(0);
-  }	
-  
-  access = accessBtnGrp->id(accessBtnGrp->selected());
-  
-  if (unixRadio->isChecked())
-      groupKind = "+";
-  else
-      if (nisRadio->isChecked())
-	  groupKind = "&";
-  else
-      if (bothRadio->isChecked())
-	  groupKind = "@";
-  
-  QDialog::accept();
-}
-
-
-
-
-QStringList GroupSelectDlg::getSelectedGroups()
-{
-    return selectedGroups;
-}
-
-
-int GroupSelectDlg::getAccess()
-{
-    return access;
-}
-
-
-QString GroupSelectDlg::getGroupKind()
-{
-    return groupKind;
-}
-
-#endif // KCM_SAMBACONF_GROUPSELECTDLG_UI_H
Binary files kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/hi16-app-kcmsambaconf.png and filesharing//advanced/kcm_sambaconf/hi16-app-kcmsambaconf.png differ
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/hiddenfileview.cpp filesharing//advanced/kcm_sambaconf/hiddenfileview.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/hiddenfileview.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/hiddenfileview.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,613 +0,0 @@
-/***************************************************************************
-                          hiddenfileview.cpp  -  description
-                             -------------------
-    begin                : Wed Jan 1 2003
-    copyright            : (C) 2003 by Jan Sch�er
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#include <assert.h>
-
-#include <qcheckbox.h>
-#include <qlineedit.h>
-#include <qregexp.h>
-#include <qstringlist.h>
-#include <q3groupbox.h>
-#include <qcursor.h>
-//Added by qt3to4:
-#include <Q3PtrList>
-
-
-#include <kmenu.h>
-#include <kaction.h>
-#include <krestrictedline.h>
-#include <klocale.h>
-#include <kdirlister.h>
-#include <kmessagebox.h>
-#include <kurlrequester.h>
-#include <ktoggleaction.h>
-#include <kdebug.h>
-
-#include "hiddenfileview.h"
-#include "sharedlgimpl.h"
-#include "sambashare.h"
-
-#define DEBUG 5009
-
-#define COL_NAME 0
-#define COL_HIDDEN 1
-#define COL_VETO 2
-#define COL_VETO_OPLOCK 3
-#define COL_SIZE 4
-#define COL_DATE 5
-#define COL_PERM 6
-#define COL_OWNER 7
-#define COL_GROUP 8
-
-#define HIDDENTABINDEX 5
-
-HiddenListViewItem::HiddenListViewItem( Q3ListView *parent, const KFileItem &fi, bool hidden=false, bool veto=false, bool vetoOplock=false )
-  : QMultiCheckListItem( parent )
-{
-  setPixmap( COL_NAME, fi.pixmap(KIconLoader::SizeSmall));
-
-  setText( COL_NAME, fi.text() );
-  setText( COL_SIZE, KGlobal::locale()->formatNumber( fi.size(), 0));
-  setText( COL_DATE,  fi.timeString() );
-  setText( COL_PERM,  fi.permissionsString() );
-  setText( COL_OWNER, fi.user() );
-  setText( COL_GROUP, fi.group() );
-
-  setOn(COL_HIDDEN,hidden);
-  setOn(COL_VETO,veto);
-  setOn(COL_VETO_OPLOCK,vetoOplock);
-
-  _fileItem = fi;
-}
-
-HiddenListViewItem::~HiddenListViewItem()
-{
-}
-
-KFileItem HiddenListViewItem::getFileItem() const
-{
-  return _fileItem;
-}
-
-
-void HiddenListViewItem::paintCell(QPainter *p, const QColorGroup &cg, int column, int width, int alignment)
-{
-  QColorGroup _cg = cg;
-
-  if (isOn(COL_VETO))
-     _cg.setColor(QPalette::Base,Qt::lightGray);
-
-  if (isOn(COL_HIDDEN))
-     _cg.setColor(QPalette::Text,Qt::gray);
-
-  QMultiCheckListItem::paintCell(p, _cg, column, width, alignment);
-}
-
-
-
-
-HiddenFileView::HiddenFileView(ShareDlgImpl* shareDlg, SambaShare* share)
-{
-  _share = share;
-  _dlg = shareDlg;
-
-  _hiddenActn = new KToggleAction(i18n("&Hide"), this);
-  _vetoActn = new KToggleAction(i18n("&Veto"), this);
-  _vetoOplockActn = new KToggleAction(i18n("&Veto Oplock"), this);
-
-  initListView();
-
-  _dlg->hiddenChk->setTristate(true);
-  _dlg->vetoChk->setTristate(true);
-
-  connect( _dlg->hiddenChk, SIGNAL(toggled(bool)), this, SLOT( hiddenChkClicked(bool) ));
-  connect( _dlg->vetoChk, SIGNAL(toggled(bool)), this, SLOT( vetoChkClicked(bool) ));
-  connect( _dlg->vetoOplockChk, SIGNAL(toggled(bool)), this, SLOT( vetoOplockChkClicked(bool) ));
-
-  _dlg->hiddenEdit->setText( _share->getValue("hide files") );
-  connect( _dlg->hiddenEdit, SIGNAL(textChanged(const QString &)), this, SLOT(updateView()));
-
-  _dlg->vetoEdit->setText( _share->getValue("veto files") );
-  connect( _dlg->vetoEdit, SIGNAL(textChanged(const QString &)), this, SLOT(updateView()));
-
-  _dlg->vetoOplockEdit->setText( _share->getValue("veto oplock files") );
-  connect( _dlg->vetoOplockEdit, SIGNAL(textChanged(const QString &)), this, SLOT(updateView()));
-
-//  new QLabel(i18n("Hint")+" : ",grid);
-//  new QLabel(i18n("You have to separate the entries with a '/'. You can use the wildcards '*' and '?'"),grid);
-//  new QLabel(i18n("Example")+" : ",grid);
-//  new QLabel(i18n("*.tmp/*SECRET*/.*/file?.*/"),grid);
-
-  _dir = new KDirLister(this);
-  _dir->setShowingDotFiles(true);
-
-  connect( _dir, SIGNAL(newItems(const KFileItemList &)),
-           this, SLOT(insertNewFiles(const KFileItemList &)));
-
-  connect( _dir, SIGNAL(deleteItem(const KFileItem&)),
-           this, SLOT(deleteItem(const KFileItem&)));
-
-  connect( _dir, SIGNAL(refreshItems(const QList<QPair<KFileItem, KFileItem> > &)),
-           this, SLOT(refreshItems(const QList<QPair<KFileItem, KFileItem> > &)));
-
-  connect( _hiddenActn, SIGNAL(toggled(bool)), this, SLOT(hiddenChkClicked(bool)));
-  connect( _vetoActn, SIGNAL(toggled(bool)), this, SLOT(vetoChkClicked(bool)));
-  connect( _vetoOplockActn, SIGNAL(toggled(bool)), this, SLOT(vetoOplockChkClicked(bool)));
-}
-
-void HiddenFileView::initListView()
-{
-  _dlg->hiddenListView->setMultiSelection(true);
-  _dlg->hiddenListView->setSelectionMode(Q3ListView::Extended);
-  _dlg->hiddenListView->setAllColumnsShowFocus(true);
-
-  _hiddenList = createRegExpList(_share->getValue("hide files"));
-  _vetoList = createRegExpList(_share->getValue("veto files"));
-  _vetoOplockList = createRegExpList(_share->getValue("veto oplock files"));
-
-  _popup = new KMenu(_dlg->hiddenListView);
-
-  _popup->addAction(_hiddenActn);
-  _popup->addAction(_vetoActn);
-  _popup->addAction(_vetoOplockActn);
-
-  connect( _dlg->hiddenListView, SIGNAL(selectionChanged()), this, SLOT(selectionChanged()));
-  connect( _dlg->hiddenListView, SIGNAL(contextMenu(K3ListView*,Q3ListViewItem*,const QPoint&)),
-           this, SLOT(showContextMenu()));
-
-  connect( _dlg->hideDotFilesChk, SIGNAL(toggled(bool)), this, SLOT(hideDotFilesChkClicked(bool)));
-  connect( _dlg->hideUnreadableChk, SIGNAL(toggled(bool)), this, SLOT(hideUnreadableChkClicked(bool)));
-
-  connect( _dlg->hiddenListView, SIGNAL(mouseButtonPressed(int,Q3ListViewItem*,const QPoint &,int)),
-           this, SLOT(slotMouseButtonPressed(int,Q3ListViewItem*,const QPoint &,int)));
-}
-
-HiddenFileView::~HiddenFileView()
-{
-}
-
-void HiddenFileView::load()
-{
-  if (_dlg->hiddenListView)
-    _dlg->hiddenListView->clear();
-
-  _dir->openUrl( _dlg->pathUrlRq->url() );
-}
-
-void HiddenFileView::save()
-{
-  QString s = _dlg->hiddenEdit->text().trimmed();
-  // it is important that the string ends with an '/'
-  // otherwise Samba won't recognize the last entry
-  if ( (!s.isEmpty()) && (s.right(1)!="/"))
-      s+='/';
-  _share->setValue("hide files", s);
-
-  s = _dlg->vetoEdit->text().trimmed();
-  // it is important that the string ends with an '/'
-  // otherwise Samba won't recognize the last entry
-  if ( (!s.isEmpty()) && (s.right(1)!="/"))
-      s+='/';
-  _share->setValue("veto files", s);
-
-  s = _dlg->vetoOplockEdit->text().trimmed();
-  // it is important that the string ends with an '/'
-  // otherwise Samba won't recognize the last entry
-  if ( (!s.isEmpty()) && (s.right(1)!="/"))
-      s+='/';
-  _share->setValue("veto oplock files", s);
-
-}
-
-void HiddenFileView::insertNewFiles(const KFileItemList &newone)
-{
-  if ( newone.isEmpty() )
-     return;
-
-  int j=0;
-
-  KFileItemList::const_iterator it = newone.begin();
-  const KFileItemList::const_iterator end = newone.end();
-  for ( ; it != end; ++it ) {
-    const KFileItem tmp = *it;
-    j++;
-
-    bool hidden = matchHidden(tmp.text());
-    bool veto = matchVeto(tmp.text());
-    bool vetoOplock = matchVetoOplock(tmp.text());
-    kDebug(DEBUG) << "creating new HiddenListViewItem " << tmp.text() << endl;
-    new HiddenListViewItem( _dlg->hiddenListView, tmp, hidden, veto, vetoOplock );
-
-  }
-}
-
-
-
-void HiddenFileView::columnClicked(int column) {
-
-
-  switch (column) {
-    case COL_HIDDEN : hiddenChkClicked( !_dlg->hiddenChk->isChecked() );break;
-    case COL_VETO : vetoChkClicked( !_dlg->vetoChk->isChecked() );break;
-    case COL_VETO_OPLOCK : vetoOplockChkClicked( !_dlg->vetoOplockChk->isChecked() );break;
-    default : break;
-  }
-}
-
-void HiddenFileView::deleteItem( const KFileItem &fileItem )
-{
-  HiddenListViewItem* item;
-  for (item = dynamic_cast<HiddenListViewItem*>(_dlg->hiddenListView->firstChild());item;
-       item = dynamic_cast<HiddenListViewItem*>(item->nextSibling()))
-  {
-    if (item->getFileItem() == fileItem)
-    {
-      delete item;
-      break;
-    }
-  }
-
-}
-
-void HiddenFileView::refreshItems( const QList<QPair<KFileItem, KFileItem> >& /*items*/ )
-{
-  updateView();
-}
-
-
-void HiddenFileView::showContextMenu()
-{
-  _popup->exec(QCursor::pos());
-}
-
-
-void HiddenFileView::selectionChanged()
-{
-  bool veto = false;
-  bool noVeto = false;
-  bool hide = false;
-  bool noHide = false;
-  bool vetoOplock = false;
-  bool noVetoOplock = false;
-
-  int n = 0;
-
-  HiddenListViewItem* item;
-  for (item = static_cast<HiddenListViewItem*>(_dlg->hiddenListView->firstChild());item;
-       item = static_cast<HiddenListViewItem*>(item->nextSibling()))
-  {
-    if (!item->isSelected())
-       continue;
-
-    n++;
-
-    if (item->isOn(COL_VETO))
-       veto = true;
-    else
-       noVeto = true;
-
-    if (item->isOn(COL_VETO_OPLOCK))
-       vetoOplock = true;
-    else
-       noVetoOplock = true;
-
-    if (item->isOn(COL_HIDDEN))
-       hide = true;
-    else
-       noHide = true;
-  }
-
-
-  _dlg->selGrpBx->setEnabled(n>0);
-
-  if (veto && noVeto)
-  {
-    _dlg->vetoChk->setTristate(true);
-    _dlg->vetoChk->setCheckState(Qt::PartiallyChecked);
-    _dlg->vetoChk->update();
-  }
-  else
-  {
-    _dlg->vetoChk->setTristate(false);
-    _dlg->vetoChk->setChecked(veto);
-  }
-
-  if (vetoOplock && noVetoOplock)
-  {
-    _dlg->vetoOplockChk->setTristate(true);
-    _dlg->vetoOplockChk->setCheckState(Qt::PartiallyChecked);
-    _dlg->vetoOplockChk->update();
-  }
-  else
-  {
-    _dlg->vetoOplockChk->setTristate(false);
-    _dlg->vetoOplockChk->setChecked(vetoOplock);
-  }
-
-
-  if (hide && noHide)
-  {
-    _dlg->hiddenChk->setTristate(true);
-    _dlg->hiddenChk->setCheckState(Qt::PartiallyChecked);
-    _dlg->hiddenChk->update();
-  }
-  else
-  {
-    _dlg->hiddenChk->setTristate(false);
-    _dlg->hiddenChk->setChecked(hide);
-  }
-}
-
-void HiddenFileView::checkBoxClicked(QCheckBox* chkBox,KToggleAction* action,QLineEdit* edit, int column,Q3PtrList<QRegExp> & reqExpList,bool b) {
-  // We don't save the old state so
-  // disable the tristate mode
-  chkBox->setTristate(false);
-  action->setChecked(b);
-  chkBox->setChecked(b);
-
-  HiddenListViewItem* item;
-  for (item = static_cast<HiddenListViewItem*>(_dlg->hiddenListView->firstChild());item;
-       item = static_cast<HiddenListViewItem*>(item->nextSibling()))
-  {
-    if (!item->isSelected())
-        continue;
-
-    if (b == item->isOn(column))
-        continue;
-
-    if (!b) {
-        QRegExp* rx = getRegExpListMatch(item->text(0),reqExpList);
-
-        // Perhaps the file was hidden because it started with a dot
-        if (!rx && item->text(0)[0]=='.' && _dlg->hideDotFilesChk->isChecked()) {
-            int result = KMessageBox::questionYesNo(_dlg,i18n(
-                    "<qt>Some files you have selected are hidden because they start with a dot; "
-                    "do you want to uncheck all files starting with a dot?</qt>"),i18n("Files Starting With Dot"),KGuiItem(i18n("Uncheck Hidden")), KGuiItem(i18n("Keep Hidden")));
-
-            if (result == KMessageBox::No) {
-                Q3PtrList<HiddenListViewItem> lst = getMatchingItems(QRegExp(".*",false,true));
-                deselect(lst);
-            } else {
-                _dlg->hideDotFilesChk->setChecked(false);
-            }
-            continue;
-        } else {
-            if (rx) {
-                // perhaps it is matched by a wildcard string
-                QString p = rx->pattern();
-                if ( p.contains('*') ||
-                        p.contains('?') )
-                {
-                    // TODO after message freeze: why show three times the wildcard string? Once should be enough.
-		    // TODO remove <b></b> and use <qt> instead
-                    int result = KMessageBox::questionYesNo(_dlg,i18n(
-                    "<b></b>Some files you have selected are matched by the wildcarded string <b>'%1'</b>; "
-                    "do you want to uncheck all files matching <b>'%1'</b>?", rx->pattern()),
-                    i18n("Wildcarded String"),KGuiItem(i18n("Uncheck Matches")),KGuiItem(i18n("Keep Selected")));
-
-                    Q3PtrList<HiddenListViewItem> lst = getMatchingItems( *rx );
-
-                    if (result == KMessageBox::No) {
-                        deselect(lst);
-                    } else {
-                        setState(lst,column,false);
-                        reqExpList.remove(rx);
-                        updateEdit(edit, reqExpList);
-                    }
-                    continue;
-                } else {
-                    reqExpList.remove(rx);
-                    updateEdit(edit, reqExpList);
-                }
-            }
-        }
-    }
-    else {
-        reqExpList.append( new QRegExp(item->text(0)) );
-        updateEdit(edit, reqExpList);
-    }
-
-    item->setOn(column,b);
-  }
-
-  _dlg->hiddenListView->update();
-}
-
-void HiddenFileView::hiddenChkClicked(bool b)
-{
-    checkBoxClicked(_dlg->hiddenChk, _hiddenActn, _dlg->hiddenEdit, COL_HIDDEN,_hiddenList,b);
-
-}
-
-void HiddenFileView::vetoOplockChkClicked(bool b) {
-    checkBoxClicked(_dlg->vetoOplockChk, _vetoOplockActn, _dlg->vetoOplockEdit, COL_VETO_OPLOCK,_vetoOplockList,b);
-}
-
-void HiddenFileView::vetoChkClicked(bool b)
-{
-    checkBoxClicked(_dlg->vetoChk, _vetoActn, _dlg->vetoEdit, COL_VETO,_vetoList,b);
-}
-
-/**
- * Sets the text of the QLineEdit edit to the entries of the passed QRegExp-List
- **/
-void HiddenFileView::updateEdit(QLineEdit* edit, Q3PtrList<QRegExp> & lst)
-{
-  QString s="";
-
-  QRegExp* rx;
-  for(rx = static_cast<QRegExp*>(lst.first()); rx;
-      rx = static_cast<QRegExp*>(lst.next()) )
-  {
-    s+= rx->pattern()+QString("/");
-  }
-
-  edit->setText(s);
-}
-
-
-void HiddenFileView::setState(Q3PtrList<HiddenListViewItem> & lst, int column, bool b) {
-  HiddenListViewItem* item;
-  for(item = static_cast<HiddenListViewItem*>(lst.first()); item;
-      item = static_cast<HiddenListViewItem*>(lst.next()) )
-  {
-    item->setOn(column,b);
-  }
-}
-
-
-void HiddenFileView::deselect(Q3PtrList<HiddenListViewItem> & lst)
-{
-  HiddenListViewItem* item;
-  for(item = static_cast<HiddenListViewItem*>(lst.first()); item;
-      item = static_cast<HiddenListViewItem*>(lst.next()) )
-  {
-    item->setSelected(false);
-  }
-}
-
-
-Q3PtrList<HiddenListViewItem> HiddenFileView::getMatchingItems(const QRegExp & rx)
-{
-  Q3PtrList<HiddenListViewItem> lst;
-
-  HiddenListViewItem* item;
-  for (item = static_cast<HiddenListViewItem*>(_dlg->hiddenListView->firstChild());item;
-       item = static_cast<HiddenListViewItem*>(item->nextSibling()))
-  {
-    if (rx.exactMatch(item->text(0)))
-       lst.append(item);
-  }
-
-  return lst;
-}
-
-void HiddenFileView::updateView()
-{
-  _hiddenList = createRegExpList(_dlg->hiddenEdit->text());
-  _vetoList = createRegExpList(_dlg->vetoEdit->text());
-  _vetoOplockList = createRegExpList(_dlg->vetoOplockEdit->text());
-
-  HiddenListViewItem* item;
-  for (item = static_cast<HiddenListViewItem*>(_dlg->hiddenListView->firstChild());item;
-       item = static_cast<HiddenListViewItem*>(item->nextSibling()))
-  {
-    item->setOn(COL_HIDDEN,matchHidden(item->text(0)));
-    item->setOn(COL_VETO,matchVeto(item->text(0)));
-    item->setOn(COL_VETO_OPLOCK,matchVetoOplock(item->text(0)));
-  }
-
-  _dlg->hiddenListView->repaint();
-}
-
-
-Q3PtrList<QRegExp> HiddenFileView::createRegExpList(const QString & s)
-{
-  Q3PtrList<QRegExp> lst;
-  bool cs = _share->getBoolValue("case sensitive");
-
-  if (!s.isEmpty())
-  {
-    QStringList l = QStringList::split("/",s);
-
-    for ( QStringList::Iterator it = l.begin(); it != l.end(); ++it ) {
-        lst.append( new QRegExp(*it,cs,true) );
-    }
-  }
-
-  return lst;
-}
-
-bool HiddenFileView::matchHidden(const QString & s)
-{
-  Q3PtrList<QRegExp> hiddenList(_hiddenList);
-
-  if (_dlg->hideDotFilesChk->isChecked())
-     hiddenList.append( new QRegExp(".*",false,true) );
-
-  return matchRegExpList(s,hiddenList);
-}
-
-bool HiddenFileView::matchVeto(const QString & s)
-{
-  return matchRegExpList(s,_vetoList);
-}
-
-bool HiddenFileView::matchVetoOplock(const QString & s)
-{
-  return matchRegExpList(s,_vetoOplockList);
-}
-
-bool HiddenFileView::matchRegExpList(const QString & s, Q3PtrList<QRegExp> & lst)
-{
-  if (getRegExpListMatch(s,lst))
-     return true;
-  else
-     return false;
-}
-
-
-QRegExp* HiddenFileView::getHiddenMatch(const QString & s)
-{
-  return getRegExpListMatch(s,_hiddenList);
-}
-
-QRegExp* HiddenFileView::getVetoMatch(const QString & s)
-{
-  return getRegExpListMatch(s,_vetoList);
-}
-
-QRegExp* HiddenFileView::getRegExpListMatch(const QString & s, Q3PtrList<QRegExp> & lst)
-{
-  QRegExp* rx;
-
-  for ( rx = lst.first(); rx; rx = lst.next() )
-  {
-    if (rx->exactMatch(s))
-       return rx;
-  }
-
-  return 0L;
-}
-
-void HiddenFileView::hideDotFilesChkClicked(bool)
-{
-  updateView();
-}
-
-void HiddenFileView::hideUnreadableChkClicked(bool)
-{
-  updateView();
-}
-
-void HiddenFileView::slotMouseButtonPressed( int, Q3ListViewItem*, const QPoint&, int c ) {
-  columnClicked(c);
-}
-
-
-#include "hiddenfileview.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/hiddenfileview.h filesharing//advanced/kcm_sambaconf/hiddenfileview.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/hiddenfileview.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/hiddenfileview.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,142 +0,0 @@
-/***************************************************************************
-                          hiddenfileview.h  -  description
-                             -------------------
-    begin                : Wed Jan 1 2003
-    copyright            : (C) 2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef _HIDDENFILEVIEW_H_
-#define _HIDDENFILEVIEW_H_
-
-#include <kfileitem.h>
-#include <k3listview.h>
-
-#include "qmultichecklistitem.h"
-//Added by qt3to4:
-#include <Q3PtrList>
-
-class KDirLister;
-class QRegExp;
-class ShareDlgImpl;
-class SambaShare;
-
-class HiddenListViewItem : public QMultiCheckListItem
-{
-Q_OBJECT
-public:
-  HiddenListViewItem( Q3ListView *parent, const KFileItem &fi, bool hidden, bool veto, bool vetoOplock );
-  ~HiddenListViewItem();
-
-  virtual void paintCell(QPainter *p, const QColorGroup &cg, int column, int width, int alignment);
-
-  KFileItem getFileItem() const;
-protected:
-  KFileItem _fileItem;
-};
-
-class KToggleAction;
-class KMenu;
-class ShareDlgImpl;
-
-
-/**
- * Widget which shows a list of files
- * from a directory.
- * It gets the directory from the SambaShare
- * It also interprets the hidden files parameter
- * of the SambaShare an offers the possibility of
- * selecting the files which should be hidden
- **/
-class HiddenFileView : public QObject
-{
-Q_OBJECT
-
-public:
-  HiddenFileView(ShareDlgImpl* shareDlg, SambaShare* share);
-  ~HiddenFileView();
-
-  /**
-   * Load the values from the share and show them
-   **/
-  void load();
-
-  /**
-   * Save changings to the share
-   **/
-  void save();
-
-protected:
-  SambaShare* _share;
-  ShareDlgImpl* _dlg;
-
-  KDirLister* _dir;
-  Q3PtrList<QRegExp> _hiddenList;
-  Q3PtrList<QRegExp> _vetoList;
-  Q3PtrList<QRegExp> _vetoOplockList;
-
-  KToggleAction* _hiddenActn;
-  KToggleAction* _vetoActn;
-  KToggleAction* _vetoOplockActn;
-
-  KMenu* _popup;
-
-  void initListView();
-
-  Q3PtrList<QRegExp> createRegExpList(const QString & s);
-  bool matchHidden(const QString & s);
-  bool matchVeto(const QString & s);
-  bool matchVetoOplock(const QString & s);
-  bool matchRegExpList(const QString & s, Q3PtrList<QRegExp> & lst);
-
-  QRegExp* getHiddenMatch(const QString & s);
-  QRegExp* getVetoMatch(const QString & s);
-  QRegExp* getRegExpListMatch(const QString & s, Q3PtrList<QRegExp> & lst);
-
-  Q3PtrList<HiddenListViewItem> getMatchingItems(const QRegExp & rx);
-
-  void setState(Q3PtrList<HiddenListViewItem> & lst,int column, bool b);
-  void deselect(Q3PtrList<HiddenListViewItem> & lst);
-
-  void updateEdit(QLineEdit* edit, Q3PtrList<QRegExp> & lst);
-
-protected slots:
-  // slots for KDirListener :
-  void insertNewFiles(const KFileItemList &newone);
-  void deleteItem( const KFileItem &_fileItem );
-  void refreshItems( const QList<QPair<KFileItem, KFileItem> >& items );
-  
-  void selectionChanged();
-  void hiddenChkClicked(bool b);
-  void vetoChkClicked(bool b);
-  void vetoOplockChkClicked(bool b);
-  void checkBoxClicked(QCheckBox* chkBox,KToggleAction* action,QLineEdit* edit,int column,Q3PtrList<QRegExp> &reqExpList,bool b);
-  void columnClicked(int column);
-  void showContextMenu();
-  void updateView();
-  void hideDotFilesChkClicked(bool);
-  void hideUnreadableChkClicked(bool);
-  void slotMouseButtonPressed( int button, Q3ListViewItem * item, const QPoint & pos, int c );
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/joindomaindlg.ui filesharing//advanced/kcm_sambaconf/joindomaindlg.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/joindomaindlg.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/joindomaindlg.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,250 +0,0 @@
-<!DOCTYPE UI><UI version="3.0" stdsetdef="1">
-<class>JoinDomainDlg</class>
-<widget class="QDialog">
-    <property name="name">
-        <cstring>JoinDomainDlg</cstring>
-    </property>
-    <property name="geometry">
-        <rect>
-            <x>0</x>
-            <y>0</y>
-            <width>427</width>
-            <height>215</height>
-        </rect>
-    </property>
-    <property name="windowTitle">
-        <string>Join Domain</string>
-    </property>
-    <property name="sizeGripEnabled">
-        <bool>true</bool>
-    </property>
-    <grid>
-        <property name="name">
-            <cstring>unnamed</cstring>
-        </property>
-        <widget class="QLayoutWidget" row="7" column="0" rowspan="1" colspan="2">
-            <property name="name">
-                <cstring>Layout1</cstring>
-            </property>
-            <hbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>0</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <spacer>
-                    <property name="name">
-                        <cstring>Qt::Horizontal Spacing2</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>20</width>
-                            <height>20</height>
-                        </size>
-                    </property>
-                </spacer>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonOk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;OK</string>
-                    </property>
-                    <property name="accel">
-                        <string></string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                    <property name="default">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonCancel</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Cancel</string>
-                    </property>
-                    <property name="accel">
-                        <string></string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-            </hbox>
-        </widget>
-        <widget class="QLineEdit" row="0" column="1">
-            <property name="name">
-                <cstring>domainEdit</cstring>
-            </property>
-        </widget>
-        <widget class="QLineEdit" row="1" column="1">
-            <property name="name">
-                <cstring>domainControllerEdit</cstring>
-            </property>
-        </widget>
-        <widget class="QLineEdit" row="2" column="1">
-            <property name="name">
-                <cstring>usernameEdit</cstring>
-            </property>
-        </widget>
-        <widget class="QLabel" row="4" column="0">
-            <property name="name">
-                <cstring>textLabel5_2_2</cstring>
-            </property>
-            <property name="text">
-                <string>&amp;Verify:</string>
-            </property>
-            <property name="buddy" stdset="0">
-                <cstring>verifyEdit</cstring>
-            </property>
-        </widget>
-        <widget class="QLabel" row="3" column="0">
-            <property name="name">
-                <cstring>textLabel5_2</cstring>
-            </property>
-            <property name="text">
-                <string>&amp;Password:</string>
-            </property>
-            <property name="buddy" stdset="0">
-                <cstring>passwordEdit</cstring>
-            </property>
-        </widget>
-        <widget class="QLabel" row="2" column="0">
-            <property name="name">
-                <cstring>textLabel5</cstring>
-            </property>
-            <property name="text">
-                <string>&amp;Username:</string>
-            </property>
-            <property name="buddy" stdset="0">
-                <cstring>usernameEdit</cstring>
-            </property>
-        </widget>
-        <widget class="QLabel" row="1" column="0">
-            <property name="name">
-                <cstring>textLabel4_2</cstring>
-            </property>
-            <property name="text">
-                <string>Domain co&amp;ntroller:</string>
-            </property>
-            <property name="buddy" stdset="0">
-                <cstring>domainControllerEdit</cstring>
-            </property>
-        </widget>
-        <widget class="QLabel" row="0" column="0">
-            <property name="name">
-                <cstring>textLabel4</cstring>
-            </property>
-            <property name="text">
-                <string>&amp;Domain:</string>
-            </property>
-            <property name="buddy" stdset="0">
-                <cstring>domainEdit</cstring>
-            </property>
-        </widget>
-        <widget class="KLineEdit" row="3" column="1">
-            <property name="name">
-                <cstring>passwordEdit</cstring>
-            </property>
-            <property name="passwordMode">
-                <bool>true</bool>
-            </property>
-        </widget>
-        <widget class="KLineEdit" row="4" column="1">
-            <property name="name">
-                <cstring>verifyEdit</cstring>
-            </property>
-            <property name="passwordMode">
-                <bool>true</bool>
-            </property>
-        </widget>
-        <widget class="Line" row="6" column="0" rowspan="1" colspan="2">
-            <property name="name">
-                <cstring>line1</cstring>
-            </property>
-            <property name="frameShape">
-                <enum>HLine</enum>
-            </property>
-            <property name="frameShadow">
-                <enum>Sunken</enum>
-            </property>
-            <property name="orientation">
-                <enum>Qt::Horizontal</enum>
-            </property>
-        </widget>
-        <spacer row="5" column="1">
-            <property name="name">
-                <cstring>spacer65</cstring>
-            </property>
-            <property name="orientation">
-                <enum>Qt::Vertical</enum>
-            </property>
-            <property name="sizeType">
-                <enum>Expanding</enum>
-            </property>
-            <property name="sizeHint">
-                <size>
-                    <width>20</width>
-                    <height>40</height>
-                </size>
-            </property>
-        </spacer>
-    </grid>
-</widget>
-<connections>
-    <connection>
-        <sender>buttonOk</sender>
-        <signal>clicked()</signal>
-        <receiver>JoinDomainDlg</receiver>
-        <slot>accept()</slot>
-    </connection>
-    <connection>
-        <sender>buttonCancel</sender>
-        <signal>clicked()</signal>
-        <receiver>JoinDomainDlg</receiver>
-        <slot>reject()</slot>
-    </connection>
-</connections>
-<tabstops>
-    <tabstop>domainEdit</tabstop>
-    <tabstop>domainControllerEdit</tabstop>
-    <tabstop>usernameEdit</tabstop>
-    <tabstop>passwordEdit</tabstop>
-    <tabstop>verifyEdit</tabstop>
-    <tabstop>buttonOk</tabstop>
-    <tabstop>buttonCancel</tabstop>
-</tabstops>
-<customwidgets>
-    <customwidget>
-        <class>KPasswordEdit</class>
-        <header location="global">kpassworddialog.h</header>
-        <container>0</container>
-    </customwidget>
-</customwidgets>
-<includes>
-    <include location="global" impldecl="in declaration">kpassworddialog.h</include>
-    <include location="global" impldecl="in implementation">kmessagebox.h</include>
-    <include location="global" impldecl="in implementation">klocale.h</include>
-    <include location="local" impldecl="in implementation">joindomaindlg.ui.h</include>
-</includes>
-<slots>
-    <slot>accept()</slot>
-</slots>
-<includehints>
-    <includehint>kpassworddialog.h</includehint>
-</includehints>
-</UI>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/joindomaindlg.ui.h filesharing//advanced/kcm_sambaconf/joindomaindlg.ui.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/joindomaindlg.ui.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/joindomaindlg.ui.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,22 +0,0 @@
-/****************************************************************************
-** ui.h extension file, included from the uic-generated form implementation.
-**
-** If you wish to add, delete or rename functions or slots use
-** Qt Designer which will update this file, preserving your code. Create an
-** init() function in place of a constructor, and a destroy() function in
-** place of a destructor.
-*****************************************************************************/
-
-#ifndef KCM_SAMBACONF_JOINDOMAINDLG_UI_H
-#define KCM_SAMBACONF_JOINDOMAINDLG_UI_H
-
-void JoinDomainDlg::accept() {
-    if (passwordEdit->text() != verifyEdit->text()) {
-        KMessageBox::sorry(this, i18n("Sorry"), i18n("You entered two different passwords. Please try again."));
-       return;
-    }
-    
-    QDialog::accept();
-}
-
-#endif // KCM_SAMBACONF_JOINDOMAINDLG_UI_H
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/kcminterface.cpp filesharing//advanced/kcm_sambaconf/kcminterface.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,143 +0,0 @@
-/******************************************************************************
-*                                                                            *
-*  This file is part of KSambaPlugin.                                        *
-*                                                                            *
-*  KSambaPlugin is free software; you can redistribute it and/or modify      *
-*  it under the terms of the GNU General Public License as published by      *
-*  the Free Software Foundation; either version 2 of the License, or         *
-*  (at your option) any later version.                                       *
-*                                                                            *
-*  KSambaPlugin is distributed in the hope that it will be useful,           *
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
-*  GNU General Public License for more details.                              *
-*                                                                            *
-*  You should have received a copy of the GNU General Public License         *
-*  along with KSambaPlugin; if not, write to the Free Software                     *
-*  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
-*                                                                            *
-******************************************************************************/
-
-#include "kcminterface.h"
-
-KcmInterface::KcmInterface(QWidget* parent) : 
-  QWidget(parent) {
-    setupUi(this);
-    init();
-}
-
-void KcmInterface::init()
-{
-    addShareBtn->setIconSet(SmallIconSet("document-new"));
-    editShareBtn->setIconSet(SmallIconSet("document-properties"));
-    removeShareBtn->setIconSet(SmallIconSet("edit-delete"));
-    editDefaultShareBtn->setIconSet(SmallIconSet("queue"));
-    
-    addPrinterBtn->setIconSet(SmallIconSet("document-new"));
-    editPrinterBtn->setIconSet(SmallIconSet("document-properties"));
-    removePrinterBtn->setIconSet(SmallIconSet("edit-delete"));
-    editDefaultPrinterBtn->setIconSet(SmallIconSet("printer-multiple"));
-
-    advancedWarningPixLbl->setPixmap(SmallIcon("dialog-warning"));
-}
-
-void KcmInterface::changedSlot()
-{
-    emit changed();
-}
-
-
-void KcmInterface::securityLevelCombo_activated( int i )
-{
-   passwordServerEdit->setDisabled(i<2);
-   allowGuestLoginsChk->setDisabled(i==0);
-}
-
-
- void KcmInterface::updateSecurityLevelHelpLbl() {
-    if (shareRadio->isChecked()) {
-      shareRadio_clicked();
-    } else if (userRadio->isChecked()) {
-      userRadio_clicked();
-    } else if (serverRadio->isChecked()) {
-      serverRadio_clicked();
-    } else if (domainRadio->isChecked()) {
-      domainRadio_clicked();
-    } else if (adsRadio->isChecked()) {
-      adsRadioClicked();
-    }
- }
-
-
-void KcmInterface::shareRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>share</i> security level if you have a home network "
-				     "or a small office network.<br /> It allows everyone to read the list "
-		        	     "of all your shared directories and printers before a login is required."));
-}
-
-
-void KcmInterface::userRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>user</i> security level if you have a bigger network "
-				     "and you do not want to allow everyone to read your list of shared "
-				     "directories and printers without a login.<br /><br />"
-				     "If you want to run your Samba server as a <b>Primary Domain controller</b> (PDC) "
-				     "you also have to set this option."));
-}
-
-void KcmInterface::serverRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>server</i> security level if you have a big network "
-			             "and the samba server should validate the username/password "
-			             "by passing it to another SMB server, such as an NT box."));
-}
-
-
-void KcmInterface::domainRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>domain</i> security level if you have a big network "
-				     "and the samba server should validate the username/password "
-				     "by passing it to a Windows NT Primary or Backup Domain Controller."));
-}
-
-
-void KcmInterface::adsRadioClicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>ADS</i> security level if you have a big network "
-				     "and the samba server should act as a domain member in an ADS realm."));
-}
-
-
-void KcmInterface::KUrlLabel1_leftClickedURL()
-{
-    K3Process* p = new K3Process();
-
-    *p << "konqueror";
-    *p << "man:smb.conf";
-    p->start();
-}
-
-
-void KcmInterface::lmAnnounceCombo_activated( int i)
-{
-    lmIntervalSpin->setEnabled(i==0);
-}
-
-
-void KcmInterface::allowGuestLoginsChk_toggled( bool b)
-{
-    int i = 0;
-    if (b)
-	i = 1;
-
-    mapToGuestCombo->setCurrentItem(i);
-}
-
-
-void KcmInterface::mapToGuestCombo_activated( int i)
-{
-    allowGuestLoginsChk->setChecked(i>0);
-}
-
-#include "kcminterface.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/kcminterface.h filesharing//advanced/kcm_sambaconf/kcminterface.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,58 +0,0 @@
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-
-#ifndef KCMINTERFACE_H
-#define KCMINTERFACE_H
-
-#include <kiconloader.h>
-#include <k3process.h>
-
-
-#include "ui_kcminterface.h"
-
-class KcmInterface : public QWidget, public Ui::KcmInterface
-{
-Q_OBJECT
-
-public:
-  KcmInterface(QWidget* parent);
-  void init();
-
-public slots:
-  void changedSlot();
-  void securityLevelCombo_activated( int i );
-  void updateSecurityLevelHelpLbl();
-  void shareRadio_clicked();
-  void userRadio_clicked();
-  void serverRadio_clicked();
-  void domainRadio_clicked();
-  void adsRadioClicked();
-  void KUrlLabel1_leftClickedURL();
-  void lmAnnounceCombo_activated( int i);
-  void allowGuestLoginsChk_toggled( bool b);
-  void mapToGuestCombo_activated( int i);
-
-signals:
- void changed();
-
-};
-
-#endif // KCMINTERFACE_H
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/kcminterface.ui filesharing//advanced/kcm_sambaconf/kcminterface.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,8586 +0,0 @@
-<ui version="4.0" >
- <comment>
- ******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************
-</comment>
- <class>KcmInterface</class>
- <widget class="QWidget" name="KcmInterface" >
-  <property name="geometry" >
-   <rect>
-    <x>0</x>
-    <y>0</y>
-    <width>839</width>
-    <height>807</height>
-   </rect>
-  </property>
-  <property name="sizePolicy" >
-   <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-    <horstretch>0</horstretch>
-    <verstretch>0</verstretch>
-   </sizepolicy>
-  </property>
-  <layout class="QVBoxLayout" >
-   <property name="spacing" >
-    <number>6</number>
-   </property>
-   <property name="leftMargin" >
-    <number>0</number>
-   </property>
-   <property name="topMargin" >
-    <number>0</number>
-   </property>
-   <property name="rightMargin" >
-    <number>0</number>
-   </property>
-   <property name="bottomMargin" >
-    <number>0</number>
-   </property>
-   <item>
-    <widget class="QTabWidget" name="mainTab" >
-     <property name="whatsThis" >
-      <string>&lt;qt>
-Here you can edit the Samba users, stored in the smbpasswd file.
-&lt;p>
-Every Samba user must have a corresponding UNIX user.
-On the right you can see all UNIX users, stored in the passwd file and not configured as Samba users.
-You can see the Samba users on the left-hand side.
-&lt;p>
-To add new Samba users simply press the &lt;em>&amp;lt; add&lt;/em> button.
-The selected UNIX users will then become Samba users and will be
-removed from the UNIX users list (but they will remain UNIX users).
-&lt;p>
-To remove Samba users click the &lt;em>&amp;gt; remove&lt;/em> button.
-The selected Samba users will be removed from the smbpasswd file
-and reappear on the right-hand side, as UNIX users which are not Samba users.
-&lt;/qt></string>
-     </property>
-     <property name="currentIndex" >
-      <number>0</number>
-     </property>
-     <widget class="QWidget" name="tab" >
-      <attribute name="title" >
-       <string>&amp;Base Settings</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <item>
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QLabel" name="TextLabel1_6" >
-           <property name="text" >
-            <string>Samba config file:</string>
-           </property>
-           <property name="wordWrap" >
-            <bool>false</bool>
-           </property>
-           <property name="buddy" >
-            <cstring>configUrlRq</cstring>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="KUrlRequester" name="configUrlRq" />
-         </item>
-         <item>
-          <widget class="QPushButton" name="loadBtn" >
-           <property name="enabled" >
-            <bool>true</bool>
-           </property>
-           <property name="text" >
-            <string>&amp;Load</string>
-           </property>
-          </widget>
-         </item>
-        </layout>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="GroupBox1_2" >
-         <property name="font" >
-          <font/>
-         </property>
-         <property name="title" >
-          <string>Server Identification</string>
-         </property>
-         <layout class="QGridLayout" >
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <property name="horizontalSpacing" >
-           <number>6</number>
-          </property>
-          <property name="verticalSpacing" >
-           <number>6</number>
-          </property>
-          <item row="0" column="0" >
-           <widget class="QLabel" name="TextLabel1_2_2_2" >
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>Wor&amp;kgroup:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>workgroupEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="0" column="1" >
-           <widget class="KLineEdit" name="workgroupEdit" >
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="toolTip" >
-             <string>Enter here the name of your workgroup/domain.</string>
-            </property>
-           </widget>
-          </item>
-          <item row="2" column="1" >
-           <widget class="KLineEdit" name="serverStringEdit" >
-            <property name="font" >
-             <font/>
-            </property>
-           </widget>
-          </item>
-          <item row="1" column="1" >
-           <widget class="KLineEdit" name="netbiosNameEdit" >
-            <property name="font" >
-             <font/>
-            </property>
-           </widget>
-          </item>
-          <item row="2" column="0" >
-           <widget class="QLabel" name="TextLabel4_3" >
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>Server strin&amp;g:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>serverStringEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="1" column="0" >
-           <widget class="QLabel" name="TextLabel3_6" >
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>NetBIOS name:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>netbiosNameEdit</cstring>
-            </property>
-           </widget>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="Q3ButtonGroup" name="securityLevelBtnGrp" >
-         <property name="font" >
-          <font/>
-         </property>
-         <property name="title" >
-          <string>Securit&amp;y Level</string>
-         </property>
-         <layout class="QHBoxLayout" >
-          <property name="spacing" >
-           <number>6</number>
-          </property>
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <item>
-           <layout class="QVBoxLayout" >
-            <property name="spacing" >
-             <number>6</number>
-            </property>
-            <property name="leftMargin" >
-             <number>0</number>
-            </property>
-            <property name="topMargin" >
-             <number>0</number>
-            </property>
-            <property name="rightMargin" >
-             <number>0</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>0</number>
-            </property>
-            <item>
-             <widget class="QRadioButton" name="shareRadio" >
-              <property name="font" >
-               <font/>
-              </property>
-              <property name="text" >
-               <string>Share</string>
-              </property>
-              <property name="shortcut" >
-               <string>Alt+</string>
-              </property>
-              <property name="checked" >
-               <bool>true</bool>
-              </property>
-             </widget>
-            </item>
-            <item>
-             <widget class="QRadioButton" name="userRadio" >
-              <property name="font" >
-               <font/>
-              </property>
-              <property name="text" >
-               <string>User</string>
-              </property>
-              <property name="shortcut" >
-               <string>Alt+</string>
-              </property>
-             </widget>
-            </item>
-            <item>
-             <widget class="QRadioButton" name="serverRadio" >
-              <property name="font" >
-               <font/>
-              </property>
-              <property name="text" >
-               <string>Server</string>
-              </property>
-              <property name="shortcut" >
-               <string>Alt+</string>
-              </property>
-             </widget>
-            </item>
-            <item>
-             <widget class="QRadioButton" name="domainRadio" >
-              <property name="font" >
-               <font/>
-              </property>
-              <property name="text" >
-               <string>Domai&amp;n</string>
-              </property>
-             </widget>
-            </item>
-            <item>
-             <widget class="QRadioButton" name="adsRadio" >
-              <property name="font" >
-               <font/>
-              </property>
-              <property name="text" >
-               <string>ADS</string>
-              </property>
-              <property name="shortcut" >
-               <string>Alt+</string>
-              </property>
-             </widget>
-            </item>
-           </layout>
-          </item>
-          <item>
-           <widget class="QLabel" name="securityLevelHelpLbl" >
-            <property name="sizePolicy" >
-             <sizepolicy vsizetype="Preferred" hsizetype="Expanding" >
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-             </sizepolicy>
-            </property>
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>Use the &lt;i>share&lt;/i> security level if you have a home network or a small office network.&lt;br> It allows everyone to read all share names before a login is required.</string>
-            </property>
-            <property name="textFormat" >
-             <enum>Qt::RichText</enum>
-            </property>
-            <property name="alignment" >
-             <set>Qt::AlignTop</set>
-            </property>
-            <property name="wordWrap" >
-             <bool>true</bool>
-            </property>
-            <property name="indent" >
-             <number>5</number>
-            </property>
-           </widget>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="GroupBox12" >
-         <property name="font" >
-          <font/>
-         </property>
-         <property name="title" >
-          <string>Further Options</string>
-         </property>
-         <layout class="QGridLayout" >
-          <item row="0" column="0" >
-           <widget class="QLabel" name="passwordServerLabel" >
-            <property name="enabled" >
-             <bool>false</bool>
-            </property>
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>Password server address/name:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>passwordServerEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="0" column="1" >
-           <widget class="QLineEdit" name="passwordServerEdit" >
-            <property name="enabled" >
-             <bool>false</bool>
-            </property>
-           </widget>
-          </item>
-          <item row="1" column="0" >
-           <widget class="QLabel" name="realmLabel" >
-            <property name="enabled" >
-             <bool>false</bool>
-            </property>
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>Real&amp;m:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>realmEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="1" column="1" >
-           <widget class="QLineEdit" name="realmEdit" >
-            <property name="enabled" >
-             <bool>false</bool>
-            </property>
-            <property name="font" >
-             <font/>
-            </property>
-           </widget>
-          </item>
-          <item row="2" column="0" >
-           <widget class="QCheckBox" name="allowGuestLoginsChk" >
-            <property name="enabled" >
-             <bool>false</bool>
-            </property>
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>Allo&amp;w guest logins</string>
-            </property>
-           </widget>
-          </item>
-          <item row="2" column="1" >
-           <layout class="QHBoxLayout" >
-            <property name="spacing" >
-             <number>6</number>
-            </property>
-            <property name="leftMargin" >
-             <number>0</number>
-            </property>
-            <property name="topMargin" >
-             <number>0</number>
-            </property>
-            <property name="rightMargin" >
-             <number>0</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>0</number>
-            </property>
-            <item>
-             <widget class="QLabel" name="TextLabel6_5" >
-              <property name="enabled" >
-               <bool>false</bool>
-              </property>
-              <property name="sizePolicy" >
-               <sizepolicy vsizetype="Preferred" hsizetype="Fixed" >
-                <horstretch>0</horstretch>
-                <verstretch>0</verstretch>
-               </sizepolicy>
-              </property>
-              <property name="font" >
-               <font/>
-              </property>
-              <property name="text" >
-               <string>Guest acc&amp;ount:</string>
-              </property>
-              <property name="wordWrap" >
-               <bool>false</bool>
-              </property>
-              <property name="buddy" >
-               <cstring>guestAccountCombo</cstring>
-              </property>
-             </widget>
-            </item>
-            <item>
-             <widget class="QComboBox" name="guestAccountCombo" >
-              <property name="enabled" >
-               <bool>false</bool>
-              </property>
-              <property name="font" >
-               <font/>
-              </property>
-             </widget>
-            </item>
-            <item>
-             <spacer>
-              <property name="orientation" >
-               <enum>Qt::Horizontal</enum>
-              </property>
-              <property name="sizeHint" >
-               <size>
-                <width>40</width>
-                <height>20</height>
-               </size>
-              </property>
-             </spacer>
-            </item>
-           </layout>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="GroupBox10" >
-         <property name="font" >
-          <font/>
-         </property>
-         <property name="title" >
-          <string>Help</string>
-         </property>
-         <layout class="QHBoxLayout" >
-          <item>
-           <widget class="QLabel" name="TextLabel2_3" >
-            <property name="sizePolicy" >
-             <sizepolicy vsizetype="Preferred" hsizetype="MinimumExpanding" >
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-             </sizepolicy>
-            </property>
-            <property name="font" >
-             <font/>
-            </property>
-            <property name="text" >
-             <string>For detailed help about every option please look at:</string>
-            </property>
-            <property name="alignment" >
-             <set>Qt::AlignVCenter</set>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <widget class="KUrlLabel" name="KUrlLabel1" >
-            <property name="sizePolicy" >
-             <sizepolicy vsizetype="Preferred" hsizetype="Preferred" >
-              <horstretch>0</horstretch>
-              <verstretch>0</verstretch>
-             </sizepolicy>
-            </property>
-            <property name="text" >
-             <string>man:smb.conf</string>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <spacer>
-            <property name="orientation" >
-             <enum>Qt::Horizontal</enum>
-            </property>
-            <property name="sizeHint" >
-             <size>
-              <width>40</width>
-              <height>20</height>
-             </size>
-            </property>
-           </spacer>
-          </item>
-         </layout>
-        </widget>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="shareTab" >
-      <attribute name="title" >
-       <string>&amp;Shares</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <property name="spacing" >
-        <number>6</number>
-       </property>
-       <property name="leftMargin" >
-        <number>11</number>
-       </property>
-       <property name="topMargin" >
-        <number>11</number>
-       </property>
-       <property name="rightMargin" >
-        <number>11</number>
-       </property>
-       <property name="bottomMargin" >
-        <number>11</number>
-       </property>
-       <item>
-        <widget class="K3ListView" name="shareListView" >
-         <property name="allColumnsShowFocus" >
-          <bool>true</bool>
-         </property>
-         <property name="showSortIndicator" >
-          <bool>true</bool>
-         </property>
-         <property name="rootIsDecorated" >
-          <bool>false</bool>
-         </property>
-         <property name="resizeMode" >
-          <enum>Q3ListView::NoColumn</enum>
-         </property>
-         <column>
-          <property name="text" >
-           <string>Name</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Path</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Comment</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Properties</string>
-          </property>
-         </column>
-        </widget>
-       </item>
-       <item>
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QPushButton" name="editDefaultShareBtn" >
-           <property name="text" >
-            <string>Edit Defau&amp;lts...</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <spacer>
-           <property name="orientation" >
-            <enum>Qt::Horizontal</enum>
-           </property>
-           <property name="sizeHint" >
-            <size>
-             <width>40</width>
-             <height>20</height>
-            </size>
-           </property>
-          </spacer>
-         </item>
-         <item>
-          <widget class="QPushButton" name="addShareBtn" >
-           <property name="text" >
-            <string>Add &amp;New Share...</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="QPushButton" name="editShareBtn" >
-           <property name="text" >
-            <string>Edit Share...</string>
-           </property>
-           <property name="shortcut" >
-            <string>Alt+</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="QPushButton" name="removeShareBtn" >
-           <property name="text" >
-            <string>Re&amp;move Share</string>
-           </property>
-          </widget>
-         </item>
-        </layout>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="tab" >
-      <attribute name="title" >
-       <string>Prin&amp;ters</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <property name="spacing" >
-        <number>6</number>
-       </property>
-       <property name="leftMargin" >
-        <number>11</number>
-       </property>
-       <property name="topMargin" >
-        <number>11</number>
-       </property>
-       <property name="rightMargin" >
-        <number>11</number>
-       </property>
-       <property name="bottomMargin" >
-        <number>11</number>
-       </property>
-       <item>
-        <widget class="K3ListView" name="printerListView" >
-         <property name="allColumnsShowFocus" >
-          <bool>true</bool>
-         </property>
-         <property name="showSortIndicator" >
-          <bool>true</bool>
-         </property>
-         <property name="rootIsDecorated" >
-          <bool>false</bool>
-         </property>
-         <property name="resizeMode" >
-          <enum>Q3ListView::NoColumn</enum>
-         </property>
-         <column>
-          <property name="text" >
-           <string>Name</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Printer</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Comment</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Properties</string>
-          </property>
-         </column>
-        </widget>
-       </item>
-       <item>
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QPushButton" name="editDefaultPrinterBtn" >
-           <property name="text" >
-            <string>Edit Defau&amp;lts</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <spacer>
-           <property name="orientation" >
-            <enum>Qt::Horizontal</enum>
-           </property>
-           <property name="sizeHint" >
-            <size>
-             <width>40</width>
-             <height>20</height>
-            </size>
-           </property>
-          </spacer>
-         </item>
-         <item>
-          <widget class="QPushButton" name="addPrinterBtn" >
-           <property name="text" >
-            <string>Add Ne&amp;w Printer</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="QPushButton" name="editPrinterBtn" >
-           <property name="text" >
-            <string>Edit Pri&amp;nter</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="QPushButton" name="removePrinterBtn" >
-           <property name="text" >
-            <string>Re&amp;move Printer</string>
-           </property>
-          </widget>
-         </item>
-        </layout>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="tab" >
-      <attribute name="title" >
-       <string>&amp;Users</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <property name="spacing" >
-        <number>6</number>
-       </property>
-       <property name="leftMargin" >
-        <number>11</number>
-       </property>
-       <property name="topMargin" >
-        <number>11</number>
-       </property>
-       <property name="rightMargin" >
-        <number>11</number>
-       </property>
-       <property name="bottomMargin" >
-        <number>11</number>
-       </property>
-       <item>
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QGroupBox" name="groupBox51_2" >
-           <property name="title" >
-            <string>Sa&amp;mba Users</string>
-           </property>
-           <layout class="QVBoxLayout" >
-            <property name="spacing" >
-             <number>6</number>
-            </property>
-            <property name="leftMargin" >
-             <number>11</number>
-            </property>
-            <property name="topMargin" >
-             <number>11</number>
-            </property>
-            <property name="rightMargin" >
-             <number>11</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>11</number>
-            </property>
-            <item>
-             <widget class="K3ListView" name="sambaUsersListView" >
-              <property name="sizePolicy" >
-               <sizepolicy vsizetype="Expanding" hsizetype="Expanding" >
-                <horstretch>10</horstretch>
-                <verstretch>0</verstretch>
-               </sizepolicy>
-              </property>
-              <column>
-               <property name="text" >
-                <string>Name</string>
-               </property>
-              </column>
-              <column>
-               <property name="text" >
-                <string>UID</string>
-               </property>
-              </column>
-              <column>
-               <property name="text" >
-                <string>Disabled</string>
-               </property>
-              </column>
-              <column>
-               <property name="text" >
-                <string>No Password</string>
-               </property>
-              </column>
-             </widget>
-            </item>
-           </layout>
-          </widget>
-         </item>
-         <item>
-          <layout class="QVBoxLayout" >
-           <property name="spacing" >
-            <number>6</number>
-           </property>
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>30</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item>
-            <widget class="QPushButton" name="addSambaUserBtn" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Fixed" hsizetype="Preferred" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="text" >
-              <string>Add</string>
-             </property>
-             <property name="shortcut" >
-              <string/>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>30</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item>
-            <widget class="QPushButton" name="removeSambaUserBtn" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Fixed" hsizetype="Preferred" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="text" >
-              <string>Rem&amp;ove</string>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>30</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </item>
-         <item>
-          <widget class="QGroupBox" name="groupBox52_2" >
-           <property name="title" >
-            <string>UNI&amp;X Users</string>
-           </property>
-           <layout class="QVBoxLayout" >
-            <property name="spacing" >
-             <number>6</number>
-            </property>
-            <property name="leftMargin" >
-             <number>11</number>
-            </property>
-            <property name="topMargin" >
-             <number>11</number>
-            </property>
-            <property name="rightMargin" >
-             <number>11</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>11</number>
-            </property>
-            <item>
-             <widget class="K3ListView" name="unixUsersListView" >
-              <property name="sizePolicy" >
-               <sizepolicy vsizetype="Expanding" hsizetype="Preferred" >
-                <horstretch>5</horstretch>
-                <verstretch>0</verstretch>
-               </sizepolicy>
-              </property>
-              <column>
-               <property name="text" >
-                <string>Name</string>
-               </property>
-              </column>
-              <column>
-               <property name="text" >
-                <string>UID</string>
-               </property>
-              </column>
-             </widget>
-            </item>
-           </layout>
-          </widget>
-         </item>
-        </layout>
-       </item>
-       <item>
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QPushButton" name="sambaUserPasswordBtn" >
-           <property name="text" >
-            <string>Chan&amp;ge Password...</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="QPushButton" name="joinADomainBtn" >
-           <property name="enabled" >
-            <bool>false</bool>
-           </property>
-           <property name="text" >
-            <string>&amp;Join Domain</string>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <spacer>
-           <property name="orientation" >
-            <enum>Qt::Horizontal</enum>
-           </property>
-           <property name="sizeHint" >
-            <size>
-             <width>40</width>
-             <height>20</height>
-            </size>
-           </property>
-          </spacer>
-         </item>
-        </layout>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="advanced" >
-      <attribute name="title" >
-       <string>Advan&amp;ced</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <property name="spacing" >
-        <number>6</number>
-       </property>
-       <property name="leftMargin" >
-        <number>11</number>
-       </property>
-       <property name="topMargin" >
-        <number>11</number>
-       </property>
-       <property name="rightMargin" >
-        <number>11</number>
-       </property>
-       <property name="bottomMargin" >
-        <number>11</number>
-       </property>
-       <item>
-        <widget class="QFrame" name="advancedFrame" >
-         <property name="frameShape" >
-          <enum>QFrame::NoFrame</enum>
-         </property>
-         <property name="frameShadow" >
-          <enum>QFrame::Plain</enum>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <widget class="QFrame" name="Frame26" >
-         <property name="frameShape" >
-          <enum>QFrame::NoFrame</enum>
-         </property>
-         <property name="frameShadow" >
-          <enum>QFrame::Plain</enum>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QLabel" name="advancedWarningPixLbl" >
-           <property name="sizePolicy" >
-            <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-             <horstretch>0</horstretch>
-             <verstretch>0</verstretch>
-            </sizepolicy>
-           </property>
-           <property name="scaledContents" >
-            <bool>true</bool>
-           </property>
-           <property name="wordWrap" >
-            <bool>false</bool>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="QLabel" name="TextLabel1_4" >
-           <property name="font" >
-            <font>
-             <weight>75</weight>
-             <bold>true</bold>
-            </font>
-           </property>
-           <property name="text" >
-            <string>Here you can change advanced options of the SAMBA server.
-Only change something if you know what you are doing.</string>
-           </property>
-           <property name="wordWrap" >
-            <bool>false</bool>
-           </property>
-          </widget>
-         </item>
-        </layout>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="advancedDumpTab" >
-      <attribute name="title" >
-       <string>Advanced Dump</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <property name="spacing" >
-        <number>6</number>
-       </property>
-       <property name="leftMargin" >
-        <number>11</number>
-       </property>
-       <property name="topMargin" >
-        <number>11</number>
-       </property>
-       <property name="rightMargin" >
-        <number>11</number>
-       </property>
-       <property name="bottomMargin" >
-        <number>11</number>
-       </property>
-       <item>
-        <widget class="QTabWidget" name="advancedTab" >
-         <property name="tabShape" >
-          <enum>QTabWidget::Rounded</enum>
-         </property>
-         <property name="currentIndex" >
-          <number>0</number>
-         </property>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Security</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <property name="horizontalSpacing" >
-            <number>6</number>
-           </property>
-           <property name="verticalSpacing" >
-            <number>6</number>
-           </property>
-           <item row="0" column="0" >
-            <widget class="QTabWidget" name="tabWidget4" >
-             <property name="currentIndex" >
-              <number>0</number>
-             </property>
-             <widget class="QWidget" name="tab" >
-              <attribute name="title" >
-               <string>&amp;General</string>
-              </attribute>
-              <layout class="QGridLayout" >
-               <property name="leftMargin" >
-                <number>11</number>
-               </property>
-               <property name="topMargin" >
-                <number>11</number>
-               </property>
-               <property name="rightMargin" >
-                <number>11</number>
-               </property>
-               <property name="bottomMargin" >
-                <number>11</number>
-               </property>
-               <property name="horizontalSpacing" >
-                <number>6</number>
-               </property>
-               <property name="verticalSpacing" >
-                <number>6</number>
-               </property>
-               <item row="2" column="0" >
-                <spacer>
-                 <property name="orientation" >
-                  <enum>Qt::Vertical</enum>
-                 </property>
-                 <property name="sizeType" >
-                  <enum>QSizePolicy::Expanding</enum>
-                 </property>
-                 <property name="sizeHint" >
-                  <size>
-                   <width>20</width>
-                   <height>40</height>
-                  </size>
-                 </property>
-                </spacer>
-               </item>
-               <item row="1" column="0" >
-                <widget class="QGroupBox" name="groupBox66" >
-                 <property name="title" >
-                  <string>PAM</string>
-                 </property>
-                 <layout class="QVBoxLayout" >
-                  <property name="spacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <item>
-                   <widget class="QCheckBox" name="obeyPamRestrictionsChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Obey PAM restrictions</string>
-                    </property>
-                    <property name="shortcut" >
-                     <string>Alt+</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item>
-                   <widget class="QCheckBox" name="pamPasswordChangeChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>PAM password change</string>
-                    </property>
-                    <property name="shortcut" >
-                     <string>Alt+</string>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="1" column="1" >
-                <widget class="QGroupBox" name="groupBox67" >
-                 <property name="title" >
-                  <string>Other Switches</string>
-                 </property>
-                 <layout class="QVBoxLayout" >
-                  <property name="spacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <item>
-                   <widget class="QCheckBox" name="allowTrustedDomainsChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>A&amp;llow trusted domains</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item>
-                   <widget class="QCheckBox" name="paranoidServerSecurityChk" >
-                    <property name="text" >
-                     <string>Paranoid server security</string>
-                    </property>
-                    <property name="shortcut" >
-                     <string>Alt+</string>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="0" column="0" colspan="2" >
-                <widget class="QGroupBox" name="groupBox68" >
-                 <property name="title" >
-                  <string>General</string>
-                 </property>
-                 <layout class="QGridLayout" >
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="horizontalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="verticalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <item row="3" column="0" >
-                   <widget class="QLabel" name="TextLabel8_2_2_2_2_2_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Auth methods:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>authMethodsEdit</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="0" >
-                   <widget class="QLabel" name="TextLabel8_2_2_2_2_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Root director&amp;y:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>rootDirectoryEdit</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="0" >
-                   <widget class="QLabel" name="TextLabel1_2_5_2" >
-                    <property name="text" >
-                     <string>I&amp;nterfaces:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>interfacesEdit</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="0" column="0" >
-                   <widget class="QLabel" name="TextLabel2_5_2" >
-                    <property name="sizePolicy" >
-                     <sizepolicy vsizetype="Preferred" hsizetype="Fixed" >
-                      <horstretch>0</horstretch>
-                      <verstretch>0</verstretch>
-                     </sizepolicy>
-                    </property>
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Map to guest:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>mapToGuestCombo</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="3" >
-                   <widget class="QCheckBox" name="bindInterfacesOnlyChk" >
-                    <property name="text" >
-                     <string>Bind interfaces only</string>
-                    </property>
-                    <property name="shortcut" >
-                     <string>Alt+</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="0" column="1" >
-                   <widget class="QComboBox" name="mapToGuestCombo" >
-                    <item>
-                     <property name="text" >
-                      <string>Never</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Bad User</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Bad Password</string>
-                     </property>
-                    </item>
-                   </widget>
-                  </item>
-                  <item row="4" column="0" >
-                   <widget class="QLabel" name="TextLabel8_2_3_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Hosts e&amp;quiv:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>hostsEquivUrlRq</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="1" colspan="3" >
-                   <widget class="QLineEdit" name="rootDirectoryEdit" >
-                    <property name="font" >
-                     <font>
-                      <weight>75</weight>
-                      <bold>true</bold>
-                     </font>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="1" colspan="3" >
-                   <widget class="QLineEdit" name="authMethodsEdit" >
-                    <property name="font" >
-                     <font>
-                      <weight>75</weight>
-                      <bold>true</bold>
-                     </font>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="1" colspan="2" >
-                   <widget class="QLineEdit" name="interfacesEdit" />
-                  </item>
-                  <item row="6" column="0" >
-                   <widget class="QLabel" name="TextLabel6_7_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Algorithmic rid base:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>algorithmicRidBaseSpin</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="6" column="1" >
-                   <widget class="KIntSpinBox" name="algorithmicRidBaseSpin" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="maximum" >
-                     <number>2147483647</number>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="4" column="1" colspan="3" >
-                   <widget class="KUrlRequester" name="hostsEquivUrlRq" >
-                    <property name="font" >
-                     <font>
-                      <weight>75</weight>
-                      <bold>true</bold>
-                     </font>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="5" column="0" >
-                   <widget class="QLabel" name="TextLabel8_2_2_3_2_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Private dir:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>privateDirUrlRq</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="5" column="1" colspan="3" >
-                   <widget class="KUrlRequester" name="privateDirUrlRq" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-              </layout>
-             </widget>
-             <widget class="QWidget" name="TabPage" >
-              <attribute name="title" >
-               <string>Pass&amp;word</string>
-              </attribute>
-              <layout class="QGridLayout" >
-               <item rowspan="2" row="0" column="0" >
-                <widget class="QGroupBox" name="groupBox75" >
-                 <property name="title" >
-                  <string>Samba Passwords</string>
-                 </property>
-                 <layout class="QGridLayout" >
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="horizontalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="verticalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <item row="0" column="0" colspan="4" >
-                   <widget class="QCheckBox" name="encryptPasswordsChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>E&amp;ncrypt passwords</string>
-                    </property>
-                    <property name="shortcut" >
-                     <string/>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="0" >
-                   <widget class="QLabel" name="TextLabel8_2_2_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Smb passwd file:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>smbPasswdFileUrlRq</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="1" colspan="3" >
-                   <widget class="KUrlRequester" name="smbPasswdFileUrlRq" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="0" >
-                   <widget class="QLabel" name="TextLabel3_5_3_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Passdb bac&amp;kend:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>passdbBackendEdit</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="1" colspan="3" >
-                   <widget class="KLineEdit" name="passwdChatEdit" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="1" colspan="3" >
-                   <widget class="KLineEdit" name="passdbBackendEdit" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="0" >
-                   <widget class="QLabel" name="TextLabel3_5_3" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Passwd chat:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>passwdChatEdit</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="5" column="0" colspan="4" >
-                   <widget class="QCheckBox" name="passwdChatDebugChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Passwd chat debug</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="4" column="3" >
-                   <widget class="QLabel" name="TextLabel5_2_3_4_3" >
-                    <property name="text" >
-                     <string comment="seconds" >Sec</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="4" column="0" colspan="2" >
-                   <widget class="QLabel" name="TextLabel3_5_3_3" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Passwd chat timeout:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>passwdChatEdit</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="4" column="2" >
-                   <widget class="KIntSpinBox" name="passwdChatTimeoutSpin" >
-                    <property name="maximum" >
-                     <number>2147483647</number>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="0" column="1" >
-                <widget class="QGroupBox" name="groupBox74" >
-                 <property name="title" >
-                  <string>Password</string>
-                 </property>
-                 <layout class="QGridLayout" >
-                  <item row="0" column="0" >
-                   <widget class="QCheckBox" name="nullPasswordsChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Nu&amp;ll passwords</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="0" >
-                   <widget class="QLabel" name="TextLabel6_7" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Password level:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>passwordLevelSpin</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="1" >
-                   <widget class="KIntSpinBox" name="passwordLevelSpin" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="maximum" >
-                     <number>2147483647</number>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="0" >
-                   <widget class="QLabel" name="TextLabel6_3_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Min password length:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>minPasswdLengthSpin</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="1" >
-                   <widget class="KIntSpinBox" name="minPasswdLengthSpin" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="maximum" >
-                     <number>2147483647</number>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="0" >
-                   <widget class="QLabel" name="TextLabel1" >
-                    <property name="text" >
-                     <string>Machine password timeout:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>machinePasswordTimeoutSpin</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="1" >
-                   <widget class="KIntSpinBox" name="machinePasswordTimeoutSpin" >
-                    <property name="maximum" >
-                     <number>2147483647</number>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="2" >
-                   <widget class="QLabel" name="TextLabel5_2_3_4_2" >
-                    <property name="text" >
-                     <string comment="seconds" >Sec</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="3" >
-                   <spacer>
-                    <property name="orientation" >
-                     <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeHint" >
-                     <size>
-                      <width>40</width>
-                      <height>20</height>
-                     </size>
-                    </property>
-                   </spacer>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="1" column="1" >
-                <widget class="QGroupBox" name="groupBox73" >
-                 <property name="title" >
-                  <string>Migration</string>
-                 </property>
-                 <layout class="QVBoxLayout" >
-                  <property name="spacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <item>
-                   <widget class="QCheckBox" name="updateEncryptedChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Update encr&amp;ypted</string>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="2" column="0" colspan="2" >
-                <widget class="QGroupBox" name="groupBox76" >
-                 <property name="title" >
-                  <string>UNIX Passwords</string>
-                 </property>
-                 <layout class="QGridLayout" >
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="horizontalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="verticalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <item row="0" column="0" >
-                   <widget class="QLabel" name="TextLabel8_2_2_3_2" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Passwd program:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>passwdProgramUrlRq</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="0" column="1" >
-                   <widget class="KUrlRequester" name="passwdProgramUrlRq" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="0" colspan="2" >
-                   <widget class="QCheckBox" name="unixPasswordSyncChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>UNI&amp;X password sync</string>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="3" column="0" >
-                <spacer>
-                 <property name="orientation" >
-                  <enum>Qt::Vertical</enum>
-                 </property>
-                 <property name="sizeType" >
-                  <enum>QSizePolicy::Expanding</enum>
-                 </property>
-                 <property name="sizeHint" >
-                  <size>
-                   <width>20</width>
-                   <height>40</height>
-                  </size>
-                 </property>
-                </spacer>
-               </item>
-              </layout>
-             </widget>
-             <widget class="QWidget" name="TabPage" >
-              <attribute name="title" >
-               <string>Userna&amp;me</string>
-              </attribute>
-              <layout class="QGridLayout" >
-               <property name="leftMargin" >
-                <number>11</number>
-               </property>
-               <property name="topMargin" >
-                <number>11</number>
-               </property>
-               <property name="rightMargin" >
-                <number>11</number>
-               </property>
-               <property name="bottomMargin" >
-                <number>11</number>
-               </property>
-               <property name="horizontalSpacing" >
-                <number>6</number>
-               </property>
-               <property name="verticalSpacing" >
-                <number>6</number>
-               </property>
-               <item row="1" column="0" >
-                <widget class="QLabel" name="TextLabel3_5_2_2" >
-                 <property name="font" >
-                  <font/>
-                 </property>
-                 <property name="text" >
-                  <string>User&amp;name map:</string>
-                 </property>
-                 <property name="wordWrap" >
-                  <bool>false</bool>
-                 </property>
-                 <property name="buddy" >
-                  <cstring>usernameMapUrlRq</cstring>
-                 </property>
-                </widget>
-               </item>
-               <item row="1" column="1" colspan="2" >
-                <widget class="KUrlRequester" name="usernameMapUrlRq" >
-                 <property name="font" >
-                  <font/>
-                 </property>
-                </widget>
-               </item>
-               <item row="0" column="0" >
-                <widget class="QLabel" name="TextLabel6_4_2" >
-                 <property name="font" >
-                  <font/>
-                 </property>
-                 <property name="text" >
-                  <string>Username &amp;level:</string>
-                 </property>
-                 <property name="wordWrap" >
-                  <bool>false</bool>
-                 </property>
-                 <property name="buddy" >
-                  <cstring>usernameLevelSpin</cstring>
-                 </property>
-                </widget>
-               </item>
-               <item row="0" column="1" >
-                <widget class="KIntSpinBox" name="usernameLevelSpin" >
-                 <property name="font" >
-                  <font/>
-                 </property>
-                 <property name="maximum" >
-                  <number>255</number>
-                 </property>
-                </widget>
-               </item>
-               <item row="2" column="0" colspan="2" >
-                <widget class="QCheckBox" name="hideLocalUsersChk" >
-                 <property name="font" >
-                  <font/>
-                 </property>
-                 <property name="text" >
-                  <string>Hide local users</string>
-                 </property>
-                </widget>
-               </item>
-               <item row="3" column="0" colspan="2" >
-                <widget class="QCheckBox" name="restrictAnonymousChk" >
-                 <property name="font" >
-                  <font/>
-                 </property>
-                 <property name="text" >
-                  <string>Restrict anon&amp;ymous</string>
-                 </property>
-                </widget>
-               </item>
-               <item row="4" column="0" colspan="3" >
-                <widget class="QCheckBox" name="useRhostsChk" >
-                 <property name="font" >
-                  <font/>
-                 </property>
-                 <property name="text" >
-                  <string>Use rhosts</string>
-                 </property>
-                </widget>
-               </item>
-               <item row="5" column="0" >
-                <spacer>
-                 <property name="orientation" >
-                  <enum>Qt::Vertical</enum>
-                 </property>
-                 <property name="sizeType" >
-                  <enum>QSizePolicy::Expanding</enum>
-                 </property>
-                 <property name="sizeHint" >
-                  <size>
-                   <width>20</width>
-                   <height>170</height>
-                  </size>
-                 </property>
-                </spacer>
-               </item>
-               <item row="0" column="2" >
-                <spacer>
-                 <property name="orientation" >
-                  <enum>Qt::Horizontal</enum>
-                 </property>
-                 <property name="sizeHint" >
-                  <size>
-                   <width>40</width>
-                   <height>20</height>
-                  </size>
-                 </property>
-                </spacer>
-               </item>
-              </layout>
-             </widget>
-             <widget class="QWidget" name="tab" >
-              <attribute name="title" >
-               <string>Authenticati&amp;on</string>
-              </attribute>
-              <layout class="QGridLayout" >
-               <property name="leftMargin" >
-                <number>11</number>
-               </property>
-               <property name="topMargin" >
-                <number>11</number>
-               </property>
-               <property name="rightMargin" >
-                <number>11</number>
-               </property>
-               <property name="bottomMargin" >
-                <number>11</number>
-               </property>
-               <property name="horizontalSpacing" >
-                <number>6</number>
-               </property>
-               <property name="verticalSpacing" >
-                <number>6</number>
-               </property>
-               <item row="0" column="1" >
-                <widget class="QGroupBox" name="groupBox13" >
-                 <property name="title" >
-                  <string>Client</string>
-                 </property>
-                 <layout class="QGridLayout" >
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="horizontalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="verticalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <item row="5" column="0" >
-                   <widget class="QLabel" name="TextLabel3_5_2_3" >
-                    <property name="text" >
-                     <string>C&amp;lient signing:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>clientSigningCombo</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="1" column="0" colspan="3" >
-                   <widget class="QCheckBox" name="clientPlaintextAuthChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Client plainte&amp;xt authentication</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="0" column="0" colspan="3" >
-                   <widget class="QCheckBox" name="clientLanmanAuthChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Client lanman authentication</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="5" column="1" >
-                   <widget class="QComboBox" name="clientSigningCombo" >
-                    <item>
-                     <property name="text" >
-                      <string>Auto</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Mandatory</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Disabled</string>
-                     </property>
-                    </item>
-                   </widget>
-                  </item>
-                  <item row="4" column="1" >
-                   <widget class="QComboBox" name="clientSchannelCombo" >
-                    <item>
-                     <property name="text" >
-                      <string>Yes</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>No</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Auto</string>
-                     </property>
-                    </item>
-                   </widget>
-                  </item>
-                  <item row="4" column="0" >
-                   <widget class="QLabel" name="TextLabel3_5_2" >
-                    <property name="text" >
-                     <string>Client channel:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>clientSchannelCombo</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="0" colspan="3" >
-                   <widget class="QCheckBox" name="clientUseSpnegoChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Client use spnego</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="0" colspan="3" >
-                   <widget class="QCheckBox" name="clientNTLMv2AuthChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Client NTLMv&amp;2 authentication</string>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="0" column="0" >
-                <widget class="QGroupBox" name="groupBox13_2" >
-                 <property name="title" >
-                  <string>Server</string>
-                 </property>
-                 <layout class="QGridLayout" >
-                  <property name="leftMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>11</number>
-                  </property>
-                  <property name="horizontalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="verticalSpacing" >
-                   <number>6</number>
-                  </property>
-                  <item row="5" column="0" >
-                   <widget class="QLabel" name="TextLabel3_5_2_3_3" >
-                    <property name="text" >
-                     <string>Server signing:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>serverSigningCombo</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="0" column="0" colspan="3" >
-                   <widget class="QCheckBox" name="lanmanAuthChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Lanman authentication</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="5" column="1" >
-                   <widget class="QComboBox" name="serverSigningCombo" >
-                    <item>
-                     <property name="text" >
-                      <string>Auto</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Mandatory</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Disabled</string>
-                     </property>
-                    </item>
-                   </widget>
-                  </item>
-                  <item row="4" column="1" >
-                   <widget class="QComboBox" name="serverSchannelCombo" >
-                    <item>
-                     <property name="text" >
-                      <string>Yes</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>No</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>Auto</string>
-                     </property>
-                    </item>
-                   </widget>
-                  </item>
-                  <item row="4" column="0" >
-                   <widget class="QLabel" name="TextLabel3_5_2_5" >
-                    <property name="text" >
-                     <string>Server channel:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>serverSchannelCombo</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="3" column="0" colspan="3" >
-                   <widget class="QCheckBox" name="useSpnegoChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>Use sp&amp;nego</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item row="2" column="0" colspan="3" >
-                   <widget class="QCheckBox" name="ntlmAuthChk" >
-                    <property name="font" >
-                     <font/>
-                    </property>
-                    <property name="text" >
-                     <string>NTLM authentication</string>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </widget>
-               </item>
-               <item row="1" column="0" >
-                <spacer>
-                 <property name="orientation" >
-                  <enum>Qt::Vertical</enum>
-                 </property>
-                 <property name="sizeType" >
-                  <enum>QSizePolicy::Expanding</enum>
-                 </property>
-                 <property name="sizeHint" >
-                  <size>
-                   <width>20</width>
-                   <height>20</height>
-                  </size>
-                 </property>
-                </spacer>
-               </item>
-              </layout>
-             </widget>
-            </widget>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Logging</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <property name="spacing" >
-            <number>6</number>
-           </property>
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <item>
-            <widget class="QFrame" name="loggingFrame" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Preferred" hsizetype="Expanding" >
-               <horstretch>100</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="frameShape" >
-              <enum>QFrame::NoFrame</enum>
-             </property>
-             <property name="frameShadow" >
-              <enum>QFrame::Plain</enum>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>0</number>
-              </property>
-              <property name="topMargin" >
-               <number>0</number>
-              </property>
-              <property name="rightMargin" >
-               <number>0</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>0</number>
-              </property>
-              <item>
-               <widget class="QGroupBox" name="groupBox36_2" >
-                <property name="title" >
-                 <string>General</string>
-                </property>
-                <layout class="QGridLayout" >
-                 <property name="leftMargin" >
-                  <number>11</number>
-                 </property>
-                 <property name="topMargin" >
-                  <number>11</number>
-                 </property>
-                 <property name="rightMargin" >
-                  <number>11</number>
-                 </property>
-                 <property name="bottomMargin" >
-                  <number>11</number>
-                 </property>
-                 <property name="horizontalSpacing" >
-                  <number>6</number>
-                 </property>
-                 <property name="verticalSpacing" >
-                  <number>6</number>
-                 </property>
-                 <item row="0" column="0" >
-                  <widget class="QLabel" name="TextLabel4_3_2_2_2_2" >
-                   <property name="text" >
-                    <string>L&amp;og file:</string>
-                   </property>
-                   <property name="wordWrap" >
-                    <bool>false</bool>
-                   </property>
-                   <property name="buddy" >
-                    <cstring>logFileUrlRq</cstring>
-                   </property>
-                  </widget>
-                 </item>
-                 <item row="0" column="1" colspan="3" >
-                  <widget class="KUrlRequester" name="logFileUrlRq" />
-                 </item>
-                 <item row="2" column="2" >
-                  <widget class="QLabel" name="TextLabel3_3_2_2_2_2" >
-                   <property name="text" >
-                    <string>kB</string>
-                   </property>
-                   <property name="wordWrap" >
-                    <bool>false</bool>
-                   </property>
-                  </widget>
-                 </item>
-                 <item row="2" column="0" >
-                  <widget class="QLabel" name="TextLabel2_2_2_2_2_2" >
-                   <property name="text" >
-                    <string>Ma&amp;x log size:</string>
-                   </property>
-                   <property name="wordWrap" >
-                    <bool>false</bool>
-                   </property>
-                   <property name="buddy" >
-                    <cstring>maxLogSizeSpin</cstring>
-                   </property>
-                  </widget>
-                 </item>
-                 <item row="3" column="0" >
-                  <widget class="QLabel" name="TextLabel5_3_2_2_2_2" >
-                   <property name="text" >
-                    <string>S&amp;yslog:</string>
-                   </property>
-                   <property name="wordWrap" >
-                    <bool>false</bool>
-                   </property>
-                   <property name="buddy" >
-                    <cstring>syslogSpin</cstring>
-                   </property>
-                  </widget>
-                 </item>
-                 <item row="2" column="1" >
-                  <widget class="KIntSpinBox" name="maxLogSizeSpin" >
-                   <property name="maximum" >
-                    <number>2147483647</number>
-                   </property>
-                  </widget>
-                 </item>
-                 <item row="1" column="0" >
-                  <widget class="QLabel" name="TextLabel6_2_2_2_2_2" >
-                   <property name="sizePolicy" >
-                    <sizepolicy vsizetype="Preferred" hsizetype="Fixed" >
-                     <horstretch>0</horstretch>
-                     <verstretch>0</verstretch>
-                    </sizepolicy>
-                   </property>
-                   <property name="minimumSize" >
-                    <size>
-                     <width>76</width>
-                     <height>0</height>
-                    </size>
-                   </property>
-                   <property name="text" >
-                    <string>Log &amp;level:</string>
-                   </property>
-                   <property name="wordWrap" >
-                    <bool>false</bool>
-                   </property>
-                   <property name="buddy" >
-                    <cstring>logLevelEdit</cstring>
-                   </property>
-                  </widget>
-                 </item>
-                 <item row="1" column="1" colspan="3" >
-                  <widget class="QLineEdit" name="logLevelEdit" />
-                 </item>
-                 <item row="3" column="1" >
-                  <widget class="KIntSpinBox" name="syslogSpin" >
-                   <property name="maximum" >
-                    <number>4</number>
-                   </property>
-                  </widget>
-                 </item>
-                </layout>
-               </widget>
-              </item>
-              <item>
-               <widget class="QGroupBox" name="groupBox48" >
-                <property name="title" >
-                 <string>S&amp;witches</string>
-                </property>
-                <layout class="QVBoxLayout" >
-                 <property name="spacing" >
-                  <number>6</number>
-                 </property>
-                 <property name="leftMargin" >
-                  <number>11</number>
-                 </property>
-                 <property name="topMargin" >
-                  <number>11</number>
-                 </property>
-                 <property name="rightMargin" >
-                  <number>11</number>
-                 </property>
-                 <property name="bottomMargin" >
-                  <number>11</number>
-                 </property>
-                 <item>
-                  <widget class="QCheckBox" name="syslogOnlyChk" >
-                   <property name="sizePolicy" >
-                    <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                     <horstretch>0</horstretch>
-                     <verstretch>0</verstretch>
-                    </sizepolicy>
-                   </property>
-                   <property name="text" >
-                    <string>Syslog o&amp;nly</string>
-                   </property>
-                  </widget>
-                 </item>
-                 <item>
-                  <widget class="QCheckBox" name="statusChk" >
-                   <property name="text" >
-                    <string>Status</string>
-                   </property>
-                   <property name="checked" >
-                    <bool>true</bool>
-                   </property>
-                  </widget>
-                 </item>
-                 <item>
-                  <widget class="QCheckBox" name="timestampChk" >
-                   <property name="sizePolicy" >
-                    <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                     <horstretch>0</horstretch>
-                     <verstretch>0</verstretch>
-                    </sizepolicy>
-                   </property>
-                   <property name="text" >
-                    <string>Ti&amp;mestamp</string>
-                   </property>
-                   <property name="checked" >
-                    <bool>false</bool>
-                   </property>
-                  </widget>
-                 </item>
-                 <item>
-                  <widget class="QCheckBox" name="microsecondsChk" >
-                   <property name="enabled" >
-                    <bool>false</bool>
-                   </property>
-                   <property name="text" >
-                    <string>microseconds</string>
-                   </property>
-                  </widget>
-                 </item>
-                 <item>
-                  <widget class="QCheckBox" name="debugPidChk" >
-                   <property name="sizePolicy" >
-                    <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                     <horstretch>0</horstretch>
-                     <verstretch>0</verstretch>
-                    </sizepolicy>
-                   </property>
-                   <property name="text" >
-                    <string>Debug pid</string>
-                   </property>
-                  </widget>
-                 </item>
-                 <item>
-                  <widget class="QCheckBox" name="debugUidChk" >
-                   <property name="text" >
-                    <string>Debu&amp;g uid</string>
-                   </property>
-                  </widget>
-                 </item>
-                </layout>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Vertical</enum>
-                </property>
-                <property name="sizeType" >
-                 <enum>QSizePolicy::Expanding</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>20</width>
-                  <height>60</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
-            </widget>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Tuning</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <item row="0" column="0" colspan="2" >
-            <widget class="QGroupBox" name="groupBox37_2" >
-             <property name="title" >
-              <string>Modules</string>
-             </property>
-             <layout class="QHBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QLabel" name="TextLabel4_2_2" >
-                <property name="text" >
-                 <string>Pre&amp;load modules:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>preloadModulesEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QLineEdit" name="preloadModulesEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="1" column="0" >
-            <widget class="QGroupBox" name="groupBox44" >
-             <property name="title" >
-              <string>Switches</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QCheckBox" name="getwdCacheChk" >
-                <property name="text" >
-                 <string>&amp;Getwd cache</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="useMmapChk" >
-                <property name="text" >
-                 <string>Use &amp;mmap</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="kernelChangeNotifyChk" >
-                <property name="text" >
-                 <string>Kernel change notif&amp;y</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="hostnameLookupsChk" >
-                <property name="text" >
-                 <string>H&amp;ostname lookups</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="readRawChk" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Read ra&amp;w</string>
-                </property>
-                <property name="checked" >
-                 <bool>true</bool>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="writeRawChk" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Write raw</string>
-                </property>
-                <property name="checked" >
-                 <bool>true</bool>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="1" column="1" >
-            <widget class="QGroupBox" name="groupBox45" >
-             <property name="title" >
-              <string>Times</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_5" >
-                <property name="text" >
-                 <string>Change notify timeout:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>changeNotifyTimeoutSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="2" >
-               <widget class="QLabel" name="TextLabel5_2_3_4" >
-                <property name="text" >
-                 <string comment="seconds" >Sec</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_4" >
-                <property name="text" >
-                 <string>&amp;Keepalive:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>keepaliveSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KIntSpinBox" name="changeNotifyTimeoutSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <widget class="QLabel" name="TextLabel5_2_5" >
-                <property name="text" >
-                 <string comment="seconds" >Sec</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KIntSpinBox" name="keepaliveSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="2" >
-               <widget class="QLabel" name="TextLabel5_2_2_3" >
-                <property name="text" >
-                 <string comment="minutes" >Min</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_2_3" >
-                <property name="text" >
-                 <string>Deadtime:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>deadtimeSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KIntSpinBox" name="deadtimeSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_2_4" >
-                <property name="text" >
-                 <string>Lp&amp;q cache time:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>lpqCacheTimeSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="KIntSpinBox" name="lpqCacheTimeSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="2" >
-               <widget class="QLabel" name="TextLabel5_2_3_2_4" >
-                <property name="text" >
-                 <string comment="seconds" >Sec</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="2" >
-               <widget class="QLabel" name="TextLabel5_2_3_2_4_2" >
-                <property name="text" >
-                 <string comment="seconds" >Sec</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_2_4_2" >
-                <property name="text" >
-                 <string>&amp;Name cache timeout:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>nameCacheTimeoutSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="1" >
-               <widget class="KIntSpinBox" name="nameCacheTimeoutSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="2" column="0" >
-            <widget class="QGroupBox" name="groupBox46" >
-             <property name="title" >
-              <string>Sizes</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_2_2_2_5" >
-                <property name="text" >
-                 <string>Max disk size:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxDiskSizeSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KIntSpinBox" name="maxDiskSizeSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <widget class="QLabel" name="TextLabel5_2_3_2_2_3" >
-                <property name="text" >
-                 <string comment="mega byte" >MB</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="3" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_2_2_2_2_2_3" >
-                <property name="text" >
-                 <string>Read si&amp;ze:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>readSizeSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KIntSpinBox" name="readSizeSpin" >
-                <property name="maximum" >
-                 <number>65536</number>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_2_2_2_3_3" >
-                <property name="text" >
-                 <string>Stat cache size:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>statCacheSizeSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KIntSpinBox" name="statCacheSizeSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel4_4_2_7_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Ma&amp;x xmit:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxXmitSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="KIntSpinBox" name="maxXmitSpin" >
-                <property name="minimum" >
-                 <number>0</number>
-                </property>
-                <property name="maximum" >
-                 <number>65535</number>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="2" column="1" >
-            <widget class="QGroupBox" name="groupBox47" >
-             <property name="title" >
-              <string>Numbers</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_2_2_4" >
-                <property name="text" >
-                 <string>Max smbd processes:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxSmbdProcessesSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KIntSpinBox" name="maxSmbdProcessesSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_3_2_2_2_2_4" >
-                <property name="text" >
-                 <string>Max open files:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxOpenFilesSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KIntSpinBox" name="maxOpenFilesSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="3" column="0" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>50</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Printing</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <widget class="QGroupBox" name="groupBox52" >
-             <property name="title" >
-              <string>&amp;General</string>
-             </property>
-             <layout class="QHBoxLayout" >
-              <item>
-               <widget class="QLabel" name="TextLabel1_3" >
-                <property name="text" >
-                 <string>Total print &amp;jobs:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>totalPrintJobsSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="KIntSpinBox" name="totalPrintJobsSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox51" >
-             <property name="title" >
-              <string>Drivers</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel4_2_4" >
-                <property name="text" >
-                 <string>OS&amp;2 driver map:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>os2DriverMapUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel1_3_4" >
-                <property name="text" >
-                 <string>Printcap na&amp;me:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>printcapNameUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KUrlRequester" name="printcapNameUrlRq" />
-              </item>
-              <item row="1" column="1" >
-               <widget class="KUrlRequester" name="os2DriverMapUrlRq" />
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="printerDriverLbl" >
-                <property name="font" >
-                 <font>
-                  <italic>true</italic>
-                 </font>
-                </property>
-                <property name="text" >
-                 <string>Pri&amp;nter driver file: </string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>printerDriverFileUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KUrlRequester" name="printerDriverFileUrlRq" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox50" >
-             <property name="title" >
-              <string>Commands</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel2_2_2" >
-                <property name="text" >
-                 <string>Enumports command:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>enumportsCommandEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel3_3_3" >
-                <property name="text" >
-                 <string>Addprinter command:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>addprinterCommandEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel3_3_2" >
-                <property name="text" >
-                 <string>Deleteprinter command:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>deleteprinterCommandEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="QLineEdit" name="addprinterCommandEdit" />
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="deleteprinterCommandEdit" />
-              </item>
-              <item row="2" column="1" >
-               <widget class="QLineEdit" name="enumportsCommandEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox49" >
-             <property name="title" >
-              <string>S&amp;witches</string>
-             </property>
-             <layout class="QHBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QCheckBox" name="loadPrintersChk" >
-                <property name="text" >
-                 <string>L&amp;oad printers</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="disableSpoolssChk" >
-                <property name="text" >
-                 <string>Disab&amp;le spools</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="showAddPrinterWizardChk" >
-                <property name="text" >
-                 <string>Show add printer wi&amp;zard</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>40</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="TabPage" >
-          <attribute name="title" >
-           <string>Domain</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <property name="horizontalSpacing" >
-            <number>6</number>
-           </property>
-           <property name="verticalSpacing" >
-            <number>6</number>
-           </property>
-           <item row="4" column="1" >
-            <widget class="KIntSpinBox" name="osLevelSpin" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="maximum" >
-              <number>2147483647</number>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="0" >
-            <widget class="QCheckBox" name="localMasterChk" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="text" >
-              <string>L&amp;ocal master</string>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="0" colspan="3" >
-            <widget class="QCheckBox" name="domainMasterChk" >
-             <property name="text" >
-              <string>Domai&amp;n master</string>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="0" colspan="3" >
-            <widget class="QCheckBox" name="domainLogonsChk" >
-             <property name="text" >
-              <string>Domain lo&amp;gons</string>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="0" >
-            <widget class="QCheckBox" name="preferredMasterChk" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="text" >
-              <string>Preferred &amp;master</string>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="0" >
-            <widget class="QLabel" name="TextLabel5" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Preferred" hsizetype="Fixed" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="text" >
-              <string>OS &amp;level:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>osLevelSpin</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="0" >
-            <widget class="QLabel" name="TextLabel3_3_3_3" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>Domain admin group:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>domainAdminGroupEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="0" >
-            <widget class="QLabel" name="TextLabel3_3_3_4" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>Domain guest group:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>domainGuestGroupEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="1" colspan="2" >
-            <widget class="QLineEdit" name="domainGuestGroupEdit" />
-           </item>
-           <item row="5" column="1" colspan="2" >
-            <widget class="QLineEdit" name="domainAdminGroupEdit" />
-           </item>
-           <item row="4" column="2" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Horizontal</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>40</width>
-               <height>20</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="7" column="1" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>40</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="TabPage" >
-          <attribute name="title" >
-           <string>WINS</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <widget class="Q3ButtonGroup" name="buttonGroup4" >
-             <property name="title" >
-              <string/>
-             </property>
-             <property name="lineWidth" >
-              <number>0</number>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>7</number>
-              </property>
-              <property name="topMargin" >
-               <number>7</number>
-              </property>
-              <property name="rightMargin" >
-               <number>7</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>7</number>
-              </property>
-              <item>
-               <widget class="QRadioButton" name="noWinsSupportRadio" >
-                <property name="text" >
-                 <string>Deactivate &amp;WINS</string>
-                </property>
-                <property name="checked" >
-                 <bool>true</bool>
-                </property>
-                <property name="autoRepeat" >
-                 <bool>true</bool>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QRadioButton" name="winsSupportRadio" >
-                <property name="text" >
-                 <string>Act as a WI&amp;NS server</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QRadioButton" name="otherWinsRadio" >
-                <property name="text" >
-                 <string>Use an&amp;other WINS server</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox35" >
-             <property name="enabled" >
-              <bool>false</bool>
-             </property>
-             <property name="title" >
-              <string>WINS Server Settin&amp;gs</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" colspan="4" >
-               <widget class="QCheckBox" name="dnsProxyChk" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="text" >
-                 <string>DNS prox&amp;y</string>
-                </property>
-                <property name="tristate" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="winsHookLbl" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="text" >
-                 <string>WINS hoo&amp;k:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>winsHookEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" colspan="3" >
-               <widget class="QLineEdit" name="winsHookEdit" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel4_4_2_4_3_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Max WINS tt&amp;l:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxWinsTtlSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KIntSpinBox" name="maxWinsTtlSpin" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="minimum" >
-                 <number>0</number>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="2" >
-               <widget class="QLabel" name="TextLabel6_5_2_2_3_2_2_2" >
-                <property name="text" >
-                 <string comment="seconds" >Sec</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="3" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel4_4_2_5_3_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>&amp;Min WINS ttl:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>minWinsTtlSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="KIntSpinBox" name="minWinsTtlSpin" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="minimum" >
-                 <number>0</number>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="2" >
-               <widget class="QLabel" name="TextLabel6_5_2_4_2_2_2" >
-                <property name="text" >
-                 <string comment="seconds" >Sec</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox36" >
-             <property name="enabled" >
-              <bool>false</bool>
-             </property>
-             <property name="title" >
-              <string>WINS Server IP or DNS Name</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="KLineEdit" name="winsServerEdit" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox37" >
-             <property name="title" >
-              <string>General Options</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel3_3_3_2" >
-                <property name="text" >
-                 <string>WINS partners:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>winsPartnersEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="winsPartnersEdit" />
-              </item>
-              <item row="0" column="0" colspan="2" >
-               <widget class="QCheckBox" name="winsProxyChk" >
-                <property name="enabled" >
-                 <bool>true</bool>
-                </property>
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Preferred" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="text" >
-                 <string>WINS pro&amp;xy</string>
-                </property>
-                <property name="tristate" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>120</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Filenames</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <widget class="QGroupBox" name="groupBox54" >
-             <property name="title" >
-              <string>Ge&amp;neral</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QCheckBox" name="stripDotChk" >
-                <property name="text" >
-                 <string>Strip d&amp;ot</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox55" >
-             <property name="title" >
-              <string>&amp;Mangling</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel6_2_2" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Preferred" hsizetype="Fixed" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="text" >
-                 <string>Mangled stac&amp;k:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>mangledStackSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KIntSpinBox" name="mangledStackSpin" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Maximum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel6_2_2_2" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Preferred" hsizetype="Fixed" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="text" >
-                 <string>Mangle prefi&amp;x:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>manglePrefixSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KIntSpinBox" name="manglePrefixSpin" >
-                <property name="minimum" >
-                 <number>1</number>
-                </property>
-                <property name="maximum" >
-                 <number>6</number>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox53" >
-             <property name="title" >
-              <string>Specia&amp;l</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QCheckBox" name="statCacheChk" >
-                <property name="text" >
-                 <string>Stat cache</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>280</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Locking</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <widget class="QGroupBox" name="groupBox59" >
-             <property name="title" >
-              <string>&amp;General</string>
-             </property>
-             <layout class="QHBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QCheckBox" name="kernelOplocksChk" >
-                <property name="text" >
-                 <string>Use ker&amp;nel oplocks</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox56" >
-             <property name="title" >
-              <string>Direct&amp;ories</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel5_2" >
-                <property name="text" >
-                 <string>Loc&amp;k directory:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>lockDirectoryUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KUrlRequester" name="lockDirectoryUrlRq" />
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel6_2" >
-                <property name="text" >
-                 <string>Pid director&amp;y:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>pidDirectoryUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KUrlRequester" name="pidDirectoryUrlRq" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox57" >
-             <property name="title" >
-              <string>Lock Spin</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QLabel" name="textLabel2_2" >
-                <property name="text" >
-                 <string>&amp;Lock spin count:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>lockSpinCountSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KIntSpinBox" name="lockSpinCountSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="textLabel2_2_2" >
-                <property name="text" >
-                 <string>Lock spin ti&amp;me:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>lockSpinTimeSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KIntSpinBox" name="lockSpinTimeSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="2" >
-               <widget class="QLabel" name="textLabel3_2" >
-                <property name="text" >
-                 <string>microseconds</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="3" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox58" >
-             <property name="title" >
-              <string>Very Advanced</string>
-             </property>
-             <layout class="QHBoxLayout" >
-              <item>
-               <widget class="QLabel" name="textLabel2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Oplock break &amp;wait time:</string>
-                </property>
-                <property name="alignment" >
-                 <set>Qt::AlignVCenter</set>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>oplockBreakWaitTimeSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="KIntSpinBox" name="oplockBreakWaitTimeSpin" >
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QLabel" name="textLabel3" >
-                <property name="text" >
-                 <string>milliseconds</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>120</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Charset</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <property name="spacing" >
-            <number>6</number>
-           </property>
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <item>
-            <widget class="QGroupBox" name="groupBox40" >
-             <property name="title" >
-              <string>Samba &amp;3.x</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel1_2_4_2_2_2_2_3" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>D&amp;OS charset:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>dosCharsetEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="QLineEdit" name="dosCharsetEdit" >
-                <property name="font" >
-                 <font/>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel1_2_4_2_2_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>UNI&amp;X charset:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>unixCharsetEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="QLineEdit" name="unixCharsetEdit" >
-                <property name="font" >
-                 <font/>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel1_2_4_2_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Displa&amp;y charset:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>displayCharsetEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="displayCharsetEdit" >
-                <property name="font" >
-                 <font/>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="0" colspan="2" >
-               <widget class="QCheckBox" name="unicodeChk" >
-                <property name="text" >
-                 <string>U&amp;nicode</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox39" >
-             <property name="title" >
-              <string>Samba &amp;2.x</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_4" >
-                <property name="text" >
-                 <string>Character set:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>characterSetEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="QLineEdit" name="characterSetEdit" />
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="clientCodePageEdit" >
-                <property name="font" >
-                 <font/>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="0" >
-               <widget class="QLabel" name="TextLabel12" >
-                <property name="text" >
-                 <string>Va&amp;lid chars:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>validCharsEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KUrlRequester" name="codePageDirUrlRq" >
-                <property name="font" >
-                 <font/>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="1" >
-               <widget class="QLineEdit" name="validCharsEdit" />
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel1_2_4_3_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Code page directory:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>codePageDirUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="QLineEdit" name="codingSystemEdit" >
-                <property name="font" >
-                 <font/>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel1_2_4_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Codin&amp;g system:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>codingSystemEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel1_2_3_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Client code page:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>clientCodePageEdit</cstring>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>80</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Logon</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <property name="horizontalSpacing" >
-            <number>6</number>
-           </property>
-           <property name="verticalSpacing" >
-            <number>6</number>
-           </property>
-           <item row="0" column="0" >
-            <widget class="QGroupBox" name="groupBox60" >
-             <property name="title" >
-              <string>Add Scripts</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel7_2" >
-                <property name="text" >
-                 <string>Add user script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>addUserScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="QLineEdit" name="addUserScriptEdit" />
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_5_2" >
-                <property name="text" >
-                 <string>Add user to group script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>addUserToGroupScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_5" >
-                <property name="text" >
-                 <string>Add gr&amp;oup script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>addGroupScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="addGroupScriptEdit" />
-              </item>
-              <item row="2" column="1" >
-               <widget class="QLineEdit" name="addUserToGroupScriptEdit" />
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_6" >
-                <property name="text" >
-                 <string>Add machine script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>addMachineScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="QLineEdit" name="addMachineScriptEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="3" column="0" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>20</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="0" column="1" >
-            <widget class="QGroupBox" name="groupBox61" >
-             <property name="title" >
-              <string>Delete Scripts</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="0" column="1" >
-               <widget class="QLineEdit" name="deleteUserScriptEdit" />
-              </item>
-              <item row="2" column="1" >
-               <widget class="QLineEdit" name="deleteUserFromGroupScriptEdit" />
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="deleteGroupScriptEdit" />
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_2_2" >
-                <property name="text" >
-                 <string>Delete group script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>deleteGroupScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_2" >
-                <property name="text" >
-                 <string>Delete user script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>deleteUserScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_2_2_2" >
-                <property name="text" >
-                 <string>Delete user from group script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>deleteUserFromGroupScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="2" column="0" >
-            <widget class="QGroupBox" name="groupBox64" >
-             <property name="title" >
-              <string>Primary Group Script</string>
-             </property>
-             <layout class="QHBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QLabel" name="TextLabel7_2_5_3" >
-                <property name="text" >
-                 <string>Set primar&amp;y group script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>SetPrimaryGroupScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QLineEdit" name="SetPrimaryGroupScriptEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="1" column="0" >
-            <widget class="QGroupBox" name="groupBox62" >
-             <property name="title" >
-              <string>Shutdown</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_3_2" >
-                <property name="text" >
-                 <string>Shutdo&amp;wn script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>shutdownScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_3_3" >
-                <property name="text" >
-                 <string>Abort shutdown script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>abortShutdownScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="QLineEdit" name="shutdownScriptEdit" />
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="abortShutdownScriptEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item rowspan="2" row="1" column="1" >
-            <widget class="QGroupBox" name="groupBox63" >
-             <property name="title" >
-              <string>Logon</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel8_2_2" >
-                <property name="text" >
-                 <string>Logo&amp;n path:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>logonPathUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="KUrlRequester" name="logonHomeUrlRq" />
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel8_2" >
-                <property name="text" >
-                 <string>Logon ho&amp;me:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>logonHomeUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="logonDriveEdit" />
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_4" >
-                <property name="text" >
-                 <string>&amp;Logon drive:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>logonDriveEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KUrlRequester" name="logonPathUrlRq" />
-              </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel7_2_3" >
-                <property name="text" >
-                 <string>Lo&amp;gon script:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>logonScriptEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="QLineEdit" name="logonScriptEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Socket</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <layout class="QHBoxLayout" >
-             <property name="spacing" >
-              <number>6</number>
-             </property>
-             <property name="leftMargin" >
-              <number>0</number>
-             </property>
-             <property name="topMargin" >
-              <number>0</number>
-             </property>
-             <property name="rightMargin" >
-              <number>0</number>
-             </property>
-             <property name="bottomMargin" >
-              <number>0</number>
-             </property>
-             <item>
-              <widget class="QLabel" name="TextLabel15" >
-               <property name="text" >
-                <string>Socket address:</string>
-               </property>
-               <property name="wordWrap" >
-                <bool>false</bool>
-               </property>
-               <property name="buddy" >
-                <cstring>socketAddressEdit</cstring>
-               </property>
-              </widget>
-             </item>
-             <item>
-              <widget class="QLineEdit" name="socketAddressEdit" />
-             </item>
-            </layout>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="GroupBox7" >
-             <property name="title" >
-              <string>Socket Options</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QCheckBox" name="TCP_NODELAYChk" >
-                <property name="text" >
-                 <string>TCP_NODELA&amp;Y</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="QCheckBox" name="SO_SNDBUFChk" >
-                <property name="text" >
-                 <string>SO_S&amp;NDBUF:</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <widget class="KIntSpinBox" name="SO_SNDBUFSpin" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="3" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QCheckBox" name="IPTOS_LOWDELAYChk" >
-                <property name="text" >
-                 <string>IPTOS_LOWDELAY</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="QCheckBox" name="SO_RCVBUFChk" >
-                <property name="text" >
-                 <string>SO_RCVBUF:</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="2" >
-               <widget class="KIntSpinBox" name="SO_RCVBUFSpin" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QCheckBox" name="IPTOS_THROUGHPUTChk" >
-                <property name="text" >
-                 <string>IPTOS_THROU&amp;GHPUT</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="QCheckBox" name="SO_SNDLOWATChk" >
-                <property name="text" >
-                 <string>SO_SNDLO&amp;WAT:</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="2" >
-               <widget class="KIntSpinBox" name="SO_SNDLOWATSpin" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="0" >
-               <widget class="QCheckBox" name="SO_KEEPALIVEChk" >
-                <property name="text" >
-                 <string>SO_&amp;KEEPALIVE</string>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="QCheckBox" name="SO_RCVLOWATChk" >
-                <property name="text" >
-                 <string>SO_RCV&amp;LOWAT:</string>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="2" >
-               <widget class="KIntSpinBox" name="SO_RCVLOWATSpin" >
-                <property name="enabled" >
-                 <bool>false</bool>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="0" >
-               <widget class="QCheckBox" name="SO_REUSEADDRChk" >
-                <property name="text" >
-                 <string>S&amp;O_REUSEADDR</string>
-                </property>
-               </widget>
-              </item>
-              <item row="5" column="0" >
-               <widget class="QCheckBox" name="SO_BROADCASTChk" >
-                <property name="text" >
-                 <string>SO_BROADCAST</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>0</width>
-               <height>70</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>SSL</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <widget class="QCheckBox" name="sslChk" >
-             <property name="toolTip" >
-              <string>Enables or disables the entire SSL mode</string>
-             </property>
-             <property name="whatsThis" >
-              <string>This enables or disables the entire SSL mode. If it is set to no, the SSL-enabled Samba behaves exactly like the non-SSL Samba. If set to yes, it depends on the variables ssl hosts and ssl hosts resign whether an SSL connection will be required.
-
-This is only available if the SSL libraries have been compiled on your system and the configure option --with-ssl was given at configure time.</string>
-             </property>
-             <property name="text" >
-              <string>E&amp;nable SSL</string>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <widget class="QFrame" name="SSLFrame" >
-             <property name="enabled" >
-              <bool>false</bool>
-             </property>
-             <property name="frameShape" >
-              <enum>QFrame::NoFrame</enum>
-             </property>
-             <property name="frameShadow" >
-              <enum>QFrame::Plain</enum>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>0</number>
-              </property>
-              <property name="topMargin" >
-               <number>0</number>
-              </property>
-              <property name="rightMargin" >
-               <number>0</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>0</number>
-              </property>
-              <item>
-               <layout class="QGridLayout" >
-                <property name="leftMargin" >
-                 <number>0</number>
-                </property>
-                <property name="topMargin" >
-                 <number>0</number>
-                </property>
-                <property name="rightMargin" >
-                 <number>0</number>
-                </property>
-                <property name="bottomMargin" >
-                 <number>0</number>
-                </property>
-                <property name="horizontalSpacing" >
-                 <number>6</number>
-                </property>
-                <property name="verticalSpacing" >
-                 <number>6</number>
-                </property>
-                <item row="1" column="0" >
-                 <widget class="QLabel" name="TextLabel2_4_2" >
-                  <property name="text" >
-                   <string>SSL h&amp;osts:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslHostsEdit</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="6" column="1" >
-                 <layout class="QHBoxLayout" >
-                  <property name="spacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="leftMargin" >
-                   <number>0</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>0</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>0</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>0</number>
-                  </property>
-                  <item>
-                   <widget class="KUrlRequester" name="sslEntropyFileUrlRq" />
-                  </item>
-                  <item>
-                   <widget class="QLabel" name="TextLabel12_2_2" >
-                    <property name="text" >
-                     <string>SSL entrop&amp;y bytes:</string>
-                    </property>
-                    <property name="wordWrap" >
-                     <bool>false</bool>
-                    </property>
-                    <property name="buddy" >
-                     <cstring>sslEntropyBytesSpin</cstring>
-                    </property>
-                   </widget>
-                  </item>
-                  <item>
-                   <widget class="KIntSpinBox" name="sslEntropyBytesSpin" >
-                    <property name="maximum" >
-                     <number>2147483647</number>
-                    </property>
-                   </widget>
-                  </item>
-                 </layout>
-                </item>
-                <item row="2" column="1" >
-                 <widget class="QLineEdit" name="sslHostsResignEdit" />
-                </item>
-                <item row="3" column="1" >
-                 <widget class="KUrlRequester" name="sslCACertDirUrlRq" />
-                </item>
-                <item row="7" column="1" >
-                 <widget class="QLineEdit" name="sslCiphersEdit" />
-                </item>
-                <item row="5" column="1" >
-                 <widget class="QLineEdit" name="sslEgdSocketEdit" />
-                </item>
-                <item row="7" column="0" >
-                 <widget class="QLabel" name="TextLabel14_2_2" >
-                  <property name="text" >
-                   <string>SSL ciphers:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslCiphersEdit</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="2" column="0" >
-                 <widget class="QLabel" name="TextLabel3_7" >
-                  <property name="text" >
-                   <string>SSL hosts resi&amp;gn:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslHostsResignEdit</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="0" column="1" >
-                 <layout class="QHBoxLayout" >
-                  <property name="spacing" >
-                   <number>6</number>
-                  </property>
-                  <property name="leftMargin" >
-                   <number>0</number>
-                  </property>
-                  <property name="topMargin" >
-                   <number>0</number>
-                  </property>
-                  <property name="rightMargin" >
-                   <number>0</number>
-                  </property>
-                  <property name="bottomMargin" >
-                   <number>0</number>
-                  </property>
-                  <item>
-                   <widget class="QComboBox" name="sslVersionCombo" >
-                    <item>
-                     <property name="text" >
-                      <string>ssl2</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>ssl3</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>ssl2or3</string>
-                     </property>
-                    </item>
-                    <item>
-                     <property name="text" >
-                      <string>tls1</string>
-                     </property>
-                    </item>
-                   </widget>
-                  </item>
-                  <item>
-                   <widget class="QCheckBox" name="sslCompatibilityChk" >
-                    <property name="text" >
-                     <string>SSL co&amp;mpatibility</string>
-                    </property>
-                   </widget>
-                  </item>
-                  <item>
-                   <spacer>
-                    <property name="orientation" >
-                     <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeHint" >
-                     <size>
-                      <width>40</width>
-                      <height>20</height>
-                     </size>
-                    </property>
-                   </spacer>
-                  </item>
-                 </layout>
-                </item>
-                <item row="3" column="0" >
-                 <widget class="QLabel" name="TextLabel4_4" >
-                  <property name="text" >
-                   <string>SSL CA certDir:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslCACertDirUrlRq</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="4" column="1" >
-                 <widget class="KUrlRequester" name="sslCACertFileUrlRq" />
-                </item>
-                <item row="6" column="0" >
-                 <widget class="QLabel" name="TextLabel11_2_2" >
-                  <property name="text" >
-                   <string>SSL entropy file:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslEntropyFileUrlRq</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="5" column="0" >
-                 <widget class="QLabel" name="TextLabel10_2_2" >
-                  <property name="text" >
-                   <string>SSL egd socket:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslEgdSocketEdit</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="0" column="0" >
-                 <widget class="QLabel" name="TextLabel15_2_2" >
-                  <property name="text" >
-                   <string>SSL version:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslVersionCombo</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="1" column="1" >
-                 <widget class="QLineEdit" name="sslHostsEdit" />
-                </item>
-                <item row="4" column="0" >
-                 <widget class="QLabel" name="TextLabel5_4_3" >
-                  <property name="text" >
-                   <string>SSL CA certFile:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslCACertFileUrlRq</cstring>
-                  </property>
-                 </widget>
-                </item>
-               </layout>
-              </item>
-              <item>
-               <layout class="QGridLayout" >
-                <property name="leftMargin" >
-                 <number>0</number>
-                </property>
-                <property name="topMargin" >
-                 <number>0</number>
-                </property>
-                <property name="rightMargin" >
-                 <number>0</number>
-                </property>
-                <property name="bottomMargin" >
-                 <number>0</number>
-                </property>
-                <property name="horizontalSpacing" >
-                 <number>6</number>
-                </property>
-                <property name="verticalSpacing" >
-                 <number>6</number>
-                </property>
-                <item row="1" column="3" >
-                 <widget class="KUrlRequester" name="sslClientCertUrlRq" />
-                </item>
-                <item row="0" column="2" colspan="2" >
-                 <widget class="QCheckBox" name="sslRequireClientcertChk" >
-                  <property name="text" >
-                   <string>SSL require clientcert</string>
-                  </property>
-                 </widget>
-                </item>
-                <item row="2" column="2" >
-                 <widget class="QLabel" name="TextLabel9_2_2" >
-                  <property name="text" >
-                   <string>SSL client key:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslClientKeyUrlRq</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="0" column="0" colspan="2" >
-                 <widget class="QCheckBox" name="sslRequireServercertChk" >
-                  <property name="text" >
-                   <string>SSL re&amp;quire servercert</string>
-                  </property>
-                 </widget>
-                </item>
-                <item row="2" column="3" >
-                 <widget class="KUrlRequester" name="sslClientKeyUrlRq" />
-                </item>
-                <item row="1" column="0" >
-                 <widget class="QLabel" name="TextLabel6_6_2" >
-                  <property name="text" >
-                   <string>SS&amp;L server cert:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslServerCertUrlRq</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="1" column="2" >
-                 <widget class="QLabel" name="TextLabel8_4" >
-                  <property name="text" >
-                   <string>SSL client cert:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslClientCertUrlRq</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item row="1" column="1" >
-                 <widget class="KUrlRequester" name="sslServerCertUrlRq" />
-                </item>
-                <item row="2" column="1" >
-                 <widget class="KUrlRequester" name="sslServerKeyUrlRq" />
-                </item>
-                <item row="2" column="0" >
-                 <widget class="QLabel" name="TextLabel7_5" >
-                  <property name="text" >
-                   <string>SSL server &amp;key:</string>
-                  </property>
-                  <property name="wordWrap" >
-                   <bool>false</bool>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>sslServerKeyUrlRq</cstring>
-                  </property>
-                 </widget>
-                </item>
-               </layout>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>0</width>
-               <height>30</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Protocol</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <item row="0" column="0" >
-            <widget class="QGroupBox" name="groupBox70" >
-             <property name="title" >
-              <string>S&amp;witches</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" colspan="2" >
-               <widget class="QCheckBox" name="timeServerChk" >
-                <property name="text" >
-                 <string>Ti&amp;me server</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" colspan="2" >
-               <widget class="QCheckBox" name="largeReadWriteChk" >
-                <property name="text" >
-                 <string>Lar&amp;ge readwrite</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QCheckBox" name="unixExtensionsChk" >
-                <property name="text" >
-                 <string>UNIX extensions</string>
-                </property>
-                <property name="shortcut" >
-                 <string>Alt+</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="3" column="0" colspan="2" >
-               <widget class="QCheckBox" name="readBmpxChk" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Read bmpx</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="0" column="1" >
-            <widget class="QGroupBox" name="groupBox71" >
-             <property name="title" >
-              <string>Protocol Versions</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel3_6_2" >
-                <property name="text" >
-                 <string>A&amp;nnounce as:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>announceAsCombo</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="QComboBox" name="announceAsCombo" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <item>
-                 <property name="text" >
-                  <string>NT</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>NT Workstation</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>win95</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>WfW</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel2_3_2" >
-                <property name="text" >
-                 <string>Announce version:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>announceVersionEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="announceVersionEdit" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="text" >
-                 <string>4.2</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel1_3_4_2" >
-                <property name="text" >
-                 <string>Pr&amp;otocol:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>protocolCombo</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="QComboBox" name="protocolCombo" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <item>
-                 <property name="text" >
-                  <string>NT1</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>LANMAN2</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>LANMAN1</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>CORE</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>COREPLUS</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel1_3_2_2" >
-                <property name="text" >
-                 <string>Max protocol:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxProtocolCombo</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="QComboBox" name="maxProtocolCombo" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <item>
-                 <property name="text" >
-                  <string>NT1</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>LANMAN2</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>LANMAN1</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>CORE</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>COREPLUS</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-              <item row="4" column="0" >
-               <widget class="QLabel" name="TextLabel1_3_3_2" >
-                <property name="text" >
-                 <string>Min protocol:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>minProtocolCombo</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="1" >
-               <widget class="QComboBox" name="minProtocolCombo" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <item>
-                 <property name="text" >
-                  <string>NT1</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>LANMAN2</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>LANMAN1</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>CORE</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>COREPLUS</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="1" column="0" colspan="2" >
-            <widget class="QGroupBox" name="groupBox69" >
-             <property name="title" >
-              <string>Limits</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel4_4_4_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Ma&amp;x mux:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxMuxSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KIntSpinBox" name="maxMuxSpin" >
-                <property name="minimum" >
-                 <number>0</number>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel4_4_2_3_3_2_2_2" >
-                <property name="font" >
-                 <font/>
-                </property>
-                <property name="text" >
-                 <string>Max tt&amp;l:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>maxTtlSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KIntSpinBox" name="maxTtlSpin" >
-                <property name="minimum" >
-                 <number>0</number>
-                </property>
-                <property name="maximum" >
-                 <number>2147483647</number>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="2" >
-               <widget class="QLabel" name="TextLabel6_5_4_2_2_2" >
-                <property name="text" >
-                 <string comment="seconds" >Sec</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="3" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="2" column="0" colspan="2" >
-            <widget class="QGroupBox" name="groupBox72" >
-             <property name="title" >
-              <string>Listening SMB Ports</string>
-             </property>
-             <layout class="QHBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QLabel" name="TextLabel5_4_2_2" >
-                <property name="text" >
-                 <string>SMB ports:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>smbPortsEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QLineEdit" name="smbPortsEdit" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Expanding" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>150</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string/>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="3" column="1" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>50</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Browsing</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <property name="horizontalSpacing" >
-            <number>6</number>
-           </property>
-           <property name="verticalSpacing" >
-            <number>6</number>
-           </property>
-           <item row="3" column="0" >
-            <widget class="QLabel" name="TextLabel2" >
-             <property name="text" >
-              <string>LM i&amp;nterval:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>lmIntervalSpin</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="0" >
-            <widget class="QLabel" name="TextLabel3_5" >
-             <property name="text" >
-              <string>L&amp;M announce:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>lmAnnounceCombo</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="1" colspan="3" >
-            <widget class="QLineEdit" name="remoteBrowseSyncEdit" />
-           </item>
-           <item row="3" column="2" >
-            <widget class="QLabel" name="TextLabel27_2" >
-             <property name="text" >
-              <string>Sec</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="1" >
-            <widget class="KIntSpinBox" name="lmIntervalSpin" >
-             <property name="maximum" >
-              <number>2147483647</number>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="0" >
-            <widget class="QLabel" name="TextLabel14" >
-             <property name="text" >
-              <string>Remote browse s&amp;ync:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>remoteBrowseSyncEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="1" >
-            <widget class="QComboBox" name="lmAnnounceCombo" >
-             <item>
-              <property name="text" >
-               <string>Yes</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>No</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>Auto</string>
-              </property>
-             </item>
-            </widget>
-           </item>
-           <item row="1" column="0" >
-            <widget class="QCheckBox" name="browseListChk" >
-             <property name="text" >
-              <string>Bro&amp;wse list</string>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="0" colspan="4" >
-            <widget class="QCheckBox" name="enhancedBrowsingChk" >
-             <property name="text" >
-              <string>Enhanced browsin&amp;g</string>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="0" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>300</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="5" column="0" >
-            <widget class="QLabel" name="TextLabel4_2" >
-             <property name="text" >
-              <string>Pre&amp;load:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>preloadEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="1" colspan="3" >
-            <widget class="QLineEdit" name="preloadEdit" />
-           </item>
-           <item row="3" column="3" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Horizontal</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>40</width>
-               <height>20</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Winbind</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <item row="0" column="0" >
-            <widget class="QLabel" name="TextLabel21" >
-             <property name="text" >
-              <string>&amp;Winbind/Idmap UID:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>winbindUidEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="2" colspan="3" >
-            <widget class="QLineEdit" name="winbindUidEdit" />
-           </item>
-           <item row="1" column="2" colspan="3" >
-            <widget class="QLineEdit" name="winbindGidEdit" />
-           </item>
-           <item row="1" column="0" >
-            <widget class="QLabel" name="TextLabel21_2" >
-             <property name="text" >
-              <string>Winbind/Idmap &amp;GID:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>winbindGidEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="0" colspan="2" >
-            <widget class="QLabel" name="TextLabel22" >
-             <property name="text" >
-              <string>Template h&amp;omedir:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>templateHomedirEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="2" colspan="3" >
-            <widget class="QLineEdit" name="templateHomedirEdit" />
-           </item>
-           <item row="3" column="0" colspan="2" >
-            <widget class="QLabel" name="TextLabel23" >
-             <property name="text" >
-              <string>Temp&amp;late shell:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>templateShellEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="2" colspan="3" >
-            <widget class="QLineEdit" name="templateShellEdit" />
-           </item>
-           <item row="4" column="0" colspan="2" >
-            <widget class="QLabel" name="TextLabel24" >
-             <property name="text" >
-              <string>Winbind separator:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>winbindSeparatorEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="2" colspan="3" >
-            <widget class="QLineEdit" name="winbindSeparatorEdit" />
-           </item>
-           <item row="5" column="0" colspan="2" >
-            <widget class="QLabel" name="TextLabel24_2" >
-             <property name="text" >
-              <string>Template primary group:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>templatePrimaryGroupEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="2" colspan="3" >
-            <widget class="QLineEdit" name="templatePrimaryGroupEdit" />
-           </item>
-           <item row="6" column="3" >
-            <widget class="QLabel" name="TextLabel27" >
-             <property name="text" >
-              <string>Sec</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="0" colspan="2" >
-            <widget class="QLabel" name="TextLabel25" >
-             <property name="text" >
-              <string>Winbind cache ti&amp;me:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>winbindCacheTimeSpin</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="2" >
-            <widget class="KIntSpinBox" name="winbindCacheTimeSpin" >
-             <property name="minimum" >
-              <number>0</number>
-             </property>
-             <property name="maximum" >
-              <number>2147483647</number>
-             </property>
-            </widget>
-           </item>
-           <item row="7" column="2" colspan="2" >
-            <widget class="QComboBox" name="aclCompatibilityCombo" >
-             <item>
-              <property name="text" >
-               <string>Windows NT 4</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>Windows 2000</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>Auto</string>
-              </property>
-             </item>
-            </widget>
-           </item>
-           <item row="7" column="0" colspan="2" >
-            <widget class="QLabel" name="textLabel3_2_2" >
-             <property name="text" >
-              <string>Acl compatibilit&amp;y:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>aclCompatibilityCombo</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="8" column="0" colspan="2" >
-            <widget class="QCheckBox" name="winbindEnumUsersChk" >
-             <property name="text" >
-              <string>Wi&amp;nbind enum users</string>
-             </property>
-            </widget>
-           </item>
-           <item row="9" column="0" colspan="2" >
-            <widget class="QCheckBox" name="winbindEnumGroupsChk" >
-             <property name="text" >
-              <string>Winbind enum groups</string>
-             </property>
-            </widget>
-           </item>
-           <item row="10" column="0" colspan="5" >
-            <widget class="QCheckBox" name="winbindUseDefaultDomainChk" >
-             <property name="text" >
-              <string>Winbind use default domain</string>
-             </property>
-            </widget>
-           </item>
-           <item row="11" column="0" colspan="5" >
-            <widget class="QCheckBox" name="winbindEnableLocalAccountsChk" >
-             <property name="text" >
-              <string>Winbind enable local accounts</string>
-             </property>
-            </widget>
-           </item>
-           <item row="12" column="0" colspan="5" >
-            <widget class="QCheckBox" name="winbindTrustedDomainsOnlyChk" >
-             <property name="text" >
-              <string>Winbind trusted domains only</string>
-             </property>
-            </widget>
-           </item>
-           <item row="13" column="0" colspan="5" >
-            <widget class="QCheckBox" name="winbindNestedGroupsChk" >
-             <property name="text" >
-              <string>Winbind nested groups</string>
-             </property>
-            </widget>
-           </item>
-           <item row="14" column="1" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>100</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="6" column="4" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Horizontal</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>40</width>
-               <height>20</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>NetBIOS</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <property name="horizontalSpacing" >
-            <number>6</number>
-           </property>
-           <property name="verticalSpacing" >
-            <number>6</number>
-           </property>
-           <item row="4" column="0" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>280</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="2" column="0" >
-            <widget class="QLabel" name="TextLabel3_4" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>NetBIOS sc&amp;ope:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>netbiosScopeEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="0" >
-            <widget class="QLabel" name="TextLabel3_2" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>&amp;NetBIOS aliases:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>netbiosAliasesEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="0" colspan="2" >
-            <widget class="QCheckBox" name="disableNetbiosChk" >
-             <property name="text" >
-              <string>Disab&amp;le netbios</string>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="0" >
-            <widget class="QLabel" name="TextLabel5_4_2" >
-             <property name="text" >
-              <string>Na&amp;me resolve order:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>nameResolveOrderEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="1" >
-            <widget class="KLineEdit" name="netbiosScopeEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="1" >
-            <widget class="KLineEdit" name="netbiosAliasesEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="1" >
-            <widget class="QLineEdit" name="nameResolveOrderEdit" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Fixed" hsizetype="Expanding" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="minimumSize" >
-              <size>
-               <width>150</width>
-               <height>0</height>
-              </size>
-             </property>
-             <property name="text" >
-              <string>lmhosts host wins bcast</string>
-             </property>
-            </widget>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>VFS</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <property name="spacing" >
-            <number>6</number>
-           </property>
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <item>
-            <widget class="QCheckBox" name="hostMsdfsChk" >
-             <property name="text" >
-              <string>H&amp;ost msdfs</string>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>0</width>
-               <height>30</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="TabPage" >
-          <attribute name="title" >
-           <string>LDAP</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <item row="0" column="0" >
-            <widget class="QLabel" name="TextLabel3_2_2" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP suffi&amp;x:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapSuffixEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="1" colspan="3" >
-            <widget class="KLineEdit" name="ldapSuffixEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="0" >
-            <widget class="QLabel" name="TextLabel3_2_2_2" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP machine suffix:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapMachineSuffixEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="1" colspan="3" >
-            <widget class="KLineEdit" name="ldapMachineSuffixEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="0" >
-            <widget class="QLabel" name="TextLabel3_2_2_2_2" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP user suffix:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapUserSuffixEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="1" colspan="3" >
-            <widget class="KLineEdit" name="ldapUserSuffixEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="0" >
-            <widget class="QLabel" name="TextLabel3_2_2_2_3" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP &amp;group suffix:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapGroupSuffixEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="1" colspan="3" >
-            <widget class="KLineEdit" name="ldapGroupSuffixEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="0" >
-            <widget class="QLabel" name="TextLabel3_2_2_2_4" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP idmap suffix:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapIdmapSuffixEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="1" colspan="3" >
-            <widget class="KLineEdit" name="ldapIdmapSuffixEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="0" >
-            <widget class="QLabel" name="TextLabel3_2_2_2_5" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP filter:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapFilterEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="1" colspan="3" >
-            <widget class="KLineEdit" name="ldapFilterEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="0" >
-            <widget class="QLabel" name="TextLabel3_2_2_2_6" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP ad&amp;min dn:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapAdminDnEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="1" colspan="3" >
-            <widget class="KLineEdit" name="ldapAdminDnEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="7" column="0" >
-            <widget class="QLabel" name="TextLabel3_4_2" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>Idmap bac&amp;kend:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>idmapBackendEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="7" column="1" colspan="3" >
-            <widget class="KLineEdit" name="idmapBackendEdit" >
-             <property name="font" >
-              <font/>
-             </property>
-            </widget>
-           </item>
-           <item row="8" column="0" >
-            <widget class="QLabel" name="TextLabel3_4_2_2" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>LDAP replication sleep:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>idmapBackendEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="8" column="1" >
-            <widget class="KIntSpinBox" name="ldapReplicationSleepSpin" >
-             <property name="maximum" >
-              <number>2147483647</number>
-             </property>
-            </widget>
-           </item>
-           <item row="8" column="2" >
-            <widget class="QLabel" name="textLabel3_3" >
-             <property name="text" >
-              <string>milliseconds</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-            </widget>
-           </item>
-           <item row="8" column="3" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Horizontal</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>40</width>
-               <height>20</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="9" column="0" >
-            <widget class="QLabel" name="TextLabel3_5_4" >
-             <property name="text" >
-              <string>&amp;LDAP ssl:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapSslCombo</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="9" column="1" >
-            <widget class="QComboBox" name="ldapSslCombo" >
-             <item>
-              <property name="text" >
-               <string>Off</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>Start_tls</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>On</string>
-              </property>
-             </item>
-            </widget>
-           </item>
-           <item row="10" column="0" >
-            <widget class="QLabel" name="TextLabel3_5_4_2" >
-             <property name="text" >
-              <string>LDAP s&amp;ync:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>ldapSyncCombo</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="10" column="1" >
-            <widget class="QComboBox" name="ldapSyncCombo" >
-             <item>
-              <property name="text" >
-               <string>Yes</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>No</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>Only</string>
-              </property>
-             </item>
-            </widget>
-           </item>
-           <item row="11" column="0" >
-            <widget class="QCheckBox" name="ldapDeleteDnChk" >
-             <property name="text" >
-              <string>LDAP delete d&amp;n</string>
-             </property>
-            </widget>
-           </item>
-           <item row="12" column="0" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>130</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="TabPage" >
-          <attribute name="title" >
-           <string>Commands</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <property name="horizontalSpacing" >
-            <number>6</number>
-           </property>
-           <property name="verticalSpacing" >
-            <number>6</number>
-           </property>
-           <item row="0" column="0" >
-            <widget class="QLabel" name="TextLabel1_5" >
-             <property name="text" >
-              <string>Add share c&amp;ommand:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>addShareCommandEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="0" >
-            <widget class="QLabel" name="TextLabel2_2" >
-             <property name="text" >
-              <string>Change share command:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>changeShareCommandEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="0" >
-            <widget class="QLabel" name="TextLabel3_3" >
-             <property name="text" >
-              <string>De&amp;lete share command:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>deleteShareCommandEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="0" >
-            <widget class="QLabel" name="TextLabel10" >
-             <property name="text" >
-              <string>Messa&amp;ge command:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>messageCommandEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="0" >
-            <widget class="QLabel" name="TextLabel11" >
-             <property name="text" >
-              <string>Dfree co&amp;mmand:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>dfreeCommandEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="0" >
-            <widget class="QLabel" name="TextLabel1_5_2" >
-             <property name="text" >
-              <string>Set &amp;quota command:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>setQuotaCommandEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="0" >
-            <widget class="QLabel" name="TextLabel2_2_3" >
-             <property name="text" >
-              <string>Get quota command:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>getQuotaCommandEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="8" column="0" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>230</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="7" column="0" >
-            <widget class="QLabel" name="TextLabel20" >
-             <property name="text" >
-              <string>Pa&amp;nic action:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>panicActionEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="1" >
-            <widget class="QLineEdit" name="messageCommandEdit" />
-           </item>
-           <item row="4" column="1" >
-            <widget class="QLineEdit" name="dfreeCommandEdit" />
-           </item>
-           <item row="5" column="1" >
-            <widget class="QLineEdit" name="setQuotaCommandEdit" />
-           </item>
-           <item row="6" column="1" >
-            <widget class="QLineEdit" name="getQuotaCommandEdit" />
-           </item>
-           <item row="7" column="1" >
-            <widget class="QLineEdit" name="panicActionEdit" />
-           </item>
-           <item row="2" column="1" >
-            <widget class="QLineEdit" name="deleteShareCommandEdit" />
-           </item>
-           <item row="1" column="1" >
-            <widget class="QLineEdit" name="changeShareCommandEdit" />
-           </item>
-           <item row="0" column="1" >
-            <widget class="QLineEdit" name="addShareCommandEdit" />
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Misc</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <widget class="QGroupBox" name="groupBox12" >
-             <property name="title" >
-              <string>Miscellaneous</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" >
-               <widget class="QCheckBox" name="CheckBox68" >
-                <property name="text" >
-                 <string>Hide &amp;local users</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel9" >
-                <property name="text" >
-                 <string>Default service:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>defaultServiceEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" colspan="3" >
-               <widget class="QLineEdit" name="defaultServiceEdit" />
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel17" >
-                <property name="text" >
-                 <string>Time &amp;offset:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>timeOffsetSpin</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KIntSpinBox" name="timeOffsetSpin" >
-                <property name="minimum" >
-                 <number>0</number>
-                </property>
-                <property name="maximum" >
-                 <number>1440</number>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="2" >
-               <widget class="QLabel" name="TextLabel18" >
-                <property name="text" >
-                 <string comment="minurtes" >Min</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="3" >
-               <spacer>
-                <property name="orientation" >
-                 <enum>Qt::Horizontal</enum>
-                </property>
-                <property name="sizeHint" >
-                 <size>
-                  <width>40</width>
-                  <height>20</height>
-                 </size>
-                </property>
-               </spacer>
-              </item>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel13" >
-                <property name="text" >
-                 <string>Remote a&amp;nnounce:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>remoteAnnounceEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" colspan="3" >
-               <widget class="QLineEdit" name="remoteAnnounceEdit" />
-              </item>
-              <item row="4" column="0" >
-               <widget class="QLabel" name="TextLabel19" >
-                <property name="text" >
-                 <string>Source environment:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>sourceEnvironmentEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="1" colspan="3" >
-               <widget class="QLineEdit" name="sourceEnvironmentEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox11" >
-             <property name="title" >
-              <string>NIS</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="0" column="0" >
-               <widget class="QCheckBox" name="nisHomedirChk" >
-                <property name="text" >
-                 <string>NIS homedir</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel16" >
-                <property name="text" >
-                 <string>Homedir map:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>homedirMapEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="QLineEdit" name="homedirMapEdit" />
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox9" >
-             <property name="title" >
-              <string>UTMP</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel7_3" >
-                <property name="text" >
-                 <string>Utmp director&amp;y:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>utmpDirectoryUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KUrlRequester" name="wtmpDirectoryUrlRq" />
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel8_3" >
-                <property name="text" >
-                 <string>&amp;Wtmp directory:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>wtmpDirectoryUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KUrlRequester" name="utmpDirectoryUrlRq" />
-              </item>
-              <item row="0" column="0" >
-               <widget class="QCheckBox" name="CheckBox51" >
-                <property name="text" >
-                 <string>Ut&amp;mp</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>40</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Debug</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <property name="spacing" >
-            <number>6</number>
-           </property>
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <item>
-            <widget class="QCheckBox" name="ntStatusSupportChk" >
-             <property name="text" >
-              <string>&amp;NT status support</string>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <widget class="QCheckBox" name="ntSmbSupportChk" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>NT S&amp;MB support</string>
-             </property>
-             <property name="checked" >
-              <bool>true</bool>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <widget class="QCheckBox" name="ntPipeSupportChk" >
-             <property name="font" >
-              <font/>
-             </property>
-             <property name="text" >
-              <string>NT pipe supp&amp;ort</string>
-             </property>
-             <property name="checked" >
-              <bool>true</bool>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>320</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-        </widget>
-       </item>
-      </layout>
-     </widget>
-    </widget>
-   </item>
-  </layout>
- </widget>
-  <customwidgets>
-  <customwidget>
-   <class>Q3ButtonGroup</class>
-   <extends>Q3GroupBox</extends>
-   <header>Qt3Support/Q3ButtonGroup</header>
-   <container>1</container>
-  </customwidget>
-  <customwidget>
-   <class>K3ListView</class>
-   <extends>Q3ListView</extends>
-   <header>k3listview.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KIntSpinBox</class>
-   <extends>QSpinBox</extends>
-   <header>knuminput.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KLineEdit</class>
-   <extends>QLineEdit</extends>
-   <header>klineedit.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KUrlLabel</class>
-   <extends>QLabel</extends>
-   <header>kurllabel.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KUrlRequester</class>
-   <extends>QFrame</extends>
-   <header>kurlrequester.h</header>
-  </customwidget>
- </customwidgets>
- <tabstops>
-  <tabstop>ntStatusSupportChk</tabstop>
-  <tabstop>ntSmbSupportChk</tabstop>
-  <tabstop>ntPipeSupportChk</tabstop>
-  <tabstop>CheckBox68</tabstop>
-  <tabstop>defaultServiceEdit</tabstop>
-  <tabstop>timeOffsetSpin</tabstop>
-  <tabstop>remoteAnnounceEdit</tabstop>
-  <tabstop>sourceEnvironmentEdit</tabstop>
-  <tabstop>nisHomedirChk</tabstop>
-  <tabstop>homedirMapEdit</tabstop>
-  <tabstop>CheckBox51</tabstop>
-  <tabstop>utmpDirectoryUrlRq</tabstop>
-  <tabstop>wtmpDirectoryUrlRq</tabstop>
-  <tabstop>advancedTab</tabstop>
-  <tabstop>addShareCommandEdit</tabstop>
-  <tabstop>changeShareCommandEdit</tabstop>
-  <tabstop>deleteShareCommandEdit</tabstop>
-  <tabstop>messageCommandEdit</tabstop>
-  <tabstop>dfreeCommandEdit</tabstop>
-  <tabstop>setQuotaCommandEdit</tabstop>
-  <tabstop>getQuotaCommandEdit</tabstop>
-  <tabstop>panicActionEdit</tabstop>
-  <tabstop>ldapSuffixEdit</tabstop>
-  <tabstop>ldapMachineSuffixEdit</tabstop>
-  <tabstop>ldapUserSuffixEdit</tabstop>
-  <tabstop>ldapGroupSuffixEdit</tabstop>
-  <tabstop>ldapIdmapSuffixEdit</tabstop>
-  <tabstop>ldapFilterEdit</tabstop>
-  <tabstop>ldapAdminDnEdit</tabstop>
-  <tabstop>idmapBackendEdit</tabstop>
-  <tabstop>ldapSslCombo</tabstop>
-  <tabstop>ldapSyncCombo</tabstop>
-  <tabstop>ldapDeleteDnChk</tabstop>
-  <tabstop>hostMsdfsChk</tabstop>
-  <tabstop>disableNetbiosChk</tabstop>
-  <tabstop>netbiosAliasesEdit</tabstop>
-  <tabstop>netbiosScopeEdit</tabstop>
-  <tabstop>nameResolveOrderEdit</tabstop>
-  <tabstop>winbindUidEdit</tabstop>
-  <tabstop>winbindGidEdit</tabstop>
-  <tabstop>templateHomedirEdit</tabstop>
-  <tabstop>templateShellEdit</tabstop>
-  <tabstop>winbindSeparatorEdit</tabstop>
-  <tabstop>templatePrimaryGroupEdit</tabstop>
-  <tabstop>winbindCacheTimeSpin</tabstop>
-  <tabstop>aclCompatibilityCombo</tabstop>
-  <tabstop>winbindEnumUsersChk</tabstop>
-  <tabstop>winbindEnumGroupsChk</tabstop>
-  <tabstop>winbindUseDefaultDomainChk</tabstop>
-  <tabstop>winbindEnableLocalAccountsChk</tabstop>
-  <tabstop>winbindTrustedDomainsOnlyChk</tabstop>
-  <tabstop>enhancedBrowsingChk</tabstop>
-  <tabstop>browseListChk</tabstop>
-  <tabstop>lmAnnounceCombo</tabstop>
-  <tabstop>lmIntervalSpin</tabstop>
-  <tabstop>remoteBrowseSyncEdit</tabstop>
-  <tabstop>preloadEdit</tabstop>
-  <tabstop>timeServerChk</tabstop>
-  <tabstop>largeReadWriteChk</tabstop>
-  <tabstop>unixExtensionsChk</tabstop>
-  <tabstop>readBmpxChk</tabstop>
-  <tabstop>announceAsCombo</tabstop>
-  <tabstop>announceVersionEdit</tabstop>
-  <tabstop>protocolCombo</tabstop>
-  <tabstop>maxProtocolCombo</tabstop>
-  <tabstop>minProtocolCombo</tabstop>
-  <tabstop>maxMuxSpin</tabstop>
-  <tabstop>maxTtlSpin</tabstop>
-  <tabstop>smbPortsEdit</tabstop>
-  <tabstop>sslChk</tabstop>
-  <tabstop>sslVersionCombo</tabstop>
-  <tabstop>sslCompatibilityChk</tabstop>
-  <tabstop>sslHostsEdit</tabstop>
-  <tabstop>sslHostsResignEdit</tabstop>
-  <tabstop>sslCACertDirUrlRq</tabstop>
-  <tabstop>sslCACertFileUrlRq</tabstop>
-  <tabstop>sslEgdSocketEdit</tabstop>
-  <tabstop>sslEntropyFileUrlRq</tabstop>
-  <tabstop>sslEntropyBytesSpin</tabstop>
-  <tabstop>sslCiphersEdit</tabstop>
-  <tabstop>sslRequireServercertChk</tabstop>
-  <tabstop>sslServerCertUrlRq</tabstop>
-  <tabstop>sslServerKeyUrlRq</tabstop>
-  <tabstop>sslRequireClientcertChk</tabstop>
-  <tabstop>sslClientCertUrlRq</tabstop>
-  <tabstop>sslClientKeyUrlRq</tabstop>
-  <tabstop>socketAddressEdit</tabstop>
-  <tabstop>TCP_NODELAYChk</tabstop>
-  <tabstop>IPTOS_LOWDELAYChk</tabstop>
-  <tabstop>IPTOS_THROUGHPUTChk</tabstop>
-  <tabstop>SO_KEEPALIVEChk</tabstop>
-  <tabstop>SO_REUSEADDRChk</tabstop>
-  <tabstop>SO_BROADCASTChk</tabstop>
-  <tabstop>SO_SNDBUFChk</tabstop>
-  <tabstop>SO_SNDBUFSpin</tabstop>
-  <tabstop>SO_RCVBUFChk</tabstop>
-  <tabstop>SO_RCVBUFSpin</tabstop>
-  <tabstop>SO_SNDLOWATChk</tabstop>
-  <tabstop>SO_SNDLOWATSpin</tabstop>
-  <tabstop>SO_RCVLOWATChk</tabstop>
-  <tabstop>SO_RCVLOWATSpin</tabstop>
-  <tabstop>addUserScriptEdit</tabstop>
-  <tabstop>addGroupScriptEdit</tabstop>
-  <tabstop>addUserToGroupScriptEdit</tabstop>
-  <tabstop>addMachineScriptEdit</tabstop>
-  <tabstop>shutdownScriptEdit</tabstop>
-  <tabstop>abortShutdownScriptEdit</tabstop>
-  <tabstop>SetPrimaryGroupScriptEdit</tabstop>
-  <tabstop>deleteUserScriptEdit</tabstop>
-  <tabstop>deleteGroupScriptEdit</tabstop>
-  <tabstop>deleteUserFromGroupScriptEdit</tabstop>
-  <tabstop>logonScriptEdit</tabstop>
-  <tabstop>logonDriveEdit</tabstop>
-  <tabstop>logonPathUrlRq</tabstop>
-  <tabstop>logonHomeUrlRq</tabstop>
-  <tabstop>unicodeChk</tabstop>
-  <tabstop>displayCharsetEdit</tabstop>
-  <tabstop>unixCharsetEdit</tabstop>
-  <tabstop>dosCharsetEdit</tabstop>
-  <tabstop>characterSetEdit</tabstop>
-  <tabstop>clientCodePageEdit</tabstop>
-  <tabstop>codePageDirUrlRq</tabstop>
-  <tabstop>codingSystemEdit</tabstop>
-  <tabstop>validCharsEdit</tabstop>
-  <tabstop>mainTab</tabstop>
-  <tabstop>configUrlRq</tabstop>
-  <tabstop>loadBtn</tabstop>
-  <tabstop>workgroupEdit</tabstop>
-  <tabstop>netbiosNameEdit</tabstop>
-  <tabstop>serverStringEdit</tabstop>
-  <tabstop>shareRadio</tabstop>
-  <tabstop>userRadio</tabstop>
-  <tabstop>serverRadio</tabstop>
-  <tabstop>domainRadio</tabstop>
-  <tabstop>adsRadio</tabstop>
-  <tabstop>passwordServerEdit</tabstop>
-  <tabstop>realmEdit</tabstop>
-  <tabstop>guestAccountCombo</tabstop>
-  <tabstop>allowGuestLoginsChk</tabstop>
-  <tabstop>shareListView</tabstop>
-  <tabstop>editDefaultShareBtn</tabstop>
-  <tabstop>addShareBtn</tabstop>
-  <tabstop>editShareBtn</tabstop>
-  <tabstop>removeShareBtn</tabstop>
-  <tabstop>printerListView</tabstop>
-  <tabstop>editDefaultPrinterBtn</tabstop>
-  <tabstop>addPrinterBtn</tabstop>
-  <tabstop>editPrinterBtn</tabstop>
-  <tabstop>removePrinterBtn</tabstop>
-  <tabstop>sambaUsersListView</tabstop>
-  <tabstop>addSambaUserBtn</tabstop>
-  <tabstop>removeSambaUserBtn</tabstop>
-  <tabstop>unixUsersListView</tabstop>
-  <tabstop>sambaUserPasswordBtn</tabstop>
-  <tabstop>joinADomainBtn</tabstop>
-  <tabstop>tabWidget4</tabstop>
-  <tabstop>mapToGuestCombo</tabstop>
-  <tabstop>interfacesEdit</tabstop>
-  <tabstop>bindInterfacesOnlyChk</tabstop>
-  <tabstop>rootDirectoryEdit</tabstop>
-  <tabstop>authMethodsEdit</tabstop>
-  <tabstop>hostsEquivUrlRq</tabstop>
-  <tabstop>privateDirUrlRq</tabstop>
-  <tabstop>algorithmicRidBaseSpin</tabstop>
-  <tabstop>obeyPamRestrictionsChk</tabstop>
-  <tabstop>pamPasswordChangeChk</tabstop>
-  <tabstop>allowTrustedDomainsChk</tabstop>
-  <tabstop>paranoidServerSecurityChk</tabstop>
-  <tabstop>encryptPasswordsChk</tabstop>
-  <tabstop>smbPasswdFileUrlRq</tabstop>
-  <tabstop>passdbBackendEdit</tabstop>
-  <tabstop>passwdChatEdit</tabstop>
-  <tabstop>passwdChatDebugChk</tabstop>
-  <tabstop>passwdProgramUrlRq</tabstop>
-  <tabstop>unixPasswordSyncChk</tabstop>
-  <tabstop>nullPasswordsChk</tabstop>
-  <tabstop>passwordLevelSpin</tabstop>
-  <tabstop>minPasswdLengthSpin</tabstop>
-  <tabstop>machinePasswordTimeoutSpin</tabstop>
-  <tabstop>updateEncryptedChk</tabstop>
-  <tabstop>usernameLevelSpin</tabstop>
-  <tabstop>usernameMapUrlRq</tabstop>
-  <tabstop>hideLocalUsersChk</tabstop>
-  <tabstop>restrictAnonymousChk</tabstop>
-  <tabstop>useRhostsChk</tabstop>
-  <tabstop>lanmanAuthChk</tabstop>
-  <tabstop>ntlmAuthChk</tabstop>
-  <tabstop>useSpnegoChk</tabstop>
-  <tabstop>serverSchannelCombo</tabstop>
-  <tabstop>serverSigningCombo</tabstop>
-  <tabstop>clientLanmanAuthChk</tabstop>
-  <tabstop>clientPlaintextAuthChk</tabstop>
-  <tabstop>clientNTLMv2AuthChk</tabstop>
-  <tabstop>clientUseSpnegoChk</tabstop>
-  <tabstop>clientSchannelCombo</tabstop>
-  <tabstop>clientSigningCombo</tabstop>
-  <tabstop>logFileUrlRq</tabstop>
-  <tabstop>logLevelEdit</tabstop>
-  <tabstop>maxLogSizeSpin</tabstop>
-  <tabstop>syslogSpin</tabstop>
-  <tabstop>syslogOnlyChk</tabstop>
-  <tabstop>statusChk</tabstop>
-  <tabstop>timestampChk</tabstop>
-  <tabstop>microsecondsChk</tabstop>
-  <tabstop>debugPidChk</tabstop>
-  <tabstop>debugUidChk</tabstop>
-  <tabstop>preloadModulesEdit</tabstop>
-  <tabstop>getwdCacheChk</tabstop>
-  <tabstop>useMmapChk</tabstop>
-  <tabstop>kernelChangeNotifyChk</tabstop>
-  <tabstop>hostnameLookupsChk</tabstop>
-  <tabstop>readRawChk</tabstop>
-  <tabstop>writeRawChk</tabstop>
-  <tabstop>changeNotifyTimeoutSpin</tabstop>
-  <tabstop>deadtimeSpin</tabstop>
-  <tabstop>keepaliveSpin</tabstop>
-  <tabstop>lpqCacheTimeSpin</tabstop>
-  <tabstop>nameCacheTimeoutSpin</tabstop>
-  <tabstop>maxDiskSizeSpin</tabstop>
-  <tabstop>readSizeSpin</tabstop>
-  <tabstop>statCacheSizeSpin</tabstop>
-  <tabstop>maxXmitSpin</tabstop>
-  <tabstop>maxSmbdProcessesSpin</tabstop>
-  <tabstop>maxOpenFilesSpin</tabstop>
-  <tabstop>totalPrintJobsSpin</tabstop>
-  <tabstop>printcapNameUrlRq</tabstop>
-  <tabstop>os2DriverMapUrlRq</tabstop>
-  <tabstop>printerDriverFileUrlRq</tabstop>
-  <tabstop>addprinterCommandEdit</tabstop>
-  <tabstop>deleteprinterCommandEdit</tabstop>
-  <tabstop>enumportsCommandEdit</tabstop>
-  <tabstop>loadPrintersChk</tabstop>
-  <tabstop>disableSpoolssChk</tabstop>
-  <tabstop>showAddPrinterWizardChk</tabstop>
-  <tabstop>preferredMasterChk</tabstop>
-  <tabstop>localMasterChk</tabstop>
-  <tabstop>domainMasterChk</tabstop>
-  <tabstop>domainLogonsChk</tabstop>
-  <tabstop>osLevelSpin</tabstop>
-  <tabstop>domainAdminGroupEdit</tabstop>
-  <tabstop>domainGuestGroupEdit</tabstop>
-  <tabstop>noWinsSupportRadio</tabstop>
-  <tabstop>dnsProxyChk</tabstop>
-  <tabstop>winsHookEdit</tabstop>
-  <tabstop>maxWinsTtlSpin</tabstop>
-  <tabstop>minWinsTtlSpin</tabstop>
-  <tabstop>winsServerEdit</tabstop>
-  <tabstop>winsProxyChk</tabstop>
-  <tabstop>winsPartnersEdit</tabstop>
-  <tabstop>stripDotChk</tabstop>
-  <tabstop>mangledStackSpin</tabstop>
-  <tabstop>manglePrefixSpin</tabstop>
-  <tabstop>statCacheChk</tabstop>
-  <tabstop>kernelOplocksChk</tabstop>
-  <tabstop>lockDirectoryUrlRq</tabstop>
-  <tabstop>pidDirectoryUrlRq</tabstop>
-  <tabstop>lockSpinCountSpin</tabstop>
-  <tabstop>lockSpinTimeSpin</tabstop>
-  <tabstop>oplockBreakWaitTimeSpin</tabstop>
- </tabstops>
- <includes>
-  <include location="global" >q3ptrlist.h</include>
-  <include location="global" >ui_share.h</include>
-  <include location="global" >knuminput.h</include>
-  <include location="local" >knuminput.h</include>
- </includes>
- <resources/>
- <connections>
-  <connection>
-   <sender>shareListView</sender>
-   <signal>doubleClicked(Q3ListViewItem*)</signal>
-   <receiver>editShareBtn</receiver>
-   <slot>animateClick()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>printerListView</sender>
-   <signal>doubleClicked(Q3ListViewItem*)</signal>
-   <receiver>editPrinterBtn</receiver>
-   <slot>animateClick()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>KUrlLabel1</sender>
-   <signal>leftClickedUrl()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>KUrlLabel1_leftClickedURL()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>serverRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>domainRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>lmAnnounceCombo</sender>
-   <signal>activated(int)</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>lmAnnounceCombo_activated(int)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>allowGuestLoginsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>allowGuestLoginsChk_toggled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>allowGuestLoginsChk</sender>
-   <signal>pressed()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>changedSlot()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>SO_SNDBUFChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>SO_SNDBUFSpin</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>SO_RCVBUFChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>SO_RCVBUFSpin</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>SO_SNDLOWATChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>SO_SNDLOWATSpin</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>SO_RCVLOWATChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>SO_RCVLOWATSpin</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>shareRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>allowGuestLoginsChk</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>userRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>allowGuestLoginsChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>serverRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>allowGuestLoginsChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>domainRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>allowGuestLoginsChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>shareRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>changedSlot()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>shareRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>shareRadio_clicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>userRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>changedSlot()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>userRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>userRadio_clicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>serverRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>serverRadio_clicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>serverRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>changedSlot()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>domainRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>changedSlot()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>domainRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>domainRadio_clicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>passwordServerEdit</sender>
-   <signal>textChanged(QString)</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>changedSlot()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>sslChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>SSLFrame</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>timestampChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>microsecondsChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>adsRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>adsRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerLabel</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>adsRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>realmLabel</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>adsRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>realmEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>allowGuestLoginsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>TextLabel6_5</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>allowGuestLoginsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>guestAccountCombo</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>domainRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerLabel</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>domainRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>serverRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerLabel</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>serverRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>passwordServerEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>adsRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>allowGuestLoginsChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>shareRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>TextLabel6_5</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>shareRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>guestAccountCombo</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>winsSupportRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>groupBox35</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>otherWinsRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>groupBox36</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>winsSupportRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>dnsProxyChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>winsSupportRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>winsHookEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>winsSupportRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>winsHookEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>winsSupportRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>maxWinsTtlSpin</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>winsSupportRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>minWinsTtlSpin</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>otherWinsRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>winsServerEdit</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>winsSupportRadio</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>winsHookLbl</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>adsRadio</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmInterface</receiver>
-   <slot>adsRadioClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
- </connections>
-</ui>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/kcminterface.ui.h filesharing//advanced/kcm_sambaconf/kcminterface.ui.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.ui.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcminterface.ui.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,132 +0,0 @@
-/****************************************************************************
-** ui.h extension file, included from the uic-generated form implementation.
-**
-** If you wish to add, delete or rename slots use Qt Designer which will
-** update this file, preserving your code. Create an init() slot in place of
-** a constructor, and a destroy() slot in place of a destructor.
-*****************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software Foundation,   *
- *  Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA         *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef KCM_SAMBACONF_KCMINTERFACE_UI_H
-#define KCM_SAMBACONF_KCMINTERFACE_UI_H
-
-void KcmInterface::init()
-{
-    addShareBtn->setIconSet(SmallIconSet("document-new"));
-    editShareBtn->setIconSet(SmallIconSet("document-properties"));
-    removeShareBtn->setIconSet(SmallIconSet("edit-delete"));
-    editDefaultShareBtn->setIconSet(SmallIconSet("queue"));
-    
-    addPrinterBtn->setIconSet(SmallIconSet("document-new"));
-    editPrinterBtn->setIconSet(SmallIconSet("document-properties"));
-    removePrinterBtn->setIconSet(SmallIconSet("edit-delete"));
-    editDefaultPrinterBtn->setIconSet(SmallIconSet("printer-multiple"));
-
-    advancedWarningPixLbl->setPixmap(SmallIcon("dialog-warning"));
-}
-
-
-void KcmInterface::changedSlot()
-{
-    emit changed();
-}
-
-
-void KcmInterface::securityLevelCombo_activated( int i )
-{
-   passwordServerEdit->setDisabled(i<2);
-   allowGuestLoginsChk->setDisabled(i==0);
-}
-
-
-void KcmInterface::shareRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>share</i> security level if you have a home network "
-				     "or a small office network.<br /> It allows everyone to read the list "
-		        	     "of all your shared directories and printers before a login is required."));
-}
-
-
-void KcmInterface::userRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>user</i> security level if you have a bigger network "
-				     "and you do not want to allow everyone to read your list of shared "
-				     "directories and printers without a login.<br /><br />"
-				     "If you want to run your Samba server as a <b>Primary Domain controller</b> (PDC) "
-				     "you also have to set this option."));
-}
-
-void KcmInterface::serverRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>server</i> security level if you have a big network "
-			             "and the samba server should validate the username/password "
-			             "by passing it to another SMB server, such as an NT box."));
-}
-
-
-void KcmInterface::domainRadio_clicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>domain</i> security level if you have a big network "
-				     "and the samba server should validate the username/password "
-				     "by passing it to a Windows NT Primary or Backup Domain Controller."));
-}
-
-
-void KcmInterface::adsRadioClicked()
-{
-  securityLevelHelpLbl->setText(i18n("Use the <i>ADS</i> security level if you have a big network "
-				     "and the samba server should act as a domain member in an ADS realm."));
-}
-
-
-void KcmInterface::KUrlLabel1_leftClickedURL()
-{
-    K3Process* p = new K3Process();
-
-    *p << "konqueror";
-    *p << "man:smb.conf";
-    p->start();
-}
-
-
-void KcmInterface::lmAnnounceCombo_activated( int i)
-{
-    lmIntervalSpin->setEnabled(i==0);
-}
-
-
-void KcmInterface::allowGuestLoginsChk_toggled( bool b)
-{
-    int i = 0;
-    if (b)
-	i = 1;
-
-    mapToGuestCombo->setCurrentItem(i);
-}
-
-
-void KcmInterface::mapToGuestCombo_activated( int i)
-{
-    allowGuestLoginsChk->setChecked(i>0);
-}
-
-#endif // KCM_SAMBACONF_KCMINTERFACE_UI_H
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/kcmsambaconf.cpp filesharing//advanced/kcm_sambaconf/kcmsambaconf.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcmsambaconf.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcmsambaconf.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,1504 +0,0 @@
-/***************************************************************************
-                          kcmsambaconf.cpp  -  description
-                            -------------------
-    begin                : Mon Apr  8 13:35:56 CEST 2002
-    copyright            : (C) 2002 by Christian Nitschkowski,
-    email                : segfault_ii@web.de
-
-    copyright            : (C) 2002-2004 by Jan Schaefer
-    email                : janschaefer@users.sourceforge.net
-***************************************************************************/
-
-/******************************************************************************
-*                                                                            *
-*  This file is part of KSambaPlugin.                                        *
-*                                                                            *
-*  KSambaPlugin is free software; you can redistribute it and/or modify      *
-*  it under the terms of the GNU General Public License as published by      *
-*  the Free Software Foundation; either version 2 of the License, or         *
-*  (at your option) any later version.                                       *
-*                                                                            *
-*  KSambaPlugin is distributed in the hope that it will be useful,           *
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
-*  GNU General Public License for more details.                              *
-*                                                                            *
-*  You should have received a copy of the GNU General Public License         *
-*  along with KSambaPlugin; if not, write to the Free Software                     *
-*  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
-*                                                                            *
-******************************************************************************/
-
-#include <assert.h>
-#include <unistd.h>
-
-#include <qlayout.h>
-#include <q3groupbox.h>
-#include <qpainter.h>
-#include <qcheckbox.h>
-#include <q3listbox.h>
-#include <qradiobutton.h>
-#include <q3buttongroup.h>
-#include <qtabwidget.h>
-#include <qtabbar.h>
-#include <q3vbox.h>
-#include <qlabel.h>
-//Added by qt3to4:
-#include <QPixmap>
-#include <Q3PtrList>
-#include <QHBoxLayout>
-#include <QBoxLayout>
-#include <QVBoxLayout>
-
-#include <klocale.h>
-#include <kglobal.h>
-#include <klineedit.h>
-#include <kurlrequester.h>
-#include <kcombobox.h>
-#include <kdebug.h>
-#include <kiconloader.h>
-#include <knuminput.h>
-#include <krestrictedline.h>
-#include <kmessagebox.h>
-#include <KPageWidget>
-#include <k3listview.h>
-#include <kconfig.h>
-#include <kcomponentdata.h>
-#include <k3passworddialog.h>
-
-#include "sambashare.h"
-#include "sambafile.h"
-#include "sharedlgimpl.h"
-#include "dictmanager.h"
-#include "kcmsambaconf.h"
-#include "smbpasswdfile.h"
-#include "passwd.h"
-#include "qmultichecklistitem.h"
-#include "joindomaindlg.h"
-#include "smbconfconfigwidget.h"
-
-#define DEBUG 5009
-
-#define COL_DISABLED 2
-#define COL_NOPASSWORD 3
-
-
-ShareListViewItem::ShareListViewItem(Q3ListView * parent, SambaShare* share)
-  : Q3ListViewItem(parent)
-{
-  setShare(share);
-}
-
-SambaShare* ShareListViewItem::getShare() const
-{
-  return _share;
-}
-
-void ShareListViewItem::setShare(SambaShare* share)
-{
-  assert(share);
-  _share = share;
-  updateShare();
-}
-
-void ShareListViewItem::updateShare()
-{
-  assert(_share);
-
-  setText(0,_share->getName());
-  setText(2,_share->getValue("comment"));
-
-  if (_share->isPrinter())
-  {
-    if ( _share->getName() == "printers" )
-      setPixmap(0,SmallIcon("printer-multiple"));
-    else
-      setPixmap(0,SmallIcon("printer"));
-    setText(1,_share->getValue("printer name"));
-  }
-  else
-  {
-    if ( _share->getName() == "homes" )
-      setPixmap(0,SmallIcon("user-home"));
-    else
-      setPixmap(0,SmallIcon("folder"));
-    setText(1,_share->getValue("path"));
-  }
-
-  setPixmap(3,createPropertyPixmap());
-}
-
-QPixmap ShareListViewItem::createPropertyPixmap()
-{
-  // Create a big pixmap which holds the
-  // icons which are needed
-
-  int numberOfPix = 4; // the max number of pixmaps to join
-
-  int w = 16; // Standard size of one pixmap
-  int margin = 4; // Margin between pixmaps
-  int h = 16;
-
-  int totalWidth = (w+margin)*numberOfPix;
-
-  QPixmap pix(totalWidth,h);
-
-  pix.fill(Qt::transparent);
-
-  QPainter p(&pix);
-
-  int x = 0;
-
-  if (_share->getBoolValue("public"))
-  {
-    p.drawPixmap(x,0,SmallIcon("network-wired"));
-    x = x+w+margin;
-  }
-
-  if (!_share->getBoolValue("read only"))
-  {
-    p.drawPixmap(x,0,SmallIcon("document-properties"));
-    x = x+w+margin;
-  }
-
-  if (_share->getBoolValue("printable"))
-  {
-    p.drawPixmap(x,0,SmallIcon("document-print"));
-    x = x+w+margin;
-  }
-
-  if (_share->getBoolValue("browseable"))
-  {
-    p.drawPixmap(x,0,SmallIcon("system-run"));
-    x = x+w+margin;
-  }
-
-  if (!_share->getBoolValue("available"))
-    p.drawPixmap(x,0,SmallIcon("dialog-error"));
-
-
-  p.end();
-
-  return QPixmap(pix);
-}
-
-KcmSambaConf::KcmSambaConf(const KComponentData &inst,QWidget *parent, const char *name)
-  : KCModule(inst,parent)
-{
-  _dictMngr = 0L;
-  _sambaFile = 0L;
-  m_smbConfConfigWidget = 0L;
-
-
-  QBoxLayout * l = new QHBoxLayout( this );
-  l->setAutoAdd( true );
-
-  QString smbFile = SambaFile::findSambaConf();
-  if (smbFile.isNull()) {
-     createSmbConfigWidget();
-     return;
-  }
-
-  slotSpecifySmbConf(smbFile);
-
-}
-
-
-KcmSambaConf::~KcmSambaConf() {
-  delete _dictMngr;
-}
-
-void KcmSambaConf::createSmbConfigWidget() {
-  m_smbConfConfigWidget = new SmbConfConfigWidget(this);
-  connect( m_smbConfConfigWidget, SIGNAL(smbConfChoosed(const QString &)),
-           this, SLOT(slotSpecifySmbConf(const QString &)));
-}
-
-void KcmSambaConf::slotSpecifySmbConf(const QString & smbConf) {
-  if (m_smbConfConfigWidget) {
-     m_smbConfConfigWidget->hide();
-  }
-
-  init();
-  initAdvancedTab();
-  load(smbConf);
-
-
-  if (getuid() != 0) {
-    for (int i=0;i<_interface->mainTab->count();i++) {
-      QWidget* w = _interface->mainTab->widget(i);
-      w->setEnabled(false);
-    }
-  }
-
-  _interface->show();
-}
-
-void KcmSambaConf::init() {
-
-
-  kDebug(DEBUG) << "creating KcmInterface ..." << endl;
-
-  _interface = new KcmInterface(this);
-
-
-  connect ( _interface->sambaUserPasswordBtn, SIGNAL(clicked()), this, SLOT(sambaUserPasswordBtnClicked()));
-
-  connect ( _interface->editShareBtn, SIGNAL(clicked()), this, SLOT(editShare()));
-  connect ( _interface->addShareBtn, SIGNAL(clicked()), this, SLOT(addShare()));
-  connect ( _interface->removeShareBtn, SIGNAL(clicked()), this, SLOT(removeShare()));
-
-#if 0
-  connect ( _interface->editPrinterBtn, SIGNAL(clicked()), this, SLOT(editPrinter()));
-  connect ( _interface->addPrinterBtn, SIGNAL(clicked()), this, SLOT(addPrinter()));
-  connect ( _interface->removePrinterBtn, SIGNAL(clicked()), this, SLOT(removePrinter()));
-
-  connect ( _interface->editDefaultPrinterBtn, SIGNAL(clicked()), this, SLOT(editPrinterDefaults()));
-#endif
-  connect ( _interface->editDefaultShareBtn, SIGNAL(clicked()), this, SLOT(editShareDefaults()));
-
-  connect( _interface->domainRadio, SIGNAL(toggled(bool)),
-          _interface->joinADomainBtn, SLOT( setEnabled(bool) ));
-
-  connect(_interface->nullPasswordsChk,SIGNAL(toggled(bool)),
-          this, SLOT(nullPasswordsEnabled(bool)));
-
-  connect( _interface->addSambaUserBtn, SIGNAL(clicked()),
-          this, SLOT( addSambaUserBtnClicked() ));
-
-  connect( _interface->removeSambaUserBtn, SIGNAL(clicked()),
-          this, SLOT( removeSambaUserBtnClicked() ));
-
-  _interface->removeSambaUserBtn->setIcon(KIcon("go-next"));
-  _interface->addSambaUserBtn->setIcon(KIcon("go-previous"));
-
-
-  connect( _interface->sambaUsersListView, SIGNAL(mouseButtonPressed(int,Q3ListViewItem*,const QPoint &,int)),
-          this, SLOT(slotMouseButtonPressed(int,Q3ListViewItem*,const QPoint &,int)));
-
-  connect( _interface->joinADomainBtn, SIGNAL(clicked()),
-          this, SLOT( joinADomainBtnClicked() ));
-
-  connect( _interface->loadBtn, SIGNAL(clicked()),
-          this, SLOT( loadBtnClicked() ));
-
-  connect( _interface, SIGNAL(changed()), this, SLOT(configChanged()));
-}
-
-
-void KcmSambaConf::initAdvancedTab()
-{
-  kDebug(DEBUG) << "..." << endl;
-
-  QVBoxLayout *l = new QVBoxLayout(_interface->advancedFrame);
-  l->setAutoAdd(true);
-  l->setMargin(0);
-  _janus = new KPageWidget(_interface->advancedFrame);
-  _janus->setFaceType(KPageView::Tree);
-//   _janus->setRootIsDecorated(false);
-//   _janus->setShowIconsInTreeList(true);
-
-  QString label;
-  QPixmap icon;
-
-  QList<QWidget*> widgets;
-  QList<QString> labels;
-
-  for (int i=0;i<_interface->advancedTab->count();i++) {
-    kDebug(DEBUG) <<  _interface->advancedTab->tabText(i) << endl;
-    widgets.append(_interface->advancedTab->widget(i));
-    labels.append(_interface->advancedTab->tabText(i));
-  }
-
-  KIconLoader* il = KIconLoader::global();
-
-  for (int i=0; i<widgets.size(); i++)
-  {
-    QWidget* w = widgets.at(i);
-    QString label = labels.at(i);
-
-    if (label == i18n("Security"))
-      icon = il->loadIcon("dialog-password",KIconLoader::Small);
-    else
-    if (label == i18n("Logging"))
-      icon = il->loadIcon("view-history",KIconLoader::Small);
-    else
-    if (label == i18n("Tuning"))
-      icon = il->loadIcon("preferences-system-performance",KIconLoader::Small);
-    else
-    if (label == i18n("Filenames"))
-      icon = il->loadIcon("text-plain",KIconLoader::Small);
-    else
-    if (label == i18n("Locking"))
-      icon = il->loadIcon("object-locked",KIconLoader::Small);
-    else
-    if (label == i18n("Printing"))
-      icon = il->loadIcon("printer",KIconLoader::Small);
-    else
-    if (label == i18n("Logon"))
-      icon = il->loadIcon("preferences-system-login",KIconLoader::Small);
-    else
-    if (label == i18n("Charset"))
-      icon = il->loadIcon("character-set",KIconLoader::Small);
-    else
-    if (label == i18n("Socket"))
-      icon = il->loadIcon("socket",KIconLoader::Small);
-    else
-    if (label == i18n("SSL"))
-      icon = il->loadIcon("security-high",KIconLoader::Small);
-    else
-    if (label == i18n("Browsing"))
-      icon = il->loadIcon("fileview-icon",KIconLoader::Small);
-    else
-    if (label == i18n("Misc"))
-      icon = il->loadIcon("preferences-other",KIconLoader::Small);
-    else
-    if (label == i18n("Commands"))
-      icon = il->loadIcon("utilities-terminal",KIconLoader::Small);
-    else
-    if (label == i18n("VFS"))
-      icon = il->loadIcon("folder",KIconLoader::Small);
-    else
-    if (label == i18n("Debug"))
-      icon = il->loadIcon("tools-report-bug",KIconLoader::Small);
-    else
-    if (label == i18n("LDAP"))
-      icon = il->loadIcon("network-server-database",KIconLoader::Small);
-    else {
-      icon = QPixmap(16,16);
-      icon.fill(Qt::transparent);
-    }
-      //SmallIcon("empty2");
-
-    QWidget* frame = new QWidget();
-    QVBoxLayout* l = new QVBoxLayout(frame);
-    KPageWidgetItem *page = new KPageWidgetItem( frame, label );
-    l->setMargin(0);
-    l->addWidget(w);
-    kDebug(DEBUG) << "adding page ..." << endl;
-    _janus->addPage(page);
-    w->show();
-    page->setIcon(KIcon(icon));
-
-  }
-
-  QWidget* w = _interface->mainTab->page(5);
-  _interface->mainTab->removeTab(5);
-  delete w;
-  _interface->advancedWarningPixLbl->setPixmap(DesktopIcon("dialog-warning"));
-
-  kDebug(DEBUG) << "finished" << endl;
-
-}
-
-void KcmSambaConf::editShare()
-{
-  ShareListViewItem* item = static_cast<ShareListViewItem*>(_interface->shareListView->selectedItem());
-
-  if (!item)
-    return;
-
-  ShareDlgImpl* dlg = new ShareDlgImpl(_interface,item->getShare());
-  connect(dlg, SIGNAL(changed()), this, SLOT(configChanged()));
-  dlg->exec();
-  item->updateShare();
-
-  disconnect(dlg, SIGNAL(changed()), this, SLOT(configChanged()));
-
-  delete dlg;
-
-}
-
-void KcmSambaConf::addShare()
-{
-  SambaShare* share = _sambaFile->newShare(_sambaFile->getUnusedName(),"");
-  ShareListViewItem* item = new ShareListViewItem( _interface->shareListView, share );
-  _interface->shareListView->setSelected(item,true);
-
-  ShareDlgImpl* dlg = new ShareDlgImpl(_interface,share);
-  dlg->exec();
-
-  if (dlg->result() == QDialog::Rejected )
-    removeShare();
-  else  {
-    item->updateShare();
-    emit changed(true);
-  }
-
-  delete dlg;
-}
-
-void KcmSambaConf::removeShare()
-{
-  ShareListViewItem* item = static_cast<ShareListViewItem*>(_interface->shareListView->selectedItem());
-
-  if (!item)
-    return;
-
-  SambaShare *share = item->getShare();
-  delete item;
-  _sambaFile->removeShare(share);
-
-  emit changed(true);
-}
-
-
-#if 0
-void KcmSambaConf::editPrinter()
-{
-  ShareListViewItem* item = static_cast<ShareListViewItem*>(_interface->printerListView->selectedItem());
-
-  if (!item)
-    return;
-
-  PrinterDlgImpl* dlg = new PrinterDlgImpl(_interface,item->getShare());
-  dlg->exec();
-  item->updateShare();
-
-  delete dlg;
-
-  emit changed(true);
-}
-
-void KcmSambaConf::addPrinter()
-{
-  SambaShare* share = _sambaFile->newPrinter(_sambaFile->getUnusedName(),"");
-  ShareListViewItem* item = new ShareListViewItem( _interface->shareListView, share );
-  _interface->printerListView->setSelected(item,true);
-
-  PrinterDlgImpl* dlg = new PrinterDlgImpl(_interface,share);
-  dlg->exec();
-
-  if (dlg->result() == QDialog::Rejected )
-    removePrinter();
-  else
-  {
-    item->updateShare();
-    emit changed(true);
-  }
-
-  delete dlg;
-}
-
-void KcmSambaConf::removePrinter()
-{
-  ShareListViewItem* item = static_cast<ShareListViewItem*>(_interface->printerListView->selectedItem());
-
-  if (!item)
-    return;
-
-  SambaShare *share = item->getShare();
-  delete item;
-  _sambaFile->removeShare(share);
-
-  emit changed(true);
-}
-#endif
-
-void KcmSambaConf::editShareDefaults()
-{
-  SambaShare* share = _sambaFile->getShare("global");
-
-  ShareDlgImpl* dlg = new ShareDlgImpl(_interface,share);
-  dlg->directoryGrp->setEnabled(false);
-  dlg->identifierGrp->setEnabled(false);
-  dlg->exec();
-  delete dlg;
-
-  emit changed(true);
-}
-
-#if 0
-void KcmSambaConf::editPrinterDefaults()
-{
-  SambaShare* share = _sambaFile->getShare("global");
-
-  PrinterDlgImpl* dlg = new PrinterDlgImpl(_interface,share);
-  dlg->printerGrp->setEnabled(false);
-  dlg->identifierGrp->setEnabled(false);
-  dlg->exec();
-
-  delete dlg;
-
-  emit changed(true);
-}
-#endif
-
-
-
-void KcmSambaConf::loadBtnClicked() {
-  load( _interface->configUrlRq->url().url());
-}
-
-void KcmSambaConf::load(const QString & smbFile)
-{
-  kDebug(5009) << "loading " << smbFile;
-  _smbconf = smbFile;
-
-  delete _sambaFile;
-
-  _sambaFile = new SambaFile(_smbconf,false);
-
-  connect( _sambaFile, SIGNAL(completed()), this, SLOT(fillFields()));
-  connect( _sambaFile, SIGNAL(canceled(const QString &)), this, SLOT(loadCanceled(const QString &)));
-
-  _sambaFile->load();
-
-  kDebug(DEBUG) << "finished" << endl;
-
-}
-
-void KcmSambaConf::loadCanceled(const QString & msg) {
-  KMessageBox::sorry(0L,msg,i18n("Error while opening file"));
-}
-
-void KcmSambaConf::fillFields()
-{
-  kDebug(DEBUG) << "..." << endl;
-
-  kDebug(DEBUG) << "filling share list views ..." << endl;
-  // Fill the ListViews
-  SambaShareList* list = _sambaFile->getSharedDirs();
-
-  SambaShare *share = 0L;
-  _interface->shareListView->clear();
-  for ( share = list->first(); share; share = list->next() )
-  {
-    new ShareListViewItem(_interface->shareListView, share);
-  }
-
-  share = 0L;
-  _interface->printerListView->clear();
-  list = _sambaFile->getSharedPrinters();
-  for ( share = list->first(); share; share = list->next() )
-  {
-    new ShareListViewItem(_interface->printerListView, share);
-  }
-
-  share = _sambaFile->getShare("global");
-
-  if ( !share)
-    share = _sambaFile->newShare("global");
-
-  Q_ASSERT( share);
-  delete _dictMngr;
-
-  _dictMngr = new DictManager(share);
-
-
-  _interface->configUrlRq->setUrl( _smbconf );
-  _interface->configUrlRq->setMode( KFile::File | KFile::ExistingOnly);
-
-
-  loadBaseSettings( share );
-  loadSecurity( share );
-  loadTuning( share );
-  loadLogging( share );
-  loadDomain( share );
-  loadWins( share );
-  loadPrinting( share );
-  loadFilenames( share );
-  loadLocking( share );
-  loadProtocol( share );
-  loadSocket( share );
-  loadSSL( share );
-  loadLogon( share );
-  loadCharset( share );
-  loadWinbind( share );
-  loadNetbios( share );
-  loadVFS( share );
-  loadLDAP( share );
-  loadBrowsing( share );
-  loadCommands( share );
-  loadMisc( share );
-  loadDebug( share );
-
-  _dictMngr->load( share, false,true );
-
-  loadUserTab();
-
-  connect(_dictMngr, SIGNAL(changed()), this, SLOT(configChanged()));
-
-}
-
-
-void KcmSambaConf::loadBaseSettings(SambaShare* share)
-{
-  kDebug(DEBUG) << "..." << endl;
-
-  _dictMngr->add("workgroup", _interface->workgroupEdit);
-  _dictMngr->add("server string", _interface->serverStringEdit);
-  _dictMngr->add("netbios name", _interface->netbiosNameEdit);
-  _dictMngr->add("interfaces", _interface->interfacesEdit);
-
-  kDebug(DEBUG) << "filling guestAccountCombo ..." << endl;
-  _interface->guestAccountCombo->addItems( getUnixUsers() );
-  setComboIndexToValue(_interface->guestAccountCombo,"guest account",share);
-
-  QString value = share->getValue("map to guest",false,true);
-
-  _interface->allowGuestLoginsChk->setChecked( value.toLower()!="never" );
-
-  _dictMngr->add("guest ok",_interface->allowGuestLoginsChk);
-
-  _dictMngr->add("bind interfaces only",_interface->bindInterfacesOnlyChk);
-
-  QString s = share->getValue("security",false,true).toLower();
-  int i = 0;
-
-  if ( s == "share" ) i = 0; else
-  if ( s == "user" ) i = 1; else
-  if ( s == "server" ) i = 2; else
-  if ( s == "domain" ) i = 3; else
-  if ( s == "ads" ) i = 4;
-
-  _interface->securityLevelBtnGrp->setButton(i);
-  _interface->updateSecurityLevelHelpLbl();
-
-}
-
-
-void KcmSambaConf::loadSecurity(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-
-  _dictMngr->add("map to guest",_interface->mapToGuestCombo,
-                 new QStringList(QStringList() << "Never" << "Bad User" << "Bad Password" ));
-
-
-  _dictMngr->add("password server", _interface->passwordServerEdit);
-  _dictMngr->add("passwd chat", _interface->passwdChatEdit);
-  _dictMngr->add("root directory", _interface->rootDirectoryEdit);
-  _dictMngr->add("passdb backend", _interface->passdbBackendEdit);
-  _dictMngr->add("auth methods", _interface->authMethodsEdit);
-  _dictMngr->add("realm", _interface->realmEdit);
-
-  _dictMngr->add("password level", _interface->passwordLevelSpin);
-  _dictMngr->add("min passwd length", _interface->minPasswdLengthSpin);
-  _dictMngr->add("username level", _interface->usernameLevelSpin);
-  _dictMngr->add("algorithmic rid base", _interface->algorithmicRidBaseSpin);
-  _dictMngr->add("passwd chat timeout", _interface->passwdChatTimeoutSpin);
-
-  _dictMngr->add("encrypt passwords",_interface->encryptPasswordsChk);
-  _dictMngr->add("update encrypted",_interface->updateEncryptedChk);
-  _dictMngr->add("passwd chat debug",_interface->passwdChatDebugChk);
-  _dictMngr->add("unix password sync",_interface->unixPasswordSyncChk);
-  _dictMngr->add("use rhosts",_interface->useRhostsChk);
-  _dictMngr->add("hide local users",_interface->hideLocalUsersChk);
-
-
-  _dictMngr->add("allow trusted domains",_interface->allowTrustedDomainsChk);
-  _dictMngr->add("obey pam restrictions",_interface->obeyPamRestrictionsChk);
-  _dictMngr->add("pam password change",_interface->pamPasswordChangeChk);
-  _dictMngr->add("restrict anonymous",_interface->restrictAnonymousChk);
-  _dictMngr->add("null passwords",_interface->nullPasswordsChk);
-  _dictMngr->add("paranoid server security",_interface->paranoidServerSecurityChk);
-
-  _dictMngr->add("smb passwd file",_interface->smbPasswdFileUrlRq);
-  _dictMngr->add("passwd program",_interface->passwdProgramUrlRq);
-  _dictMngr->add("username map",_interface->usernameMapUrlRq);
-  _dictMngr->add("hosts equiv",_interface->hostsEquivUrlRq);
-  _dictMngr->add("private dir",_interface->privateDirUrlRq);
-
-  // Authentication
-
-  _dictMngr->add("lanman auth",_interface->lanmanAuthChk);
-  _dictMngr->add("ntlm auth",_interface->ntlmAuthChk);
-  _dictMngr->add("use spnego",_interface->useSpnegoChk);
-  _dictMngr->add("server schannel",_interface->serverSchannelCombo,
-                 new QStringList(QStringList() << "Yes" << "No" << "Auto" ));
-  _dictMngr->add("server signing",_interface->serverSigningCombo,
-                 new QStringList(QStringList() << "Auto" << "Mandatory" << "No" ));
-
-  _dictMngr->add("client lanman auth",_interface->clientLanmanAuthChk);
-  _dictMngr->add("client plaintext auth",_interface->clientPlaintextAuthChk);
-  _dictMngr->add("client ntlmv2 auth",_interface->clientNTLMv2AuthChk);
-  _dictMngr->add("client use spnego",_interface->clientUseSpnegoChk);
-  _dictMngr->add("client schannel",_interface->clientSchannelCombo,
-                 new QStringList(QStringList() << "Yes" << "No" << "Auto" ));
-  _dictMngr->add("client signing",_interface->clientSigningCombo,
-                 new QStringList(QStringList() << "Auto" << "Mandatory" << "No" ));
-
-
-
-
-
-}
-
-void KcmSambaConf::loadLogging(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("log file",_interface->logFileUrlRq);
-
-  _dictMngr->add("max log size", _interface->maxLogSizeSpin);
-  _dictMngr->add("syslog", _interface->syslogSpin);
-  _dictMngr->add("log level", _interface->logLevelEdit);
-
-  _dictMngr->add("status",_interface->statusChk);
-  _dictMngr->add("debug uid",_interface->debugUidChk);
-  _dictMngr->add("debug pid",_interface->debugPidChk);
-  _dictMngr->add("debug hires timestamp",_interface->microsecondsChk);
-  _dictMngr->add("syslog only",_interface->syslogOnlyChk);
-  _dictMngr->add("debug timestamp",_interface->timestampChk);
-
-
-}
-
-void KcmSambaConf::loadTuning(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("change notify timeout", _interface->changeNotifyTimeoutSpin);
-  _dictMngr->add("deadtime", _interface->deadtimeSpin);
-  _dictMngr->add("keepalive", _interface->keepaliveSpin);
-  _dictMngr->add("lpq cache time", _interface->lpqCacheTimeSpin);
-  _dictMngr->add("max open files", _interface->maxOpenFilesSpin);
-  _dictMngr->add("read size", _interface->readSizeSpin);
-  _dictMngr->add("max disk size", _interface->maxDiskSizeSpin);
-  _dictMngr->add("stat cache size", _interface->statCacheSizeSpin);
-  _dictMngr->add("max smbd processes", _interface->maxSmbdProcessesSpin);
-  _dictMngr->add("name cache timeout", _interface->nameCacheTimeoutSpin);
-
-  _dictMngr->add("getwd cache",_interface->getwdCacheChk);
-  _dictMngr->add("use mmap",_interface->useMmapChk);
-  _dictMngr->add("hostname lookups",_interface->hostnameLookupsChk);
-  _dictMngr->add("kernel change notify",_interface->kernelChangeNotifyChk);
-
-}
-
-void KcmSambaConf::loadLocking(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("kernel oplocks",_interface->kernelOplocksChk);
-  _dictMngr->add("lock directory",_interface->lockDirectoryUrlRq);
-  _dictMngr->add("pid directory",_interface->pidDirectoryUrlRq);
-  _dictMngr->add("oplock break wait time",_interface->oplockBreakWaitTimeSpin);
-  _dictMngr->add("lock spin time",_interface->lockSpinTimeSpin);
-  _dictMngr->add("lock spin count",_interface->lockSpinCountSpin);
-
-
-}
-
-void KcmSambaConf::loadDomain(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("preferred master",_interface->preferredMasterChk);
-  _dictMngr->add("local master",_interface->localMasterChk);
-  _dictMngr->add("domain master",_interface->domainMasterChk);
-  _dictMngr->add("domain logons",_interface->domainLogonsChk);
-  _dictMngr->add("machine password timeout", _interface->machinePasswordTimeoutSpin);
-  _dictMngr->add("os level", _interface->osLevelSpin);
-  _dictMngr->add("domain admin group", _interface->domainAdminGroupEdit);
-  _dictMngr->add("domain guest group", _interface->domainGuestGroupEdit);
-
-}
-
-void KcmSambaConf::loadWins(SambaShare* share)
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("wins proxy",_interface->winsProxyChk);
-  _dictMngr->add("dns proxy",_interface->dnsProxyChk);
-  _dictMngr->add("wins server", _interface->winsServerEdit);
-  _dictMngr->add("wins hook", _interface->winsHookEdit);
-  _interface->winsSupportRadio->setChecked( share->getBoolValue("wins support",false,true));
-  _interface->otherWinsRadio->setChecked( !share->getValue("wins server",false,true).isEmpty() );
-}
-
-
-void KcmSambaConf::loadPrinting(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("load printers",_interface->loadPrintersChk);
-  _dictMngr->add("disable spoolss",_interface->disableSpoolssChk);
-  _dictMngr->add("show add printer wizard",_interface->showAddPrinterWizardChk);
-
-  _dictMngr->add("addprinter command", _interface->addprinterCommandEdit);
-  _dictMngr->add("deleteprinter command", _interface->deleteprinterCommandEdit);
-  _dictMngr->add("enumports command", _interface->enumportsCommandEdit);
-
-  _dictMngr->add("printcap name",_interface->printcapNameUrlRq);
-  _dictMngr->add("os2 driver map",_interface->os2DriverMapUrlRq);
-  _dictMngr->add("printer driver file",_interface->printerDriverFileUrlRq);
-
-  _dictMngr->add("total print jobs", _interface->totalPrintJobsSpin);
-}
-
-void KcmSambaConf::loadFilenames(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("strip dot",_interface->stripDotChk);
-  _dictMngr->add("stat cache",_interface->statCacheChk);
-
-
-  _dictMngr->add("mangled stack", _interface->mangledStackSpin);
-  _dictMngr->add("mangle prefix", _interface->manglePrefixSpin);
-
-}
-
-void KcmSambaConf::loadProtocol(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  // Protocol
-
-  _dictMngr->add("write raw",_interface->writeRawChk);
-  _dictMngr->add("read raw",_interface->readRawChk);
-  _dictMngr->add("read bmpx",_interface->readBmpxChk);
-  _dictMngr->add("large readwrite",_interface->largeReadWriteChk);
-  _dictMngr->add("nt smb support",_interface->ntSmbSupportChk);
-  _dictMngr->add("nt pipe support",_interface->ntPipeSupportChk);
-  _dictMngr->add("time server",_interface->timeServerChk);
-  _dictMngr->add("unix extensions",_interface->unixExtensionsChk);
-
-  _dictMngr->add("max mux", _interface->maxMuxSpin);
-  _dictMngr->add("max xmit", _interface->maxXmitSpin);
-  _dictMngr->add("max ttl", _interface->maxTtlSpin);
-  _dictMngr->add("max wins ttl", _interface->maxWinsTtlSpin);
-  _dictMngr->add("min wins ttl", _interface->minWinsTtlSpin);
-
-  _dictMngr->add("announce version", _interface->announceVersionEdit);
-  _dictMngr->add("name resolve order", _interface->nameResolveOrderEdit);
-  _dictMngr->add("smb ports", _interface->smbPortsEdit);
-
-  _dictMngr->add("announce as", _interface->announceAsCombo,
-                 new QStringList(QStringList() << "NT" << "NT workstation" << "win95" << "WfW"));
-
-  _dictMngr->add("protocol", _interface->protocolCombo,
-                 new QStringList(QStringList() << "NT1" << "lanman2" << "lanman1" << "core" << "coreplus" ));
-
-  _dictMngr->add("max protocol", _interface->maxProtocolCombo,
-                 new QStringList(QStringList() << "NT1" << "lanman2" << "lanman1" << "core" << "coreplus"));
-
-  _dictMngr->add("min protocol", _interface->minProtocolCombo,
-                 new QStringList(QStringList() << "NT1" << "lanman2" << "lanman1" << "core" << "coreplus"));
-
-}
-
-void KcmSambaConf::loadSocket(SambaShare* share)
-{
-  kDebug(DEBUG) << "..." << endl;
-  // SOCKET options
-
-  _dictMngr->add("socket address", _interface->socketAddressEdit);
-
-  QString s = share->getValue("socket options");
-  s = s.simplified();
-
-  // The string s has now the form :
-  // "OPTION1=1 OPTION2=0 OPTION3=2234 OPTION4"
-
-  _interface->SO_KEEPALIVEChk->setChecked(getSocketBoolValue( s, "SO_KEEPALIVE") );
-  _interface->SO_REUSEADDRChk->setChecked( getSocketBoolValue( s, "SO_REUSEADDR") );
-  _interface->SO_BROADCASTChk->setChecked( getSocketBoolValue( s, "SO_BROADCAST") );
-  _interface->TCP_NODELAYChk->setChecked( getSocketBoolValue( s, "TCP_NODELAY") );
-  _interface->IPTOS_LOWDELAYChk->setChecked( getSocketBoolValue( s, "IPTOS_LOWDELAY") );
-  _interface->IPTOS_THROUGHPUTChk->setChecked( getSocketBoolValue( s, "IPTOS_THROUGHPUT") );
-
-  _interface->SO_SNDBUFChk->setChecked( getSocketBoolValue( s, "SO_SNDBUF") );
-  _interface->SO_RCVBUFChk->setChecked( getSocketBoolValue( s, "SO_RCVBUF") );
-  _interface->SO_SNDLOWATChk->setChecked( getSocketBoolValue( s, "SO_SNDLOWAT") );
-  _interface->SO_RCVLOWATChk->setChecked( getSocketBoolValue( s, "SO_RCVLOWAT") );
-
-  _interface->SO_SNDBUFSpin->setValue( getSocketIntValue( s, "SO_SNDBUF") );
-  _interface->SO_RCVBUFSpin->setValue( getSocketIntValue( s, "SO_RCVBUF") );
-  _interface->SO_SNDLOWATSpin->setValue( getSocketIntValue( s, "SO_SNDLOWAT") );
-  _interface->SO_RCVLOWATSpin->setValue( getSocketIntValue( s, "SO_RCVLOWAT") );
-
-}
-
-void KcmSambaConf::loadSSL(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  // SSL
-
-  _dictMngr->add("ssl version",_interface->sslVersionCombo,
-                 new QStringList(QStringList() << "ssl2" << "ssl3" << "ssl2or3" << "tls1" ));
-
-  _dictMngr->add("ssl",_interface->sslChk);
-  _dictMngr->add("ssl require server cert",_interface->sslRequireServercertChk);
-  _dictMngr->add("ssl compatibility",_interface->sslCompatibilityChk);
-  _dictMngr->add("ssl require clientcert",_interface->sslRequireClientcertChk);
-
-  _dictMngr->add("ssl hosts edit", _interface->sslHostsEdit);
-  _dictMngr->add("ssl hosts resign", _interface->sslHostsResignEdit);
-  _dictMngr->add("ssl egd socket", _interface->sslEgdSocketEdit);
-  _dictMngr->add("ssl ciphers edit", _interface->sslCiphersEdit);
-
-  _dictMngr->add("ssl CA cert dir",_interface->sslCACertDirUrlRq);
-  _dictMngr->add("ssl CA cert file",_interface->sslCACertFileUrlRq);
-  _dictMngr->add("ssl entropy file",_interface->sslEntropyFileUrlRq);
-  _dictMngr->add("ssl client cert",_interface->sslClientCertUrlRq);
-  _dictMngr->add("ssl client key",_interface->sslClientKeyUrlRq);
-  _dictMngr->add("ssl server cert",_interface->sslServerCertUrlRq);
-  _dictMngr->add("ssl server key",_interface->sslServerKeyUrlRq);
-
-  _dictMngr->add("ssl entropy bytes", _interface->sslEntropyBytesSpin);
-
-}
-
-void KcmSambaConf::loadLogon(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  // Logon
-
-  _dictMngr->add("add user script", _interface->addUserScriptEdit);
-  _dictMngr->add("add group script", _interface->addGroupScriptEdit);
-  _dictMngr->add("add machine script", _interface->addMachineScriptEdit);
-  _dictMngr->add("add user to group script", _interface->addUserToGroupScriptEdit);
-  _dictMngr->add("delete user script", _interface->deleteUserScriptEdit);
-  _dictMngr->add("delete group script", _interface->deleteGroupScriptEdit);
-  _dictMngr->add("delete user from group script", _interface->deleteUserFromGroupScriptEdit);
-  _dictMngr->add("set primary group script", _interface->addGroupScriptEdit);
-  _dictMngr->add("shutdown script", _interface->shutdownScriptEdit);
-  _dictMngr->add("abort shutdown script", _interface->abortShutdownScriptEdit);
-  _dictMngr->add("logon script", _interface->logonScriptEdit);
-  _dictMngr->add("logon drive", _interface->logonDriveEdit);
-  _dictMngr->add("logon path",_interface->logonPathUrlRq);
-  _dictMngr->add("logon home",_interface->logonHomeUrlRq);
-
-}
-
-
-void KcmSambaConf::loadCharset(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("coding system", _interface->codingSystemEdit);
-  _dictMngr->add("client code page", _interface->clientCodePageEdit);
-  _dictMngr->add("code page directory",_interface->codePageDirUrlRq);
-  _dictMngr->add("display charset", _interface->displayCharsetEdit);
-  _dictMngr->add("unix charset", _interface->unixCharsetEdit);
-  _dictMngr->add("dos charset", _interface->dosCharsetEdit);
-  _dictMngr->add("character set", _interface->characterSetEdit);
-  _dictMngr->add("valid chars", _interface->validCharsEdit);
-
-  _dictMngr->add("unicode",_interface->unicodeChk);
-}
-
-void KcmSambaConf::loadWinbind(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("winbind uid", _interface->winbindUidEdit);
-  _dictMngr->add("winbind gid", _interface->winbindGidEdit);
-  _dictMngr->add("template homedir", _interface->templateHomedirEdit);
-  _dictMngr->add("template shell", _interface->templateShellEdit);
-  _dictMngr->add("winbind separator", _interface->winbindSeparatorEdit);
-  _dictMngr->add("template primary group", _interface->templatePrimaryGroupEdit);
-
-  _dictMngr->add("winbind cache time", _interface->winbindCacheTimeSpin);
-  _dictMngr->add("acl compatibility",_interface->aclCompatibilityCombo,
-                 new QStringList(QStringList() << "winnt" << "win2k" << "auto"));
-
-  _dictMngr->add("winbind enum users",_interface->winbindEnumUsersChk);
-  _dictMngr->add("winbind enum groups",_interface->winbindEnumGroupsChk);
-  _dictMngr->add("winbind use default domain",_interface->winbindUseDefaultDomainChk);
-  _dictMngr->add("winbind trusted domains only",_interface->winbindTrustedDomainsOnlyChk);
-  _dictMngr->add("winbind enable local accounts",_interface->winbindEnableLocalAccountsChk);
-  _dictMngr->add("winbind nested groups",_interface->winbindNestedGroupsChk);
-
-
-}
-
-void KcmSambaConf::loadNetbios(SambaShare* )
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("disable netbios",_interface->disableNetbiosChk);
-
-  _dictMngr->add("netbios aliases", _interface->netbiosAliasesEdit);
-  _dictMngr->add("netbios scope", _interface->netbiosScopeEdit);
-
-  /*
-  _dictMngr->add("netbios aliases", _interface->netbiosAliasesEdit);
-  _dictMngr->add("netbios scope", _interface->netbiosScopeEdit);
-  */
-
-}
-
-void KcmSambaConf::loadVFS(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("host msdfs",_interface->hostMsdfsChk);
-
-}
-
-void KcmSambaConf::loadLDAP(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("ldap suffix", _interface->ldapSuffixEdit);
-  _dictMngr->add("ldap machine suffix", _interface->ldapMachineSuffixEdit);
-  _dictMngr->add("ldap user suffix", _interface->ldapUserSuffixEdit);
-  _dictMngr->add("ldap group suffix", _interface->ldapGroupSuffixEdit);
-  _dictMngr->add("ldap idmap suffix", _interface->ldapIdmapSuffixEdit);
-  _dictMngr->add("ldap filter", _interface->ldapFilterEdit);
-  _dictMngr->add("ldap admin dn", _interface->ldapAdminDnEdit);
-  _dictMngr->add("idmap backend", _interface->idmapBackendEdit);
-
-  _dictMngr->add("ldap replication sleep",_interface->ldapReplicationSleepSpin);
-
-  _dictMngr->add("ldap delete dn",_interface->ldapDeleteDnChk);
-
-  _dictMngr->add("ldap ssl", _interface->ldapSslCombo,
-                 new QStringList(QStringList() << "No" << "Start_tls" << "Yes"));
-
-  _dictMngr->add("ldap sync", _interface->ldapSyncCombo,
-                 new QStringList(QStringList() << "Yes" << "No" << "Only"));
-
-
-}
-
-void KcmSambaConf::loadBrowsing(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("enhanced browsing",_interface->enhancedBrowsingChk);
-  _dictMngr->add("browse list",_interface->browseListChk);
-  _dictMngr->add("lm interval", _interface->lmIntervalSpin);
-  _dictMngr->add("remote browse sync", _interface->remoteBrowseSyncEdit);
-  _dictMngr->add("preload", _interface->preloadEdit);
-
-  _dictMngr->add("lm announce", _interface->lmAnnounceCombo,
-                 new QStringList(QStringList() << "Yes" << "No" << "Auto"));
-}
-
-void KcmSambaConf::loadCommands(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("add share command", _interface->addShareCommandEdit);
-  _dictMngr->add("change share command", _interface->changeShareCommandEdit);
-  _dictMngr->add("delete share command", _interface->deleteShareCommandEdit);
-  _dictMngr->add("message command", _interface->messageCommandEdit);
-  _dictMngr->add("dfree command", _interface->dfreeCommandEdit);
-  _dictMngr->add("set quota command", _interface->setQuotaCommandEdit);
-  _dictMngr->add("get quota command", _interface->getQuotaCommandEdit);
-  _dictMngr->add("panic action", _interface->panicActionEdit);
-
-}
-
-void KcmSambaConf::setComboIndexToValue(QComboBox* box, const QString & value, SambaShare* share)
-{
-  kDebug(DEBUG) << "..." << endl;
-  QString text = share->getValue(value,false,true);
-  int i = box->findText(text,Qt::MatchExactly);
-  box->setCurrentItem(i);
-}
-
-
-void KcmSambaConf::loadMisc(SambaShare*)
-{
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("preload modules", _interface->preloadModulesEdit);
-  _dictMngr->add("default service", _interface->defaultServiceEdit);
-  _dictMngr->add("remote announce", _interface->remoteAnnounceEdit);
-  _dictMngr->add("homedir map", _interface->homedirMapEdit);
-  _dictMngr->add("source environment", _interface->sourceEnvironmentEdit);
-
-  _dictMngr->add("utmp directory",_interface->utmpDirectoryUrlRq);
-  _dictMngr->add("wtmp directory",_interface->wtmpDirectoryUrlRq);
-
-  _dictMngr->add("NIS homedir", _interface->nisHomedirChk);
-  _dictMngr->add("time offset", _interface->timeOffsetSpin);
-}
-
-void KcmSambaConf::loadDebug(SambaShare*) {
-  kDebug(DEBUG) << "..." << endl;
-  _dictMngr->add("nt status support", _interface->ntStatusSupportChk);
-}
-
-
-
-void KcmSambaConf::loadUserTab()
-{
-  kDebug(DEBUG) << "..." << endl;
-  // Remote editing of users isn't supported yet
-  if ( _sambaFile->isRemoteFile()) {
-    _interface->mainTab->widget(3)->setEnabled(false);
-    return;
-  } else
-    _interface->mainTab->widget(3)->setEnabled(true);
-
-
-  SambaShare* share = _sambaFile->getShare("global");
-
-  QStringList added;
-
-  SmbPasswdFile passwd( KUrl(share->getValue("smb passwd file",true,true)) );
-  SambaUserList sambaList = passwd.getSambaUserList();
-  _interface->sambaUsersListView->clear();
-  SambaUser *user;
-  for ( user = sambaList.first(); user; user = sambaList.next() )
-  {
-    QMultiCheckListItem* item = new QMultiCheckListItem(_interface->sambaUsersListView);
-    item->setText(0,user->name);
-    item->setText(1,QString::number(user->uid));
-    item->setOn(COL_DISABLED,user->isDisabled);
-    item->setOn(COL_NOPASSWORD,user->hasNoPassword);
-
-    if ( ! _interface->nullPasswordsChk->isOn())
-      item->setDisabled(COL_NOPASSWORD, true);
-
-    added.append(user->name);
-
-
-  }
-
-  _interface->unixUsersListView->clear();
-
-  UnixUserList unixList = getUnixUserList();
-  UnixUser *unixUser;
-  for ( unixUser = unixList.first(); unixUser; unixUser = unixList.next() )
-  {
-    QStringList::Iterator it;
-
-    it=added.find(unixUser->name);
-    if (it == added.end())
-        new K3ListViewItem(_interface->unixUsersListView, unixUser->name, QString::number(unixUser->uid));
-  }
-
-  _interface->unixUsersListView->setSelectionMode(Q3ListView::Extended);
-  _interface->sambaUsersListView->setSelectionMode(Q3ListView::Extended);
-
-}
-
-void KcmSambaConf::joinADomainBtnClicked() {
-  JoinDomainDlg *dlg = new JoinDomainDlg();
-  dlg->domainEdit->setText(_interface->workgroupEdit->text());
-  dlg->domainControllerEdit->setText(_interface->passwordServerEdit->text());
-
-  int result = dlg->exec();
-
-  if (result == QDialog::Accepted) {
-    SmbPasswdFile passwd;
-    if (!passwd.joinADomain(dlg->domainEdit->text(),
-                            dlg->domainControllerEdit->text(),
-                            dlg->usernameEdit->text(),
-                            dlg->passwordEdit->text()))
-    {
-      KMessageBox::sorry(0,i18n("Joining the domain %1 failed.", dlg->domainEdit->text()));
-    }
-  }
-  delete dlg;
-}
-
-
-void KcmSambaConf::slotMouseButtonPressed(int,Q3ListViewItem* item,const QPoint &,int col) {
-  if (col < 2)
-    return;
-
-  SambaShare* share = _sambaFile->getShare("global");
-  SmbPasswdFile passwd( KUrl(share->getValue("smb passwd file",true,true)) );
-  QMultiCheckListItem* i = static_cast<QMultiCheckListItem*>(item);
-  SambaUser user( item->text(0), item->text(1).toInt() );
-  user.isDisabled = i->isOn(COL_DISABLED);
-  user.hasNoPassword = i->isOn(COL_NOPASSWORD);
-
-  if (!i->isDisabled(col))
-  {
-
-    switch(col) {
-      case COL_DISABLED :
-        if (i->isOn(col))
-          passwd.enableUser(user);
-        else
-          passwd.disableUser(user);
-        break;
-      case COL_NOPASSWORD :
-        if (i->isOn(col)) {
-          sambaUserPasswordBtnClicked();
-          return; // the item is already set off by the btnClicked method
-        }
-        else
-          passwd.setNoPassword(user);
-        break;
-    }
-
-    i->toggle(col);
-  }
-}
-
-void KcmSambaConf::nullPasswordsEnabled(bool b)
-{
-  Q3ListViewItemIterator it( _interface->sambaUsersListView );
-  for ( ; it.current(); ++it ) {
-    QMultiCheckListItem* sambaItem = static_cast<QMultiCheckListItem*>(it.current());
-    sambaItem->setDisabled(COL_NOPASSWORD,!b);
-
-  }
-}
-
-void KcmSambaConf::saveUserTab()
-{
-}
-
-void KcmSambaConf::addSambaUserBtnClicked()
-{
-  QList<Q3ListViewItem*> list = _interface->unixUsersListView->selectedItems();
-
-  SambaShare* share = _sambaFile->getShare("global");
-  SmbPasswdFile passwd( KUrl(share->getValue("smb passwd file",true,true)) );
-
-  foreach ( Q3ListViewItem* item, list ) {
-    SambaUser user( item->text(0), item->text(1).toInt() );
-
-    QByteArray password;
-    int passResult = K3PasswordDialog::getNewPassword(this,password,
-                        i18n("<qt>Please enter a password for the user <b>%1</b></qt>", user.name));
-    if (passResult != K3PasswordDialog::Accepted) {
-       list.removeAll(item);
-       continue;
-    }
-
-    if (!passwd.addUser(user,password))
-    {
-      KMessageBox::sorry(0,i18n("<qt>Adding the user <b>%1</b> to the Samba user database failed.</qt>", user.name));
-      break;
-    }
-
-    QMultiCheckListItem* sambaItem = new QMultiCheckListItem(_interface->sambaUsersListView);
-    sambaItem->setText(0,user.name);
-    sambaItem->setText(1,QString::number(user.uid));
-    sambaItem->setOn(COL_DISABLED,false);
-    sambaItem->setOn(COL_NOPASSWORD,false);
-    if ( ! _interface->nullPasswordsChk->isOn())
-      sambaItem->setDisabled(COL_NOPASSWORD, true);
-
-
-    list.removeAll(item);
-    delete item;
-  }
-}
-
-void KcmSambaConf::removeSambaUserBtnClicked()
-{
-  QList<Q3ListViewItem*> list = _interface->sambaUsersListView->selectedItems();
-
-  SambaShare* share = _sambaFile->getShare("global");
-  SmbPasswdFile passwd( KUrl(share->getValue("smb passwd file",true,true)) );
-
-  foreach ( Q3ListViewItem* item, list ) {
-    SambaUser user( item->text(0), item->text(1).toInt() );
-    if (!passwd.removeUser(user))
-    {
-      KMessageBox::sorry(0,i18n("Removing the user %1 from the Samba user database failed.", user.name));
-      continue;
-    }
-
-    new K3ListViewItem(_interface->unixUsersListView, item->text(0), item->text(1));
-    list.removeAll(item);
-    delete item;
-  }
-}
-
-void KcmSambaConf::sambaUserPasswordBtnClicked()
-{
-  QList<Q3ListViewItem*> list = _interface->sambaUsersListView->selectedItems();
-
-  SambaShare* share = _sambaFile->getShare("global");
-  SmbPasswdFile passwd( KUrl(share->getValue("smb passwd file",true,true)) );
-
-  foreach ( Q3ListViewItem* item, list ) {
-    SambaUser user( item->text(0), item->text(1).toInt() );
-
-    QByteArray password;
-    int passResult = K3PasswordDialog::getNewPassword(this,password,
-                        i18n("Please enter a password for the user %1", user.name));
-    if (passResult != K3PasswordDialog::Accepted)
-       return;
-
-    if (!passwd.changePassword(user,password))
-    {
-      KMessageBox::sorry(0,i18n("Changing the password of the user %1 failed.", user.name));
-    } else {
-      static_cast<QMultiCheckListItem*>(item)->setOn(COL_NOPASSWORD,false);
-    }
-
-  }
-
-}
-
-
-void KcmSambaConf::defaults() {
-  // insert your default settings code here...
-  emit changed(true);
-}
-
-#define FILESHARECONF "/etc/security/fileshare.conf"
-
-void KcmSambaConf::save() {
-  SambaShare *share = _sambaFile->getShare("global");
-  assert(share);
-
-  kDebug(5009) << "saving ... ";
-
-  // Base settings
-
-  _smbconf = _interface->configUrlRq->url().path();
-  KConfig config(QString::fromLatin1(FILESHARECONF), KConfig::SimpleConfig);
-  config.group("").writeEntry("SMBCONF",_smbconf);
-  config.sync();
-
-  // Security
-
-  QString s;
-
-  switch (_interface->securityLevelBtnGrp->id(_interface->securityLevelBtnGrp->selected())) {
-    case 0 : s = "share";break;
-    case 1 : s = "user";break;
-    case 2 : s = "server";break;
-    case 3 : s = "domain";break;
-    case 4 : s = "ads";break;
-  }
-
-  share->setValue("security",s);
-
-
-//  share->setValue("security",_interface->securityLevelCombo->currentText());
-  share->setValue("map to guest",_interface->mapToGuestCombo->currentText());
-
-  share->setValue("guest account",_interface->guestAccountCombo->currentText());
-
-  if (_interface->otherWinsRadio->isChecked())
-    share->setValue("wins server",_interface->winsServerEdit->text(), false,true);
-  else
-    share->setValue("wins server",QString(""), false,true);
-
-  // socket options
-
-  s = socketOptions();
-  share->setValue("socket options",s,false,true);
-
-
-  _dictMngr->save( share,false,true );
-
-  _sambaFile->slotApply();
-
-}
-
-bool KcmSambaConf::getSocketBoolValue( const QString & str, const QString & name )
-{
-  QString s = str;
-  int i = s.indexOf(name, Qt::CaseInsensitive );
-
-  if (i > -1)
-  {
-    s = s.remove(0,i+1+QString(name).length());
-
-    if ( s.startsWith("=") )
-    {
-      s = s.remove(0,1);
-      if ( s.startsWith("0"))
-        return false;
-      else
-        return true;
-    }
-    else
-      return true;
-  }
-
-  return false;
-}
-
-int KcmSambaConf::getSocketIntValue( const QString & str, const QString & name )
-{
-    QString s = str;
-    int i = s.indexOf(name,Qt::CaseInsensitive );
-
-    if (i > -1)
-    {
-      s = s.remove(0,i+name.length());
-      if ( s.startsWith("=") )
-      {
-        s = s.remove(0,1);
-
-        i = s.indexOf(' ');
-        if (i < 0)
-          i = s.length();
-        else
-          i++;
-
-        s = s.left( i );
-
-        return s.toInt();
-      }
-      else
-        return 0;
-    }
-
-    return 0;
-}
-
-QString KcmSambaConf::socketOptions()
-{
-  QString s = "";
-
-  if ( _interface->SO_KEEPALIVEChk->isChecked() )
-    s+="SO_KEEPALIVE ";
-
-  if ( _interface->SO_REUSEADDRChk->isChecked() )
-    s+= "SO_REUSEADDR ";
-
-  if ( _interface->SO_BROADCASTChk->isChecked() )
-    s+= "SO_BROADCAST ";
-
-  if ( _interface->TCP_NODELAYChk->isChecked() )
-    s+= "TCP_NODELAY ";
-
-  if ( _interface->IPTOS_LOWDELAYChk->isChecked() )
-    s+= "IPTOS_LOWDELAY ";
-
-  if ( _interface->IPTOS_THROUGHPUTChk->isChecked() )
-    s+= "IPTOS_THROUGHPUT ";
-
-  if ( _interface->SO_SNDBUFChk->isChecked() ) {
-    s+= "SO_SNDBUF=";
-    s+= QString::number( _interface->SO_SNDBUFSpin->value() );
-    s+= ' ';
-  }
-
-  if ( _interface->SO_RCVBUFChk->isChecked() ) {
-    s+= "SO_RCVBUF=";
-    s+= QString::number( _interface->SO_RCVBUFSpin->value() );
-    s+= ' ';
-  }
-
-  if ( _interface->SO_SNDLOWATChk->isChecked() ) {
-    s+= "SO_SNDLOWAT=";
-    s+= QString::number( _interface->SO_SNDLOWATSpin->value() );
-    s+= ' ';
-  }
-
-  if ( _interface->SO_RCVLOWATChk->isChecked() ) {
-    s+= "SO_RCVLOWAT=";
-    s+= QString::number( _interface->SO_RCVLOWATSpin->value() );
-    s+= ' ';
-
-  }
-
-  return s;
-
-}
-
-
-int KcmSambaConf::buttons () {
-  // KCModule::Default|KCModule::Apply|KCModule::Help;
-  return KCModule::Apply;
-}
-
-void KcmSambaConf::configChanged() {
-  // insert your saving code here...
-  emit changed(true);
-}
-
-QString KcmSambaConf::quickHelp() const
-{
-  return i18n("<h1>Samba Configuration</h1> here you can configure your SAMBA server.");
-}
-
-// ------------------------------------------------------------------------
-
-extern "C"
-{
-  KDE_EXPORT KCModule *create_KcmSambaConf(QWidget *parent, const char *name)
-  {
-    KGlobal::locale()->insertCatalog("kfileshare");
-    KComponentData inst("kfileshare");
-    return new KcmSambaConf(inst,parent, name);
-  }
-}
-
-#include "kcmsambaconf.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/kcmsambaconf.desktop filesharing//advanced/kcm_sambaconf/kcmsambaconf.desktop
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcmsambaconf.desktop	2011-02-25 21:47:35.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcmsambaconf.desktop	1970-01-01 00:00:00.000000000 +0000
@@ -1,179 +0,0 @@
-[Desktop Entry]
-Exec=kcmshell4 kcmsambaconf
-Icon=preferences-system-network-share-windows
-Type=Service
-X-KDE-ServiceTypes=KCModule
-
-
-Terminal=false
-X-KDE-FactoryName=KcmSambaConf
-X-KDE-Library=kcm_kcmsambaconf
-X-KDE-ModuleType=Library
-X-KDE-SubstituteUID=false
-X-KDE-HasReadOnlyMode=true
-X-KDE-RootOnly=true
-X-KDE-ParentApp=kcontrol
-X-KDE-System-Settings-Parent-Category=sharing
-Categories=Qt;KDE;X-KDE-settings-network;Settings;
-OnlyShowIn=KDE;
-
-Comment=A module to configure shares for Microsoft Windows
-Comment[ar]=وحدة لإعداد مشاركة ميكروسوفت ويندوز
-Comment[ast]=Un módulu pa configurar recursos compartíos de Microsoft Windows
-Comment[be]=Модуль настаўлення агульных рэсурсаў для Microsoft Windows
-Comment[bg]=Настройване споделянето на ресурси с Майкрософт Уиндоус
-Comment[bn]=মাইক্রোসফ্ট উইন্ডোজের জন্য ভাগাভাগি কনফিগার করতে একটি মডিউল
-Comment[ca]=Un mòdul per configurar els recursos compartits de Microsoft Windows
-Comment[ca@valencia]=Un mòdul per configurar els recursos compartits de Microsoft Windows
-Comment[cs]=Modul pro konfiguraci sdílených prostředků MS Windows
-Comment[da]=Et modul til at indstille delte ressourcer til Microsoft Windows
-Comment[de]=Modul zum Einrichten von Windows-Freigaben
-Comment[el]=Ένα άρθρωμα για τη ρύθμιση κοινοχρήστων για τα Microsoft Windows
-Comment[en_GB]=A module to configure shares for Microsoft Windows
-Comment[eo]=Modulo por agordi la komunajn dosierojn por Vindozo
-Comment[es]=Un módulo para configurar recursos compartidos de Microsoft Windows
-Comment[et]=Microsoft Windowsi jagatud ressursside seadistusmoodul
-Comment[eu]=Microsoft Windows-entzako partekatzea konfiguratzeko modulu bat
-Comment[fa]=یک پیمانه جهت پیکربندی مشترکات برای میکروسافت ویندوز
-Comment[fi]=Moduuli Microsoft Windows -jakojen asettamiseen
-Comment[fr]=Un module permettant de configurer les partages Microsoft Windows
-Comment[ga]=Modúl lenar féidir comhranna Windows a chumrú
-Comment[gl]=Un módulo para configurar os compartimentos con Microsoft Windows
-Comment[he]=מודול להגדרת שיתופים עם חלונות של מיקרוסופט
-Comment[hi]=एक मॉड्यूल जो आपको माइक्रोसॉफ़्ट विंडोज के लिए साझा को कॉन्फ़िगर करने देता है.
-Comment[hne]=एक माड्यूल जऊन आप मन ल माइक्रोसाफ्ट विंडोज बर साझा ल कान्फिगर करन देथे .
-Comment[hr]=Modul za podešavanje dijeljenja za Microsoft Windows
-Comment[hu]=Beállítómodul Microsoft Windows-os megosztásokhoz
-Comment[ia]=Un modulo pro configurar areas compartite per Microsoft Windows
-Comment[is]=Eining til að stilla sameignir fyrir Microsoft Windows
-Comment[it]=Un modulo per configurare le condivisioni per Microsoft Windows
-Comment[ja]=Microsoft Windows との共有設定
-Comment[kk]=Microsoft Windows-пен ортақ ресурстарды баптау модулі
-Comment[km]=ម៉ូឌុល​ដើម្បី​កំណត់​រចនា​សម្ព័ន្ធ​ការ​ចែក​រំលែក​សម្រាប់​ម៉ៃក្រូសូហ្វ​វីនដូ
-Comment[ko]=마이크로소프트 윈도 공유 설정 모듈
-Comment[lt]=Modulis MS Windows dalinamų diskų konfigūravimui
-Comment[lv]=Microsoft Windows kopīgojumu konfigurācijas modulis
-Comment[ml]=മൈക്രോസോഫ്റ്റ് വിന്‍ഡോസുമായി പങ്കിടുന്നതു് ക്രമീകരിയ്ക്കാനുള്ള ഒരു ഘടകം
-Comment[nb]=En modul som setter opp delte ressurser for Microsoft Windows
-Comment[nds]=Moduul för't Instellen vun Microsoft-Windows-Freegaven
-Comment[ne]=माइक्रोसफ्ट विन्डोजका लागि साझेदारी कन्फिगर गर्न मोड्युल
-Comment[nl]=Een module voor het instellen van shares voor Microsoft Windows
-Comment[nn]=Ein modul for oppsett av delte Microsoft Windows-ressursar
-Comment[pa]=ਮਾਈਕਰੋਸਾਫਟ ਵਿੰਡੋਜ਼ ਲਈ ਸ਼ੇਅਰ ਸੰਰਚਨਾ ਲਈ ਇੱਕ ਮੋਡੀਊਲ
-Comment[pl]=Moduł do konfigurowania udziałów Microsoft Windows
-Comment[pt]=Um módulo para configurar partilhas para o Microsoft Windows
-Comment[pt_BR]=Um módulo para configurar compartilhamentos com o Microsoft Windows
-Comment[ro]=Modul de configurare a partajărilor pentru Microsoft Windows
-Comment[ru]=Модуль настройки общих ресурсов для Microsoft Windows
-Comment[sk]=Modul na konfiguráciu zdieľaní pre Microsoft Windows
-Comment[sl]=Modul za nastavitev souporabe map za Microsoft Windows
-Comment[sr]=Модул за подешавање дељења за Мајкрософтов Виндоуз
-Comment[sr@ijekavian]=Модул за подешавање дијељења за Мајкрософтов Виндоуз
-Comment[sr@ijekavianlatin]=Modul za podešavanje dijeljenja za Microsoftov Windows
-Comment[sr@latin]=Modul za podešavanje deljenja za Microsoftov Windows
-Comment[sv]=En modul för att ställa in kataloger delade med Microsoft Windows
-Comment[tr]=Microsoft Windows paylaşımlarını yapılandırmak için bir modül
-Comment[uk]=Модуль налаштування спільних ресурсів для Microsoft Windows
-Comment[vi]=Một môđun để cấu hình chia sẻ với Microsoft Windows
-Comment[x-test]=xxA module to configure shares for Microsoft Windowsxx
-Comment[zh_CN]=配置 Microsoft Windows 共享的模块
-Comment[zh_HK]=設定 Microsoft Windows 分享資源的模組
-Comment[zh_TW]=設定 Microsoft Windows 分享的模組
-X-KDE-Keywords=KcmSambaConf,kcmsambaconf,samba,windows,share
-X-KDE-Keywords[bg]=Keywords=Самба, Уиндоус, мрежа, споделяне, KcmSambaConf, kcmsambaconf, samba, windows, share
-X-KDE-Keywords[ca]=KcmSambaConf,kcmsambaconf,samba,windows,share,recurs compartit
-X-KDE-Keywords[cs]=Samba,nastavení,windows,sdílení
-X-KDE-Keywords[de]=KcmSambaConf,kcmsambaconf,samba,windows,freigabe,share
-X-KDE-Keywords[et]=KcmSambaConf,kcmsambaconf,samba,windows,jagatud ressursid
-X-KDE-Keywords[eu]=KcmSambaConf,kcmsambaconf,samba,windows,partekatze
-X-KDE-Keywords[fa]=KcmSambaConf، kcmsambaconf، samba، ویندوز، مشترک
-X-KDE-Keywords[fi]=KcmSambaConf,kcmsambaconf,samba,windows,jako
-X-KDE-Keywords[fr]=KcmSambaConf,kcmsambaconf,samba,windows,partage
-X-KDE-Keywords[gl]=KcmSambaConf,kcmsambaconf,samba,widows,compartir
-X-KDE-Keywords[he]=KcmSambaConf,kcmsambaconf,samba,windows,share, סמבה, חלונות, שיתוף, שיתופי חלונות
-X-KDE-Keywords[hu]=KcmSambaConf,kcmsambaconf,samba,windows,megosztás
-X-KDE-Keywords[is]=KcmSambaConf,kcmsambaconf,samba,windows,sameign
-X-KDE-Keywords[it]=KcmSambaConf,kcmsambaconf,samba,windows,condivisione
-X-KDE-Keywords[ja]=KcmSambaConf,kcmsambaconf,samba,windows,共有
-X-KDE-Keywords[km]=KcmSambaConf,kcmsambaconf,samba,បង្អួច,ចែក​រំលែក
-X-KDE-Keywords[ko]=KcmSambaConf,kcmsambaconf,samba,윈도,windows,공유
-X-KDE-Keywords[lt]=KcmSambaConf,kcmsambaconf,samba,windows,share,dalinimasis,dalintis,pasidalinti
-X-KDE-Keywords[nb]=KcmSambaConf,kcmsambaconf,samba,windows,delt,ressurs
-X-KDE-Keywords[nds]=KcmSambaConf,kcmsambaconf,samba,windows,share,freegaav,freegaven
-X-KDE-Keywords[ne]=KcmSambaConf,kcmsambaconf,साम्बा,विन्डोज,साझेदारी
-X-KDE-Keywords[nl]=KcmSambaConf,kcmsambaconf,samba,windows netwerk,share,gedeelde mappen,gedeelde printers
-X-KDE-Keywords[nn]=KcmSambaConf,kcmsambaconf,samba,Windows,delt ressurs
-X-KDE-Keywords[pl]=KcmSambaConf,kcmsambaconf,samba,Samba,serwer,SMB,smb,windows,udział,dysk sieciowy
-X-KDE-Keywords[pt]=KcmSambaConf,kcmsambaconf,Samba,Windows,partilha
-X-KDE-Keywords[sl]=KcmSambaConf,kcmsambaconf,Samba,samba,souporaba,deljeno
-X-KDE-Keywords[sv]=IM SAMBA-inställning,IM samba-inställning,Windows,dela
-X-KDE-Keywords[uk]=KcmSambaConf,kcmsambaconf,samba,windows,share,спільні ресурси
-X-KDE-Keywords[vi]=KcmSambaConf,kcmsambaconf,samba,windows,share, chia sẻ
-X-KDE-Keywords[x-test]=xxKcmSambaConf,kcmsambaconf,samba,windows,sharexx
-X-KDE-Keywords[zh_CN]=KcmSambaConf,kcmsambaconf,samba,windows,share,共享
-Name=Samba
-Name[ar]=سامبا
-Name[ast]=Samba
-Name[bg]=Самба
-Name[bn]=সাম্বা
-Name[br]=Samba
-Name[ca]=Samba
-Name[ca@valencia]=Samba
-Name[cs]=Samba
-Name[da]=Samba
-Name[de]=Samba
-Name[el]=Samba
-Name[en_GB]=Samba
-Name[eo]=Samba
-Name[es]=Samba
-Name[et]=Samba
-Name[eu]=Samba
-Name[fi]=Samba
-Name[fr]=Samba
-Name[ga]=Samba
-Name[gl]=Samba
-Name[he]=סמבה
-Name[hi]=साम्बा
-Name[hne]=साम्बा
-Name[hr]=Samba
-Name[hu]=Samba
-Name[ia]=Samba
-Name[is]=Samba
-Name[it]=Samba
-Name[ja]=Samba
-Name[kk]=Samba
-Name[km]=Samba
-Name[ko]=Samba
-Name[lt]=Samba
-Name[lv]=Samba
-Name[mai]=साम्बा
-Name[ml]=സാംബ
-Name[nb]=Samba
-Name[nds]=Samba
-Name[ne]=साम्बा
-Name[nl]=Samba
-Name[nn]=Samba
-Name[oc]=Samba
-Name[pa]=ਸਾਂਬਾ
-Name[pl]=Samba
-Name[pt]=Samba
-Name[pt_BR]=Samba
-Name[ro]=Samba
-Name[ru]=Samba
-Name[sk]=Samba
-Name[sl]=Samba
-Name[sr]=Самба
-Name[sr@ijekavian]=Самба
-Name[sr@ijekavianlatin]=Samba
-Name[sr@latin]=Samba
-Name[sv]=Samba
-Name[tr]=Samba
-Name[uk]=Samba
-Name[uz]=Samba
-Name[uz@cyrillic]=Samba
-Name[vi]=Samba
-Name[wa]=Samba
-Name[x-test]=xxSambaxx
-Name[zh_CN]=Samba
-Name[zh_HK]=Samba
-Name[zh_TW]=Samba
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/kcmsambaconf.h filesharing//advanced/kcm_sambaconf/kcmsambaconf.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcmsambaconf.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/kcmsambaconf.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,162 +0,0 @@
-/***************************************************************************
-                          kcmsambaconf.h  -  description
-                            -------------------
-    begin                : Mon Apr  8 13:35:56 CEST 2002
-    copyright            : (C) 2002 by Christian Nitschkowski
-    email                : segfault_ii@web.de
-    copyright            : (C) 2002-2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
-***************************************************************************/
-
-/******************************************************************************
-*                                                                            *
-*  This file is part of KSambaPlugin.                                        *
-*                                                                            *
-*  KSambaPlugin is free software; you can redistribute it and/or modify      *
-*  it under the terms of the GNU General Public License as published by      *
-*  the Free Software Foundation; either version 2 of the License, or         *
-*  (at your option) any later version.                                       *
-*                                                                            *
-*  KSambaPlugin is distributed in the hope that it will be useful,           *
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
-*  GNU General Public License for more details.                              *
-*                                                                            *
-*  You should have received a copy of the GNU General Public License         *
-*  along with KSambaPlugin; if not, write to the Free Software                     *
-*  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
-*                                                                            *
-******************************************************************************/
-
-#ifndef KCMSAMBACONF_H_
-#define KCMSAMBACONF_H_
-
-#include <kcmodule.h>
-#include "kcminterface.h"
-#include "ui_share.h"
-#include <q3ptrlist.h>
-#include <q3listview.h>
-//Added by qt3to4:
-#include <QPixmap>
-
-
-class SambaShare;
-class SambaFile;
-class QPixmap;
-/**
-* A QListViewItem which holds a SambaShare object
-**/
-class ShareListViewItem : public Q3ListViewItem
-{
-public:
-  ShareListViewItem(Q3ListView * parent, SambaShare* share);
-
-  SambaShare* getShare() const;
-  void setShare(SambaShare* share);
-  void updateShare();
-
-protected:
-  SambaShare* _share;
-  QPixmap createPropertyPixmap();
-};
-
-
-class KPageWidget;
-class DictManager;
-class SmbConfConfigWidget;
-
-class KcmSambaConf: public KCModule
-{
-  Q_OBJECT
-  public:
-    KcmSambaConf(const KComponentData &inst ,QWidget *parent = 0L, const char *name = 0L);
-    virtual ~KcmSambaConf();
-
-    void load(const QString &);
-    void save();
-    void defaults();
-    int buttons();
-    QString quickHelp() const;
-
-  public slots:
-    void configChanged();
-
-    void editShare();
-    void addShare();
-    void removeShare();
-
-#if 0
-    void editPrinter();
-    void addPrinter();
-    void removePrinter();
-#endif
-
-    void editShareDefaults();
-#if 0
-    void editPrinterDefaults();
-#endif
-
-
-  protected:
-    /**
-    * The path of the smb.conf file
-    **/
-    QString _smbconf;
-    SambaFile* _sambaFile;
-
-    DictManager* _dictMngr;
-
-    void init();
-    void loadUserTab();
-    void saveUserTab();
-    bool getSocketBoolValue( const QString & str, const QString & name );
-    int getSocketIntValue( const QString & str, const QString & name );
-    QString socketOptions();
-    void setComboIndexToValue(QComboBox* box, const QString & value, SambaShare* share);
-
-    void loadBaseSettings(SambaShare*s=0L);
-    void loadSecurity(SambaShare* );
-    void loadLogging(SambaShare* );
-    void loadTuning(SambaShare* );
-    void loadDomain(SambaShare* );
-    void loadWins(SambaShare* );
-    void loadPrinting(SambaShare* );
-    void loadFilenames(SambaShare* );
-    void loadLocking(SambaShare* );
-    void loadCharset(SambaShare*);
-    void loadLogon(SambaShare* );
-    void loadSocket(SambaShare* );
-    void loadSSL(SambaShare* );
-    void loadProtocol(SambaShare* );
-    void loadWinbind(SambaShare* );
-    void loadNetbios(SambaShare* );
-    void loadVFS(SambaShare* );
-    void loadBrowsing(SambaShare* );
-    void loadCommands(SambaShare*);
-    void loadMisc(SambaShare* );
-    void loadDebug(SambaShare* );
-    void loadLDAP(SambaShare*);
-
-    void initAdvancedTab();
-
-    void createSmbConfigWidget();
-    
-  protected slots:
-    void addSambaUserBtnClicked();
-    void removeSambaUserBtnClicked();
-    void sambaUserPasswordBtnClicked();
-    void slotMouseButtonPressed(int,Q3ListViewItem*,const QPoint &,int);
-    void joinADomainBtnClicked();
-    void nullPasswordsEnabled(bool);
-    void loadBtnClicked();
-    void loadCanceled(const QString & msg);
-    void fillFields(); 
-    void slotSpecifySmbConf(const QString &);
-    
-  private:
-    KcmInterface* _interface;
-    KPageWidget* _janus;
-    SmbConfConfigWidget* m_smbConfConfigWidget;
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/linuxpermissionchecker.cpp filesharing//advanced/kcm_sambaconf/linuxpermissionchecker.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/linuxpermissionchecker.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/linuxpermissionchecker.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,203 +0,0 @@
-/***************************************************************************
-    begin                : Tue May 17 2003
-    copyright            : (C) 2003 by Jan Sch�er
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-#include <qregexp.h> 
-#include <qstringlist.h> 
-
-#include <kmessagebox.h>
-#include <klocale.h>
-#include <kdebug.h>
-
-#include "passwd.h"
-#include "sambashare.h"  
-#include "linuxpermissionchecker.h"
-
-LinuxPermissionChecker::LinuxPermissionChecker(SambaShare* share,QWidget* parent = 0L)
-{
-  m_sambaShare = share;
-  m_parent = parent;
-
-  if (!share) {
-    kWarning() << "WARNING: LinuxPermissionChecker: share is null !";
-    return;        
-  }
-  
-  m_fi = QFileInfo(share->getValue("path"));
-  
-  if ( ! m_fi.exists()) {
-    kDebug(5009) << "LinuxPermissionChecker: path does not exists !";
-  }
-
-}
-
-
-LinuxPermissionChecker::~LinuxPermissionChecker()
-{
-}
-
-bool LinuxPermissionChecker::checkAllPermissions() {
-  if (! m_sambaShare )
-     return true;
-     
-  if ( ! m_fi.exists())
-     return true;   
-
-  if (! checkPublicPermissions())
-     return false;     
-     
-  if (! checkAllUserPermissions())
-     return false;
-     
-  return true;          
-}
-    
-bool LinuxPermissionChecker::checkAllUserPermissions() {
-  if (! m_sambaShare )
-     return true;
-
-  if ( ! m_fi.exists())
-     return true;   
-       
-  QStringList readList = QStringList::split(QRegExp("[,\\s]+"),m_sambaShare->getValue("read list"));
-  
-  for ( QStringList::Iterator it = readList.begin(); it != readList.end(); ++it )
-  {
-    if (!checkUserReadPermissions(*it))
-       return false;
-  }    
-  
-  QStringList writeList = QStringList::split(QRegExp("[,\\s]+"),m_sambaShare->getValue("write list"));
-  
-  for ( QStringList::Iterator it = writeList.begin(); it != writeList.end(); ++it )
-  {
-    if (!checkUserWritePermissions(*it))
-       return false;
-  }    
-  
-  return true;     
-}
-
-bool LinuxPermissionChecker::checkPublicPermissions() {
-  if (! m_sambaShare )
-     return true;
-
-  bool isPublic = m_sambaShare->getBoolValue("public");
-  if (!isPublic)
-     return true;
-  
-  QString guestAccount = m_sambaShare->getValue("guest account");
-  
-  if ( ! checkUserReadPermissions(guestAccount,false))
-  {
-     if (KMessageBox::Cancel == KMessageBox::warningContinueCancel(
-         0L,i18n(
-           "<qt>You have specified <b>public read access</b> for this directory, but "
-           "the guest account <b>%1</b> does not have the necessary read permissions;<br />"
-           "do you want to continue anyway?</qt>", guestAccount)
-           ,i18n("Warning")
-           ,KStandardGuiItem::cont()
-           ,KStandardGuiItem::cancel()
-           ,"KSambaPlugin_guestAccountHasNoReadPermissionsWarning"))
-         return false;
-  }
-  
-  
-  if ( ! checkUserWritePermissions(guestAccount,false))
-  {
-     if (KMessageBox::Cancel == KMessageBox::warningContinueCancel(
-         0L,i18n(
-           "<qt>You have specified <b>public write access</b> for this directory, but "
-           "the guest account <b>%1</b> does not have the necessary write permissions;<br />"
-           "do you want to continue anyway?</qt>", guestAccount)
-           ,i18n("Warning")
-           ,KStandardGuiItem::cont()
-           ,KStandardGuiItem::cancel()
-           ,"KSambaPlugin_guestAccountHasNoWritePermissionsWarning"))
-         return false;
-  }
-  
-  return true;
-}
-    
-bool LinuxPermissionChecker::checkUserPermissions(const QString & user) {
-  if ( ! checkUserReadPermissions(user))
-     return false;  
-  
-  if ( ! checkUserWritePermissions(user))
-     return false;    
-       
-  return true;     
-}
-
-bool LinuxPermissionChecker::checkUserWritePermissions(const QString & user, bool showMessageBox) {
-  // If no write permissions are given, we don't need to check them.
-  if (m_sambaShare->getBoolValue("read only"))
-     return true;
-  
-  if (! ((m_fi.permission(QFileInfo::WriteOther)) ||
-          (m_fi.permission(QFileInfo::WriteUser) && user == m_fi.owner()) ||
-          (m_fi.permission(QFileInfo::WriteGroup) && isUserInGroup(user, m_fi.group())))
-      )
-  {
-    if (!showMessageBox)
-      return false;
-    
-    if (KMessageBox::Cancel == KMessageBox::warningContinueCancel(
-        0L,i18n(
-          "<qt>You have specified <b>write access</b> to the user <b>%1</b> for this directory, but "
-          "the user does not have the necessary write permissions;<br />"
-          "do you want to continue anyway?</qt>", user)
-          ,i18n("Warning")
-          ,KStandardGuiItem::cont()
-          ,KStandardGuiItem::cancel()
-          ,"KSambaPlugin_userHasNoWritePermissionsWarning"))
-        return false;
-  }
-  return true;
-}
-    
-bool LinuxPermissionChecker::checkUserReadPermissions(const QString & user, bool showMessageBox) {
-  if (! ((m_fi.permission(QFileInfo::ReadOther)) ||
-         (m_fi.permission(QFileInfo::ReadUser) && user == m_fi.owner()) ||
-         (m_fi.permission(QFileInfo::ReadGroup) && isUserInGroup(user, m_fi.group())))
-     )
-  {     
-     if (!showMessageBox)
-        return false;
-        
-     if (KMessageBox::Cancel == KMessageBox::warningContinueCancel(
-         0L,i18n(
-           "<qt>You have specified <b>read access</b> to the user <b>%1</b> for this directory, but "
-           "the user does not have the necessary read permissions;<br />"
-           "do you want to continue anyway?</qt>", user)
-           ,i18n("Warning")
-           ,KStandardGuiItem::cont()
-           ,KStandardGuiItem::cancel()
-           ,"KSambaPlugin_userHasNoReadPermissionsWarning"))
-         return false;
-  }
-
-  return true;
-}
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/linuxpermissionchecker.h filesharing//advanced/kcm_sambaconf/linuxpermissionchecker.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/linuxpermissionchecker.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/linuxpermissionchecker.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,103 +0,0 @@
-/***************************************************************************
-    begin                : Tue May 17 2003
-    copyright            : (C) 2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-#ifndef LINUXPERMISSIONCHECKER_H
-#define LINUXPERMISSIONCHECKER_H
-
-#include <qfileinfo.h>
-
-class SambaShare;
-class QWidget;
-
-/**
- * A class to check if the Samba permissions specified in the SambaShare fit 
- * to the un?x permissions of the directory. E.g. a user specifies a SambaShare as writeable
- * for the public, but the guest account has no write permissions for the directory of the
- * SambaShare. This will cause a dialog (which can be turned of)  to popup and inform the
- * user about the missing rights and ask him to continue nevertheless or to cancel.
- * This class works for all un?x systems not only for Linux, but I couldn't call the
- * class Un?xPermissionChecker ;-)
- * @author Jan Schaefer
- */
-class LinuxPermissionChecker{
-public:
-    LinuxPermissionChecker(SambaShare*,QWidget* parent );
-    ~LinuxPermissionChecker();
-
-    /**
-     * Checks all possible errors that the user could made
-     * @returns <ul>
-     * <li><code>false</code> if the un?x permissions of the directory doesn't fit
-     * to the specified permissions in the Samba share and the user has pushed
-     * the cancel button of one of the dialogs, that informed her.
-     * <li><code>true</code> if either there haven't been any problems with the un?x
-     * permissions, or there have been problems, but the user pressed always the continue button.
-     */
-    bool checkAllPermissions();
-
-    /** 
-     * Checks only the public permissions of the directory. First checks
-     * if the Samba share is specified public and then checks if the guest account
-     * has the appropriate rights.
-     * @return @see #check
-     */
-    bool checkPublicPermissions();
-    
-    /**
-     * Checks all permissions of all users specified in 
-     * the Samba share
-     * @return @see #check
-     */
-    bool checkAllUserPermissions();
-        
-protected:
-    
-    
-    /**
-     * Checks all permissions of the given un?x user
-     * @return @see #check
-     */
-    bool checkUserPermissions(const QString & user);
-
-    /** 
-     * Checks the write permissions of the given un?x user
-     * Does not show a dialog if showMessageBox is false
-     * @return  @see #check
-     */
-    bool checkUserWritePermissions(const QString & user,bool showMessageBox = true);
-    
-    /**
-     * Checks the read permissions of the given un?x user
-     * Does not show a dialog if showMessageBox is false
-     * @return  @see #check
-     */
-    bool checkUserReadPermissions(const QString & user,bool showMessageBox = true);
-        
-    QWidget* m_parent;
-    SambaShare* m_sambaShare;
-    QFileInfo m_fi;    
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/passwd.cpp filesharing//advanced/kcm_sambaconf/passwd.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/passwd.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/passwd.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,164 +0,0 @@
-/***************************************************************************
-                          passwd.cpp  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schaefer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-
-#include <sys/types.h>
-#include <pwd.h>
-#include <grp.h>
-#include <iostream>
-
-#include "passwd.h"
-
-UnixUserList getUnixUserList()
-{
-  UnixUserList list;
-
-  struct passwd* p;
-
-  while ((p = getpwent()))
-  {
-    if (!p) continue;
-
-    UnixUser *u = new UnixUser();
-    u->name = p->pw_name;
-    u->uid = p->pw_uid;
-    list.append(u);
-  }
-
-  endpwent();
-
-  list.sort();
-
-  return list;
-}
-
-QStringList getUnixUsers()
-{
-  QStringList list;
-
-  struct passwd* p;
-
-  while ((p = getpwent()))
-  {
-    if (p)
-       list.append(QString(p->pw_name));
-  }
-
-  endpwent();
-
-  list.sort();
-
-  return list;
-}
-
-QStringList getUnixGroups()
-{
-  QStringList list;
-
-  struct group* g;
-
-  while ((g = getgrent()))
-  {
-    if (g)
-       list.append(QString(g->gr_name));
-  }
-
-  endgrent();
-
-  list.sort();
-
-  return list;
-}
-
-int getUserUID(const QString & name)
-{
-  if (name.isNull()) return -1;
-
-  struct passwd* p;
-
-  p = getpwnam(name.toLocal8Bit());
-
-  if (p)
-     return p->pw_uid;
-
-  return -1;
-}
-
-int getUserGID(const QString & name)
-{
-  if (name.isNull()) return -1;
-
-  struct passwd* p;
-
-  p = getpwnam(name.toLocal8Bit());
-
-  if (p)
-    return p->pw_gid;
-
-  return -1;
-}
-
-int getGroupGID(const QString & name)
-{
-  if (name.isNull()) return -1;
-
-  struct group* g;
-
-  g = getgrnam(name.toLocal8Bit());
-
-  if (g)
-    return g->gr_gid;
-
-  return -1;
-}
-
-bool isUserInGroup(const QString & user, const QString & group) {
-  struct group* g;
-
-  while ((g = getgrent()))
-  {
-    if (g && QString(g->gr_name) == group) {
-       char** names = g->gr_mem;
-
-       int i = 0;
-       char* name = names[0];
-       while (name != 0L) {
-          i++;
-          if (QString(name) == user) {
-            endgrent();
-            return true;
-          }
-          name = names[i];
-       }
-       break;
-    }
-  }
-
-  endgrent();
-  return false;
-}
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/passwd.h filesharing//advanced/kcm_sambaconf/passwd.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/passwd.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/passwd.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,56 +0,0 @@
-/***************************************************************************
-                          passwd.h  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef PASSWD_H
-#define PASSWD_H
-
-#include <qstringlist.h>
-#include <qstring.h>
-#include <q3ptrlist.h>
-
-
-
-class UnixUser
-{
-public:
-  QString name;
-  int uid;
-};
-
-typedef Q3PtrList<UnixUser> UnixUserList;
-
-UnixUserList getUnixUserList();
-QStringList getUnixUsers();
-QStringList getUnixGroups();
-int getUserUID(const QString &);
-int getUserGID(const QString &);
-int getGroupGID(const QString &);
-bool isUserInGroup(const QString &, const QString &);
-
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/printerdlgimpl.cpp filesharing//advanced/kcm_sambaconf/printerdlgimpl.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/printerdlgimpl.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/printerdlgimpl.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,245 +0,0 @@
-/***************************************************************************
-                          printerdlgimpl.cpp  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-
-/**
- * @author Jan Schäfer
- **/
-#include <qcheckbox.h>
-#include <qlineedit.h>
-#include <qcombobox.h>
-#include <qlabel.h>
-#include <q3listbox.h>
-#include <qpainter.h>
-#include <q3groupbox.h>
-#include <qpixmap.h>
-#include <qbitmap.h>
-#include <qlayout.h>
-#include <qtabwidget.h>
-//Added by qt3to4:
-#include <Q3PtrList>
-
-#include <klineedit.h>
-#include <kurlrequester.h>
-#include <knuminput.h>
-#include <kdebug.h>
-#include <kdeprint/kmmanager.h>
-#include <kdeprint/kmprinter.h>
-#include <kcombobox.h>
-#include <kiconloader.h>
-#include <klocale.h>
-
-#include <assert.h>
-
-#include "sambafile.h"
-#include "printerdlgimpl.h"
-#include "usertabimpl.h"
-#include "passwd.h"
-#include "dictmanager.h"
-
-
-PrinterDlgImpl::PrinterDlgImpl(QWidget* parent, SambaShare* share)
-	: KcmPrinterDlg(parent,"sharedlgimpl")
-{
-  if (!share) {
-    kWarning() << "PrinterDlgImpl::Constructor : share parameter is null!";
-    return;    
-  }
-
-  _share = share;
-  _dictMngr = new DictManager(share);
-  
-  initDialog();
-}
-
-void PrinterDlgImpl::initDialog()
-{
-	// Base settings
-  if (!_share)
-     return;
-
-	QList<KMPrinter*> printerList = KMManager::self()->printerListComplete();
-
-	QListIterator<KMPrinter*>       it(printerList);
-	while (it.hasNext())
-  	{
-		KMPrinter *item = it.next();
-    if (!item->isSpecial()){
-      queueCombo->insertItem(item->printerName());
-    }
-  }
-
-  setComboToString(queueCombo,_share->getValue("printer name"));
-
- 
-  _dictMngr->add("path",pathUrlRq);
-  printersChk->setChecked( _share->getName() == "printers" );
-
-  shareNameEdit->setText( _share->getName() );
-  _dictMngr->add("comment",commentEdit);
-
-  _dictMngr->add("available",availableBaseChk);
-  _dictMngr->add("browseable",browseableBaseChk);
-  _dictMngr->add("public",publicBaseChk);
-  
-  // Users
-
-  _userTab = new UserTabImpl(this,_share);
-  _tabs->insertTab(_userTab,i18n("&Users"),1);
-  _userTab->load();
-  connect(_userTab, SIGNAL(changed()), this, SLOT(changedSlot()));
-  
-
-  // Printing
-
-  _dictMngr->add("postscript",postscriptChk);
-  _dictMngr->add("use client driver",useClientDriverChk);
-  _dictMngr->add("default devmode",defaultDevmodeChk);
-
-  _dictMngr->add("max print jobs",maxPrintJobsSpin);
-  _dictMngr->add("max reported print jobs",maxReportedPrintJobsSpin);
-  _dictMngr->add("printing",printingCombo,
-                  new QStringList(QStringList() 
-                  << "sysv" << "aix" << "hpux" << "bsd" << "qnx"
-                  << "plp" << "lprng" << "softq" << "cups" << "nt" << "os2"));
-                  
-  _dictMngr->add("printer driver",printerDriverEdit);
-  _dictMngr->add("printer driver location",printerDriverLocationEdit);
-
-  // Commands
-
-  _dictMngr->add("print command",printCommandEdit);
-  _dictMngr->add("lpq command",lpqCommandEdit);
-  _dictMngr->add("lprm command",lprmCommandEdit);
-  _dictMngr->add("lppause",lppauseEdit);
-  _dictMngr->add("lpresume",lpresumeEdit);
-  _dictMngr->add("queuepause",queuepauseEdit);
-  _dictMngr->add("queueresume",queueresumeEdit);
-  
-  // Security
-
-  _dictMngr->add("printer admin",printerAdminEdit);
-  _dictMngr->add("hosts allow",hostsAllowEdit);
-  _dictMngr->add("hosts deny",hostsDenyEdit);
-  
-  guestAccountCombo->addItems( getUnixUsers() );
-  setComboToString(guestAccountCombo,_share->getValue("guest account"));
-
-  // Advanced
-
-  _dictMngr->add("min print space",minPrintSpaceSpin);
-  _dictMngr->add("status",statusChk);
-  _dictMngr->add("preexec",preExecEdit);
-  _dictMngr->add("postexec",postExecEdit);
-  _dictMngr->add("root preexec",rootPreExecEdit);
-  _dictMngr->add("root postexec",rootPostExecEdit);
-
-  _dictMngr->load( _share );
-  connect(_dictMngr, SIGNAL(changed()), this, SLOT(changedSlot()));
-    
-}
-
-void PrinterDlgImpl::accept()
-{
-  if (!_share)
-     return;
-
-  // Security
-  
-  _share->setValue("guest account",guestAccountCombo->currentText( ) );
-  _share->setValue("printer name",queueCombo->currentText());
-
-  if (printersChk->isChecked())
-  {
-  	 _share->setName("printers");
-  }
-	else
-		_share->setName(shareNameEdit->text());
-
-
-  _userTab->save();
-  _dictMngr->save( _share );      
-      
-
-	KcmPrinterDlg::accept();
-}
-
-PrinterDlgImpl::~PrinterDlgImpl()
-{
-}
-
-void PrinterDlgImpl::printersChkToggled(bool b)
-{
-	if (b)
-  {
-		shareNameEdit->setText("printers");
-    shareNameEdit->setEnabled(false);
-    
-    int dist = 10;
-		int w = 64 + dist;
-    int h = 64 + 2*dist;
-
-    QPixmap pix(w,h);
-    pix.fill(Qt::transparent);
-
-		QPixmap pix2 = DesktopIcon("printer1");
-
-    // Draw the printericon three times
-    QPainter p(&pix);
-    p.drawPixmap(dist+dist/2,0,pix2);
-    p.drawPixmap(dist/2,dist,pix2);
-    p.drawPixmap(dist+dist/2,2*dist,pix2);
-		p.end();
-
-  	QBitmap mask(w,h);
-
-    mask.fill(Qt::black); // everything is transparent
-
-    p.begin(&mask);
-    
-    //p.setRasterOp(Qt::OrROP);
-    p.drawPixmap(dist+dist/2,0,pix2.mask());
-    p.drawPixmap(dist/2,dist,pix2.mask());
-    p.drawPixmap(dist+dist/2,2*dist,pix2.mask());
-		p.end();
-
-		pix.setMask(mask);
-
-    printerPixLbl->setPixmap(pix);
-		pixFrame->layout()->setMargin( 2 );
-  }
-	else
-  {
-  	shareNameEdit->setEnabled(true);
-		shareNameEdit->setText( _share->getName() );
-		printerPixLbl->setPixmap(DesktopIcon("printer1"));
-		pixFrame->layout()->setMargin( 11 );
-  }
-}
-
-#include "printerdlgimpl.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/printerdlgimpl.h filesharing//advanced/kcm_sambaconf/printerdlgimpl.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/printerdlgimpl.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/printerdlgimpl.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,78 +0,0 @@
-/***************************************************************************
-                         printerdlgimpl.h  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef PRINTERDLGIMPL_H
-#define PRINTERDLGIMPL_H
-
-
-/**
- * @author Jan Schäfer
- **/
-
-#include "kcmprinterdlg.h"
-
-class SambaShare;
-class QWidget;
-class UserTabImpl;
-class DictManager;
-
-/**
- * This class implements the tcmprinterdlg.ui interface
- **/
-class PrinterDlgImpl : public KcmPrinterDlg
-{
-Q_OBJECT
-
-public :
-
-  PrinterDlgImpl(QWidget* parent, SambaShare* share);
-  ~PrinterDlgImpl();
-
-protected :
-
-	/**
-   * Fills all dialog fields with the values
-   * of the SambaShare object
-   **/
-  void initDialog();
-
-  /**
-   * The share object to change with this dialog
-   **/
-	SambaShare* _share;
-
-  UserTabImpl* _userTab;
-  DictManager* _dictMngr;
-
-protected slots:
-	void accept();
-  virtual void printersChkToggled(bool);
-};
-
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/programmingconventions.txt filesharing//advanced/kcm_sambaconf/programmingconventions.txt
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/programmingconventions.txt	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/programmingconventions.txt	1970-01-01 00:00:00.000000000 +0000
@@ -1,10 +0,0 @@
-Programming conventions :
-
-Class member variable : starting with _  e.g. _name
-
-QCheckBox variable : ending to Chk e.g. nameChk
-QLineEdit variable : ending to Edit e.g. nameEdit
-KUrlRequerster variable : ending to UrlRq e.g. pathUrlRq
-QPushButton : ending to Btn e.g. addBtn
-
-QListView: ending to ListView e.g. sharesListView
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/qmultichecklistitem.cpp filesharing//advanced/kcm_sambaconf/qmultichecklistitem.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/qmultichecklistitem.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/qmultichecklistitem.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,163 +0,0 @@
-/***************************************************************************
-                          qmultichecklistitem.cpp  -  description
-                             -------------------
-    begin                : Sun Jan 26 2003
-    copyright            : (C) 2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                             *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#include <qpen.h>
-#include <qpainter.h>
-#include <q3header.h>
-//Added by qt3to4:
-#include <QPolygon>
-
-#include <kdebug.h>
-#include <kmessagebox.h>
-
-#include "qmultichecklistitem.moc"
-#include "qmultichecklistitem.h"
-
-static const int BoxSize = 16;
-
-
-QMultiCheckListItem::QMultiCheckListItem( Q3ListView *parent) :
-  Q3ListViewItem(parent) 
-{
-}
-
-void QMultiCheckListItem::resize(int column) {
-  if (column >= (int) checkBoxColumns.size()) {
-    checkBoxColumns.resize(column*2);
-    checkStates.resize(column*2);
-    disableStates.resize(column*2);
-  }
-
-}
-
-void QMultiCheckListItem::setOn(int column, bool b) {
-  resize(column);
-  checkStates.setBit(column,b);
-  checkBoxColumns.setBit(column);
-  kDebug(5009) << "setOn : " << column;
-  repaint();
-}
-
-bool QMultiCheckListItem::isOn(int column) {
-  resize(column);
-  return checkStates.testBit(column);
-}
-
-bool QMultiCheckListItem::isDisabled(int column) {
-  resize(column);
-  return disableStates.testBit(column);
-}
-
-void QMultiCheckListItem::toggle(int column) {
-  resize(column);
-  checkBoxColumns.setBit(column);
-  checkStates.toggleBit(column);
-  emit stateChanged(column,checkStates.testBit(column));
-
-  repaint();
-}
-
-void QMultiCheckListItem::setDisabled(int column, bool b) {
-  resize(column);
-
-  disableStates.setBit(column,b);
-//  KMessageBox::information(0L,QString("setDisabled"),QString("disable %1 ").arg(column));
-  repaint();
-}
-
-void QMultiCheckListItem::paintCell(QPainter *p,const QColorGroup & cg, int col, int width, int align)
-{
-  resize(col);
-
-  if ( !p )
-    return;
-
-  Q3ListView *lv = listView();
-  if ( !lv )
-    return;
-
-  Q3ListViewItem::paintCell(p,cg,col,width,align );
-
-  int marg = lv->itemMargin();
-//  int width = BoxSize + marg*2;
-  // use a provate color group and set the text/highlighted text colors
-  QColorGroup mcg = cg;
-
-  if (checkBoxColumns.testBit(col)) {
-    // Bold/Italic/use default checkboxes
-    // code almost identical to QCheckListItem
-    Q_ASSERT( lv ); //###
-    // I use the text color of defaultStyles[0], normalcol in parent listview
-//    mcg.setColor( QPalette::Text, ((StyleListView*)lv)->normalcol );
-    int x = 0;
-    if ( align == Qt::AlignCenter ) {
-      QFontMetrics fm( lv->font() );
-      x = (width - BoxSize - fm.width(text(0)))/2;
-    }
-    int y = (height() - BoxSize) / 2;
-
-    if ( !isEnabled() || disableStates.testBit(col))
-      p->setPen( QPen( lv->palette().color( QPalette::Disabled, QPalette::Text ), 2 ) );
-    else
-      p->setPen( QPen( mcg.text(), 2 ) );
-
-    if ( isSelected() && lv->header()->mapToSection( 0 ) != 0 ) {
-      p->fillRect( 0, 0, x + marg + BoxSize + 4, height(),
-             mcg.brush( QPalette::Highlight ) );
-      if ( isEnabled() )
-          p->setPen( QPen( mcg.color( QPalette::HighlightedText), 2 ) ); // FIXME! - use defaultstyles[0].selecol. luckily not used :)
-    }
-    p->drawRect( x+marg, y+2, BoxSize-4, BoxSize-4 );
-    x++;
-    y++;
-    if ( checkStates.testBit(col) ) {
-      QPolygon a( 7*2 );
-      int i, xx, yy;
-      xx = x+1+marg;
-      yy = y+5;
-      for ( i=0; i<3; i++ ) {
-        a.setPoint( 2*i,   xx, yy );
-        a.setPoint( 2*i+1, xx, yy+2 );
-        xx++; yy++;
-      }
-      yy -= 2;
-      for ( i=3; i<7; i++ ) {
-        a.setPoint( 2*i,   xx, yy );
-        a.setPoint( 2*i+1, xx, yy+2 );
-        xx++; yy--;
-      }
-      p->drawLineSegments( a );
-    }
-
-  }
-
-
-}
-
-
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/qmultichecklistitem.h filesharing//advanced/kcm_sambaconf/qmultichecklistitem.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/qmultichecklistitem.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/qmultichecklistitem.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,65 +0,0 @@
-/***************************************************************************
-                          qextendedchecklistitem.h  -  description
-                             -------------------
-    begin                : Sun Jan 26 2003
-    copyright            : (C) 2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-  
-#ifndef _QMULTICHECKLISTITEM_H_
-#define _QMULTICHECKLISTITEM_H_
-
-#include <q3listview.h>
-
-#include <qbitarray.h>
-
-class QMultiCheckListItem : public QObject, public Q3ListViewItem {
-Q_OBJECT
-
-  public:
-    QMultiCheckListItem( Q3ListView *parent=0);
-    ~QMultiCheckListItem() {}
-    
-    virtual bool isOn(int column);
-    virtual bool isDisabled(int column);
-      
-    
-  protected:
-    /* reimp */
-    virtual void paintCell(QPainter *, const QColorGroup &, int, int, int);
-    
-  public slots:
-    virtual void setOn(int, bool);
-    virtual void toggle(int);  
-    virtual void setDisabled(int, bool);
-    
-  signals:
-    void stateChanged(int, bool);    
-  private:
-    QBitArray checkStates;
-    QBitArray checkBoxColumns;
-    QBitArray disableStates;
-    void resize(int column);
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/sambafile.cpp filesharing//advanced/kcm_sambaconf/sambafile.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambafile.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambafile.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,707 +0,0 @@
-/*
-  Copyright (c) 2002-2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#include <qfile.h>
-#include <q3process.h>
-#include <qfileinfo.h>
-//Added by qt3to4:
-#include <QTextStream>
-
-#include <kconfig.h>
-#include <kconfiggroup.h>
-#include <kdebug.h>
-#include <kio/job.h>
-#include <k3process.h>
-#include <kprocess.h>
-#include <kshell.h>
-#include <kmessagebox.h>
-#include <klocale.h>
-#include <ktemporaryfile.h>
-#include <ksambashare.h>
-#include <KStandardDirs>
-#include <pwd.h>
-#include <time.h>
-#include <unistd.h>
-
-#include "sambafile.h"
-
-#define FILESHARE_DEBUG 5009
-
-SambaConfigFile::SambaConfigFile(SambaFile* sambaFile)
-{
-  Q3Dict<QString>(10,false);
-  setAutoDelete(true);
-  _sambaFile = sambaFile;
-}
-
-QString SambaConfigFile::getDefaultValue(const QString & name)
-{
-  SambaShare* defaults = _sambaFile->getTestParmValues();
-  QString s = defaults->getValue(name,false,false);
-
-  return s;
-}
-
-SambaShare* SambaConfigFile::addShare(const QString & name)
-{
-  kDebug(FILESHARE_DEBUG) << "adding " << name << endl;
-  SambaShare* newShare = new SambaShare(name,this);
-  addShare(name,newShare);
-  return newShare;
-}
-
-
-void SambaConfigFile::addShare(const QString & name, SambaShare* share)
-{
-  insert(name,share),
-  _shareList.append(name);
-}
-
-void SambaConfigFile::removeShare(const QString & name)
-{
-  remove(name);
-  _shareList.removeAll(name);
-}
-
-
-QStringList SambaConfigFile::getShareList()
-{
-  return _shareList;
-}
-
-SambaFile::SambaFile(const QString & _path, bool _readonly)
-  : readonly(_readonly),
-    changed(false),
-    path(_path),
-    localPath(_path),
-    _sambaConfig(0),
-    _testParmValues(0),
-    _sambaVersion(-1),
-    _tempFile(0)
-{
-}
-
-SambaFile::~SambaFile()
-{
-  delete _sambaConfig;
-  delete _testParmValues;
-  delete _tempFile;
-
-}
-
-bool SambaFile::isRemoteFile() {
-  return ! KUrl(path).isLocalFile();
-}
-
-/** No descriptions */
-QString SambaFile::findShareByPath(const QString & path) const
-{
-  Q3DictIterator<SambaShare> it(*_sambaConfig);
-  KUrl url(path);
-  url.adjustPath(KUrl::RemoveTrailingSlash);
-
-  for (  ; it.current(); ++it )
-  {
-    SambaShare* share = it.current();
-
-    QString *s = share->find("path");
-    if (s) {
-        KUrl curUrl(*s);
-        curUrl.adjustPath(KUrl::RemoveTrailingSlash);
-
-        kDebug(5009) << url.path() << " =? " << curUrl.path();
-
-        if (url.path() == curUrl.path())
-            return it.currentKey();
-    }
-  }
-
-  return QString();
-}
-
-bool SambaFile::save() {
-  return slotApply();
-}
-
-
-bool SambaFile::slotApply()
-{
-  if (readonly) {
-      kDebug(FILESHARE_DEBUG) << "SambaFile::slotApply: readonly=true";
-      return false;
-  }
-
-  // If we have write access to the smb.conf
-  // we simply save the values to it
-  // if not we have to save the results in
-  // a temporary file and copy it afterwards
-  // over the smb.conf file with kdesu.
-  if (QFileInfo(path).isWritable())
-  {
-    saveTo(path);
-    changed = false;
-    return true;
-  }
-
-  // Create a temporary smb.conf file
-   delete _tempFile;
-  _tempFile = new KTemporaryFile();
-
-  if (!_tempFile->open() || !saveTo(_tempFile->fileName())) {
-    kDebug(5009) << "SambaFile::slotApply: Could not save to temporary file";
-    delete _tempFile;
-    _tempFile = 0;
-    return false;
-  }
-
-  QFileInfo fi(path);
-  KUrl url(path);
-
-  if (KUrl(path).isLocalFile()) {
-    KProcess proc;
-    kDebug(5009) << "SambaFile::slotApply: is local file!";
-
-    QString suCommand=QString("cp %1 %2; rm %3")
-              .arg(KShell::quoteArg(_tempFile->fileName()),
-                   KShell::quoteArg(path),
-                   KShell::quoteArg(_tempFile->fileName()));
-    proc << KStandardDirs::findExe("kdesu") << "-d" << suCommand;
-
-    if (proc.execute()) {
-        kDebug(5009) << "SambaFile::slotApply: saving to " << path << " failed!";
-        //KMessageBox::sorry(0,i18n("Saving the results to %1 failed.",path));
-        delete _tempFile;
-        _tempFile = 0;
-        return false;
-    }
-    else {
-        changed = false;
-        delete _tempFile;
-        _tempFile = 0;
-        kDebug(5009) << "SambaFile::slotApply: changes successfully saved!";
-        return true;
-    }
-  } else {
-    kDebug(5009) << "SambaFile::slotApply: is remote file!";
-    KUrl srcURL;
-    srcURL.setPath( _tempFile->fileName() );
-
-    KIO::FileCopyJob * job =  KIO::file_copy( srcURL, url, -1, KIO::Overwrite  );
-    connect( job, SIGNAL( result( KJob * ) ),
-             this, SLOT( slotSaveJobFinished ( KJob * ) ) );
-    return (job->error()==0);
-  }
-
-  return true;
-}
-
-  /**
-  * Returns a name which isn't already used for a share
-  **/
-QString SambaFile::getUnusedName(const QString alreadyUsedName) const
-{
-
-  QString init = i18n("Unnamed");
-  if (alreadyUsedName != QString())
-    init = alreadyUsedName;
-
-  QString s = init;
-
-  int i = 2;
-
-  while (_sambaConfig->find(s))
-  {
-    s = init+QString::number(i);
-    i++;
-  }
-
-  return s;
-}
-
-
-
-SambaShare* SambaFile::newShare(const QString & name)
-{
-  if (_sambaConfig->find(name))
-    return 0L;
-
-  SambaShare* share = new SambaShare(name,_sambaConfig);
-  _sambaConfig->addShare(name,share);
-
-  changed = true;
-
-  return share;
-
-}
-
-SambaShare* SambaFile::newShare(const QString & name, const QString & path)
-{
-  SambaShare* share = newShare(name);
-  if (share)
-  {
-    share->setValue("path",path);
-  }
-
-  return share;
-}
-
-SambaShare* SambaFile::newPrinter(const QString & name, const QString & printer)
-{
-  SambaShare* share = newShare(name);
-
-  if (share)
-  {
-    share->setValue("printable",true);
-    share->setValue("printer name",printer);
-  }
-
-  return share;
-}
-
-
-/** No descriptions */
-void SambaFile::removeShare(const QString & share)
-{
-  changed = true;
-
-  _sambaConfig->removeShare(share);
-}
-
-void SambaFile::removeShare(SambaShare* share)
-{
-  removeShare(share->getName());
-}
-
-void SambaFile::removeShareByPath(const QString & path) {
-  QString share = findShareByPath(path);
-  removeShare(share);
-}
-
-/** No descriptions */
-SambaShare* SambaFile::getShare(const QString & share) const
-{
-  SambaShare *s = _sambaConfig->find(share);
-
-  return s;
-}
-
-/**
-* Returns a list of all shared directories
-**/
-SambaShareList* SambaFile::getSharedDirs() const
-{
-  SambaShareList* list = new SambaShareList();
-
-  Q3DictIterator<SambaShare> it(*_sambaConfig);
-
-  for( ; it.current(); ++it )
-  {
-    if (!it.current()->isPrinter() &&
-        it.current()->getName() != "global")
-    {
-      list->append(it.current());
-    }
-  }
-
-  return list;
-}
-
-/**
-* Returns a list of all shared printers
-**/
-SambaShareList* SambaFile::getSharedPrinters() const
-{
-  SambaShareList* list = new SambaShareList();
-
-  Q3DictIterator<SambaShare> it(*_sambaConfig);
-
-  for( ; it.current(); ++it )
-  {
-    if (it.current()->isPrinter())
-      list->append(it.current());
-  }
-
-  return list;
-}
-
-int SambaFile::getSambaVersion() {
-  if (_sambaVersion > -1)
-    return _sambaVersion;
-
-  K3Process testParam;
-  testParam << "testparm";
-  testParam << "-V";
-  _parmOutput.clear();
-  _sambaVersion = 2;
-
-  connect( &testParam, SIGNAL(receivedStdout(K3Process*,char*,int)),
-          this, SLOT(testParmStdOutReceived(K3Process*,char*,int)));
-
-
-
-  if (testParam.start(K3Process::Block,K3Process::Stdout)) {
-    if (_parmOutput.contains('3') )
-      _sambaVersion = 3;
-  }
-
-  kDebug(5009) << "Samba version = " << _sambaVersion;
-
-  return _sambaVersion;
-}
-
-
-SambaShare* SambaFile::getTestParmValues(bool reload)
-{
-  if (_testParmValues && !reload)
-    return _testParmValues;
-
-
-  K3Process testParam;
-  testParam << "testparm";
-  testParam << "-s";
-
-  if (getSambaVersion() == 3)
-     testParam << "-v";
-
-
-  testParam << "/dev/null";
-  _parmOutput.clear();
-
-  connect( &testParam, SIGNAL(receivedStdout(K3Process*,char*,int)),
-          this, SLOT(testParmStdOutReceived(K3Process*,char*,int)));
-
-  if (testParam.start(K3Process::Block,K3Process::Stdout))
-  {
-    parseParmStdOutput();
-  } else
-    _testParmValues = new SambaShare(_sambaConfig);
-
-  return _testParmValues;
-}
-
-void SambaFile::testParmStdOutReceived(K3Process *, char *buffer, int buflen)
-{
-  _parmOutput+=QString::fromLatin1(buffer,buflen);
-}
-
-void SambaFile::parseParmStdOutput()
-{
-
-  QTextIStream s(&_parmOutput);
-
-  delete _testParmValues;
-  _testParmValues = new SambaShare(_sambaConfig);
-
-  QString section="";
-
-  while (!s.atEnd())
-  {
-    QString line = s.readLine().trimmed();
-
-    // empty lines
-    if (line.isEmpty())
-      continue;
-
-    // comments
-    if ('#' == line[0])
-      continue;
-
-    // sections
-    if ('[' == line[0])
-    {
-      // get the name of the section
-      section = line.mid(1,line.length()-2).toLower();
-      continue;
-    }
-
-    // we are only interested in the global section
-    if (section != KGlobal::staticQString("global"))
-      continue;
-
-    // parameter
-    // parameter
-    int i = line.indexOf('=');
-
-    if (i>-1) {
-      QString name = line.left(i).trimmed();
-      QString value = line.mid(i+1).trimmed();
-      _testParmValues->setValue(name,value,false,false);
-    }
-
-  }
-
-
-
-}
-
-/**
-* Try to find the samba config file position
-* First tries the config file, then checks
-* several common positions
-* If nothing is found returns QString()
-**/
-QString SambaFile::findSambaConf()
-{
-    return KSambaShare::instance()->smbConfPath();
-}
-
-void SambaFile::slotSaveJobFinished( KJob * job ) {
-  delete _tempFile;
-  _tempFile = 0;
-}
-
-void SambaFile::slotJobFinished( KJob * job )
-{
-  if (job->error())
-    emit canceled( job->errorString() );
-  else
-  {
-    openFile();
-    emit completed();
-  }
-}
-
-bool SambaFile::load()
-{
-  if (path.isNull() || path.isEmpty())
-      return false;
-
-  kDebug(FILESHARE_DEBUG) << "path=" << path;
-  KUrl url(path);
-
-  if (!url.isLocalFile()) {
-    KTemporaryFile tempFile;
-    tempFile.open();
-    localPath = tempFile.fileName();
-    KUrl destURL;
-    destURL.setPath( localPath );
-    KIO::FileCopyJob * job =  KIO::file_copy( url, destURL, 0600, KIO::Overwrite );
-//    emit started( d->m_job );
-    connect( job, SIGNAL( result( KJob * ) ), this, SLOT( slotJobFinished ( KJob * ) ) );
-    return true;
-  } else {
-    localPath = path;
-    bool ret = openFile();
-    if (ret)
-        emit completed();
-    return ret;
-  }
-}
-
-bool SambaFile::openFile() {
-  kDebug(FILESHARE_DEBUG) << "..." << endl;
-  QFile f(localPath);
-
-  if (!f.open(QIODevice::ReadOnly)) {
-    //throw SambaFileLoadException(QString("<qt>Could not open file <em>%1</em> for reading.</qt>").arg(path));
-    return false;
-  }
-
-  QTextStream s(&f);
-
-  delete _sambaConfig;
-
-  kDebug(FILESHARE_DEBUG) << "creating SambaConfigFile ..." << endl;
-  _sambaConfig = new SambaConfigFile(this);
-
-    kDebug(FILESHARE_DEBUG) << "start parsing ..." << endl;
-
-  SambaShare *currentShare = 0L;
-  bool continuedLine = false; // is true if the line before ended with a backslash
-  QString completeLine;
-  QStringList comments;
-  while (!s.atEnd())
-  {
-    QString currentLine = s.readLine().trimmed();
-    if (continuedLine)
-    {
-      completeLine += currentLine;
-      continuedLine = false;
-    } else
-      completeLine = currentLine;
-    // is the line continued in the next line ?
-    if ( !completeLine.isEmpty() && completeLine[completeLine.length()-1] == '\\' )
-    {
-      continuedLine = true;
-      // remove the ending backslash
-      completeLine.truncate( completeLine.length()-1 );
-      continue;
-    }
-
-    // comments or empty lines
-    if (completeLine.isEmpty() ||
-        '#' == completeLine[0] ||
-        ';' == completeLine[0])
-    {
-      comments.append(completeLine);
-      continue;
-    }
-
-
-    // sections
-    if (!completeLine.isEmpty() && '[' == completeLine[0])
-    {
-      // get the name of the section
-      QString section = completeLine.mid(1,completeLine.length()-2);
-      currentShare = _sambaConfig->addShare(section);
-      currentShare->setComments(comments);
-      comments.clear();
-
-      continue;
-    }
-
-    // parameter
-    int i = completeLine.indexOf('=');
-
-    //completeLine is not empty
-    if (i>-1)
-    {
-      QString name = completeLine.left(i).trimmed();
-      QString value = completeLine.mid(i+1).trimmed();
-
-      if (currentShare)
-      {
-        currentShare->setComments(name,comments);
-        currentShare->setValue(name,value,true,true);
-
-        comments.clear();
-      }
-    }
-  }
-
-  f.close();
-
-  // Make sure there is a global share
-  if (!getShare("global")) {
-     _sambaConfig->addShare("global");
-  }
-
-  kDebug(FILESHARE_DEBUG) << "finished" << endl;
-
-  return true;
-}
-
-bool SambaFile::saveTo(const QString & path)
-{
-  QFile f(path);
-
-  if (!f.open(QIODevice::WriteOnly))
-    return false;
-
-  QTextStream s(&f);
-
-  QStringList shareList = _sambaConfig->getShareList();
-
-  for ( QStringList::Iterator it = shareList.begin(); it != shareList.end(); ++it )
-  {
-    SambaShare* share = _sambaConfig->find(*it);
-
-    // First add all comments of the share to the file
-    QStringList comments = share->getComments();
-    for ( QStringList::Iterator cmtIt = comments.begin(); cmtIt != comments.end(); ++cmtIt )
-    {
-      s << *cmtIt << endl;
-
-      kDebug(5009) << *cmtIt;
-    }
-
-    // If there are no lines before the section add
-    // a blank line
-    if (comments.isEmpty())
-      s << endl;
-
-    // Add the name of the share / section
-    s << "[" << share->getName() << "]" << endl;
-
-    // Add all options of the share
-    QStringList optionList = share->getOptionList();
-
-    for ( QStringList::Iterator optionIt = optionList.begin(); optionIt != optionList.end(); ++optionIt )
-    {
-
-      // Add the comments of the option
-      comments = share->getComments(*optionIt);
-      for ( QStringList::Iterator cmtIt = comments.begin(); cmtIt != comments.end(); ++cmtIt )
-      {
-        s << *cmtIt << endl;
-      }
-
-      // Add the option
-      s << *optionIt << " = " << *share->find(*optionIt) << endl;
-    }
-
-
-  }
-
-  f.close();
-
-  return true;
-}
-
-
-SambaConfigFile* SambaFile::getSambaConfigFile(KConfig* config)
-{
-  QStringList groups = config->groupList();
-
-  SambaConfigFile* samba = new SambaConfigFile(this);
-
-  for ( QStringList::Iterator it = groups.begin(); it != groups.end(); ++it )
-  {
-    QMap<QString,QString> entries = config->entryMap(*it);
-
-    SambaShare *share = new SambaShare(*it,samba);
-    samba->insert(*it,share);
-
-    for (QMap<QString,QString>::Iterator it2 = entries.begin(); it2 != entries.end(); ++it2 )
-    {
-      if (!it2.value().isEmpty())
-          share->setValue(it2.key(),QString(it2.value()),false,false);
-    }
-
-  }
-
-  return samba;
-
-}
-
-KConfig* SambaFile::getSimpleConfig(SambaConfigFile* sambaConfig, const QString & path)
-{
-  KConfig *config = new KConfig(path, KConfig::SimpleConfig);
-
-  Q3DictIterator<SambaShare> it(*sambaConfig);
-
-  for ( ; it.current(); ++it )
-  {
-    SambaShare* share = it.current();
-
-    KConfigGroup cg(config, it.currentKey());
-
-    Q3DictIterator<QString> it2(*share);
-
-    for (; it2.current(); ++it2 )
-    {
-      cg.writeEntry(it2.currentKey(), *it2.current());
-    }
-
-  }
-
-  return config;
-}
-
-#include "sambafile.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/sambafile.h filesharing//advanced/kcm_sambaconf/sambafile.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambafile.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambafile.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,178 +0,0 @@
-/*
-  Copyright (c) 2002-2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#ifndef SAMBAFILE_H
-#define SAMBAFILE_H
-
-
-#include <q3dict.h>
-#include <qstring.h>
-#include <qobject.h>
-#include <kio/job.h>
-
-#include "sambashare.h"
-
-
-class KConfig;
-class K3Process;
-class KConfig;
-class KTemporaryFile;
-
-class SambaFile;
-
-class SambaFileLoadException
-{
-  public:
-    SambaFileLoadException(const QString & msg) { message = msg; }
-    
-    QString getMessage() { return message; }
-  protected:
-    QString message;
-};
-
-class SambaConfigFile : public Q3Dict<SambaShare>
-{
-public:
-  SambaConfigFile(SambaFile*);
-  QString getDefaultValue(const QString & name);
-  QStringList getShareList();
-  void addShare(const QString & name, SambaShare* share);
-  SambaShare* addShare(const QString & name);
-  void removeShare(const QString & name);
-protected:
-  SambaFile* _sambaFile;
-  QStringList _shareList;
-};
-
-class SambaFile : public QObject
-{
-Q_OBJECT
-public: 
-	SambaFile(const QString & _path, bool _readonly=true);
-	~SambaFile();
-
-  /** No descriptions */
-  QString findShareByPath(const QString & path) const;
-  void removeShareByPath(const QString & path);
-  
-  
-  SambaShare* newShare(const QString & name);
-  SambaShare* newShare(const QString & name, const QString & path);
-  SambaShare* newPrinter(const QString & name, const QString & printer);
-
-  void removeShare(const QString & share);
-  void removeShare(SambaShare* share);
-
-	void renameShare(const QString & oldName, const QString & newName);
-
-  SambaShare* getShare(const QString & share) const;
-  
-  /**
-   * Returns a list of all shared directories
-   **/
-  SambaShareList* getSharedDirs() const;
-
-  /**
-   * Returns a list of all shared printers
-   **/
-  SambaShareList* getSharedPrinters() const;
-
-  /**
-   * Returns a name which isn't already used for a share
-   * if the alreadyUsedName parameter is given, then
-   * a name based on this name is returned.
-   * E.g.: if public is already used, the method could return 
-   * public2
-   **/
-	QString getUnusedName(const QString alreadyUsedName=QString()) const;
-
-  /**
-   * Returns all values of the global section
-   * which are returned by the testparam program
-   * if the values were already loaded then these
-   * values are returned except the reload parameter
-   * is true
-   **/
-  SambaShare* getTestParmValues(bool reload=false);
-
-  static QString findSambaConf();
-
-
-  int getSambaVersion();
-
-  /**
-   * Load all data from the smb.conf file
-   * Can load a remote file
-   **/
-  bool load();
-
-  bool save();
-  
-  /**
-   * Reads the local smb.conf
-   */
-  bool openFile();
-  
-  bool isRemoteFile();
-
-  /**
-   * Save all data to the specified file
-   * if successful returns true otherwise false
-   **/
-  bool saveTo(const QString & path);
-
-protected:
-  bool readonly;
-  bool changed;
-  QString path;
-  QString localPath;
-  SambaConfigFile *_sambaConfig;
-  SambaShare* _testParmValues;
-  QString _parmOutput;
-  int _sambaVersion;
-
-  void parseParmStdOutput();
-  SambaConfigFile* getSambaConfigFile(KConfig* config);
-  KConfig* getSimpleConfig(SambaConfigFile* sambaConfig, const QString & filename);
-
-
-
-private:
-  void copyConfigs(KConfig* first, KConfig* second);
-  KTemporaryFile * _tempFile;
-public slots:
-
-  /**
-   * Saves all changes to the smb.conf file
-   * if the user is not allowed she'll be asked
-   * for a root password
-   **/
-  bool slotApply();
-protected slots:
-  void testParmStdOutReceived(K3Process *proc, char *buffer, int buflen);
-  void slotJobFinished( KJob *);
-  void slotSaveJobFinished( KJob *);
-
-signals:
-  void canceled(const QString &);
-  void completed();  
-  
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/sambashare.cpp filesharing//advanced/kcm_sambaconf/sambashare.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambashare.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambashare.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,337 +0,0 @@
-/***************************************************************************
-                          sambashare.cpp  -  description
-                            -------------------
-    begin                : Mon Jun 12 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
-***************************************************************************/
-
-/******************************************************************************
-*                                                                            *
-*  This file is part of KSambaPlugin.                                        *
-*                                                                            *
-*  KSambaPlugin is free software; you can redistribute it and/or modify      *
-*  it under the terms of the GNU General Public License as published by      *
-*  the Free Software Foundation; either version 2 of the License, or         *
-*  (at your option) any later version.                                       *
-*                                                                            *
-*  KSambaPlugin is distributed in the hope that it will be useful,           *
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
-*  GNU General Public License for more details.                              *
-*                                                                            *
-*  You should have received a copy of the GNU General Public License         *
-*  along with KSambaPlugin; if not, write to the Free Software                     *
-*  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
-*                                                                            *
-******************************************************************************/
-
-#include <kdebug.h>
-#include <qstringlist.h>
-
-#include "sambafile.h"
-#include "sambashare.h"
-#include "common.h"
-
-SambaShare::SambaShare(SambaConfigFile* sambaFile)
-  : Q3Dict<QString>(10,false)
-{
-  _sambaFile = sambaFile;
-  setName("defaults");
-  setAutoDelete(true);
-}
-
-SambaShare::SambaShare(const QString & name, SambaConfigFile* sambaFile)
-  : Q3Dict<QString>(10,false)
-{
-  _sambaFile = sambaFile;
-  setName(name);
-  setAutoDelete(true);
-}
-
-const QString& SambaShare::getName() const
-{
-  return _name;
-}
-
-bool SambaShare::setName(const QString & name, bool testWetherExists)
-{
-
-  if ( testWetherExists &&
-      _sambaFile->find(name) &&
-      _sambaFile->find(name) != this)
-    return false;
-
-  _name = name;
-return true;
-}
-
-bool SambaShare::optionSupported(const QString & name)
-{
-  QString defaultValue = _sambaFile->getDefaultValue(name);
-//  kDebug(5009) << name << " = " << defaultValue << " null : " << defaultValue.isNull();
-  return ! defaultValue.isNull();
-}
-
-/**
-* Returns the value of the given parameter
-* if no value is set yet the default value
-* will be returned.
-**/
-QString SambaShare::getValue(const QString & name, bool globalValue, bool defaultValue)
-{
-  QString synonym = getSynonym(name);
-
-  QString* str = find(synonym);
-  QString ret;
-
-  if (str) {
-    ret = *str;
-  }
-  else
-  if (globalValue)
-    ret = getGlobalValue(synonym,defaultValue);
-  else
-  if (defaultValue)
-    ret = getDefaultValue(synonym);
-
-
-  if (name=="writable" || name=="write ok" || name=="writeable")
-    ret = textFromBool( ! boolFromText(ret) );
-
-  return ret;
-}
-
-bool SambaShare::getBoolValue(const QString & name, bool globalValue, bool defaultValue)
-{
-  return boolFromText(getValue(name,globalValue,defaultValue));
-}
-
-
-QString SambaShare::getGlobalValue(const QString & name, bool defaultValue)
-{
-  if (!_sambaFile)
-    return getValue(name,false,defaultValue);
-
-  SambaShare* globals = _sambaFile->find("global");
-
-  QString ret;
-  if (globals != 0)
-    ret = globals->getValue(name,false,defaultValue);
-  else if (defaultValue)
-    ret = getDefaultValue(name);
-
-  return ret;
-}
-
-
-/**
-* Returns the default synonym for the given parameter
-* if no synonym exists the original parameter in lower
-* case is returned
-**/
-QString SambaShare::getSynonym(const QString & name) const
-{
-  QString lname = name.toLower().trimmed();
-
-  if (lname == "browsable") return "browseable";
-  if (lname == "allow hosts") return "hosts allow";
-  if (lname == "auto services") return "preload";
-  if (lname == "casesignames") return "case sensitive";
-  if (lname == "create mode") return "create mask";
-  if (lname == "debuglevel") return "log level";
-  if (lname == "default") return "default service";
-  if (lname == "deny hosts") return "hosts deny";
-  if (lname == "directory") return "path";
-  if (lname == "directory mode") return "directory mask";
-  if (lname == "exec") return "preexec";
-  if (lname == "group") return "force group";
-  if (lname == "lock dir") return "lock directory";
-  if (lname == "min passwd length") return "min password length";
-  if (lname == "only guest") return "guest only";
-  if (lname == "preferred master") return "preferred master";
-  if (lname == "print ok") return "printable";
-  if (lname == "printcap") return "printcap name";
-  if (lname == "printer") return "printer name";
-  if (lname == "protocol") return "max protocol";
-  if (lname == "public") return "guest ok";
-  if (lname == "writable") return "read only";
-  if (lname == "write ok") return "read only";
-  if (lname == "read only") return "read only";
-  if (lname == "root") return "root directory";
-  if (lname == "root") return "root dir";
-  if (lname == "timestamp logs") return "debug timestamp";
-  if (lname == "user") return "username";
-  if (lname == "users") return "username";
-  if (lname == "idmap uid") return "winbind uid";
-  if (lname == "idmap gid") return "winbind gid";
-  if (lname == "vfs object") return "vfs objects";
-
-  return lname;
-}
-
-void SambaShare::setValue(const QString & name, const QString & value, bool globalValue, bool defaultValue)
-{
-  QString synonym = getSynonym(name);
-
-  QString newValue = value;
-
-  if (newValue.isNull())
-    newValue = "";
-
-  if (getName().toLower() == "global")
-    globalValue = false;
-
-  if (name=="writable" || name=="write ok" || name=="writeable")
-  {
-    synonym = "read only";
-    newValue = textFromBool(!boolFromText(value));
-  }
-
-  QString global = "";
-
-  if (globalValue && !hasComments(synonym))
-  {
-    global = getGlobalValue(synonym, false);
-
-    if ( newValue.compare(global, Qt::CaseInsensitive) == 0 )
-    {
-      remove(synonym);
-      _optionList.removeAll(synonym);
-      return;
-    }
-  }
-
-  // If the option has a comment we don't remove
-  // it if the value is equal to the default value.
-  // That's because the author of the option has thought about it.
-  if (defaultValue && global.isEmpty() && !hasComments(synonym))
-  {
-    if ( newValue.trimmed().toLower() == getDefaultValue(synonym).trimmed().toLower() )
-    {
-      kDebug(5009) << getName() << " global: " << global << " remove " << synonym;
-      remove(synonym);
-      _optionList.removeAll(synonym);
-      return;
-    }
-
-  }
-
-  if (!find(synonym))
-  {
-    _optionList.append(synonym);
-  }
-
-  replace(synonym,new QString(newValue));
-}
-
-void SambaShare::setValue(const QString & name, bool value, bool globalValue, bool defaultValue)
-{
-  setValue(name,textFromBool(value),globalValue, defaultValue);
-}
-
-void SambaShare::setValue(const QString & name, int value, bool globalValue, bool defaultValue)
-{
-  setValue(name,QString::number(value),globalValue, defaultValue);
-}
-
-/**
-* Returns the default value of the parameter
-**/
-QString SambaShare::getDefaultValue(const QString & name)
-{
-  QString defaultValue = _sambaFile->getDefaultValue(name);
-  if (defaultValue.isNull())
-    defaultValue = "";
-
-  return defaultValue;
-}
-
-bool SambaShare::getDefaultBoolValue(const QString & name)
-{
-
-  return boolFromText(getDefaultValue(name));
-}
-
-/**
-* Sets the comments for the passed option
-**/
-void SambaShare::setComments(const QString & name, const QStringList & commentList)
-{
-  // Only add inempty lists
-  if (commentList.empty())
-    return;
-
-  QString synonym = getSynonym(name);
-
-  _commentList.replace(name,new QStringList(commentList));
-}
-
-/**
-* Returns the comments of the passed option
-**/
-QStringList SambaShare::getComments(const QString & name)
-{
-  QStringList* list = _commentList.find(getSynonym(name));
-
-  if (list)
-    return QStringList(*list);
-  else
-    return QStringList();
-}
-
-
-bool SambaShare::hasComments(const QString & name)
-{
-  return 0L != _commentList.find(getSynonym(name));
-}
-
-/**
-* Returns the comments of the share
-* e.g. the text above the [...] section
-**/
-QStringList SambaShare::getComments()
-{
-  return _comments;
-}
-
-/**
-* Sets the comments for the share
-* e.g. the text above the [...] section
-**/
-void SambaShare::setComments(const QStringList & commentList)
-{
-  _comments = commentList;
-}
-
-QStringList SambaShare::getOptionList()
-{
-  return _optionList;
-}
-
-/**
-* Returns true if this share is a printer
-**/
-bool SambaShare::isPrinter()
-{
-  QString* str = find("printable");
-
-  if (!str)
-      str = find("print ok");
-
-  return str!=0;
-}
-
-/**
-* Returns true if the share name is
-* global, printers or homes
-**/
-bool SambaShare::isSpecialSection()
-{
-  if ( _name.toLower() == "global" ||
-      _name.toLower() == "printers" ||
-      _name.toLower() == "homes" )
-    return true;
-  else
-    return false;
-}
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/sambashare.h filesharing//advanced/kcm_sambaconf/sambashare.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambashare.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sambashare.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,231 +0,0 @@
-/***************************************************************************
-                          sambashare.h  -  description
-                             -------------------
-    begin                : Mon 12 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef SAMBASHARE_H
-#define SAMBASHARE_H
-
-#include <q3dict.h>
-#include <qstring.h>
-#include <qstringlist.h>
-#include <q3ptrlist.h>
-
-class SambaConfigFile;
-class QStringList;
-
-/**
- * A class which represents a Samba share
- * @author Jan Sch&auml;fer
- **/
-class SambaShare :public Q3Dict<QString>
-{
-public:
-
-	/**
-   * Creates a new SambaShare with an empty name
-   **/
-	SambaShare(SambaConfigFile* sambaFile);
-
-	/**
-   * Creates a new SambaShare with the given name
-   * @param name the name of the share
-   **/
-  SambaShare(const QString & name, SambaConfigFile* sambaFile);
-
-  /** 
-   * Returns the name of the share
-   **/
-  const QString& getName() const;
-
-
-  /**
-   * Sets the name of the share
-   * returns false if the name already exists and the testWetherExists
-   * parameter is set to true
-   **/
-  bool setName(const QString & name, bool testWetherExists=true);
-
-  /**
-   * Tests whether or not the given option is supported by Samba.
-   * It does this by testing the output of testparm for this option
-   **/
-  bool optionSupported(const QString & name);
-  
-  /**
-   * Returns the value of the given parameter
-   * if the parameter doesn't exists, the
-	 * global and then the default value is returned.
-   * @param name the name of the parameter
-   * @param gobalValue if the gobal value should be returend
-   * @param defaultValue if the default value should be returned or a null string
-   **/
-  QString getValue(const QString & name, bool globalValue=true, bool defaultValue=true);
-
-  /**
-   * Same as above but for boolean parameters
-   * Don't use defaultValue = false with this function
-   * because you can't distinguish an unset parameter
-   * from a false parameter
-   **/
-  bool getBoolValue(const QString & name, bool globalValue=true, bool defaultValue=true);
-
-  /**
-   * Returns the value from the [globals] section
-   **/
-	QString getGlobalValue(const QString & name, bool defaultValue=true);
-
-  /**
-   * Sets the parameter name to the given value
-   * @param value the value of the parameter
-   * @param name the name of the parameter
-   * @param globalValue if true then the value is only set if it is different to the global value
-   * @param defaultValue if true then the value is only set if it is different to the default value
-   *                     if globalValue and defaultValue is true then the value is set when a global value
-   *                     exists and it it is different to it. If no global value exists then it is only
-   *                     set if different to the default value.
-   **/
-  void setValue(const QString & name,const QString & value, bool globalValue=true, bool defaultValue=true);
-
-  /**
-   * Same as above but for boolean parameters
-   **/
-  void setValue(const QString & name, bool value, bool globalValue=true, bool defaultValue=true);
-
-  /**
-   * Same as above but for integer parameters
-   **/
-  void setValue(const QString & name, int value, bool globalValue=true, bool defaultValue=true);
-
-  /**
-   * Returns the default value of the parameter
-   * @param name the name of the parameter
-   **/
-	QString getDefaultValue(const QString & name);
-
-  /**
-   * Same as above but for booleans
-   **/
-  bool getDefaultBoolValue(const QString & name);
-
-  /**
- 	 * Returns the default synonym for the given parameter
- 	 * if no synonym exists the original parameter in lower
- 	 * case is returned
- 	 **/
-	QString getSynonym(const QString & name) const;
-
-  /**
-   * Returns the comments of the share
-   * e.g. the text above the [...] section
-   **/
-  QStringList getComments();
-
-  /**
-   * Sets the comments for the share
-   * e.g. the text above the [...] section
-   **/
-  void setComments(const QStringList & commentList);
-  
-  /**
-   * Sets the comments for the passed option
-   **/
-  void setComments(const QString & name, const QStringList & commentList);
-
-  /**
-   * Returns the comments of the passed option
-   **/
-  QStringList getComments(const QString & name);
-
-  /**
-   * Returns true if the passed option has comments
-   * otherwise returns false
-   **/
-  bool hasComments(const QString & name);
-
-  /**
-   * Returns the list of all options
-   * the order of the options is exactly the
-   * order of the insertion of the options
-   **/
-  QStringList getOptionList();
-  
-	/**
-   * Returns true if this share is a printer
-   * that's if printable = true
-   **/
-  bool isPrinter();
-
-  /**
-   * Returns true if the share name is
-   * global, printers or homes
-   **/
-  bool isSpecialSection();
-
-protected:
-	/**
-   * The name of the share
-   * could be also printers, global and homes
-   **/
-	QString _name;
-  SambaConfigFile* _sambaFile;
-
-  /**
-   * This attribute stores all option comments.
-   * the comments which stood above the option name
-   * are stored in this QStringList
-   **/
-  Q3Dict<QStringList> _commentList;
-
-  /**
-   * The comments for this share
-   **/
-  QStringList _comments;
-
-  /**
-   * An extra list which holds
-   * all stored options
-   * You might say, hey for what is this ?
-   * We have them already stored in the QDict.
-   * That's right, but there is a problem :
-   * QDict doesn't preserve the order of
-   * the inserted items, but when saving
-   * the options back to the smb.conf
-   * we want to have exactly the same order
-   * so this QStringList is only for saving
-   * the order of the options.
-   * On the other side we need a very fast lookup
-   * of the options, because we lookup very frequently
-   * so this is the best way to do both.
-   **/
-  QStringList _optionList;
-
-};
-
-typedef Q3PtrList<SambaShare> SambaShareList;
-
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/sharedlgimpl.cpp filesharing//advanced/kcm_sambaconf/sharedlgimpl.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sharedlgimpl.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sharedlgimpl.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,631 +0,0 @@
-/***************************************************************************
-                          sharedlgimpl.cpp  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-/**
- * @author Jan Schäfer
- **/
-
-#include <qcheckbox.h>
-#include <qlineedit.h>
-#include <qcombobox.h>
-#include <qlabel.h>
-#include <q3groupbox.h>
-#include <qlayout.h>
-#include <qtabwidget.h>
-#include <qregexp.h>
-#include <qstringlist.h>
-#include <q3grid.h>
-#include <qcursor.h>
-#include <q3table.h>
-#include <q3listbox.h>
-#include <qtoolbutton.h>
-#include <qpixmap.h>
-#include <q3frame.h>
-#include <qwidget.h>
-#include <QVBoxLayout>
-#include <QList>
-#include <QLabel>
-
-#include <klineedit.h>
-#include <kurlrequester.h>
-#include <knuminput.h>
-#include <kdebug.h>
-#include <kcombobox.h>
-#include <kiconloader.h>
-#include <klocale.h>
-#include <kdirlister.h>
-#include <kmessagebox.h>
-#include <kmenu.h>
-#include <kaction.h>
-#include <krestrictedline.h>
-#include <KPageWidget>
-
-#include "smbpasswdfile.h"
-#include "sambafile.h"
-#include "common.h"
-#include "passwd.h"
-#include "usertabimpl.h"
-#include "filemodedlgimpl.h"
-#include "hiddenfileview.h"
-#include "dictmanager.h"
-
-#include "sharedlgimpl.h"
-
-#define DEBUG 5009
-
-ShareDlgImpl::ShareDlgImpl(QWidget* parent, SambaShare* share)
-  : QDialog(parent)
-{
-  if (!share) {
-    kWarning() << "share parameter is null!";
-    return;
-  }
-
-  kDebug(DEBUG) << "setting up ui ..." << endl;
-  setupUi(this);
-
-  kDebug(DEBUG) << "creating DictManager ..." << endl;
-  _dictMngr = new DictManager(share);
-  _share = share;
-
-  initDialog();
-  initAdvancedTab();
-
-  kDebug(DEBUG) << "finished" << endl;
-
-}
-
-void ShareDlgImpl::initDialog()
-{
-  if (!_share)
-     return;
-
-  kDebug(DEBUG) << "started" << endl;
-
-  // Base settings
-  _fileView = 0L;
-
-  kDebug(DEBUG) << "setting pathUrlRq mode ..." << endl;
-
-  pathUrlRq->setMode(KFile::Directory | KFile::ExistingOnly | KFile::LocalOnly);
-
-  kDebug(DEBUG) << "checking homes ..." << endl;
-
-  homeChk->setChecked(_share->getName().toLower() == "homes");
-  shareNameEdit->setText( _share->getName() );
-
-  directoryPixLbl->setPixmap(DesktopIcon("folder"));
-  PixmapLabel1->setPixmap(SmallIcon("dialog-warning"));
-
-
-  _dictMngr->add("path",pathUrlRq);
-
-  _dictMngr->add("comment",commentEdit);
-  _dictMngr->add("available",availableBaseChk);
-  _dictMngr->add("browseable",browseableBaseChk);
-  _dictMngr->add("public",publicBaseChk);
-
-  _dictMngr->add("read only",readOnlyBaseChk);
-
-  // User settings
-
-  kDebug(DEBUG) << "creating UserTab ..." << endl;
-  _userTab = new UserTabImpl(this,_share);
-  _tabs->insertTab(1,_userTab,i18n("&Users"));
-  kDebug(DEBUG) << "loading UserTab ..." << endl;
-  _userTab->load();
-  connect(_userTab, SIGNAL(changed()), this, SLOT(changedSlot()));
-
-  // Filename settings
-
-  _dictMngr->add("case sensitive",caseSensitiveCombo,
- 		 new QStringList(QStringList() << "auto" << "yes" << "no"));
-
-  _dictMngr->add("preserve case",preserveCaseChk);
-  _dictMngr->add("short preserve case",shortPreserveCaseChk);
-  _dictMngr->add("mangled names",mangledNamesChk);
-  _dictMngr->add("mangle case",mangleCaseChk);
-  _dictMngr->add("mangling char",manglingCharEdit);
-  _dictMngr->add("mangled map",mangledMapEdit);
-
-
-  _dictMngr->add("mangling method",manglingMethodCombo,
-                 new QStringList(QStringList() << "hash" << "hash2"));
-
-  _dictMngr->add("default case",defaultCaseCombo,
-                 new QStringList(QStringList() << "Lower" << "Upper"));
-
-  _dictMngr->add("hide dot files",hideDotFilesChk);
-  _dictMngr->add("strip dot",hideTrailingDotChk);
-  _dictMngr->add("hide unreadable",hideUnreadableChk);
-  _dictMngr->add("hide unwriteable files",hideUnwriteableFilesChk);
-  _dictMngr->add("hide special files",hideSpecialFilesChk);
-  _dictMngr->add("dos filemode",dosFilemodeChk);
-  _dictMngr->add("dos filetimes",dosFiletimesChk);
-  _dictMngr->add("dos filetime resolution",dosFiletimeResolutionChk);
-
-  // Security tab
-
-  _dictMngr->add("guest only",guestOnlyChk);
-  _dictMngr->add("hosts allow",hostsAllowEdit);
-
-  _dictMngr->add("only user",onlyUserChk);
-  _dictMngr->add("username",userNameEdit);
-
-
-  guestAccountCombo->insertStringList( getUnixUsers() );
-  setComboToString(guestAccountCombo,_share->getValue("guest account"));
-
-  _dictMngr->add("hosts deny",hostsDenyEdit);
-  _dictMngr->add("force directory security mode",forceDirectorySecurityModeEdit);
-  _dictMngr->add("force directory mode",forceDirectoryModeEdit);
-  _dictMngr->add("force security mode",forceSecurityModeEdit);
-
-  _dictMngr->add("force create mode",forceCreateModeEdit);
-  _dictMngr->add("directory security mask",directorySecurityMaskEdit);
-  _dictMngr->add("directory mask",directoryMaskEdit);
-  _dictMngr->add("security mask",securityMaskEdit);
-  _dictMngr->add("create mask",createMaskEdit);
-  _dictMngr->add("inherit permissions",inheritPermissionsChk);
-  _dictMngr->add("inherit acls",inheritAclsChk);
-  _dictMngr->add("nt acl support",ntAclSupportChk);
-  _dictMngr->add("delete readonly",deleteReadonlyChk);
-
-  _dictMngr->add("wide links",wideLinksChk);
-  _dictMngr->add("follow symlinks",followSymlinksChk);
-
-  _dictMngr->add("map hidden",mapHiddenChk);
-  _dictMngr->add("map archive",mapArchiveChk);
-  _dictMngr->add("map system",mapSystemChk);
-  _dictMngr->add("store dos attributes",eaSupportChk);
-
-  _dictMngr->add("ea support",eaSupportChk);
-
-
-  _dictMngr->add("force unknown acl user",forceUnknownAclUserEdit);
-  _dictMngr->add("profile acls",profileAclsChk);
-  _dictMngr->add("map acl inherit",mapAclInheritChk);
-
-
-  // Advanced
-
-  _dictMngr->add("blocking locks",blockingLocksChk);
-  _dictMngr->add("fake oplocks",fakeOplocksChk);
-  _dictMngr->add("locking",lockingChk);
-  _dictMngr->add("level2 oplocks",level2OplocksChk);
-  _dictMngr->add("posix locking",posixLockingChk);
-  _dictMngr->add("strict locking",strictLockingCombo,
-		 new QStringList(QStringList() << "auto" << "yes" << "no"));
-  _dictMngr->add("share modes",shareModesChk);
-  _dictMngr->add("oplocks",oplocksChk);
-
-
-  _dictMngr->add("oplock contention limit",oplockContentionLimitSpin);
-  _dictMngr->add("strict sync",strictSyncChk);
-
-  // Tuning
-
-  _dictMngr->add("strict allocate",strictAllocateChk);
-
-  _dictMngr->add("max connections",maxConnectionsSpin);
-  _dictMngr->add("write cache size",writeCacheSizeSpin);
-  _dictMngr->add("block size",blockSizeSpin);
-
-
-  _dictMngr->add("sync always",syncAlwaysChk);
-  _dictMngr->add("use sendfile",useSendfileChk);
-
-  _dictMngr->add("csc policy",cscPolicyCombo,
-                 new QStringList(QStringList() << "manual" << "documents" << "programs" << "disable"));
-
-
-
-  // VFS
-
-  _dictMngr->add("vfs objects",vfsObjectsEdit);
-  _dictMngr->add("vfs options",vfsOptionsEdit);
-
-  // Misc
-
-  _dictMngr->add("preexec",preexecEdit);
-  _dictMngr->add("postexec",postexecEdit);
-  _dictMngr->add("root preexec",rootPreexecEdit);
-  _dictMngr->add("root postexec",rootPostexecEdit);
-
-  _dictMngr->add("preexec close",preexecCloseChk);
-  _dictMngr->add("root preexec close",rootPreexecCloseChk);
-
-  _dictMngr->add("volume",volumeEdit);
-  _dictMngr->add("fstype",fstypeEdit);
-  _dictMngr->add("magic script",magicScriptEdit);
-  _dictMngr->add("magic output",magicOutputEdit);
-  _dictMngr->add("do not descend",dontDescendEdit);
-  _dictMngr->add("set directory",setDirectoryChk);
-  _dictMngr->add("fake directory create times",fakeDirectoryCreateTimesChk);
-
-  _dictMngr->add("msdfs root",msdfsRootChk);
-  _dictMngr->add("msdfs proxy",msdfsProxyEdit);
-
-  kDebug(DEBUG) << "dictMngr: loading share ..." << endl;
-
-  _dictMngr->load( _share );
-
-
-  connect( _tabs, SIGNAL(currentChanged(QWidget*)), this, SLOT(tabChangedSlot(QWidget*)));
-  connect(_dictMngr, SIGNAL(changed()), this, SLOT(changedSlot()));
-}
-
-ShareDlgImpl::~ShareDlgImpl()
-{
-  delete _fileView;
-}
-
-void ShareDlgImpl::initAdvancedTab()
-{
-  kDebug(DEBUG) << "started" << endl;
-
-  QVBoxLayout *l = new QVBoxLayout(advancedFrame);
-	l->setMargin(0);
-	_janus = new KPageWidget(advancedFrame);
-	_janus->setFaceType(KPageView::List);
-	l->addWidget(_janus);
-// 	_janus->setRootIsDecorated(false);
-// 	_janus->setShowIconsInTreeList(true);
-
-	KPageWidgetItem *f;
- 	QPixmap icon;
-
-	QList<QWidget*> widgets;
-	QList<QString> labels;
-
-	for (int i=0;i<advancedDumpTab->count();i++) {
-	  kDebug(DEBUG) <<  advancedDumpTab->tabText(i) << endl;
-	  widgets.append(advancedDumpTab->widget(i));
-	  labels.append(advancedDumpTab->tabText(i));
-        }
-
-	KIconLoader* il = KIconLoader::global();
-
-	for (int i=0; i<widgets.size(); i++)
-	{
-	  QWidget* w = widgets.at(i);
-	  QString label = labels.at(i);
-
-		kDebug(DEBUG) << "handling widget " << label << endl;
-		if (label.toLower() == "security")
-		  //		  icon = il->loadIcon("kgpg-key1-kgpg",KIconLoader::Small);
-		  icon = il->loadIcon("dialog-password",KIconLoader::Small);
-		else
-		if (label.toLower() == "tuning")
-		  icon = il->loadIcon("preferences-system-performance",KIconLoader::Small);
-		else
-		if (label.toLower() == "vfs")
-		  icon = il->loadIcon("folder",KIconLoader::Small);
-		else
-		if (label.toLower() == "filenames")
-		  icon = il->loadIcon("text-plain",KIconLoader::Small);//SmallIcon("folder");
-		else
-		if (label.toLower() == "exec")
-		  icon = il->loadIcon("gear",KIconLoader::Small);
-		else
-		if (label.toLower() == "locking")
-		  icon = il->loadIcon("object-locked",KIconLoader::Small);//SmallIcon("folder");
-		else
-		if (label.toLower() == "misc")
-		  icon = il->loadIcon("preferences-other",KIconLoader::Small);
-		else {
-			 icon = QPixmap(16,16);
-			 icon.fill();
-		}
-			 //SmallIcon("empty2");
-
-		QWidget* frame = new QWidget();
-		QVBoxLayout* l = new QVBoxLayout(frame);
-		KPageWidgetItem *page = new KPageWidgetItem( frame, label );
-		l->setMargin(0);
-		l->addWidget(w);
-		kDebug(DEBUG) << "adding page ..." << endl;
-		_janus->addPage(page);
-		w->show();
-		page->setIcon(KIcon(icon));
-
-		//		advancedDumpTab->removeTab(advancedDumpTab->indexOf(w));
-	}
-
-	QWidget *w = _tabs->page(5);
-	_tabs->removeTab(5);
-	delete w;
-
-        storeDosAttributesChk_toggled( false );
-}
-
-
-void ShareDlgImpl::tabChangedSlot(QWidget* w)
-{
-  // We are only interested in the Hidden files tab
-  if ( QString(w->objectName()) == "hiddenFilesTab" )
-     loadHiddenFilesView();
-
-}
-
-void ShareDlgImpl::loadHiddenFilesView()
-{
-
-  if (_fileView)
-     return;
-
-  kDebug(DEBUG) << "creating HiddenFileView ..." << endl;
-
-  _fileView = new HiddenFileView( this, _share );
-
-  if ( ! _share->isSpecialSection()) {
-    kDebug(DEBUG) << "loading HiddenFileView ..." << endl;
-    _fileView->load();
-  }
-
-
-}
-
-void ShareDlgImpl::accept()
-{
-  if (!_share)
-     return;
-
-  if (homeChk->isChecked())
-  	 _share->setName("homes");
-	else
-    _share->setName(shareNameEdit->text());
-
-  _userTab->save();
-
-  _share->setValue("guest account",guestAccountCombo->currentText( ) );
-
-  if (_fileView)
-      _fileView->save();
-
-  _dictMngr->save( _share );
-
-  QDialog::accept();
-}
-
-void ShareDlgImpl::homeChkToggled(bool b)
-{
-  shareNameEdit->setDisabled(b);
-	pathUrlRq->setDisabled(b);
-
-	if (b)
-  {
-  	shareNameEdit->setText("homes");
-    pathUrlRq->setUrl(KUrl(""));
-    directoryPixLbl->setPixmap(DesktopIcon("user-home",48));
-
-  }
-  else
-  {
-  	shareNameEdit->setText( _share->getName() );
-	  pathUrlRq->setUrl( _share->getValue("path") );
-    directoryPixLbl->setPixmap(DesktopIcon("folder"));
-  }
-}
-
-void ShareDlgImpl::accessModifierBtnClicked()
-{
-  if (!QObject::sender()) {
-    kWarning() << "ShareDlgImpl::accessModifierBtnClicked() : QObject::sender() is null!";
-    return;
-  }
-
-
-  QString name = QObject::sender()->objectName();
-
-  QLineEdit *edit = 0L;
-
-  if (name == "forceCreateModeBtn")
-     edit = forceCreateModeEdit;
-  else
-  if (name == "forceSecurityModeBtn")
-     edit = forceSecurityModeEdit;
-  else
-  if (name == "forceDirectoryModeBtn")
-     edit = forceDirectoryModeEdit;
-  else
-  if (name == "forceDirectorySecurityModeBtn")
-     edit = forceDirectorySecurityModeEdit;
-  else
-  if (name == "createMaskBtn")
-     edit = createMaskEdit;
-  else
-  if (name == "securityMaskBtn")
-     edit = securityMaskEdit;
-  else
-  if (name == "directoryMaskBtn")
-     edit = directoryMaskEdit;
-  else
-  if (name == "directorySecurityMaskBtn")
-     edit = directorySecurityMaskEdit;
-
-  if (!edit) {
-    kWarning() << "ShareDlgImpl::accessModifierBtnClicked() : edit is null! name=" << name;
-    return;
-  }
-
-  FileModeDlgImpl dlg(this, edit);
-
-  dlg.exec();
-}
-
-void ShareDlgImpl::changedSlot() {
-  m_changed = true;
-  kDebug(5009) << "ShareDlgImpl::changedSlot()";
-  emit changed();
-}
-
-void ShareDlgImpl::pathUrlRq_textChanged( const QString &)
-{
-  if (_fileView && ! _share->isSpecialSection())
-     _fileView->load();
-}
-
-
-void ShareDlgImpl::checkValues()
-{
-/*
-	bool state = true;
-	// Check if the ok-button should be enabled
-	if (directory->isChecked()){
-	    if (homes->isChecked()){
-		state = true;
-	    }else{
-		if (shareName->text() == "")
-		    state = false;
-		if (path->url() == "")
-		    state = false;
-	    }
-	}else{
-	    if (printers->isChecked()){
-		state = true;
-	    }else{
-		if (shareName->text() == ""){
-		    state = false;
-		}
-	    }
-	}
-	buttonOk->setEnabled(state);
-*/
-}
-
-
-void ShareDlgImpl::guestOnlyChk_toggled( bool b)
-{
-  if (b)
-  {
-    onlyUserChk->setChecked(false);
-    publicBaseChk->setChecked(true);
-  }
-
-  onlyUserChk->setDisabled(b);
-  publicBaseChk->setDisabled(b);
-}
-
-
-void ShareDlgImpl::userOnlyChk_toggled( bool b)
-{
-  if (b)
-  {
-    guestOnlyChk->setChecked(false);
-    publicBaseChk->setChecked(false);
-  }
-
-  guestOnlyChk->setDisabled(b);
-  publicBaseChk->setDisabled(b);
-}
-
-void ShareDlgImpl::publicBaseChk_toggled( bool b)
-{
-    guestOnlyChk->setEnabled(b);
-    if (!b) {
-       guestOnlyChk->setChecked(false);
-   }
-    guestAccountCombo->setEnabled(b);
-    guestAccountLbl->setEnabled(b);
-
-}
-
-
-void ShareDlgImpl::oplocksChk_toggled( bool b)
-{
-    if (b)
-	fakeOplocksChk->setChecked(false);
-}
-
-
-void ShareDlgImpl::lockingChk_toggled( bool b)
-{
-  // It is Dangerous to disable locking !
-/*
-    if (!b)  {
-	enableLockingWarnPix->setPixmap(SmallIcon("dialog-warning"));
-	enableLockingWarnPix->show();
-    } else {
-	enableLockingWarnPix->hide();
-    }
-*/
-
-}
-
-
-void ShareDlgImpl::fakeOplocksChk_toggled( bool b)
-{
-/*
-    if (b)  {
-	fakeOplocksWarnPix->setPixmap(SmallIcon("dialog-information"));
-	fakeOplocksWarnPix->setText(i18n("Better use the real oplocks support than this parameter"));
-	fakeOplocksWarnPix->showMaximized();
-	fakeOplocksWarnPix->show();
-    } else {
-	fakeOplocksWarnPix->hide();
-    }
-*/
-}
-
-
-void ShareDlgImpl::oplockContentionLimitSpin_valueChanged( int i)
-{
-/*
-    oplockContentionLimitWarnPix->setMaximumWidth(32767);
-    oplockContentionLimitWarnPix->setPixmap(SmallIcon("dialog-error"));
-*/
-    //oplockContentionLimitWarnPix->show();
-
-}
-
-
-void ShareDlgImpl::storeDosAttributesChk_toggled( bool b)
-{
-    mapArchiveChk->setDisabled(b);
-    mapSystemChk->setDisabled(b);
-    mapHiddenChk->setDisabled(b);
-
-    if (b) {
-	mapArchiveChk->setChecked(false);
-	mapSystemChk->setChecked(false);
-	mapHiddenChk->setChecked(false);
-    }
-}
-
-
-void ShareDlgImpl::buttonHelp_clicked()
-{
-    K3Process* p = new K3Process();
-    *p << "konqueror";
-    *p << "man:smb.conf";
-    p->start();
-}
-
-
-#include "sharedlgimpl.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/sharedlgimpl.h filesharing//advanced/kcm_sambaconf/sharedlgimpl.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sharedlgimpl.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/sharedlgimpl.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,109 +0,0 @@
-/***************************************************************************
-                          sharedlgimpl.h  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef SHAREDLGIMPL_H
-#define SHAREDLGIMPL_H
-
-
-/**
- * @author Jan Schäfer
- **/
-
-#include <q3ptrlist.h>
-#include <QDialog>
-#include <K3Process>
-
-#include <ui_share.h>
-
-class SambaShare;
-class QWidget;
-class UserTabImpl;
-class HiddenFileView;
-class DictManager;
-class KPageWidget;
-
-/**
- * This class implements the share.ui interface
- **/
-class ShareDlgImpl : public QDialog, public Ui::KcmShareDlg
-{
-Q_OBJECT
-
-public :
-
-  ShareDlgImpl(QWidget* parent, SambaShare* share);
-  ~ShareDlgImpl();
-
-  bool hasChanged() { return m_changed; }
-  
-protected :
-
-	/**
-   * Fills all dialog fields with the values
-   * of the SambaShare object
-   **/
-  void initDialog();
-  
-  /**
-   * The share object to change with this dialog
-   **/
-	SambaShare* _share;
-
-  HiddenFileView* _fileView;
-  UserTabImpl* _userTab;
-  KPageWidget* _janus;
-  bool m_changed;
-  DictManager* _dictMngr;
-
-  void loadHiddenFilesView();
-  void initAdvancedTab();
-
-protected slots:
-	virtual void accept();
-  virtual void homeChkToggled(bool);
-  virtual void accessModifierBtnClicked();
-  virtual void changedSlot();
-  virtual void pathUrlRq_textChanged( const QString & );
-  void buttonHelp_clicked();
-  void oplocksChk_toggled( bool b);
-  void tabChangedSlot(QWidget* w);
-  void publicBaseChk_toggled( bool b);
-  void lockingChk_toggled( bool b);
-  void oplockContentionLimitSpin_valueChanged( int i);
-  void fakeOplocksChk_toggled( bool b);
-  void storeDosAttributesChk_toggled( bool b);
-  void checkValues();
-  void userOnlyChk_toggled( bool b);
-  void guestOnlyChk_toggled( bool b);
-
-signals:
-  void changed();
-};
-
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/share.ui filesharing//advanced/kcm_sambaconf/share.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/share.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/share.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,3243 +0,0 @@
-<ui version="4.0" >
- <comment>
- ******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************
-</comment>
- <class>KcmShareDlg</class>
- <widget class="QDialog" name="KcmShareDlg" >
-  <property name="geometry" >
-   <rect>
-    <x>0</x>
-    <y>0</y>
-    <width>674</width>
-    <height>643</height>
-   </rect>
-  </property>
-  <property name="windowTitle" >
-   <string>Add/Edit Share</string>
-  </property>
-  <property name="sizeGripEnabled" >
-   <bool>true</bool>
-  </property>
-  <layout class="QVBoxLayout" >
-   <item>
-    <widget class="QTabWidget" name="_tabs" >
-     <property name="currentIndex" >
-      <number>4</number>
-     </property>
-     <widget class="QWidget" name="baseTab" >
-      <attribute name="title" >
-       <string>&amp;Base Settings</string>
-      </attribute>
-      <layout class="QGridLayout" >
-       <item row="0" column="0" >
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QFrame" name="pixmapFrame" >
-           <property name="frameShape" >
-            <enum>QFrame::NoFrame</enum>
-           </property>
-           <property name="frameShadow" >
-            <enum>QFrame::Plain</enum>
-           </property>
-           <layout class="QVBoxLayout" >
-            <property name="spacing" >
-             <number>6</number>
-            </property>
-            <property name="leftMargin" >
-             <number>11</number>
-            </property>
-            <property name="topMargin" >
-             <number>11</number>
-            </property>
-            <property name="rightMargin" >
-             <number>11</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>11</number>
-            </property>
-            <item>
-             <widget class="QLabel" name="directoryPixLbl" >
-              <property name="sizePolicy" >
-               <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-                <horstretch>0</horstretch>
-                <verstretch>0</verstretch>
-               </sizepolicy>
-              </property>
-              <property name="text" >
-               <string>Pixmap</string>
-              </property>
-              <property name="scaledContents" >
-               <bool>true</bool>
-              </property>
-              <property name="wordWrap" >
-               <bool>false</bool>
-              </property>
-             </widget>
-            </item>
-           </layout>
-          </widget>
-         </item>
-         <item>
-          <widget class="QGroupBox" name="directoryGrp" >
-           <property name="title" >
-            <string>D&amp;irectory</string>
-           </property>
-           <layout class="QVBoxLayout" >
-            <property name="spacing" >
-             <number>6</number>
-            </property>
-            <property name="leftMargin" >
-             <number>11</number>
-            </property>
-            <property name="topMargin" >
-             <number>11</number>
-            </property>
-            <property name="rightMargin" >
-             <number>11</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>11</number>
-            </property>
-            <item>
-             <layout class="QHBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>0</number>
-              </property>
-              <property name="topMargin" >
-               <number>0</number>
-              </property>
-              <property name="rightMargin" >
-               <number>0</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>0</number>
-              </property>
-              <item>
-               <widget class="QLabel" name="TextLabel1" >
-                <property name="enabled" >
-                 <bool>true</bool>
-                </property>
-                <property name="text" >
-                 <string>&amp;Path:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>pathUrlRq</cstring>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="KUrlRequester" name="pathUrlRq" >
-                <property name="enabled" >
-                 <bool>true</bool>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </item>
-            <item>
-             <widget class="QCheckBox" name="homeChk" >
-              <property name="text" >
-               <string>Share all home &amp;directories</string>
-              </property>
-             </widget>
-            </item>
-           </layout>
-          </widget>
-         </item>
-        </layout>
-       </item>
-       <item row="1" column="0" >
-        <widget class="QGroupBox" name="identifierGrp" >
-         <property name="title" >
-          <string>Iden&amp;tifier</string>
-         </property>
-         <layout class="QGridLayout" >
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <property name="horizontalSpacing" >
-           <number>6</number>
-          </property>
-          <property name="verticalSpacing" >
-           <number>6</number>
-          </property>
-          <item row="0" column="0" >
-           <widget class="QLabel" name="Lbl_shareName" >
-            <property name="text" >
-             <string>Na&amp;me:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>shareNameEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="1" column="0" >
-           <widget class="QLabel" name="TextLabel3" >
-            <property name="text" >
-             <string>Comme&amp;nt:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>commentEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="1" column="1" >
-           <widget class="KLineEdit" name="commentEdit" />
-          </item>
-          <item row="0" column="1" >
-           <widget class="KLineEdit" name="shareNameEdit" />
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item row="2" column="0" >
-        <widget class="QGroupBox" name="GroupBox4" >
-         <property name="title" >
-          <string>Main P&amp;roperties</string>
-         </property>
-         <layout class="QVBoxLayout" >
-          <property name="spacing" >
-           <number>6</number>
-          </property>
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <item>
-           <widget class="QCheckBox" name="readOnlyBaseChk" >
-            <property name="text" >
-             <string>Read onl&amp;y</string>
-            </property>
-            <property name="checked" >
-             <bool>true</bool>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <widget class="QCheckBox" name="publicBaseChk" >
-            <property name="text" >
-             <string>Pub&amp;lic</string>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <widget class="QCheckBox" name="browseableBaseChk" >
-            <property name="text" >
-             <string>Bro&amp;wseable</string>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <widget class="QCheckBox" name="availableBaseChk" >
-            <property name="text" >
-             <string>A&amp;vailable</string>
-            </property>
-           </widget>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item row="4" column="0" >
-        <spacer>
-         <property name="orientation" >
-          <enum>Qt::Vertical</enum>
-         </property>
-         <property name="sizeType" >
-          <enum>QSizePolicy::Expanding</enum>
-         </property>
-         <property name="sizeHint" >
-          <size>
-           <width>20</width>
-           <height>90</height>
-          </size>
-         </property>
-        </spacer>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="securityTab" >
-      <attribute name="title" >
-       <string>&amp;Security</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <item>
-        <widget class="QGroupBox" name="groupBox19" >
-         <property name="title" >
-          <string>Gu&amp;ests</string>
-         </property>
-         <layout class="QVBoxLayout" >
-          <item>
-           <layout class="QHBoxLayout" >
-            <item>
-             <widget class="QLabel" name="guestAccountLbl" >
-              <property name="enabled" >
-               <bool>false</bool>
-              </property>
-              <property name="whatsThis" >
-               <string>This is a username which will be used for access to services which are specified as guest ok. Whatever privileges this user has will be available to any client connecting to the guest service. Typically this user will exist in the password file, but will not have a valid login. The user account \"ftp\" is often a good choice for this parameter. If a username is specified in a given service, the specified username overrides this one.</string>
-              </property>
-              <property name="text" >
-               <string>&amp;Guest account:</string>
-              </property>
-              <property name="wordWrap" >
-               <bool>false</bool>
-              </property>
-              <property name="buddy" >
-               <cstring>guestAccountCombo</cstring>
-              </property>
-             </widget>
-            </item>
-            <item>
-             <widget class="QComboBox" name="guestAccountCombo" />
-            </item>
-            <item>
-             <spacer>
-              <property name="orientation" >
-               <enum>Qt::Horizontal</enum>
-              </property>
-              <property name="sizeHint" >
-               <size>
-                <width>40</width>
-                <height>20</height>
-               </size>
-              </property>
-             </spacer>
-            </item>
-           </layout>
-          </item>
-          <item>
-           <widget class="QCheckBox" name="guestOnlyChk" >
-            <property name="enabled" >
-             <bool>false</bool>
-            </property>
-            <property name="whatsThis" >
-             <string>If this is checked , then no password is required to connect to the service. Privileges will be those of the guest account.</string>
-            </property>
-            <property name="text" >
-             <string>Only allow guest connect&amp;ions</string>
-            </property>
-           </widget>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="groupBox18" >
-         <property name="title" >
-          <string>Hos&amp;ts</string>
-         </property>
-         <layout class="QGridLayout" >
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <property name="horizontalSpacing" >
-           <number>6</number>
-          </property>
-          <property name="verticalSpacing" >
-           <number>6</number>
-          </property>
-          <item row="1" column="1" >
-           <widget class="QLineEdit" name="hostsDenyEdit" >
-            <property name="whatsThis" >
-             <string>The opposite of hosts allow - hosts listed here are NOT permitted access to services unless the specific services have their own lists to override this one. Where the lists conflict, the allow list takes precedence.</string>
-            </property>
-           </widget>
-          </item>
-          <item row="0" column="0" >
-           <widget class="QLabel" name="TextLabel5" >
-            <property name="whatsThis" >
-             <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-            </property>
-            <property name="text" >
-             <string>Hosts allo&amp;w:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>hostsAllowEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="1" column="0" >
-           <widget class="QLabel" name="TextLabel6" >
-            <property name="whatsThis" >
-             <string>The opposite of hosts allow - hosts listed here are NOT permitted access to services unless the specific services have their own lists to override this one. Where the lists conflict, the allow list takes precedence.</string>
-            </property>
-            <property name="text" >
-             <string>Hosts &amp;deny:</string>
-            </property>
-            <property name="wordWrap" >
-             <bool>false</bool>
-            </property>
-            <property name="buddy" >
-             <cstring>hostsDenyEdit</cstring>
-            </property>
-           </widget>
-          </item>
-          <item row="0" column="1" >
-           <widget class="QLineEdit" name="hostsAllowEdit" >
-            <property name="whatsThis" >
-             <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-            </property>
-           </widget>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="groupBox17" >
-         <property name="title" >
-          <string>Sy&amp;mbolic Links</string>
-         </property>
-         <layout class="QVBoxLayout" >
-          <property name="spacing" >
-           <number>6</number>
-          </property>
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <item>
-           <widget class="QCheckBox" name="followSymlinksChk" >
-            <property name="text" >
-             <string>Allow following of symbolic lin&amp;ks</string>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <widget class="QCheckBox" name="wideLinksChk" >
-            <property name="enabled" >
-             <bool>false</bool>
-            </property>
-            <property name="text" >
-             <string>Allow following of symbolic links that &amp;point to areas outside the directory tree</string>
-            </property>
-           </widget>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="QLabel" name="TextLabel2_4_2" >
-         <property name="text" >
-          <string>&lt;qt>Validate password against the following usernames if the client cannot supply a username:&lt;/qt></string>
-         </property>
-         <property name="wordWrap" >
-          <bool>false</bool>
-         </property>
-         <property name="buddy" >
-          <cstring>userNameEdit</cstring>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <widget class="QLineEdit" name="userNameEdit" />
-       </item>
-       <item>
-        <widget class="QCheckBox" name="onlyUserChk" >
-         <property name="whatsThis" >
-          <string>If this is checked , then no password is required to connect to the service. Privileges will be those of the guest account.</string>
-         </property>
-         <property name="text" >
-          <string>Only allow connections with use&amp;rnames specified in this username list</string>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <spacer>
-         <property name="orientation" >
-          <enum>Qt::Vertical</enum>
-         </property>
-         <property name="sizeHint" >
-          <size>
-           <width>20</width>
-           <height>40</height>
-          </size>
-         </property>
-        </spacer>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="hiddenFilesTab" >
-      <attribute name="title" >
-       <string>Hidden &amp;Files</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <property name="spacing" >
-        <number>6</number>
-       </property>
-       <property name="leftMargin" >
-        <number>11</number>
-       </property>
-       <property name="topMargin" >
-        <number>11</number>
-       </property>
-       <property name="rightMargin" >
-        <number>11</number>
-       </property>
-       <property name="bottomMargin" >
-        <number>11</number>
-       </property>
-       <item>
-        <widget class="K3ListView" name="hiddenListView" >
-         <property name="showSortIndicator" >
-          <bool>true</bool>
-         </property>
-         <column>
-          <property name="text" >
-           <string>Name</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Hidden</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Veto</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Veto Oplock</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Size</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Date</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Permissions</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Owner</string>
-          </property>
-         </column>
-         <column>
-          <property name="text" >
-           <string>Group</string>
-          </property>
-         </column>
-        </widget>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="selGrpBx" >
-         <property name="title" >
-          <string>Se&amp;lected Files</string>
-         </property>
-         <layout class="QHBoxLayout" >
-          <property name="spacing" >
-           <number>6</number>
-          </property>
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <item>
-           <widget class="QCheckBox" name="hiddenChk" >
-            <property name="text" >
-             <string>Hi&amp;de</string>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <widget class="QCheckBox" name="vetoChk" >
-            <property name="text" >
-             <string>&amp;Veto</string>
-            </property>
-           </widget>
-          </item>
-          <item>
-           <widget class="QCheckBox" name="vetoOplockChk" >
-            <property name="text" >
-             <string>Veto oploc&amp;k</string>
-            </property>
-           </widget>
-          </item>
-         </layout>
-        </widget>
-       </item>
-       <item>
-        <widget class="QGroupBox" name="GroupBox13_2" >
-         <property name="title" >
-          <string>&amp;Manual Configuration</string>
-         </property>
-         <layout class="QVBoxLayout" >
-          <property name="spacing" >
-           <number>6</number>
-          </property>
-          <property name="leftMargin" >
-           <number>11</number>
-          </property>
-          <property name="topMargin" >
-           <number>11</number>
-          </property>
-          <property name="rightMargin" >
-           <number>11</number>
-          </property>
-          <property name="bottomMargin" >
-           <number>11</number>
-          </property>
-          <item>
-           <layout class="QGridLayout" >
-            <property name="leftMargin" >
-             <number>0</number>
-            </property>
-            <property name="topMargin" >
-             <number>0</number>
-            </property>
-            <property name="rightMargin" >
-             <number>0</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>0</number>
-            </property>
-            <property name="horizontalSpacing" >
-             <number>6</number>
-            </property>
-            <property name="verticalSpacing" >
-             <number>6</number>
-            </property>
-            <item row="1" column="0" >
-             <widget class="QLabel" name="TextLabel2_2" >
-              <property name="text" >
-               <string>Ve&amp;to files:</string>
-              </property>
-              <property name="wordWrap" >
-               <bool>false</bool>
-              </property>
-              <property name="buddy" >
-               <cstring>vetoEdit</cstring>
-              </property>
-             </widget>
-            </item>
-            <item row="2" column="0" >
-             <widget class="QLabel" name="TextLabel2_2_2" >
-              <property name="text" >
-               <string>Veto oplock f&amp;iles:</string>
-              </property>
-              <property name="wordWrap" >
-               <bool>false</bool>
-              </property>
-              <property name="buddy" >
-               <cstring>vetoOplockEdit</cstring>
-              </property>
-             </widget>
-            </item>
-            <item row="0" column="1" >
-             <widget class="QLineEdit" name="hiddenEdit" />
-            </item>
-            <item row="2" column="1" >
-             <widget class="QLineEdit" name="vetoOplockEdit" />
-            </item>
-            <item row="1" column="1" >
-             <widget class="QLineEdit" name="vetoEdit" />
-            </item>
-            <item row="0" column="0" >
-             <widget class="QLabel" name="TextLabel1_3" >
-              <property name="text" >
-               <string>Hidde&amp;n files:</string>
-              </property>
-              <property name="wordWrap" >
-               <bool>false</bool>
-              </property>
-              <property name="buddy" >
-               <cstring>hiddenEdit</cstring>
-              </property>
-             </widget>
-            </item>
-           </layout>
-          </item>
-          <item>
-           <layout class="QGridLayout" >
-            <property name="leftMargin" >
-             <number>0</number>
-            </property>
-            <property name="topMargin" >
-             <number>0</number>
-            </property>
-            <property name="rightMargin" >
-             <number>0</number>
-            </property>
-            <property name="bottomMargin" >
-             <number>0</number>
-            </property>
-            <property name="horizontalSpacing" >
-             <number>6</number>
-            </property>
-            <property name="verticalSpacing" >
-             <number>6</number>
-            </property>
-            <item row="1" column="0" >
-             <widget class="QCheckBox" name="hideUnwriteableFilesChk" >
-              <property name="text" >
-               <string>Hide un&amp;writable files</string>
-              </property>
-             </widget>
-            </item>
-            <item row="1" column="1" >
-             <widget class="QCheckBox" name="hideSpecialFilesChk" >
-              <property name="text" >
-               <string>Hide s&amp;pecial files</string>
-              </property>
-             </widget>
-            </item>
-            <item row="0" column="1" >
-             <widget class="QCheckBox" name="hideDotFilesChk" >
-              <property name="text" >
-               <string>Hide files startin&amp;g with a dot </string>
-              </property>
-             </widget>
-            </item>
-            <item row="0" column="0" >
-             <widget class="QCheckBox" name="hideUnreadableChk" >
-              <property name="text" >
-               <string>Hide un&amp;readable files</string>
-              </property>
-             </widget>
-            </item>
-           </layout>
-          </item>
-         </layout>
-        </widget>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="advancedTab" >
-      <attribute name="title" >
-       <string>&amp;Advanced</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <property name="spacing" >
-        <number>6</number>
-       </property>
-       <property name="leftMargin" >
-        <number>11</number>
-       </property>
-       <property name="topMargin" >
-        <number>11</number>
-       </property>
-       <property name="rightMargin" >
-        <number>11</number>
-       </property>
-       <property name="bottomMargin" >
-        <number>11</number>
-       </property>
-       <item>
-        <widget class="QFrame" name="advancedFrame" >
-         <property name="frameShape" >
-          <enum>QFrame::NoFrame</enum>
-         </property>
-         <property name="frameShadow" >
-          <enum>QFrame::Plain</enum>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <widget class="QFrame" name="Frame26" >
-         <property name="frameShape" >
-          <enum>QFrame::NoFrame</enum>
-         </property>
-         <property name="frameShadow" >
-          <enum>QFrame::Plain</enum>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <layout class="QHBoxLayout" >
-         <property name="spacing" >
-          <number>6</number>
-         </property>
-         <property name="leftMargin" >
-          <number>0</number>
-         </property>
-         <property name="topMargin" >
-          <number>0</number>
-         </property>
-         <property name="rightMargin" >
-          <number>0</number>
-         </property>
-         <property name="bottomMargin" >
-          <number>0</number>
-         </property>
-         <item>
-          <widget class="QLabel" name="PixmapLabel1" >
-           <property name="sizePolicy" >
-            <sizepolicy vsizetype="Fixed" hsizetype="Fixed" >
-             <horstretch>0</horstretch>
-             <verstretch>0</verstretch>
-            </sizepolicy>
-           </property>
-           <property name="scaledContents" >
-            <bool>true</bool>
-           </property>
-           <property name="wordWrap" >
-            <bool>false</bool>
-           </property>
-          </widget>
-         </item>
-         <item>
-          <widget class="QLabel" name="TextLabel1_4" >
-           <property name="font" >
-            <font>
-             <weight>75</weight>
-             <bold>true</bold>
-            </font>
-           </property>
-           <property name="text" >
-            <string>Here you can change advanced options of the SAMBA server.
-Only change something if you know what you are doing.</string>
-           </property>
-           <property name="wordWrap" >
-            <bool>false</bool>
-           </property>
-          </widget>
-         </item>
-        </layout>
-       </item>
-      </layout>
-     </widget>
-     <widget class="QWidget" name="advancedDumpTabPage" >
-      <attribute name="title" >
-       <string>Advanced Dump</string>
-      </attribute>
-      <layout class="QVBoxLayout" >
-       <item>
-        <widget class="QTabWidget" name="advancedDumpTab" >
-         <property name="currentIndex" >
-          <number>3</number>
-         </property>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Security</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <property name="leftMargin" >
-            <number>0</number>
-           </property>
-           <property name="topMargin" >
-            <number>0</number>
-           </property>
-           <property name="rightMargin" >
-            <number>0</number>
-           </property>
-           <property name="bottomMargin" >
-            <number>0</number>
-           </property>
-           <item row="3" column="0" >
-            <widget class="QGroupBox" name="GroupBox11_2" >
-             <property name="title" >
-              <string>Force Modes</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_3_2_2_2_2" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Forc&amp;e directory security mode:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>forceDirectorySecurityModeEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_3_2_3" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Fo&amp;rce security mode:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>forceSecurityModeEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_3_2_2_3" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Force director&amp;y mode:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>forceDirectoryModeEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_3_3" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Force create mo&amp;de:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>forceCreateModeEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="2" >
-               <widget class="QToolButton" name="forceDirectoryModeBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="2" >
-               <widget class="QToolButton" name="forceDirectorySecurityModeBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KRestrictedLine" name="forceCreateModeEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KRestrictedLine" name="forceSecurityModeEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KRestrictedLine" name="forceDirectoryModeEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="KRestrictedLine" name="forceDirectorySecurityModeEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="2" >
-               <widget class="QToolButton" name="forceSecurityModeBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <widget class="QToolButton" name="forceCreateModeBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="4" column="0" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>16</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-           <item row="3" column="1" >
-            <widget class="QGroupBox" name="GroupBox10_2" >
-             <property name="title" >
-              <string>Masks</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="3" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_4_2_2_2" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Directory security mask:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>directorySecurityMaskEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_4_3" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Security &amp;mask:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>securityMaskEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_4_2_3" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Direc&amp;tory mask:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>directoryMaskEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="2" >
-               <widget class="QToolButton" name="securityMaskBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="2" >
-               <widget class="QToolButton" name="directoryMaskBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="2" >
-               <widget class="QToolButton" name="directorySecurityMaskBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="1" >
-               <widget class="KRestrictedLine" name="securityMaskEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="1" >
-               <widget class="KRestrictedLine" name="directoryMaskEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="1" >
-               <widget class="KRestrictedLine" name="directorySecurityMaskEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_2" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Create mas&amp;k:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>createMaskEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="1" >
-               <widget class="KRestrictedLine" name="createMaskEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="2" >
-               <widget class="QToolButton" name="createMaskBtn" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Minimum" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="minimumSize" >
-                 <size>
-                  <width>20</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="text" >
-                 <string>...</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item rowspan="2" row="0" column="1" >
-            <widget class="QGroupBox" name="groupBox56" >
-             <property name="title" >
-              <string>ACL</string>
-             </property>
-             <layout class="QGridLayout" >
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <property name="horizontalSpacing" >
-               <number>6</number>
-              </property>
-              <property name="verticalSpacing" >
-               <number>6</number>
-              </property>
-              <item row="2" column="0" colspan="3" >
-               <widget class="QCheckBox" name="profileAclsChk" >
-                <property name="text" >
-                 <string>&amp;Profile acls</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" colspan="3" >
-               <widget class="QCheckBox" name="inheritAclsChk" >
-                <property name="text" >
-                 <string>Inherit ac&amp;ls</string>
-                </property>
-               </widget>
-              </item>
-              <item row="0" column="0" >
-               <widget class="QCheckBox" name="ntAclSupportChk" >
-                <property name="text" >
-                 <string>&amp;NT ACL support</string>
-                </property>
-                <property name="checked" >
-                 <bool>true</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="0" >
-               <widget class="QLabel" name="TextLabel5_2_2_2" >
-                <property name="whatsThis" >
-                 <string>This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.</string>
-                </property>
-                <property name="text" >
-                 <string>Force unkno&amp;wn acl user:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>forceUnknownAclUserEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="0" colspan="3" >
-               <widget class="QCheckBox" name="mapAclInheritChk" >
-                <property name="text" >
-                 <string>Map acl &amp;inherit</string>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="1" colspan="2" >
-               <widget class="KRestrictedLine" name="forceUnknownAclUserEdit" >
-                <property name="minimumSize" >
-                 <size>
-                  <width>40</width>
-                  <height>0</height>
-                 </size>
-                </property>
-                <property name="validChars" >
-                 <string>01234567</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="0" column="0" >
-            <widget class="QGroupBox" name="groupBox58" >
-             <property name="title" >
-              <string>General</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QCheckBox" name="inheritPermissionsChk" >
-                <property name="text" >
-                 <string>Inherit permissions from parent directory</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="deleteReadonlyChk" >
-                <property name="text" >
-                 <string>Allow deletion of readonly files</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item rowspan="2" row="1" column="0" >
-            <widget class="QGroupBox" name="groupBox57" >
-             <property name="title" >
-              <string>DOS Attribute Mapping</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <property name="spacing" >
-               <number>6</number>
-              </property>
-              <property name="leftMargin" >
-               <number>11</number>
-              </property>
-              <property name="topMargin" >
-               <number>11</number>
-              </property>
-              <property name="rightMargin" >
-               <number>11</number>
-              </property>
-              <property name="bottomMargin" >
-               <number>11</number>
-              </property>
-              <item>
-               <widget class="QCheckBox" name="mapArchiveChk" >
-                <property name="text" >
-                 <string>Map DOS archi&amp;ve to UNIX owner execute</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="mapHiddenChk" >
-                <property name="text" >
-                 <string>Map DOS hidden to UNI&amp;X world execute</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="mapSystemChk" >
-                <property name="text" >
-                 <string>Map DOS system to UNIX &amp;group execute</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="storeDosAttributesChk" >
-                <property name="text" >
-                 <string>Store DOS attributes onto extended attribute</string>
-                </property>
-                <property name="shortcut" >
-                 <string/>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item row="2" column="1" >
-            <widget class="QGroupBox" name="groupBox76" >
-             <property name="title" >
-              <string>OS/2</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <item>
-               <widget class="QCheckBox" name="eaSupportChk" >
-                <property name="text" >
-                 <string>OS/2 style extended attributes support</string>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Tuning</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <item row="0" column="0" colspan="2" >
-            <widget class="QCheckBox" name="strictSyncChk" >
-             <property name="text" >
-              <string>Strict s&amp;ync</string>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="0" colspan="2" >
-            <widget class="QCheckBox" name="syncAlwaysChk" >
-             <property name="enabled" >
-              <bool>false</bool>
-             </property>
-             <property name="text" >
-              <string>Sync al&amp;ways</string>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="0" colspan="3" >
-            <widget class="QCheckBox" name="strictAllocateChk" >
-             <property name="text" >
-              <string>St&amp;rict allocate</string>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="0" colspan="2" >
-            <widget class="QCheckBox" name="useSendfileChk" >
-             <property name="text" >
-              <string>Use sen&amp;dfile</string>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="0" colspan="2" >
-            <widget class="QLabel" name="TextLabel5_3_4" >
-             <property name="text" >
-              <string>&amp;Maximum number of simultaneous connections:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>maxConnectionsSpin</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="2" >
-            <widget class="KIntSpinBox" name="maxConnectionsSpin" >
-             <property name="buttonSymbols" >
-              <enum>QAbstractSpinBox::UpDownArrows</enum>
-             </property>
-             <property name="maximum" >
-              <number>2147483647</number>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="0" colspan="2" >
-            <widget class="QLabel" name="TextLabel5_3_2_2" >
-             <property name="text" >
-              <string>Write cache si&amp;ze:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>writeCacheSizeSpin</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="2" >
-            <widget class="KIntSpinBox" name="writeCacheSizeSpin" >
-             <property name="buttonSymbols" >
-              <enum>QAbstractSpinBox::UpDownArrows</enum>
-             </property>
-             <property name="maximum" >
-              <number>2147483647</number>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="3" >
-            <widget class="QLabel" name="TextLabel1_7" >
-             <property name="text" >
-              <string>bytes</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="0" >
-            <widget class="QLabel" name="textLabel1" >
-             <property name="text" >
-              <string>Bloc&amp;k size:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>blockSizeSpin</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="2" >
-            <widget class="KIntSpinBox" name="blockSizeSpin" >
-             <property name="buttonSymbols" >
-              <enum>QAbstractSpinBox::UpDownArrows</enum>
-             </property>
-             <property name="maximum" >
-              <number>2147483647</number>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="3" >
-            <widget class="QLabel" name="TextLabel1_7_2" >
-             <property name="text" >
-              <string>bytes</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-            </widget>
-           </item>
-           <item row="7" column="0" >
-            <widget class="QLabel" name="textLabel3" >
-             <property name="text" >
-              <string>Client-side cachin&amp;g policy:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>cscPolicyCombo</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="7" column="2" colspan="2" >
-            <widget class="QComboBox" name="cscPolicyCombo" >
-             <item>
-              <property name="text" >
-               <string>manual</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>documents</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>programs</string>
-              </property>
-             </item>
-             <item>
-              <property name="text" >
-               <string>disable</string>
-              </property>
-             </item>
-            </widget>
-           </item>
-           <item row="8" column="1" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>120</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Filenames</string>
-          </attribute>
-          <layout class="QHBoxLayout" >
-           <item>
-            <widget class="QGroupBox" name="GroupBox5" >
-             <property name="sizePolicy" >
-              <sizepolicy vsizetype="Preferred" hsizetype="Preferred" >
-               <horstretch>0</horstretch>
-               <verstretch>0</verstretch>
-              </sizepolicy>
-             </property>
-             <property name="title" >
-              <string>Name Mangling</string>
-             </property>
-             <layout class="QGridLayout" >
-              <item row="0" column="0" colspan="2" >
-               <widget class="QCheckBox" name="mangledNamesChk" >
-                <property name="text" >
-                 <string>Enable na&amp;me mangling</string>
-                </property>
-               </widget>
-              </item>
-              <item row="1" column="0" colspan="2" >
-               <widget class="QCheckBox" name="mangleCaseChk" >
-                <property name="text" >
-                 <string>Man&amp;gle case</string>
-                </property>
-               </widget>
-              </item>
-              <item row="2" column="0" colspan="2" >
-               <widget class="QCheckBox" name="preserveCaseChk" >
-                <property name="text" >
-                 <string>Preser&amp;ve case</string>
-                </property>
-                <property name="checked" >
-                 <bool>true</bool>
-                </property>
-               </widget>
-              </item>
-              <item row="3" column="0" colspan="2" >
-               <widget class="QCheckBox" name="shortPreserveCaseChk" >
-                <property name="text" >
-                 <string>Short pr&amp;eserve case</string>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="0" >
-               <widget class="QLabel" name="label" >
-                <property name="text" >
-                 <string>Case sensi&amp;tive</string>
-                </property>
-                <property name="buddy" >
-                 <cstring>caseSensitiveCombo</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="4" column="1" >
-               <widget class="QComboBox" name="caseSensitiveCombo" >
-                <item>
-                 <property name="text" >
-                  <string>Auto</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>Yes</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>No</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-              <item row="5" column="0" >
-               <widget class="QLabel" name="TextLabel2_3" >
-                <property name="text" >
-                 <string>Defau&amp;lt case:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>defaultCaseCombo</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="5" column="1" >
-               <widget class="QComboBox" name="defaultCaseCombo" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Fixed" hsizetype="Minimum" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <item>
-                 <property name="text" >
-                  <string>Lower</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>Upper</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-              <item row="6" column="0" >
-               <widget class="QLabel" name="TextLabel3_2_2" >
-                <property name="sizePolicy" >
-                 <sizepolicy vsizetype="Preferred" hsizetype="Preferred" >
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                 </sizepolicy>
-                </property>
-                <property name="text" >
-                 <string>Mangling cha&amp;r:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>manglingCharEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="6" column="1" >
-               <layout class="QHBoxLayout" >
-                <item>
-                 <widget class="QLineEdit" name="manglingCharEdit" >
-                  <property name="maximumSize" >
-                   <size>
-                    <width>40</width>
-                    <height>16777215</height>
-                   </size>
-                  </property>
-                 </widget>
-                </item>
-                <item>
-                 <spacer>
-                  <property name="orientation" >
-                   <enum>Qt::Horizontal</enum>
-                  </property>
-                  <property name="sizeHint" >
-                   <size>
-                    <width>40</width>
-                    <height>20</height>
-                   </size>
-                  </property>
-                 </spacer>
-                </item>
-               </layout>
-              </item>
-              <item row="7" column="0" >
-               <widget class="QLabel" name="TextLabel1_5" >
-                <property name="text" >
-                 <string>Mangled ma&amp;p:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>mangledMapEdit</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="7" column="1" >
-               <widget class="QLineEdit" name="mangledMapEdit" />
-              </item>
-              <item row="8" column="0" >
-               <widget class="QLabel" name="textLabel2" >
-                <property name="text" >
-                 <string>Mangling method:</string>
-                </property>
-                <property name="wordWrap" >
-                 <bool>false</bool>
-                </property>
-                <property name="buddy" >
-                 <cstring>manglingMethodCombo</cstring>
-                </property>
-               </widget>
-              </item>
-              <item row="8" column="1" >
-               <widget class="QComboBox" name="manglingMethodCombo" >
-                <item>
-                 <property name="text" >
-                  <string>hash</string>
-                 </property>
-                </item>
-                <item>
-                 <property name="text" >
-                  <string>hash2</string>
-                 </property>
-                </item>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <layout class="QVBoxLayout" >
-             <item>
-              <widget class="QGroupBox" name="GroupBox9" >
-               <property name="sizePolicy" >
-                <sizepolicy vsizetype="Preferred" hsizetype="Expanding" >
-                 <horstretch>0</horstretch>
-                 <verstretch>0</verstretch>
-                </sizepolicy>
-               </property>
-               <property name="title" >
-                <string>Other Options</string>
-               </property>
-               <layout class="QVBoxLayout" >
-                <item>
-                 <widget class="QCheckBox" name="hideTrailingDotChk" >
-                  <property name="text" >
-                   <string>Hide traili&amp;ng dot</string>
-                  </property>
-                 </widget>
-                </item>
-               </layout>
-              </widget>
-             </item>
-             <item>
-              <widget class="QGroupBox" name="GroupBox15" >
-               <property name="title" >
-                <string>DOS</string>
-               </property>
-               <layout class="QVBoxLayout" >
-                <property name="spacing" >
-                 <number>6</number>
-                </property>
-                <property name="leftMargin" >
-                 <number>11</number>
-                </property>
-                <property name="topMargin" >
-                 <number>11</number>
-                </property>
-                <property name="rightMargin" >
-                 <number>11</number>
-                </property>
-                <property name="bottomMargin" >
-                 <number>11</number>
-                </property>
-                <item>
-                 <widget class="QCheckBox" name="dosFilemodeChk" >
-                  <property name="text" >
-                   <string>&amp;DOS file mode</string>
-                  </property>
-                 </widget>
-                </item>
-                <item>
-                 <widget class="QCheckBox" name="dosFiletimesChk" >
-                  <property name="text" >
-                   <string>DOS f&amp;ile times</string>
-                  </property>
-                 </widget>
-                </item>
-                <item>
-                 <widget class="QCheckBox" name="dosFiletimeResolutionChk" >
-                  <property name="text" >
-                   <string>DOS file time resolution</string>
-                  </property>
-                 </widget>
-                </item>
-               </layout>
-              </widget>
-             </item>
-            </layout>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Locking</string>
-          </attribute>
-          <layout class="QVBoxLayout" >
-           <item>
-            <widget class="QCheckBox" name="lockingChk" >
-             <property name="text" >
-              <string>Enable lock&amp;ing</string>
-             </property>
-            </widget>
-           </item>
-           <item>
-            <widget class="QGroupBox" name="groupBox47" >
-             <property name="enabled" >
-              <bool>false</bool>
-             </property>
-             <property name="title" >
-              <string>Locki&amp;ng</string>
-             </property>
-             <layout class="QVBoxLayout" >
-              <item>
-               <layout class="QHBoxLayout" >
-                <item>
-                 <widget class="QLabel" name="label_2" >
-                  <property name="text" >
-                   <string>S&amp;trict locking</string>
-                  </property>
-                  <property name="buddy" >
-                   <cstring>strictLockingCombo</cstring>
-                  </property>
-                 </widget>
-                </item>
-                <item>
-                 <widget class="QComboBox" name="strictLockingCombo" >
-                  <item>
-                   <property name="text" >
-                    <string>Auto</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>Yes</string>
-                   </property>
-                  </item>
-                  <item>
-                   <property name="text" >
-                    <string>No</string>
-                   </property>
-                  </item>
-                 </widget>
-                </item>
-                <item>
-                 <spacer>
-                  <property name="orientation" >
-                   <enum>Qt::Horizontal</enum>
-                  </property>
-                  <property name="sizeHint" >
-                   <size>
-                    <width>40</width>
-                    <height>20</height>
-                   </size>
-                  </property>
-                 </spacer>
-                </item>
-               </layout>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="blockingLocksChk" >
-                <property name="text" >
-                 <string>Blockin&amp;g locks</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="posixLockingChk" >
-                <property name="text" >
-                 <string>Posi&amp;x locking</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="shareModesChk" >
-                <property name="text" >
-                 <string>Share mo&amp;des</string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="oplocksChk" >
-                <property name="text" >
-                 <string>Issue oppo&amp;rtunistic locks (oplocks) </string>
-                </property>
-               </widget>
-              </item>
-              <item>
-               <widget class="QGroupBox" name="groupBox59" >
-                <property name="title" >
-                 <string>O&amp;plocks</string>
-                </property>
-                <layout class="QVBoxLayout" >
-                 <item>
-                  <widget class="QCheckBox" name="level2OplocksChk" >
-                   <property name="text" >
-                    <string>Le&amp;vel2 oplocks</string>
-                   </property>
-                  </widget>
-                 </item>
-                 <item>
-                  <layout class="QHBoxLayout" >
-                   <item>
-                    <widget class="QLabel" name="TextLabel5_3_3_2_2" >
-                     <property name="font" >
-                      <font/>
-                     </property>
-                     <property name="text" >
-                      <string>Oplock contention li&amp;mit:</string>
-                     </property>
-                     <property name="wordWrap" >
-                      <bool>false</bool>
-                     </property>
-                     <property name="buddy" >
-                      <cstring>oplockContentionLimitSpin</cstring>
-                     </property>
-                    </widget>
-                   </item>
-                   <item>
-                    <widget class="KIntSpinBox" name="oplockContentionLimitSpin" >
-                     <property name="buttonSymbols" >
-                      <enum>QAbstractSpinBox::UpDownArrows</enum>
-                     </property>
-                     <property name="maximum" >
-                      <number>2147483647</number>
-                     </property>
-                    </widget>
-                   </item>
-                   <item>
-                    <spacer>
-                     <property name="orientation" >
-                      <enum>Qt::Horizontal</enum>
-                     </property>
-                     <property name="sizeHint" >
-                      <size>
-                       <width>40</width>
-                       <height>20</height>
-                      </size>
-                     </property>
-                    </spacer>
-                   </item>
-                  </layout>
-                 </item>
-                </layout>
-               </widget>
-              </item>
-              <item>
-               <widget class="QCheckBox" name="fakeOplocksChk" >
-                <property name="text" >
-                 <string>Fak&amp;e oplocks</string>
-                </property>
-                <property name="checked" >
-                 <bool>true</bool>
-                </property>
-               </widget>
-              </item>
-             </layout>
-            </widget>
-           </item>
-           <item>
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>626</width>
-               <height>71</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>VFS</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <item row="0" column="0" >
-            <widget class="QLabel" name="TextLabel1_6" >
-             <property name="text" >
-              <string>Vfs ob&amp;jects:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>vfsObjectsEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="1" >
-            <widget class="QLineEdit" name="vfsObjectsEdit" />
-           </item>
-           <item row="1" column="0" >
-            <widget class="QLabel" name="TextLabel1_6_2" >
-             <property name="text" >
-              <string>Vfs o&amp;ptions:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>vfsOptionsEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="1" >
-            <widget class="QLineEdit" name="vfsOptionsEdit" />
-           </item>
-           <item row="2" column="1" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>260</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Exec</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <item row="0" column="0" >
-            <widget class="QLabel" name="TextLabel2" >
-             <property name="text" >
-              <string>P&amp;reexec:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>preexecEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="1" >
-            <widget class="QLineEdit" name="preexecEdit" />
-           </item>
-           <item row="1" column="0" >
-            <widget class="QLabel" name="TextLabel5_2" >
-             <property name="text" >
-              <string>Root pr&amp;eexec:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>postexecEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="1" >
-            <widget class="QLineEdit" name="rootPreexecEdit" />
-           </item>
-           <item row="2" column="0" >
-            <widget class="QLabel" name="TextLabel4" >
-             <property name="text" >
-              <string>Pos&amp;texec:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>rootPreexecEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="1" >
-            <widget class="QLineEdit" name="postexecEdit" />
-           </item>
-           <item row="3" column="0" >
-            <widget class="QLabel" name="TextLabel5_2_4" >
-             <property name="text" >
-              <string>Root &amp;postexec:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>rootPostexecEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="1" >
-            <widget class="QLineEdit" name="rootPostexecEdit" />
-           </item>
-           <item row="4" column="0" colspan="2" >
-            <widget class="QCheckBox" name="preexecCloseChk" >
-             <property name="text" >
-              <string>preexec c&amp;lose</string>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="0" colspan="2" >
-            <widget class="QCheckBox" name="rootPreexecCloseChk" >
-             <property name="text" >
-              <string>root pree&amp;xec close</string>
-             </property>
-            </widget>
-           </item>
-           <item row="6" column="1" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>16</width>
-               <height>284</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-         <widget class="QWidget" name="tab" >
-          <attribute name="title" >
-           <string>Misc</string>
-          </attribute>
-          <layout class="QGridLayout" >
-           <item row="0" column="0" >
-            <widget class="QLabel" name="TextLabel6_2" >
-             <property name="text" >
-              <string>&amp;Volume:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>volumeEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="0" column="1" >
-            <widget class="QLineEdit" name="volumeEdit" />
-           </item>
-           <item row="1" column="0" >
-            <widget class="QLabel" name="TextLabel6_2_2" >
-             <property name="text" >
-              <string>Fst&amp;ype:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>fstypeEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="1" column="1" >
-            <widget class="QLineEdit" name="fstypeEdit" />
-           </item>
-           <item row="2" column="0" >
-            <widget class="QLabel" name="TextLabel6_2_3" >
-             <property name="text" >
-              <string>Ma&amp;gic script:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>magicScriptEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="2" column="1" >
-            <widget class="QLineEdit" name="magicScriptEdit" />
-           </item>
-           <item row="3" column="0" >
-            <widget class="QLabel" name="TextLabel6_2_2_2" >
-             <property name="text" >
-              <string>Mag&amp;ic output:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>magicOutputEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="3" column="1" >
-            <widget class="QLineEdit" name="magicOutputEdit" />
-           </item>
-           <item row="4" column="0" >
-            <widget class="QLabel" name="TextLabel6_2_3_2" >
-             <property name="text" >
-              <string>Do &amp;not descend:</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>dontDescendEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="4" column="1" >
-            <widget class="QLineEdit" name="dontDescendEdit" />
-           </item>
-           <item row="5" column="0" >
-            <widget class="QLabel" name="TextLabel6_2_3_3" >
-             <property name="text" >
-              <string>Msdfs pro&amp;xy</string>
-             </property>
-             <property name="wordWrap" >
-              <bool>false</bool>
-             </property>
-             <property name="buddy" >
-              <cstring>msdfsProxyEdit</cstring>
-             </property>
-            </widget>
-           </item>
-           <item row="5" column="1" >
-            <widget class="QLineEdit" name="msdfsProxyEdit" />
-           </item>
-           <item row="6" column="0" colspan="2" >
-            <widget class="QCheckBox" name="setDirectoryChk" >
-             <property name="text" >
-              <string>Setdir command allo&amp;wed</string>
-             </property>
-            </widget>
-           </item>
-           <item row="7" column="0" colspan="2" >
-            <widget class="QCheckBox" name="fakeDirectoryCreateTimesChk" >
-             <property name="text" >
-              <string>Fa&amp;ke directory create times</string>
-             </property>
-            </widget>
-           </item>
-           <item row="8" column="0" colspan="2" >
-            <widget class="QCheckBox" name="msdfsRootChk" >
-             <property name="text" >
-              <string>Ms&amp;dfs root</string>
-             </property>
-            </widget>
-           </item>
-           <item row="9" column="1" >
-            <spacer>
-             <property name="orientation" >
-              <enum>Qt::Vertical</enum>
-             </property>
-             <property name="sizeType" >
-              <enum>QSizePolicy::Expanding</enum>
-             </property>
-             <property name="sizeHint" >
-              <size>
-               <width>20</width>
-               <height>171</height>
-              </size>
-             </property>
-            </spacer>
-           </item>
-          </layout>
-         </widget>
-        </widget>
-       </item>
-      </layout>
-     </widget>
-    </widget>
-   </item>
-   <item>
-    <layout class="QHBoxLayout" >
-     <property name="spacing" >
-      <number>6</number>
-     </property>
-     <property name="leftMargin" >
-      <number>0</number>
-     </property>
-     <property name="topMargin" >
-      <number>0</number>
-     </property>
-     <property name="rightMargin" >
-      <number>0</number>
-     </property>
-     <property name="bottomMargin" >
-      <number>0</number>
-     </property>
-     <item>
-      <widget class="QPushButton" name="buttonHelp" >
-       <property name="text" >
-        <string>&amp;Help</string>
-       </property>
-       <property name="shortcut" >
-        <string>F1</string>
-       </property>
-       <property name="autoDefault" >
-        <bool>true</bool>
-       </property>
-      </widget>
-     </item>
-     <item>
-      <spacer>
-       <property name="orientation" >
-        <enum>Qt::Horizontal</enum>
-       </property>
-       <property name="sizeHint" >
-        <size>
-         <width>40</width>
-         <height>20</height>
-        </size>
-       </property>
-      </spacer>
-     </item>
-     <item>
-      <widget class="QPushButton" name="buttonOk" >
-       <property name="text" >
-        <string>&amp;OK</string>
-       </property>
-       <property name="autoDefault" >
-        <bool>true</bool>
-       </property>
-       <property name="default" >
-        <bool>true</bool>
-       </property>
-      </widget>
-     </item>
-     <item>
-      <widget class="QPushButton" name="buttonCancel" >
-       <property name="text" >
-        <string>&amp;Cancel</string>
-       </property>
-       <property name="autoDefault" >
-        <bool>true</bool>
-       </property>
-      </widget>
-     </item>
-    </layout>
-   </item>
-  </layout>
- </widget>
-  <customwidgets>
-  <customwidget>
-   <class>K3ListView</class>
-   <extends>Q3ListView</extends>
-   <header>k3listview.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KIntSpinBox</class>
-   <extends>QSpinBox</extends>
-   <header>knuminput.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KLineEdit</class>
-   <extends>QLineEdit</extends>
-   <header>klineedit.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KRestrictedLine</class>
-   <extends>KLineEdit</extends>
-   <header>krestrictedline.h</header>
-  </customwidget>
-  <customwidget>
-   <class>KUrlRequester</class>
-   <extends>QFrame</extends>
-   <header>kurlrequester.h</header>
-  </customwidget>
- </customwidgets>
- <tabstops>
-  <tabstop>volumeEdit</tabstop>
-  <tabstop>fstypeEdit</tabstop>
-  <tabstop>magicScriptEdit</tabstop>
-  <tabstop>magicOutputEdit</tabstop>
-  <tabstop>dontDescendEdit</tabstop>
-  <tabstop>setDirectoryChk</tabstop>
-  <tabstop>fakeDirectoryCreateTimesChk</tabstop>
-  <tabstop>msdfsRootChk</tabstop>
-  <tabstop>preexecEdit</tabstop>
-  <tabstop>rootPreexecEdit</tabstop>
-  <tabstop>postexecEdit</tabstop>
-  <tabstop>rootPostexecEdit</tabstop>
-  <tabstop>preexecCloseChk</tabstop>
-  <tabstop>rootPreexecCloseChk</tabstop>
-  <tabstop>lockingChk</tabstop>
-  <tabstop>blockingLocksChk</tabstop>
-  <tabstop>posixLockingChk</tabstop>
-  <tabstop>shareModesChk</tabstop>
-  <tabstop>oplocksChk</tabstop>
-  <tabstop>level2OplocksChk</tabstop>
-  <tabstop>oplockContentionLimitSpin</tabstop>
-  <tabstop>fakeOplocksChk</tabstop>
-  <tabstop>mangledNamesChk</tabstop>
-  <tabstop>mangleCaseChk</tabstop>
-  <tabstop>preserveCaseChk</tabstop>
-  <tabstop>shortPreserveCaseChk</tabstop>
-  <tabstop>defaultCaseCombo</tabstop>
-  <tabstop>manglingCharEdit</tabstop>
-  <tabstop>mangledMapEdit</tabstop>
-  <tabstop>manglingMethodCombo</tabstop>
-  <tabstop>hideTrailingDotChk</tabstop>
-  <tabstop>dosFilemodeChk</tabstop>
-  <tabstop>dosFiletimesChk</tabstop>
-  <tabstop>dosFiletimeResolutionChk</tabstop>
-  <tabstop>strictSyncChk</tabstop>
-  <tabstop>syncAlwaysChk</tabstop>
-  <tabstop>strictAllocateChk</tabstop>
-  <tabstop>useSendfileChk</tabstop>
-  <tabstop>maxConnectionsSpin</tabstop>
-  <tabstop>writeCacheSizeSpin</tabstop>
-  <tabstop>blockSizeSpin</tabstop>
-  <tabstop>cscPolicyCombo</tabstop>
-  <tabstop>inheritPermissionsChk</tabstop>
-  <tabstop>deleteReadonlyChk</tabstop>
-  <tabstop>mapArchiveChk</tabstop>
-  <tabstop>mapHiddenChk</tabstop>
-  <tabstop>mapSystemChk</tabstop>
-  <tabstop>forceCreateModeEdit</tabstop>
-  <tabstop>forceSecurityModeEdit</tabstop>
-  <tabstop>forceDirectoryModeEdit</tabstop>
-  <tabstop>forceDirectorySecurityModeEdit</tabstop>
-  <tabstop>ntAclSupportChk</tabstop>
-  <tabstop>inheritAclsChk</tabstop>
-  <tabstop>profileAclsChk</tabstop>
-  <tabstop>mapAclInheritChk</tabstop>
-  <tabstop>forceUnknownAclUserEdit</tabstop>
-  <tabstop>createMaskEdit</tabstop>
-  <tabstop>securityMaskEdit</tabstop>
-  <tabstop>directoryMaskEdit</tabstop>
-  <tabstop>directorySecurityMaskEdit</tabstop>
-  <tabstop>advancedDumpTab</tabstop>
-  <tabstop>hiddenListView</tabstop>
-  <tabstop>hiddenChk</tabstop>
-  <tabstop>vetoChk</tabstop>
-  <tabstop>vetoOplockChk</tabstop>
-  <tabstop>hiddenEdit</tabstop>
-  <tabstop>vetoEdit</tabstop>
-  <tabstop>vetoOplockEdit</tabstop>
-  <tabstop>hideUnreadableChk</tabstop>
-  <tabstop>hideUnwriteableFilesChk</tabstop>
-  <tabstop>hideDotFilesChk</tabstop>
-  <tabstop>hideSpecialFilesChk</tabstop>
-  <tabstop>pathUrlRq</tabstop>
-  <tabstop>homeChk</tabstop>
-  <tabstop>shareNameEdit</tabstop>
-  <tabstop>commentEdit</tabstop>
-  <tabstop>readOnlyBaseChk</tabstop>
-  <tabstop>publicBaseChk</tabstop>
-  <tabstop>browseableBaseChk</tabstop>
-  <tabstop>availableBaseChk</tabstop>
-  <tabstop>guestAccountCombo</tabstop>
-  <tabstop>guestOnlyChk</tabstop>
-  <tabstop>hostsAllowEdit</tabstop>
-  <tabstop>hostsDenyEdit</tabstop>
-  <tabstop>followSymlinksChk</tabstop>
-  <tabstop>wideLinksChk</tabstop>
-  <tabstop>userNameEdit</tabstop>
-  <tabstop>onlyUserChk</tabstop>
-  <tabstop>_tabs</tabstop>
-  <tabstop>vfsObjectsEdit</tabstop>
-  <tabstop>vfsOptionsEdit</tabstop>
-  <tabstop>buttonHelp</tabstop>
-  <tabstop>buttonOk</tabstop>
-  <tabstop>buttonCancel</tabstop>
- </tabstops>
- <resources/>
- <connections>
-  <connection>
-   <sender>buttonCancel</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>reject()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>668</x>
-     <y>637</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>shareNameEdit</sender>
-   <signal>textChanged(QString)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>checkValues()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>109</x>
-     <y>212</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>buttonOk</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accept()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>577</x>
-     <y>637</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>homeChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>homeChkToggled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>111</x>
-     <y>130</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>strictSyncChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>syncAlwaysChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>33</x>
-     <y>89</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>33</x>
-     <y>116</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>forceCreateModeEdit</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>245</x>
-     <y>407</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>forceCreateModeBtn</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>338</x>
-     <y>437</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>forceDirectoryModeEdit</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>245</x>
-     <y>481</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>forceDirectoryModeBtn</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>338</x>
-     <y>511</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>createMaskEdit</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>611</x>
-     <y>437</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>createMaskBtn</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>637</x>
-     <y>437</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>directoryMaskEdit</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>611</x>
-     <y>511</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>inheritPermissionsChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>directoryMaskBtn</receiver>
-   <slot>setDisabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>128</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>637</x>
-     <y>511</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>followSymlinksChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>wideLinksChk</receiver>
-   <slot>setChecked(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>19</x>
-     <y>47</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>19</x>
-     <y>47</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>followSymlinksChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>wideLinksChk</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>19</x>
-     <y>47</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>19</x>
-     <y>47</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>publicBaseChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>publicBaseChk_toggled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>35</x>
-     <y>372</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>pathUrlRq</sender>
-   <signal>textChanged(QString)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>pathUrlRq_textChanged(QString)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>150</x>
-     <y>92</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>lockingChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>lockingChk_toggled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>33</x>
-     <y>89</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>vetoOplockChk</sender>
-   <signal>stateChanged(int)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>changedSlot()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>460</x>
-     <y>337</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>lockingChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>groupBox47</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>33</x>
-     <y>89</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>33</x>
-     <y>116</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>oplockContentionLimitSpin</sender>
-   <signal>valueChanged(int)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>oplockContentionLimitSpin_valueChanged(int)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>214</x>
-     <y>321</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>fakeOplocksChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>fakeOplocksChk_toggled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>39</x>
-     <y>365</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>oplocksChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>groupBox59</receiver>
-   <slot>setEnabled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>39</x>
-     <y>230</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>39</x>
-     <y>257</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>forceCreateModeBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>338</x>
-     <y>437</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>forceSecurityModeBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>338</x>
-     <y>474</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>forceDirectoryModeBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>338</x>
-     <y>511</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>forceDirectorySecurityModeBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>338</x>
-     <y>548</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>createMaskBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>637</x>
-     <y>437</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>securityMaskBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>637</x>
-     <y>474</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>directoryMaskBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>637</x>
-     <y>511</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>directorySecurityMaskBtn</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>accessModifierBtnClicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>637</x>
-     <y>548</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>storeDosAttributesChk</sender>
-   <signal>toggled(bool)</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>storeDosAttributesChk_toggled(bool)</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>45</x>
-     <y>321</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
-  <connection>
-   <sender>buttonHelp</sender>
-   <signal>clicked()</signal>
-   <receiver>KcmShareDlg</receiver>
-   <slot>buttonHelp_clicked()</slot>
-   <hints>
-    <hint type="sourcelabel" >
-     <x>30</x>
-     <y>637</y>
-    </hint>
-    <hint type="destinationlabel" >
-     <x>20</x>
-     <y>20</y>
-    </hint>
-   </hints>
-  </connection>
- </connections>
-</ui>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/smbconfconfigwidget.cpp filesharing//advanced/kcm_sambaconf/smbconfconfigwidget.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbconfconfigwidget.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbconfconfigwidget.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,92 +0,0 @@
-/***************************************************************************
-                          smbconfconfigwidget.cpp  -  description
-                             -------------------
-    begin                : Tue May 16 2003
-    copyright            : (C) 2003 by Jan Sch�er
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#include <qfileinfo.h> 
-#include <qlayout.h>
-#include <qpushbutton.h>
-#include <qlabel.h>
-//Added by qt3to4:
-#include <QVBoxLayout>
-#include <QHBoxLayout>
- 
-#include <kfiledialog.h>
-#include <klocale.h>
-#include <kmessagebox.h>
- 
-
-#include "smbconfconfigwidget.h"
-
-SmbConfConfigWidget::SmbConfConfigWidget(QWidget* parent) 
-  : QWidget(parent,"configWidget")
-{  
-
-  QVBoxLayout *layout = new QVBoxLayout(this);
-  layout->setSpacing(5);
-
-  QLabel *lbl = new QLabel(i18n("<p>The SAMBA configuration file <strong>'smb.conf'</strong>" \
-                                " could not be found;</p>" \
-                                "make sure you have SAMBA installed.\n\n"), this);
-
-  QHBoxLayout *hbox = new QHBoxLayout;
-  QPushButton *btn = new QPushButton(i18n("Specify Location"), this);
-  connect(btn, SIGNAL(pressed()), this, SLOT( btnPressed()));
-
-  btn->setDefault(false);
-  btn->setAutoDefault(false);
-
-  hbox->addStretch();
-  hbox->addWidget(btn);
-
-  layout->addWidget(lbl);
-  layout->addLayout(hbox);
-  layout->addStretch();
-}
-
-void SmbConfConfigWidget::btnPressed() {
-  QString smbConf = KFileDialog::getOpenFileName(KUrl("file:///"),
-            i18n("smb.conf|Samba conf. File\n"
-            "*|All Files"),0,i18n("Get smb.conf Location"));
-
-  if (smbConf.isEmpty())
-		  return;
-  if ( ! QFileInfo(smbConf).isReadable() ) {
-    KMessageBox::sorry(this,i18n("<qt>The file <i>%1</i> could not be read.</qt>", smbConf),i18n("Could Not Read File"));
-    return;
-  }
-
-  KConfig config("ksambaplugin");
-  
-  KConfigGroup group = config.group("KSambaKonqiPlugin");
-  group.writeEntry("smb.conf",smbConf);
-  config.sync();
-  
-  emit smbConfChoosed(smbConf);
-
-}
-
-#include "smbconfconfigwidget.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/smbconfconfigwidget.h filesharing//advanced/kcm_sambaconf/smbconfconfigwidget.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbconfconfigwidget.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbconfconfigwidget.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,46 +0,0 @@
-/***************************************************************************
-                          smbconfconfigwidget.h  -  description
-                             -------------------
-    begin                : Tue May 16 2003
-    copyright            : (C) 2003 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef SMBCONFCONFIGWIDGET_H
-#define SMBCONFCONFIGWIDGET_H
-
-#include <qwidget.h>
-
-class SmbConfConfigWidget : public QWidget {
-Q_OBJECT
-public:
-  SmbConfConfigWidget(QWidget*);
-  
-protected slots:
-  void btnPressed();  
-signals:
-  void smbConfChoosed(const QString &);  
-};
-
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/smbpasswdfile.cpp filesharing//advanced/kcm_sambaconf/smbpasswdfile.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbpasswdfile.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbpasswdfile.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,241 +0,0 @@
-/***************************************************************************
-                          smbpasswdfile.cpp  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software               *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#include <qstring.h>
-#include <qfile.h>
-#include <qtextstream.h>
-#include <qstringlist.h>
-
-#include <kurl.h>
-#include <kdebug.h>
-#include <kpassworddialog.h>
-#include <klocale.h>
-#include <k3process.h>
-#include <kprocess.h>
-
-#include "sambafile.h"
-#include "smbpasswdfile.h"
-#include "passwd.h"
-
-
-QStringList SambaUserList::getUserNames()
-{
-  QStringList list;
-
-  SambaUser *user;
-  for ( user = first(); user; user = next() )
-  {
-     list.append(user->name);
-  }
-
-  return list;
-}
-
-
-SmbPasswdFile::SmbPasswdFile() {
-}
-
-
-SmbPasswdFile::SmbPasswdFile(const KUrl & url)
-{
-  setUrl(url);
-}
-
-SmbPasswdFile::~SmbPasswdFile()
-{
-}
-
-void SmbPasswdFile::setUrl(const KUrl & url) {
-  _url = url;
-}
-
-/**
- * Returns a list of all users stored in
- * the smbpasswd file
- **/
-SambaUserList SmbPasswdFile::getSambaUserList()
-{
-  QFile f(_url.path());
-
-  SambaUserList list;
-
-  if ( f.open(QIODevice::ReadOnly) )
-  {
-    QTextStream t( &f );
-    QString s;
-    while ( !t.atEnd() )
-    {
-      s = t.readLine().trimmed();
-
-      // Ignore comments
-      if (s.left(1)=="#")
-         continue;
-
-      QStringList l = QStringList::split(":",s);
-
-      SambaUser* user = new SambaUser(l[0],l[1].toInt());
-      user->gid = getUserGID(l[0]);
-      user->isUserAccount = l[4].contains('U');
-      user->hasNoPassword = l[4].contains('N');;
-      user->isDisabled = l[4].contains('D');;
-      user->isWorkstationTrustAccount = l[4].contains('W');;
-      list.append(user);
-    }
-    f.close();
-  }
-
-  return list;
-}
-
-bool SmbPasswdFile::executeSmbpasswd(const QStringList & args) {
-  K3Process p;
-  p << "smbpasswd" << args;
-
-  connect( &p, SIGNAL(receivedStdout(K3Process*,char*,int)),
-           this, SLOT(smbpasswdStdOutReceived(K3Process*,char*,int)));
-
-  _smbpasswdOutput = "";
-
-  bool result = p.start(K3Process::Block,K3Process::Stdout);
-
-  if (result)
-  {
-    kDebug(5009) << _smbpasswdOutput;
-  }
-
-  return result;
-}
-
-/**
- * Tries to add the passed user to the smbpasswd file
- * returns true if successful otherwise false
- **/
-bool SmbPasswdFile::addUser(const SambaUser & user,const QString & password)
-{
-  KProcess p;
-  p << "smbpasswd" << "-s" << "-a" << user.name;
-
-  //  connect( &p, SIGNAL(receivedStdout(K3Process*,char*,int)),
-  //       this, SLOT(smbpasswdStdOutReceived(K3Process*,char*,int)));
-
-  _smbpasswdOutput = "";
-  QString pw = password;
-  pw.append("\n");
-
-  p.start();
-  if (!p.waitForStarted()) {
-    kWarning(5009) << "smbpasswd could not be started!" << endl;
-    return false;
-  } 
-  
-  kDebug(5009) << "smbpasswd started" << endl;
-
-  p.write(pw.toLocal8Bit());
-  p.write(pw.toLocal8Bit());
-
-  p.closeWriteChannel();
-
-  if (!p.waitForFinished())
-     return false;
-
-  kDebug(5009) << "smbpasswd finished" << endl;
-
-  return true;
-}
-
-/**
- * Tries to remove the passed user from the smbpasswd file
- * returns true if successful otherwise false
- **/
-bool SmbPasswdFile::removeUser(const SambaUser & user)
-{
-  QStringList l;
-  l << "-x" << user.name;
-  return executeSmbpasswd(l);
-}
-
-bool SmbPasswdFile::changePassword(const SambaUser & user, const QString & newPassword)
-{
-  return addUser(user,newPassword);
-}
-
-
-void SmbPasswdFile::smbpasswdStdOutReceived(K3Process *, char *buffer, int buflen)
-{
-  _smbpasswdOutput+=QString::fromLatin1(buffer,buflen);
-}
-
-
-/**
- * Returns the Url of the smbpasswd file
- * specified in the [global] section of
- * the smb.conf file.
- * If there is no entry in the [global] section
- * it tries to guess the location.
- **/
-KUrl SmbPasswdFile::getUrlFromSambaFile(const SambaFile * /*file*/)
-{
-  kWarning() << "SmbPasswdFile::getUrlFromSambaFile unimplemeneted!";
-  return KUrl("");
-}
-
-bool SmbPasswdFile::enableUser(const SambaUser & user) {
-  QStringList l;
-  l << "-e" << user.name;
-  return executeSmbpasswd(l);
-}
-
-bool SmbPasswdFile::disableUser(const SambaUser & user) {
-  QStringList l;
-  l << "-d" << user.name;
-  return executeSmbpasswd(l);
-}
-
-bool SmbPasswdFile::setNoPassword(const SambaUser & user) {
-  QStringList l;
-  l << "-n" << user.name;
-  return executeSmbpasswd(l);
-}
-
-bool SmbPasswdFile::setMachineTrustAccount(const SambaUser & user) {
-  QStringList l;
-  l << "-m" << user.name;
-  return executeSmbpasswd(l);
-}
-
-bool SmbPasswdFile::joinADomain(const QString & domain, const QString & server,
-      const QString & user, const QString & password) {
-  QStringList l;
-  l << "-j" << domain;
-  l << "-r" << server;
-  l << "-U" << user << "%" << password;
-  return executeSmbpasswd(l);
-}
-
-
-#include "smbpasswdfile.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/smbpasswdfile.h filesharing//advanced/kcm_sambaconf/smbpasswdfile.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbpasswdfile.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/smbpasswdfile.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,143 +0,0 @@
-/***************************************************************************
-                          smbpasswdfile.h  -  description
-                             -------------------
-    begin                : Tue June 6 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                          *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify            *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,                 *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef SMBPASSWDFILE_H
-#define SMBPASSWDFILE_H
-
-
-/**
-  *@author Jan Schäfer
-  */
-
-#include <qstring.h>
-//Added by qt3to4:
-#include <Q3PtrList>
-#include <kurl.h>
-
-class SambaFile;
-class K3Process;
-
-/**
- * Simple class to store a Samba User
- **/
-class SambaUser
-{
-public:
-  SambaUser(const QString & aName = QString(), int anUid = -1) {name = aName; uid = anUid;}
-
-  QString name;
-  int uid;
-  int gid;
-  bool isUserAccount;
-  bool hasNoPassword;
-  bool isDisabled;
-  bool isWorkstationTrustAccount;
-};
-
-/**
- * A QPtrList of SambaUser
- **/
-class SambaUserList : public Q3PtrList<SambaUser>
-{
-public:
-  QStringList getUserNames();
-};
-
-/**
- * This class represents the SAMBA smbpasswd file.
- * It provides :
- * - getting a list of all SAMBA users
- * - adding a new user -> uses smbpasswd program
- * - removing an existing user -> uses smbpasswd program
- **/
-class SmbPasswdFile : public QObject
-{
-Q_OBJECT
-public: 
-  SmbPasswdFile();
-	SmbPasswdFile(const KUrl &);
-	~SmbPasswdFile();
-
-  void setUrl(const KUrl &);
-  
-  /**
-   * Returns a list of all users stored in
-   * the smbpasswd file
-   **/
-  SambaUserList getSambaUserList();
-
-  /**
-   * Calls smbpasswd with the given arguments
-   **/
-  bool executeSmbpasswd(const QStringList & args);
-  
-  /**
-   * Tries to add the passed user to the smbpasswd file
-   * returns true if successful otherwise false
-   **/
-  bool addUser(const SambaUser &, const QString & password);
-
-  /**
-   * Tries to remove the passed user from the smbpasswd file
-   * returns true if successful otherwise false
-   **/
-  bool removeUser(const SambaUser &);
-
-  /**
-   * Tries to change the password of the passed user
-   * if it fails returns false otherwise true
-   **/
-  bool changePassword(const SambaUser &, const QString & password);
-  
-  bool enableUser(const SambaUser &);
-  
-  bool disableUser(const SambaUser &);
-  
-  bool setNoPassword(const SambaUser &);
-  
-  bool setMachineTrustAccount(const SambaUser &);
-
-  bool joinADomain(const QString &, const QString &, const QString &, const QString &);
-  
-  /**
-   * Returns the Url of the smbpasswd file
-   * specified in the [global] section of
-   * the smb.conf file.
-   * If there is no entry in the [global] section
-   * it tries to guess the location.
-   **/
-  static KUrl getUrlFromSambaFile(const SambaFile *file);
-protected:
-  KUrl _url;
-  QString _smbpasswdOutput;
-
-protected slots:
-  void smbpasswdStdOutReceived(K3Process*,char*,int);
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/socketoptionsdlg.ui filesharing//advanced/kcm_sambaconf/socketoptionsdlg.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/socketoptionsdlg.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/socketoptionsdlg.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,331 +0,0 @@
-<!DOCTYPE UI><UI version="3.0" stdsetdef="1">
-<class>SocketOptionsDlg</class>
-<comment>
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-</comment>
-<widget class="QDialog">
-    <property name="name">
-        <cstring>SocketOptionsDlg</cstring>
-    </property>
-    <property name="geometry">
-        <rect>
-            <x>0</x>
-            <y>0</y>
-            <width>457</width>
-            <height>240</height>
-        </rect>
-    </property>
-    <property name="windowTitle">
-        <string>Socket Options</string>
-    </property>
-    <property name="sizeGripEnabled">
-        <bool>true</bool>
-    </property>
-    <vbox>
-        <property name="name">
-            <cstring>unnamed</cstring>
-        </property>
-        <property name="margin">
-            <number>11</number>
-        </property>
-        <property name="spacing">
-            <number>6</number>
-        </property>
-        <widget class="QLayoutWidget">
-            <property name="name">
-                <cstring>Layout106</cstring>
-            </property>
-            <grid>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>0</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QCheckBox" row="2" column="1">
-                    <property name="name">
-                        <cstring>SO_SNDLOWATChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>SO_SNDLOWAT:</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="2" column="0">
-                    <property name="name">
-                        <cstring>IPTOS_THROUGHPUTChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>IPTOS_THROUGHPUT</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="0" column="1">
-                    <property name="name">
-                        <cstring>SO_SNDBUFChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>SO_SNDBUF:</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="3" column="0">
-                    <property name="name">
-                        <cstring>SO_KEEPALIVEChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>SO_KEEPALIVE</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="1" column="1">
-                    <property name="name">
-                        <cstring>SO_RCVBUFChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>SO_RCVBUF:</string>
-                    </property>
-                </widget>
-                <widget class="QSpinBox" row="0" column="2">
-                    <property name="name">
-                        <cstring>SO_SNDBUFSpin</cstring>
-                    </property>
-                    <property name="enabled">
-                        <bool>false</bool>
-                    </property>
-                    <property name="maximum">
-                        <number>100000</number>
-                    </property>
-                </widget>
-                <widget class="QSpinBox" row="3" column="2">
-                    <property name="name">
-                        <cstring>SO_RCVLOWATSpin</cstring>
-                    </property>
-                    <property name="enabled">
-                        <bool>false</bool>
-                    </property>
-                    <property name="maximum">
-                        <number>100000</number>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="5" column="0">
-                    <property name="name">
-                        <cstring>SO_BROADCASTChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>SO_BROADCAST</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="1" column="0">
-                    <property name="name">
-                        <cstring>IPTOS_LOWDELAYChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>IPTOS_LOWDELAY</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="0" column="0">
-                    <property name="name">
-                        <cstring>TCP_NODELAYChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>TCP_NODELAY</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="3" column="1">
-                    <property name="name">
-                        <cstring>SO_RCVLOWATChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>SO_RCVLOWAT:</string>
-                    </property>
-                </widget>
-                <widget class="QSpinBox" row="1" column="2">
-                    <property name="name">
-                        <cstring>SO_RCVBUFSpin</cstring>
-                    </property>
-                    <property name="enabled">
-                        <bool>false</bool>
-                    </property>
-                    <property name="maximum">
-                        <number>100000</number>
-                    </property>
-                </widget>
-                <widget class="QSpinBox" row="2" column="2">
-                    <property name="name">
-                        <cstring>SO_SNDLOWATSpin</cstring>
-                    </property>
-                    <property name="enabled">
-                        <bool>false</bool>
-                    </property>
-                    <property name="maximum">
-                        <number>100000</number>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="4" column="0">
-                    <property name="name">
-                        <cstring>SO_REUSEADDRChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>SO_REUSEADDR</string>
-                    </property>
-                </widget>
-            </grid>
-        </widget>
-        <widget class="QFrame">
-            <property name="name">
-                <cstring>Frame8</cstring>
-            </property>
-            <property name="frameShape">
-                <enum>HLine</enum>
-            </property>
-            <property name="frameShadow">
-                <enum>Sunken</enum>
-            </property>
-        </widget>
-        <widget class="QLayoutWidget">
-            <property name="name">
-                <cstring>Layout1</cstring>
-            </property>
-            <hbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>0</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonHelp</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Help</string>
-                    </property>
-                    <property name="accel">
-                        <string>F1</string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <spacer>
-                    <property name="name">
-                        <cstring>Qt::Horizontal Spacing2</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>20</width>
-                            <height>20</height>
-                        </size>
-                    </property>
-                </spacer>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonOk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;OK</string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                    <property name="default">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonCancel</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Cancel</string>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-            </hbox>
-        </widget>
-    </vbox>
-</widget>
-<connections>
-    <connection>
-        <sender>buttonOk</sender>
-        <signal>clicked()</signal>
-        <receiver>SocketOptionsDlg</receiver>
-        <slot>accept()</slot>
-    </connection>
-    <connection>
-        <sender>buttonCancel</sender>
-        <signal>clicked()</signal>
-        <receiver>SocketOptionsDlg</receiver>
-        <slot>reject()</slot>
-    </connection>
-    <connection>
-        <sender>SO_RCVLOWATChk</sender>
-        <signal>toggled(bool)</signal>
-        <receiver>SO_RCVLOWATSpin</receiver>
-        <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-        <sender>SO_SNDLOWATChk</sender>
-        <signal>toggled(bool)</signal>
-        <receiver>SO_SNDLOWATSpin</receiver>
-        <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-        <sender>SO_RCVBUFChk</sender>
-        <signal>toggled(bool)</signal>
-        <receiver>SO_RCVBUFSpin</receiver>
-        <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-        <sender>SO_SNDBUFChk</sender>
-        <signal>toggled(bool)</signal>
-        <receiver>SO_SNDBUFSpin</receiver>
-        <slot>setEnabled(bool)</slot>
-    </connection>
-</connections>
-<includes>
-    <include location="local" impldecl="in implementation">assert.h</include>
-    <include location="local" impldecl="in implementation">sambashare.h</include>
-    <include location="local" impldecl="in implementation">socketoptionsdlg.ui.h</include>
-</includes>
-<forwards>
-    <forward>class SambaShare;</forward>
-</forwards>
-<variables>
-    <variable>SambaShare* _share;</variable>
-</variables>
-<slots>
-    <slot>setShare( SambaShare * share )</slot>
-    <slot access="private" returnType="bool">getBoolValue( const QString &amp; str, const QString &amp; name )</slot>
-    <slot access="private" returnType="int">getIntValue( const QString &amp; str, const QString &amp; name )</slot>
-</slots>
-</UI>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/socketoptionsdlg.ui.h filesharing//advanced/kcm_sambaconf/socketoptionsdlg.ui.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/socketoptionsdlg.ui.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/socketoptionsdlg.ui.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,117 +0,0 @@
-/****************************************************************************
-** ui.h extension file, included from the uic-generated form implementation.
-**
-** If you wish to add, delete or rename slots use Qt Designer which will
-** update this file, preserving your code. Create an init() slot in place of
-** a constructor, and a destroy() slot in place of a destructor.
-*****************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef KCM_SAMBACONF_SOCKETOPTIONSDLG_UI_H
-#define KCM_SAMBACONF_SOCKETOPTIONSDLG_UI_H
-
-void SocketOptionsDlg::setShare( SambaShare * share )
-{
-    assert(share);
-    
-    _share = share;
-    
-    QString s = _share->getValue("socket options");
-    
-    s = s.simplified();
-    
-    // The string s has now the form e.g. :
-    // "OPTION1=1 OPTION2=0 OPTION3=2234 OPTION4"
-    
-SO_KEEPALIVEChk->setChecked(getBoolValue( s, "SO_KEEPALIVE") );
-SO_REUSEADDRChk->setChecked( getBoolValue( s, "SO_REUSEADDR") );
-SO_BROADCASTChk->setChecked( getBoolValue( s, "SO_BROADCAST") );
-TCP_NODELAYChk->setChecked( getBoolValue( s, "TCP_NODELAY") );
-IPTOS_LOWDELAYChk->setChecked( getBoolValue( s, "IPTOS_LOWDELAY") );
-IPTOS_THROUGHPUTChk->setChecked( getBoolValue( s, "IPTOS_THROUGHPUT") );
-SO_SNDBUFChk->setChecked( getBoolValue( s, "SO_SNDBUF") );
-SO_RCVBUFChk->setChecked( getBoolValue( s, "SO_RCVBUF") );
-SO_SNDLOWATChk->setChecked( getBoolValue( s, "SO_SNDLOWAT") );
-SO_RCVLOWATChk->setChecked( getBoolValue( s, "SO_RCVLOWAT") );
-
-SO_SNDBUFSpin->setValue( getIntValue( s, "SO_SNDBUF") );
-SO_RCVBUFSpin->setValue( getIntValue( s, "SO_RCVBUF") );
-SO_SNDLOWATSpin->setValue( getIntValue( s, "SO_SNDLOWAT") );
-SO_RCVLOWATSpin->setValue( getIntValue( s, "SO_RCVLOWAT") );
-   
-}
-
-
-
-bool SocketOptionsDlg::getBoolValue( const QString & str, const QString & name )
-{
-    QString s = str;
-    int i = s.find(name ,0,false);
-		
-    if (i > -1)
-    {
-	s = s.remove(0,i+1+QString(name).length());
-	if ( s.startsWith("=") )
-	{
-	    s = s.remove(0,1);
-	    if ( s.startsWith("0"))
-		return false;
-	    else
-		return true;
-	}
-	else
-	    return true;
-    }
-    
-    return false;
-}
-
-int SocketOptionsDlg::getIntValue( const QString & str, const QString & name )
-{
-    QString s = str;
-    int i = s.find(name ,0,false);
-		
-    if (i > -1)
-    {
-	s = s.remove(0,i+1+QString(name).length());
-	if ( s.startsWith("=") )
-	{
-	    s = s.remove(0,1);
-	    
-	    i = s.find(" ");
-	    if (i < 0)
-	        i = s.length();
-	    else
-	        i++;
-	    
-	    s = s.left( i );
-	    
-	    return s.toInt();
-	}
-	else
-	    return 0;
-    }
-    
-    return 0;
-}
-
-#endif // KCM_SAMBACONF_SOCKETOPTIONSDLG_UI_H
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/TODO filesharing//advanced/kcm_sambaconf/TODO
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/TODO	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/TODO	1970-01-01 00:00:00.000000000 +0000
@@ -1,2 +0,0 @@
-- Translations
-- Wizards
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/userselectdlg.ui filesharing//advanced/kcm_sambaconf/userselectdlg.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/userselectdlg.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/userselectdlg.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,300 +0,0 @@
-<!DOCTYPE UI><UI version="3.0" stdsetdef="1">
-<class>UserSelectDlg</class>
-<widget class="QDialog">
-    <property name="name">
-        <cstring>UserSelectDlg</cstring>
-    </property>
-    <property name="geometry">
-        <rect>
-            <x>0</x>
-            <y>0</y>
-            <width>485</width>
-            <height>269</height>
-        </rect>
-    </property>
-    <property name="windowTitle">
-        <string>Select Users</string>
-    </property>
-    <property name="sizeGripEnabled">
-        <bool>true</bool>
-    </property>
-    <grid>
-        <property name="name">
-            <cstring>unnamed</cstring>
-        </property>
-        <property name="margin">
-            <number>11</number>
-        </property>
-        <property name="spacing">
-            <number>6</number>
-        </property>
-        <widget class="QGroupBox" row="0" column="0" rowspan="2" colspan="1">
-            <property name="name">
-                <cstring>groupBox87</cstring>
-            </property>
-            <property name="title">
-                <string>Select &amp;Users</string>
-            </property>
-            <vbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QListView">
-                    <column>
-                        <property name="text">
-                            <string>Name</string>
-                        </property>
-                        <property name="clickable">
-                            <bool>true</bool>
-                        </property>
-                        <property name="resizeable">
-                            <bool>true</bool>
-                        </property>
-                    </column>
-                    <column>
-                        <property name="text">
-                            <string>UID</string>
-                        </property>
-                        <property name="clickable">
-                            <bool>true</bool>
-                        </property>
-                        <property name="resizeable">
-                            <bool>true</bool>
-                        </property>
-                    </column>
-                    <column>
-                        <property name="text">
-                            <string>GID</string>
-                        </property>
-                        <property name="clickable">
-                            <bool>true</bool>
-                        </property>
-                        <property name="resizeable">
-                            <bool>true</bool>
-                        </property>
-                    </column>
-                    <property name="name">
-                        <cstring>userListView</cstring>
-                    </property>
-                    <property name="selectionMode">
-                        <enum>Extended</enum>
-                    </property>
-                </widget>
-            </vbox>
-        </widget>
-        <widget class="QButtonGroup" row="0" column="1">
-            <property name="name">
-                <cstring>accessBtnGrp</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>0</hsizetype>
-                    <vsizetype>5</vsizetype>
-                    <horstretch>0</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="title">
-                <string>Acc&amp;ess</string>
-            </property>
-            <vbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>defaultRadio</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Default</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388676</number>
-                    </property>
-                    <property name="checked">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>readRadio</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Read access</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388690</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>writeRadio</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Write access</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388695</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>adminRadio</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Admin access</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388673</number>
-                    </property>
-                </widget>
-                <widget class="QRadioButton">
-                    <property name="name">
-                        <cstring>noAccessRadio</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;No access at all</string>
-                    </property>
-                    <property name="accel">
-                        <number>8388686</number>
-                    </property>
-                </widget>
-            </vbox>
-        </widget>
-        <spacer row="1" column="1">
-            <property name="name">
-                <cstring>spacer90</cstring>
-            </property>
-            <property name="orientation">
-                <enum>Qt::Vertical</enum>
-            </property>
-            <property name="sizeType">
-                <enum>Expanding</enum>
-            </property>
-            <property name="sizeHint">
-                <size>
-                    <width>20</width>
-                    <height>50</height>
-                </size>
-            </property>
-        </spacer>
-        <widget class="QFrame" row="2" column="0" rowspan="1" colspan="2">
-            <property name="name">
-                <cstring>frame16</cstring>
-            </property>
-            <property name="frameShape">
-                <enum>HLine</enum>
-            </property>
-            <property name="frameShadow">
-                <enum>Raised</enum>
-            </property>
-        </widget>
-        <widget class="QLayoutWidget" row="3" column="0" rowspan="1" colspan="2">
-            <property name="name">
-                <cstring>Layout1</cstring>
-            </property>
-            <hbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>0</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <spacer>
-                    <property name="name">
-                        <cstring>Qt::Horizontal Spacing2</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Horizontal</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>285</width>
-                            <height>20</height>
-                        </size>
-                    </property>
-                </spacer>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonOk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;OK</string>
-                    </property>
-                    <property name="accel">
-                        <number>0</number>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                    <property name="default">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-                <widget class="QPushButton">
-                    <property name="name">
-                        <cstring>buttonCancel</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Cancel</string>
-                    </property>
-                    <property name="accel">
-                        <number>0</number>
-                    </property>
-                    <property name="autoDefault">
-                        <bool>true</bool>
-                    </property>
-                </widget>
-            </hbox>
-        </widget>
-    </grid>
-</widget>
-<connections>
-    <connection>
-        <sender>buttonOk</sender>
-        <signal>clicked()</signal>
-        <receiver>UserSelectDlg</receiver>
-        <slot>accept()</slot>
-    </connection>
-    <connection>
-        <sender>buttonCancel</sender>
-        <signal>clicked()</signal>
-        <receiver>UserSelectDlg</receiver>
-        <slot>reject()</slot>
-    </connection>
-</connections>
-<includes>
-    <include location="local" impldecl="in declaration">sambashare.h</include>
-    <include location="local" impldecl="in implementation">smbpasswdfile.h</include>
-    <include location="local" impldecl="in implementation">kurl.h</include>
-    <include location="local" impldecl="in implementation">userselectdlg.ui.h</include>
-</includes>
-<variables>
-    <variable>QStringList selectedUsers;</variable>
-    <variable>int access;</variable>
-</variables>
-<slots>
-    <slot>init( const QStringList &amp; specifiedUsers, SambaShare * share )</slot>
-    <slot access="protected">accept()</slot>
-    <slot specifier="non virtual" returnType="QStringList">getSelectedUsers()</slot>
-    <slot specifier="non virtual" returnType="int">getAccess()</slot>
-</slots>
-</UI>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/userselectdlg.ui.h filesharing//advanced/kcm_sambaconf/userselectdlg.ui.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/userselectdlg.ui.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/userselectdlg.ui.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,54 +0,0 @@
-/****************************************************************************
-** ui.h extension file, included from the uic-generated form implementation.
-**
-** If you wish to add, delete or rename functions or slots use
-** Qt Designer which will update this file, preserving your code. Create an
-** init() function in place of a constructor, and a destroy() function in
-** place of a destructor.
-*****************************************************************************/
-
-#ifndef KCM_SAMBACONF_USERSELECTDLG_UI_H
-#define KCM_SAMBACONF_USERSELECTDLG_UI_H
-
-void UserSelectDlg::init(const QStringList & specifiedUsers, SambaShare* share)
-{
-  SmbPasswdFile passwd( KUrl(share->getValue("smb passwd file",true,true)) );
-  SambaUserList sambaList = passwd.getSambaUserList();
-
-  for (SambaUser * user = sambaList.first(); user; user = sambaList.next() )
-  {
-    if (! specifiedUsers.contains(user->name))
-        new Q3ListViewItem(userListView, user->name, QString::number(user->uid), QString::number(user->gid));	
-  }
-
-}
-
-
-void UserSelectDlg::accept()
-{
-  Q3ListViewItemIterator it( userListView);
-
-  for ( ; it.current(); ++it ) {
-      if ( it.current()->isSelected() )
-	  selectedUsers << it.current()->text(0);
-  }	
-  
-  access = accessBtnGrp->id(accessBtnGrp->selected());
-  
-  QDialog::accept();
-
-}
-
-
-QStringList UserSelectDlg::getSelectedUsers()
-{
-    return selectedUsers;
-}
-
-
-int UserSelectDlg::getAccess()
-{
-    return access;
-}
-
-#endif // KCM_SAMBACONF_USERSELECTDLG_UI_H
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/usertabimpl.cpp filesharing//advanced/kcm_sambaconf/usertabimpl.cpp
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertabimpl.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertabimpl.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,418 +0,0 @@
-/***************************************************************************
-                          usertabimpl.cpp  -  description
-                             -------------------
-    begin                : Mon Jul 15 2002
-    copyright            : (C) 2002 by Jan Sch�er
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#include <unistd.h> // for getuid
-
-#include <qcombobox.h>
-#include <qstringlist.h>
-//Added by qt3to4:
-#include <Q3MemArray>
-#include <passwd.h>
-#include <qregexp.h>
-#include <q3table.h>
-#include <qcheckbox.h>
-#include <qpushbutton.h>
-#include <qlineedit.h>
-
-#include <k3listview.h>
-#include <klocale.h>
-#include <kdebug.h>
-#include <kiconloader.h>
-#include <kinputdialog.h>
-
-#include "usertabimpl.h"
-#include "sambashare.h"
-#include "smbpasswdfile.h"
-#include "groupselectdlg.h"
-#include "userselectdlg.h"
-
-#include <assert.h>
-
-/**
- * @pre share is not null
- * @post _share = share
- */
-UserTabImpl::UserTabImpl(QWidget* parent, SambaShare* share)
-  : UserTab(parent)
-{
-  if (share == 0L) {
-    kWarning() << "WARNING: UserTabImpl constructor: share parameter is null!";
-    return;
-  }
-
-  _share = share;
-  userTable->setLeftMargin(0);
- // userTable->setColumnStretchable ( 3, true );
-
-}
-
-UserTabImpl::~UserTabImpl()
-{
-}
-
-void UserTabImpl::load()
-{
-  if (_share == 0L)
-    return;
-
-  loadForceCombos();
-  loadUsers(_share->getValue("valid users"),
-            _share->getValue("read list"),
-            _share->getValue("write list"),
-            _share->getValue("admin users"),
-            _share->getValue("invalid users"));
-}
-
-void UserTabImpl::loadUsers(const QString & validUsersStr,
-                            const QString & readListStr,
-                            const QString & writeListStr,
-                            const QString & adminUsersStr,
-                            const QString & invalidUsersStr)
-{
-  userTable->setNumRows(0);
-  QStringList validUsers = QStringList::split(QRegExp("[,\\s]+"),validUsersStr);
-  QStringList readList = QStringList::split(QRegExp("[,\\s]+"),readListStr);
-  QStringList writeList = QStringList::split(QRegExp("[,\\s]+"),writeListStr);
-  QStringList adminUsers = QStringList::split(QRegExp("[,\\s]+"),adminUsersStr);
-  QStringList invalidUsers = QStringList::split(QRegExp("[,\\s]+"),invalidUsersStr);
-
-  // if the valid users list contains no entries
-  // then all users are allowed, except those that are
-  // in the invalid list
-  if (validUsers.empty())
-    allUnspecifiedUsersCombo->setCurrentItem(0);
-  else
-    allUnspecifiedUsersCombo->setCurrentItem(1);
-
-  removeDuplicates(validUsers,readList,writeList,adminUsers,invalidUsers);
-
-  addListToUserTable(adminUsers,3);
-  addListToUserTable(writeList,2);
-  addListToUserTable(readList,1);
-  addListToUserTable(validUsers,0);
-  addListToUserTable(invalidUsers,4);
-
-}
-
-
-void UserTabImpl::loadForceCombos() {
-  forceUserCombo->insertItem("");
-  forceGroupCombo->insertItem("");
-
-  QStringList unixGroups = getUnixGroups();
-
-  forceUserCombo->insertStringList( getUnixUsers() );
-  forceGroupCombo->insertStringList( unixGroups );
-
-  setComboToString(forceUserCombo, _share->getValue("force user"));
-  setComboToString(forceGroupCombo, _share->getValue("force group"));
-}
-
-/**
- * Remove all duplicates of the different list, so that
- * all lists are disjunct.
- */
-void UserTabImpl::removeDuplicates( QStringList & validUsers, QStringList & readList,
-                       QStringList & writeList, QStringList & adminUsers,
-                       QStringList & invalidUsers)
-{
-  removeAll(adminUsers, writeList);
-
-  removeAll(writeList, readList);
-  removeAll(adminUsers, readList);
-
-  removeAll(readList, validUsers);
-  removeAll(writeList, validUsers);
-  removeAll(adminUsers, validUsers);
-
-  removeAll(invalidUsers, validUsers);
-  removeAll(invalidUsers, readList);
-  removeAll(invalidUsers, writeList);
-  removeAll(invalidUsers, adminUsers);
-}
-
-/**
- * Remove all entries of entryList from the fromList
- */
-void UserTabImpl::removeAll(QStringList & entryList, QStringList & fromList) {
-  for (QStringList::Iterator it = entryList.begin(); it != entryList.end(); ++it) {
-    fromList.removeAll(*it);
-  }
-}
-
-
-void UserTabImpl::addListToUserTable(const QStringList & list, int accessRight) {
-
-  for (QStringList::ConstIterator it = list.begin(); it != list.end(); ++it) {
-    addUserToUserTable(*it,accessRight);
-  }
-}
-
-void UserTabImpl::addUserToUserTable(const QString & user, int accessRight) {
-    int row = userTable->numRows();
-    userTable->setNumRows(row+1);
-    setAllowedUser(row, user);
-
-    Q3ComboTableItem* comboItem = static_cast<Q3ComboTableItem*>(userTable->item(row,3));
-    comboItem->setCurrentItem(accessRight);
-}
-
-QString UserTabImpl::removeQuotationMarks(const QString & name) {
-    QString result = name;
-    if (name.left(1) == "\"") {
-        result = result.left(result.length()-1);
-        result = result.right(result.length()-1);
-    }
-    return result;
-}
-
-QString UserTabImpl::removeGroupTag(const QString & name) {
-  QString result = name;
-
-
-  if (nameIsGroup(result)) {
-    result = result.right(result.length()-1);
-    if (nameIsGroup(result))
-      result = result.right(result.length()-1);
-  }
-
-  return result;
-}
-
-
-bool UserTabImpl::nameIsGroup(const QString & name) {
-  QString quoteless = removeQuotationMarks(name);
-  if (quoteless.left(1) == "@" ||
-      quoteless.left(1) == "+" ||
-      quoteless.left(1) == "&")
-      return true;
-
-  return false;
-
-}
-
-void UserTabImpl::setAllowedUser(int i, const QString & name)
-{
-    QStringList accessRights;
-    accessRights << i18n("Default") << i18n("Read only") << i18n("Writeable") << i18n("Admin") << i18n("Reject");
-
-    QString uid;
-    QString gid;
-
-    QString name2 = name;
-
-    if (nameIsGroup(name2))
-    {
-      QString name3 = removeGroupTag(name2);
-      uid = "";
-      gid = QString::number(getGroupGID(name3));
-      _specifiedGroups << name3;
-    }
-    else
-    {
-      uid = QString::number(getUserUID(name2));
-      gid = QString::number(getUserGID(name2));
-      _specifiedUsers << name2;
-    }
-
-    if (name2.contains(' '))
-        name2 = "\""+name2+"\"";
-
-
-    Q3TableItem* item = new Q3TableItem( userTable,Q3TableItem::Never, name2 );
-    userTable->setItem(i,0,item);
-
-    item = new Q3TableItem( userTable,Q3TableItem::Never, uid );
-    userTable->setItem(i,1,item);
-
-    item = new Q3TableItem( userTable,Q3TableItem::Never, gid );
-    userTable->setItem(i,2,item);
-
-    Q3ComboTableItem* comboItem = new Q3ComboTableItem( userTable,accessRights);
-    userTable->setItem(i,3,comboItem);
-
-}
-
-void UserTabImpl::addUserBtnClicked()
-{
-  if (getuid() == 0) {
-    UserSelectDlg *dlg = new UserSelectDlg();
-    dlg->init(_specifiedUsers,_share);
-
-    QStringList selectedUsers = dlg->getSelectedUsers();
-
-    if (dlg->exec()) {
-        for (QStringList::Iterator it = selectedUsers.begin(); it != selectedUsers.end(); ++it)
-        {
-            addUserToUserTable(*it,dlg->getAccess());
-        }
-    }
-
-    delete dlg;
-  } else {
-    bool ok;
-    QString name = KInputDialog::getText(i18n("Add User"),i18n("Name:"),
-                                         QString(), &ok );
-
-    if (ok)
-        addUserToUserTable(name,0);
-  }
-}
-
-void UserTabImpl::removeSelectedBtnClicked()
-{
-  Q3MemArray<int>rows;
-
-  int j=0;
-
-  for (int i=0; i<userTable->numRows(); i++)
-  {
-    if (userTable->isRowSelected(i))
-    {
-      if (nameIsGroup(userTable->item(i,0)->text())) {
-        _specifiedGroups.removeAll( removeGroupTag(removeQuotationMarks(userTable->item(i,0)->text())));
-      } else
-        _specifiedUsers.removeAll(userTable->item(i,0)->text());
-
-      rows.resize(j+1);
-      rows[j] = i;
-      j++;
-    }
-  }
-
-  userTable->removeRows(rows);
-}
-
-
-void UserTabImpl::addGroupBtnClicked()
-{
-  GroupSelectDlg *dlg = new GroupSelectDlg();
-  dlg->init(_specifiedGroups);
-  QStringList selectedGroups = dlg->getSelectedGroups();
-  if (dlg->exec()) {
-    for (QStringList::Iterator it = selectedGroups.begin(); it != selectedGroups.end(); ++it)
-    {
-        kDebug(5009) << "GroupKind: " << dlg->getGroupKind();
-        QString name = dlg->getGroupKind() + (*it);
-        addUserToUserTable(name,dlg->getAccess());
-    }
-  }
-
-  delete dlg;
-}
-
-void UserTabImpl::expertBtnClicked() {
-    ExpertUserDlg *dlg = new ExpertUserDlg(this);
-    QString validUsersStr;
-    QString readListStr;
-    QString writeListStr;
-    QString adminUsersStr;
-    QString invalidUsersStr;
-
-    saveUsers(validUsersStr,readListStr,writeListStr,adminUsersStr,invalidUsersStr);
-
-    dlg->validUsersEdit->setText(validUsersStr);
-    dlg->readListEdit->setText(readListStr);
-    dlg->writeListEdit->setText(writeListStr);
-    dlg->adminUsersEdit->setText(adminUsersStr);
-    dlg->invalidUsersEdit->setText(invalidUsersStr);
-
-    if (dlg->exec()) {
-        loadUsers(dlg->validUsersEdit->text(),
-                  dlg->readListEdit->text(),
-                  dlg->writeListEdit->text(),
-                  dlg->adminUsersEdit->text(),
-                  dlg->invalidUsersEdit->text());
-
-    }
-
-    delete dlg;
-}
-
-void UserTabImpl::save()
-{
-  QString validUsersStr;
-  QString readListStr;
-  QString writeListStr;
-  QString adminUsersStr;
-  QString invalidUsersStr;
-
-  saveUsers(validUsersStr,readListStr,writeListStr,adminUsersStr,invalidUsersStr);
-
-  _share->setValue("valid users",validUsersStr);
-  _share->setValue("read list", readListStr);
-  _share->setValue("write list", writeListStr);
-  _share->setValue("admin users", adminUsersStr);
-  _share->setValue("invalid users", invalidUsersStr);
-
-  _share->setValue("force user",forceUserCombo->currentText( ) );
-  _share->setValue("force group",forceGroupCombo->currentText( ) );
-}
-
-void UserTabImpl::saveUsers(QString & validUsersStr,
-                            QString & readListStr,
-                            QString & writeListStr,
-                            QString & adminUsersStr,
-                            QString & invalidUsersStr)
-{
-  QStringList validUsers;
-  QStringList writeList;
-  QStringList readList;
-  QStringList adminUsers;
-  QStringList invalidUsers;
-
-  bool allowAllUsers = allUnspecifiedUsersCombo->currentItem() == 0;
-
-  for (int i=0; i<userTable->numRows(); i++)
-  {
-    Q3TableItem* item = userTable->item(i,0);
-    Q3ComboTableItem* comboItem = static_cast<Q3ComboTableItem*>(userTable->item(i,3));
-
-    if (! allowAllUsers && comboItem->currentItem() < 4)
-       validUsers.append(item->text());
-
-    switch (comboItem->currentItem())
-    {
-      case 0 : break;
-      case 1 : readList.append(item->text());break;
-      case 2 : writeList.append(item->text());break;
-      case 3 : adminUsers.append(item->text());break;
-      case 4 : invalidUsers.append(item->text());break;
-    }
-  }
-
-  validUsersStr = validUsers.join(",");
-  readListStr = readList.join(",");
-  writeListStr = writeList.join(",");
-  adminUsersStr = adminUsers.join(",");
-  invalidUsersStr = invalidUsers.join(",");
-}
-
-
-
-#include "usertabimpl.moc"
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/usertabimpl.h filesharing//advanced/kcm_sambaconf/usertabimpl.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertabimpl.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertabimpl.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,105 +0,0 @@
-/***************************************************************************
-                          usertabimpl.h  -  description
-                             -------------------
-    begin                : Mon Jul 15 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/******************************************************************************
- *                                                                            *
- *  This file is part of KSambaPlugin.                                        *
- *                                                                            *
- *  KSambaPlugin is free software; you can redistribute it and/or modify      *
- *  it under the terms of the GNU General Public License as published by      *
- *  the Free Software Foundation; either version 2 of the License, or         *
- *  (at your option) any later version.                                       *
- *                                                                            *
- *  KSambaPlugin is distributed in the hope that it will be useful,           *
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
- *  GNU General Public License for more details.                              *
- *                                                                            *
- *  You should have received a copy of the GNU General Public License         *
- *  along with KSambaPlugin; if not, write to the Free Software                     *
- *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA  *
- *                                                                            *
- ******************************************************************************/
-
-#ifndef USERTABIMPL_H
-#define USERTABIMPL_H
-
-#include "usertab.h"
-#include "common.h"
-#include "qstringlist.h"
-#include "ui_expertuserdlg.h"
-
-/**
-  *@author Jan Schäfer
-  */
-
-class SambaShare;
-
-
-class ExpertUserDlg : public QDialog, public Ui::ExpertUserDlg
-{
-Q_OBJECT
-public:
-    ExpertUserDlg( QWidget *parent ): QDialog(parent) {
-       setupUi(this);
-    }
-};
-
-/**
- * Implements the usertab.ui interface
- * A Widget where you can add SambaUsers to the valid users, rejected users,
- * write list, read list and admin list parameters of the smb.conf file
- **/
-class UserTabImpl : public UserTab
-{
-Q_OBJECT
-public:
-	UserTabImpl(QWidget* parent, SambaShare* share);
-	~UserTabImpl();
-
-  void load();
-  void save();
-private:
-  SambaShare* _share;
-  QStringList _specifiedUsers;
-  QStringList _specifiedGroups;
-
-  void setAllowedUser(int, const QString &);
-  void removeDuplicates( QStringList & validUsers, QStringList & readList,
-                         QStringList & writeList, QStringList & adminUsers,
-                         QStringList & invalidUsers);
-
-  void removeAll(QStringList & entryList, QStringList & fromList);
-  void addListToUserTable(const QStringList & list, int accessRight);
-  void loadForceCombos();
-
-  void loadUsers(const QString & validUsersStr,
-                 const QString & readListStr,
-                 const QString & writeListStr,
-                 const QString & adminUsersStr,
-                 const QString & invalidUsersStr);
-
-  void saveUsers(QString & validUsersStr,
-                 QString & readListStr,
-                 QString & writeListStr,
-                 QString & adminUsersStr,
-                 QString & invalidUsersStr);
-
-  bool nameIsGroup(const QString & name);
-  QString removeGroupTag(const QString & name);
-  QString removeQuotationMarks(const QString & name);
-  void addUserToUserTable(const QString & user, int accessRight);
-
-protected slots:
-  virtual void addUserBtnClicked();
-  virtual void addGroupBtnClicked();
-  virtual void removeSelectedBtnClicked();
-  virtual void expertBtnClicked();
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/usertab.ui filesharing//advanced/kcm_sambaconf/usertab.ui
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertab.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertab.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,351 +0,0 @@
-<!DOCTYPE UI><UI version="3.0" stdsetdef="1">
-<class>UserTab</class>
-<widget class="QWidget">
-    <property name="name">
-        <cstring>UserTab</cstring>
-    </property>
-    <property name="geometry">
-        <rect>
-            <x>0</x>
-            <y>0</y>
-            <width>548</width>
-            <height>396</height>
-        </rect>
-    </property>
-    <property name="windowTitle">
-        <string>Users</string>
-    </property>
-    <vbox>
-        <property name="name">
-            <cstring>unnamed</cstring>
-        </property>
-        <widget class="QGroupBox">
-            <property name="name">
-                <cstring>groupBox53</cstring>
-            </property>
-            <property name="title">
-                <string>All U&amp;nspecified Users</string>
-            </property>
-            <hbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <widget class="QComboBox">
-                    <item>
-                        <property name="text">
-                            <string>Allow</string>
-                        </property>
-                    </item>
-                    <item>
-                        <property name="text">
-                            <string>Reject</string>
-                        </property>
-                    </item>
-                    <property name="name">
-                        <cstring>allUnspecifiedUsersCombo</cstring>
-                    </property>
-                </widget>
-            </hbox>
-        </widget>
-        <widget class="QGroupBox">
-            <property name="name">
-                <cstring>groupBox77</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>7</hsizetype>
-                    <vsizetype>7</vsizetype>
-                    <horstretch>0</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="title">
-                <string>Spec&amp;ified Users</string>
-            </property>
-            <grid>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <widget class="QTable" row="0" column="0" rowspan="5" colspan="1">
-                    <column>
-                        <property name="text">
-                            <string>Name</string>
-                        </property>
-                    </column>
-                    <column>
-                        <property name="text">
-                            <string>UID</string>
-                        </property>
-                    </column>
-                    <column>
-                        <property name="text">
-                            <string>GID</string>
-                        </property>
-                    </column>
-                    <column>
-                        <property name="text">
-                            <string>Access Rights</string>
-                        </property>
-                    </column>
-                    <property name="name">
-                        <cstring>userTable</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>7</hsizetype>
-                            <vsizetype>7</vsizetype>
-                            <horstretch>100</horstretch>
-                            <verstretch>50</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="numRows">
-                        <number>0</number>
-                    </property>
-                    <property name="numCols">
-                        <number>4</number>
-                    </property>
-                    <property name="showGrid">
-                        <bool>false</bool>
-                    </property>
-                    <property name="columnMovingEnabled">
-                        <bool>true</bool>
-                    </property>
-                    <property name="selectionMode">
-                        <enum>MultiRow</enum>
-                    </property>
-                    <property name="focusStyle">
-                        <enum>FollowStyle</enum>
-                    </property>
-                </widget>
-                <widget class="QPushButton" row="0" column="1">
-                    <property name="name">
-                        <cstring>addUserBtn</cstring>
-                    </property>
-                    <property name="text">
-                        <string>A&amp;dd User...</string>
-                    </property>
-                </widget>
-                <widget class="QPushButton" row="4" column="1">
-                    <property name="name">
-                        <cstring>expertBtn</cstring>
-                    </property>
-                    <property name="text">
-                        <string>E&amp;xpert</string>
-                    </property>
-                </widget>
-                <widget class="QPushButton" row="1" column="1">
-                    <property name="name">
-                        <cstring>addGroupBtn</cstring>
-                    </property>
-                    <property name="text">
-                        <string>Add &amp;Group...</string>
-                    </property>
-                </widget>
-                <widget class="QPushButton" row="2" column="1">
-                    <property name="name">
-                        <cstring>removeSelectedBtn</cstring>
-                    </property>
-                    <property name="text">
-                        <string>Remo&amp;ve Selected</string>
-                    </property>
-                </widget>
-                <spacer row="3" column="1">
-                    <property name="name">
-                        <cstring>spacer88</cstring>
-                    </property>
-                    <property name="orientation">
-                        <enum>Qt::Vertical</enum>
-                    </property>
-                    <property name="sizeType">
-                        <enum>Expanding</enum>
-                    </property>
-                    <property name="sizeHint">
-                        <size>
-                            <width>20</width>
-                            <height>100</height>
-                        </size>
-                    </property>
-                </spacer>
-            </grid>
-        </widget>
-        <widget class="QGroupBox">
-            <property name="name">
-                <cstring>groupBox35</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>1</hsizetype>
-                    <vsizetype>1</vsizetype>
-                    <horstretch>0</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="title">
-                <string>All Users Should be Forced to the Follo&amp;wing User/Group</string>
-            </property>
-            <hbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <widget class="QLabel">
-                    <property name="name">
-                        <cstring>TextLabel12</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>1</hsizetype>
-                            <vsizetype>5</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>Forc&amp;e user:</string>
-                    </property>
-                    <property name="buddy" stdset="0">
-                        <cstring>forceUserCombo</cstring>
-                    </property>
-                </widget>
-                <widget class="QComboBox">
-                    <property name="name">
-                        <cstring>forceUserCombo</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>7</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                </widget>
-                <widget class="QLabel">
-                    <property name="name">
-                        <cstring>TextLabel13</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>1</hsizetype>
-                            <vsizetype>5</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                    <property name="text">
-                        <string>Fo&amp;rce group:</string>
-                    </property>
-                    <property name="buddy" stdset="0">
-                        <cstring>forceGroupCombo</cstring>
-                    </property>
-                </widget>
-                <widget class="QComboBox">
-                    <property name="name">
-                        <cstring>forceGroupCombo</cstring>
-                    </property>
-                    <property name="sizePolicy">
-                        <sizepolicy>
-                            <hsizetype>7</hsizetype>
-                            <vsizetype>0</vsizetype>
-                            <horstretch>0</horstretch>
-                            <verstretch>0</verstretch>
-                        </sizepolicy>
-                    </property>
-                </widget>
-            </hbox>
-        </widget>
-    </vbox>
-</widget>
-<connections>
-    <connection>
-        <sender>addUserBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>addUserBtnClicked()</slot>
-    </connection>
-    <connection>
-        <sender>addGroupBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>addGroupBtnClicked()</slot>
-    </connection>
-    <connection>
-        <sender>removeSelectedBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>removeSelectedBtnClicked()</slot>
-    </connection>
-    <connection>
-        <sender>expertBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>expertBtnClicked()</slot>
-    </connection>
-    <connection>
-        <sender>allUnspecifiedUsersCombo</sender>
-        <signal>textChanged(const QString&amp;)</signal>
-        <receiver>UserTab</receiver>
-        <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-        <sender>addUserBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-        <sender>addGroupBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-        <sender>removeSelectedBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-        <sender>expertBtn</sender>
-        <signal>clicked()</signal>
-        <receiver>UserTab</receiver>
-        <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-        <sender>forceUserCombo</sender>
-        <signal>textChanged(const QString&amp;)</signal>
-        <receiver>UserTab</receiver>
-        <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-        <sender>forceGroupCombo</sender>
-        <signal>textChanged(const QString&amp;)</signal>
-        <receiver>UserTab</receiver>
-        <slot>changedSlot()</slot>
-    </connection>
-</connections>
-<tabstops>
-    <tabstop>allUnspecifiedUsersCombo</tabstop>
-    <tabstop>userTable</tabstop>
-    <tabstop>addUserBtn</tabstop>
-    <tabstop>addGroupBtn</tabstop>
-    <tabstop>removeSelectedBtn</tabstop>
-    <tabstop>expertBtn</tabstop>
-    <tabstop>forceUserCombo</tabstop>
-    <tabstop>forceGroupCombo</tabstop>
-</tabstops>
-<includes>
-    <include location="local" impldecl="in implementation">userselectdlg.h</include>
-    <include location="local" impldecl="in implementation">groupselectdlg.h</include>
-    <include location="local" impldecl="in implementation">usertab.ui.h</include>
-</includes>
-<signals>
-    <signal>changed()</signal>
-</signals>
-<slots>
-    <slot>addUserBtnClicked()</slot>
-    <slot>removeSelectedBtnClicked()</slot>
-    <slot>addGroupBtnClicked()</slot>
-    <slot>expertBtnClicked()</slot>
-    <slot>changedSlot()</slot>
-</slots>
-</UI>
diff -urN kdenetwork-4.6.1/filesharing//advanced/kcm_sambaconf/usertab.ui.h filesharing//advanced/kcm_sambaconf/usertab.ui.h
--- kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertab.ui.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/kcm_sambaconf/usertab.ui.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,43 +0,0 @@
-/****************************************************************************
-** ui.h extension file, included from the uic-generated form implementation.
-**
-** If you wish to add, delete or rename functions or slots use
-** Qt Designer which will update this file, preserving your code. Create an
-** init() function in place of a constructor, and a destroy() function in
-** place of a destructor.
-*****************************************************************************/
-
-#ifndef KCM_SAMBACONF_USERTAAB_UI_H
-#define KCM_SAMBACONF_USERTAAB_UI_H
-
-void UserTab::addUserBtnClicked()
-{
-
-}
-
-
-void UserTab::removeSelectedBtnClicked()
-{
-
-}
-
-
-void UserTab::addGroupBtnClicked()
-{
-
-}
-
-
-
-void UserTab::expertBtnClicked()
-{
-
-}
-
-
-void UserTab::changedSlot()
-{
-    emit changed();
-}
-
-#endif // KCM_SAMBACONF_USERTAAB_UI_H
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/hostprops.ui filesharing//advanced/nfs/hostprops.ui
--- kdenetwork-4.6.1/filesharing/advanced/nfs/hostprops.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/hostprops.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,557 +0,0 @@
-<!DOCTYPE UI><UI version="3.2" stdsetdef="1">
-<class>HostProps</class>
-<widget class="QWidget">
-    <property name="name">
-        <cstring>HostProps</cstring>
-    </property>
-    <property name="geometry">
-        <rect>
-            <x>0</x>
-            <y>0</y>
-            <width>333</width>
-            <height>332</height>
-        </rect>
-    </property>
-    <grid>
-        <property name="name">
-            <cstring>unnamed</cstring>
-        </property>
-        <property name="margin">
-            <number>0</number>
-        </property>
-        <property name="spacing">
-            <number>6</number>
-        </property>
-        <widget class="QGroupBox" row="0" column="0" rowspan="1" colspan="2">
-            <property name="name">
-                <cstring>propertiesGrp</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>5</hsizetype>
-                    <vsizetype>0</vsizetype>
-                    <horstretch>0</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="minimumSize">
-                <size>
-                    <width>180</width>
-                    <height>0</height>
-                </size>
-            </property>
-            <property name="frameShape">
-                <enum>Box</enum>
-            </property>
-            <property name="frameShadow">
-                <enum>Sunken</enum>
-            </property>
-            <property name="title">
-                <string>Host Properties</string>
-            </property>
-            <vbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QLabel">
-                    <property name="name">
-                        <cstring>TextLabel1</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Name/address:</string>
-                    </property>
-                    <property name="buddy" stdset="0">
-                        <cstring>nameEdit</cstring>
-                    </property>
-                </widget>
-                <widget class="QLineEdit">
-                    <property name="name">
-                        <cstring>nameEdit</cstring>
-                    </property>
-                    <property name="frameShape">
-                        <enum>LineEditPanel</enum>
-                    </property>
-                    <property name="frameShadow">
-                        <enum>Sunken</enum>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;Name / Address field&lt;/b&gt;
-&lt;p&gt;
-Here you can enter the host name or address.&lt;br&gt;
-The host may be specified in a number of ways:
-&lt;p&gt;
-&lt;i&gt;single host&lt;/i&gt;
-&lt;p&gt;
- This is the most common format. You may specify a host either by an abbreviated name recognized by the resolver, the fully qualified domain name, or an IP address.
-&lt;/p&gt;
-
-&lt;i&gt;netgroups&lt;/i&gt;
-&lt;p&gt;
- NIS netgroups may be given as @group. Only the host part of each netgroup members is consider in checking for membership. Empty host parts or those containing a single dash (-) are ignored.
-&lt;/p&gt;
-
-&lt;i&gt;wildcards&lt;/i&gt;
-&lt;p&gt;
- Machine names may contain the wildcard characters * and ?. This can be used to make the exports file more compact; for instance, *.cs.foo.edu matches all hosts in the domain cs.foo.edu. However, these wildcard characters do not match the dots in a domain name, so the above pattern does not include hosts such as a.b.cs.foo.edu.
-&lt;/p&gt;
-
-&lt;i&gt;IP networks&lt;/i&gt;
-&lt;p&gt;
- You can also export directories to all hosts on an IP (sub-) network simultaneously. This is done by specifying an IP address and netmask pair as address/netmask where the netmask can be specified in dotted-decimal format, or as a contiguous mask length (for example, either `/255.255.252.0' or `/22' appended to the network base address result in identical subnetworks with 10 bits of host).
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox">
-                    <property name="name">
-                        <cstring>publicChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Public access</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;Public access&lt;/b&gt;
-&lt;p&gt;
-If you check this, the host address will be a single wildcard , which means public access.
-This is just the same as if you would enter a wildcard in the address field.
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-            </vbox>
-        </widget>
-        <widget class="QGroupBox" row="1" column="0">
-            <property name="name">
-                <cstring>GroupBox7</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>5</hsizetype>
-                    <vsizetype>5</vsizetype>
-                    <horstretch>0</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="title">
-                <string>Options</string>
-            </property>
-            <grid>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QCheckBox" row="0" column="0">
-                    <property name="name">
-                        <cstring>readOnlyChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Writable</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;Writable&lt;/b&gt;
-&lt;p&gt;
-Allow both read and write requests on this NFS volume.
-&lt;/p&gt;
-&lt;p&gt;
-The default is to disallow any request which changes the filesystem
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="1" column="0">
-                    <property name="name">
-                        <cstring>secureChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Insecure</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;Insecure&lt;/b&gt;
-&lt;p&gt;
-If this option is checked, it is not required that requests originate on an internet port less than IPPORT_RESERVED (1024).
-&lt;/p&gt;
-&lt;p&gt;
-If unsure leave it unchecked.
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="2" column="0">
-                    <property name="name">
-                        <cstring>syncChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>&amp;Sync</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;Sync&lt;/b&gt;
-&lt;p&gt;
-This option requests that all file writes be committed to disk before the write request completes. This is required for complete safety of data in the face of a server crash, but incurs a performance hit.
-&lt;/p&gt;
-&lt;p&gt;
-The default is to allow the server to write the data out whenever it is ready.
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="3" column="0">
-                    <property name="name">
-                        <cstring>wdelayChk</cstring>
-                    </property>
-                    <property name="enabled">
-                        <bool>false</bool>
-                    </property>
-                    <property name="text">
-                        <string>No w&amp;delay</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;No wdelay&lt;/b&gt;
-&lt;p&gt;
-This option only has effect if sync is also set. The NFS server will normally delay committing a write request to disk slightly if it suspects that another related write request may be in progress or may arrive soon. This allows multiple write requests to be committed to disk with the one operation which can improve performance. If an NFS server received mainly small unrelated requests, this behavior could actually reduce performance, so no wdelay is available to turn it off. &lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="4" column="0">
-                    <property name="name">
-                        <cstring>hideChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>No &amp;hide</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;No hide&lt;/b&gt;
-&lt;p&gt;
-This option is based on the option of the same name provided in IRIX NFS. Normally, if a server exports two filesystems one of which is mounted on the other, then the client will have to mount both filesystems explicitly to get access to them. If it just mounts the parent, it will see an empty directory at the place where the other filesystem is mounted. That filesystem is "hidden".
-&lt;/p&gt;
-&lt;p&gt;
-Setting the nohide option on a filesystem causes it not to be hidden, and an appropriately authorized client will be able to move from the parent to that filesystem without noticing the change.
-&lt;/p&gt;
-&lt;p&gt;
-However, some NFS clients do not cope well with this situation as, for instance, it is then possible for two files in the one apparent filesystem to have the same inode number.
-&lt;/p&gt;
-&lt;p&gt;
-The nohide option is currently only effective on single host exports. It does not work reliably with netgroup, subnet, or wildcard exports.
-&lt;/p&gt;
-&lt;p&gt;
-This option can be very useful in some situations, but it should be used with due care, and only after confirming that the client system copes with the situation effectively.
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="5" column="0">
-                    <property name="name">
-                        <cstring>subtreeChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>No su&amp;btree check</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;No subtree check&lt;/b&gt;
-&lt;p&gt;
-This option disables subtree checking, which has mild security implications, but can improve reliability is some circumstances.
-&lt;/p&gt;
-&lt;p&gt;
-If a subdirectory of a filesystem is exported, but the whole filesystem is not, then whenever a NFS request arrives, the server must check not only that the accessed file is in the appropriate filesystem (which is easy) but also that it is in the exported tree (which is harder). This check is called the subtree_check.
-&lt;/p&gt;
-&lt;p&gt;
-In order to perform this check, the server must include some information about the location of the file in the "filehandle" that is given to the client. This can cause problems with accessing files that are renamed while a client has them open (though in many simple cases it will still work).
-&lt;/p&gt;
-&lt;p&gt;
-subtree checking is also used to make sure that files inside directories to which only root has access can only be accessed if the filesystem is exported with no_root_squash (see below), even the file itself allows more general access.
-&lt;/p&gt;
-&lt;p&gt;
-As a general guide, a home directory filesystem, which is normally exported at the root and may see lots of file renames, should be exported with subtree checking disabled. A filesystem which is mostly read-only, and at least does not see many file renames (e.g. /usr or /var) and for which subdirectories may be exported, should probably be exported with subtree checks enabled.
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox" row="6" column="0">
-                    <property name="name">
-                        <cstring>secureLocksChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>Insecure loc&amp;ks</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;Insecure locks&lt;/b&gt;
-&lt;p&gt;
-This option tells the NFS server not to require authentication of locking requests (i.e. requests which use the NLM protocol). Normally the NFS server will require a lock request to hold a credential for a user who has read access to the file. With this flag no access checks will be performed.
-&lt;/p&gt;
-&lt;p&gt;
-Early NFS client implementations did not send credentials with lock requests, and many current NFS clients still exist which are based on the old implementations. Use this flag if you find that you can only lock files which are world readable.
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-            </grid>
-        </widget>
-        <widget class="QGroupBox" row="1" column="1">
-            <property name="name">
-                <cstring>GroupBox3</cstring>
-            </property>
-            <property name="sizePolicy">
-                <sizepolicy>
-                    <hsizetype>5</hsizetype>
-                    <vsizetype>7</vsizetype>
-                    <horstretch>0</horstretch>
-                    <verstretch>0</verstretch>
-                </sizepolicy>
-            </property>
-            <property name="title">
-                <string>User Mapping</string>
-            </property>
-            <property name="alignment">
-                <set>AlignAuto</set>
-            </property>
-            <vbox>
-                <property name="name">
-                    <cstring>unnamed</cstring>
-                </property>
-                <property name="margin">
-                    <number>11</number>
-                </property>
-                <property name="spacing">
-                    <number>6</number>
-                </property>
-                <widget class="QCheckBox">
-                    <property name="name">
-                        <cstring>allSquashChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>All s&amp;quash</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;All squash&lt;/b&gt;
-&lt;p&gt;
-Map all uids and gids to the anonymous user. Useful for NFS-exported public FTP directories, news spool directories, etc. &lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QCheckBox">
-                    <property name="name">
-                        <cstring>rootSquashChk</cstring>
-                    </property>
-                    <property name="text">
-                        <string>No &amp;root squash</string>
-                    </property>
-                    <property name="whatsThis" stdset="0">
-                        <string>&lt;b&gt;No root squash&lt;/b&gt;
-&lt;p&gt;
-Turn of root squashing. This option is mainly useful for diskless clients.
-&lt;/p&gt;
-&lt;i&gt;root squashing&lt;/i&gt;
-&lt;p&gt;
-Map requests from uid/gid 0 to the anonymous uid/gid. Note that this does not apply to any other uids that might be equally sensitive, such as user bin.
-&lt;/p&gt;</string>
-                    </property>
-                </widget>
-                <widget class="QLayoutWidget">
-                    <property name="name">
-                        <cstring>layout15</cstring>
-                    </property>
-                    <hbox>
-                        <property name="name">
-                            <cstring>unnamed</cstring>
-                        </property>
-                        <widget class="QLabel">
-                            <property name="name">
-                                <cstring>TextLabel1_2</cstring>
-                            </property>
-                            <property name="text">
-                                <string>Anonym. &amp;UID:</string>
-                            </property>
-                            <property name="buddy" stdset="0">
-                                <cstring>anonuidEdit</cstring>
-                            </property>
-                            <property name="whatsThis" stdset="0">
-                                <string>&lt;b&gt;Anonym. UID/GID&lt;/b&gt; &lt;p&gt; These options explicitly set the uid and gid of the anonymous account. This option is primarily useful for PC/NFS clients, where you might want all requests appear to be from one user. &lt;/p&gt;</string>
-                            </property>
-                        </widget>
-                        <widget class="QLineEdit">
-                            <property name="name">
-                                <cstring>anonuidEdit</cstring>
-                            </property>
-                            <property name="sizePolicy">
-                                <sizepolicy>
-                                    <hsizetype>5</hsizetype>
-                                    <vsizetype>0</vsizetype>
-                                    <horstretch>100</horstretch>
-                                    <verstretch>0</verstretch>
-                                </sizepolicy>
-                            </property>
-                            <property name="minimumSize">
-                                <size>
-                                    <width>50</width>
-                                    <height>0</height>
-                                </size>
-                            </property>
-                            <property name="text">
-                                <string>FF</string>
-                            </property>
-                        </widget>
-                    </hbox>
-                </widget>
-                <widget class="QLayoutWidget">
-                    <property name="name">
-                        <cstring>layout16</cstring>
-                    </property>
-                    <hbox>
-                        <property name="name">
-                            <cstring>unnamed</cstring>
-                        </property>
-                        <widget class="QLabel">
-                            <property name="name">
-                                <cstring>TextLabel2</cstring>
-                            </property>
-                            <property name="text">
-                                <string>Anonym. &amp;GID:</string>
-                            </property>
-                            <property name="buddy" stdset="0">
-                                <cstring>anongidEdit</cstring>
-                            </property>
-                            <property name="whatsThis" stdset="0">
-                                <string>&lt;b&gt;Anonym. UID/GID&lt;/b&gt; &lt;p&gt; These options explicitly set the uid and gid of the anonymous account. This option is primarily useful for PC/NFS clients, where you might want all requests appear to be from one user. &lt;/p&gt;</string>
-                            </property>
-                        </widget>
-                        <widget class="QLineEdit">
-                            <property name="name">
-                                <cstring>anongidEdit</cstring>
-                            </property>
-                            <property name="sizePolicy">
-                                <sizepolicy>
-                                    <hsizetype>4</hsizetype>
-                                    <vsizetype>0</vsizetype>
-                                    <horstretch>0</horstretch>
-                                    <verstretch>0</verstretch>
-                                </sizepolicy>
-                            </property>
-                            <property name="minimumSize">
-                                <size>
-                                    <width>50</width>
-                                    <height>0</height>
-                                </size>
-                            </property>
-                            <property name="text">
-                                <string>FF</string>
-                            </property>
-                        </widget>
-                    </hbox>
-                </widget>
-            </vbox>
-        </widget>
-        <spacer row="2" column="0">
-            <property name="name">
-                <cstring>spacer3</cstring>
-            </property>
-            <property name="orientation">
-                <enum>Vertical</enum>
-            </property>
-            <property name="sizeType">
-                <enum>Expanding</enum>
-            </property>
-            <property name="sizeHint">
-                <size>
-                    <width>20</width>
-                    <height>16</height>
-                </size>
-            </property>
-        </spacer>
-    </grid>
-</widget>
-<connections>
-    <connection>
-        <sender>publicChk</sender>
-        <signal>toggled(bool)</signal>
-        <receiver>nameEdit</receiver>
-        <slot>setDisabled(bool)</slot>
-    </connection>
-    <connection>
-        <sender>readOnlyChk</sender>
-        <signal>clicked()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>secureChk</sender>
-        <signal>clicked()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>syncChk</sender>
-        <signal>clicked()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>wdelayChk</sender>
-        <signal>pressed()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>subtreeChk</sender>
-        <signal>pressed()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>secureLocksChk</sender>
-        <signal>pressed()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>allSquashChk</sender>
-        <signal>pressed()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>rootSquashChk</sender>
-        <signal>pressed()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>nameEdit</sender>
-        <signal>textChanged(const QString&amp;)</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>hideChk</sender>
-        <signal>clicked()</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>syncChk</sender>
-        <signal>toggled(bool)</signal>
-        <receiver>wdelayChk</receiver>
-        <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-        <sender>anonuidEdit</sender>
-        <signal>textChanged(const QString&amp;)</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-    <connection>
-        <sender>anongidEdit</sender>
-        <signal>textChanged(const QString&amp;)</signal>
-        <receiver>HostProps</receiver>
-        <slot>setModified()</slot>
-    </connection>
-</connections>
-<includes>
-    <include location="local" impldecl="in implementation">hostprops.ui.h</include>
-</includes>
-<signals>
-    <signal>modified()</signal>
-</signals>
-<slots>
-    <slot>setModified()</slot>
-</slots>
-</UI>
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/hostprops.ui.h filesharing//advanced/nfs/hostprops.ui.h
--- kdenetwork-4.6.1/filesharing/advanced/nfs/hostprops.ui.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/hostprops.ui.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,17 +0,0 @@
-/****************************************************************************
-** ui.h extension file, included from the uic-generated form implementation.
-**
-** If you wish to add, delete or rename slots use Qt Designer which will
-** update this file, preserving your code. Create an init() slot in place of
-** a constructor, and a destroy() slot in place of a destructor.
-*****************************************************************************/
-
-#ifndef NFS_HOSTPROPS_UI_H
-#define NFS_HOSTPROPS_UI_H
-
-void HostProps::setModified()
-{
-    emit modified();
-}
-
-#endif // NFS_HOSTPROPS_UI_H
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfsdialog.cpp filesharing//advanced/nfs/nfsdialog.cpp
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfsdialog.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfsdialog.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,236 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-
-#include <qradiobutton.h>
-#include <qpushbutton.h>
-#include <q3groupbox.h>
-#include <qlineedit.h>
-#include <q3buttongroup.h>
-#include <qlayout.h>
-//Added by qt3to4:
-#include <QVBoxLayout>
-#include <Q3PtrList>
-
-#include <kdebug.h>
-#include <kmessagebox.h>
-#include <kfiledialog.h>
-#include <klocale.h>
-#include <k3listview.h>
-
-
-#include "nfsdialog.h"
-#include "nfsentry.h"
-#include "nfshostdlg.h"
-#include "nfsfile.h"
-
-
-NFSDialogGUI::NFSDialogGUI( QWidget *parent )
-    : QWidget( parent )
-{
-    setupUi( this );
-    connect( listView, SIGNAL( selectionChanged() ), this, SLOT( listView_selectionChanged() ) );
-}
-
-void NFSDialogGUI::listView_selectionChanged()
-{
-    bool empty = listView->selectedItems().isEmpty();
-    modifyHostBtn->setDisabled(empty);
-    removeHostBtn->setDisabled(empty);
-}
-
-
-NFSDialog::NFSDialog(QWidget * parent, NFSEntry* entry)
- : KDialog(parent),
-   m_nfsEntry(entry),
-   m_modified(false)
-{
-  setCaption(i18n("NFS Options"));
-  setButtons(Ok|Cancel);
-  setDefaultButton(Ok);
-  if (m_nfsEntry)
-      m_workEntry = m_nfsEntry->copy();
-  else
-      kWarning() << "NFSDialog::NFSDialog: entry is null!";
-
-  initGUI();
-  initSlots();
-  initListView();
-  connect(this,SIGNAL(okClicked()),this,SLOT(slotOk()));
-}
-
-NFSDialog::~NFSDialog()
-{
-  delete m_workEntry;
-}
-
-void NFSDialog::initGUI() {
-  QWidget* page = new QWidget(this);
-  setMainWidget(page);
-  m_gui = new NFSDialogGUI(page);
-
-  QVBoxLayout *layout = new QVBoxLayout( page );
-  layout->addWidget( m_gui );
-#ifdef __GNUC__
-#warning "kde4 port it"
-#endif
-  //KAccel* accel = new KAccel( m_gui->listView );
-  //accel->insert( "Delete", Qt::Key_Delete, this, SLOT(slotRemoveHost()));
-}
-
-void NFSDialog::initSlots()
-{
-  connect( m_gui->removeHostBtn, SIGNAL(clicked()), this, SLOT( slotRemoveHost()));
-  connect( m_gui->addHostBtn, SIGNAL(clicked()), this, SLOT( slotAddHost()));
-  connect( m_gui->modifyHostBtn, SIGNAL(clicked()), this, SLOT( slotModifyHost()));
-  connect( m_gui->listView, SIGNAL(doubleClicked(Q3ListViewItem*)),
-           this, SLOT( slotModifyHost()));
-
-}
-
-void NFSDialog::initListView()
-{
-  if (m_workEntry) {
-    HostIterator it = m_workEntry->getHosts();
-
-    NFSHost* host;
-    while ( (host = it.current()) != 0 ) {
-       ++it;
-       createItemFromHost(host);
-    }
-  }
-}
-
-Q3ListViewItem* NFSDialog::createItemFromHost(NFSHost* host)
-{
-  if (!host)
-    return 0;
-
-  Q3ListViewItem* item = new Q3ListViewItem(m_gui->listView);
-  updateItem(item, host);
-  return item;
-}
-
-void NFSDialog::updateItem(Q3ListViewItem* item, NFSHost* host)
-{
-  item->setText(0,host->name);
-  item->setText(1,host->paramString());
-}
-
-void NFSDialog::slotAddHost()
-{
-  NFSHost *host = new NFSHost();
-
-  // Set some secure parameters
-  //host->allSquash=true;
-  host->readonly=true;
-
-  HostList hostList;
-  hostList.append(host);
-
-  NFSHostDlg *dlg = new NFSHostDlg(this, &hostList, m_workEntry);
-  dlg->exec();
-
-
-  if (dlg->result()==QDialog::Accepted) {
-    m_workEntry->addHost(host);
-    createItemFromHost(host);
-    setModified();
-  } else {
-    delete host;
-  }
-
-  delete dlg;
-}
-
-void NFSDialog::slotOk() {
-  if (m_modified) {
-    m_nfsEntry->copyFrom(m_workEntry);
-  }
-  KDialog::accept();
-}
-
-void NFSDialog::slotRemoveHost()
-{
-  QList<Q3ListViewItem *> items = m_gui->listView->selectedItems();
-  if (items.count()==0)
-      return;
-  foreach ( Q3ListViewItem* item, items ) {
-    QString name = item->text(0);
-    m_gui->listView->takeItem(item);
-
-    NFSHost* host = m_workEntry->getHostByName(name);
-    if (host) {
-      m_workEntry->removeHost(host);
-    } else {
-      kWarning() << "NFSDialog::slotRemoveHost: no host "
-                  << name << " << found!" << endl;
-    }
-
-  }
-
-  m_gui->modifyHostBtn->setDisabled(true);
-  m_gui->removeHostBtn->setDisabled(true);
-  setModified();
-}
-
-void NFSDialog::slotModifyHost()
-{
-  QList<Q3ListViewItem*> items = m_gui->listView->selectedItems();
-  if (items.count()==0)
-      return;
-
-  HostList hostList;
-  foreach ( Q3ListViewItem* item, items ) {
-    NFSHost* host = m_workEntry->getHostByName(item->text(0));
-    if (host)
-      hostList.append(host);
-    else
-      kWarning() << "NFSDialog::slogModifyHost: host "
-                  << item->text(0) << " is null!" << endl;
-  }
-
-  NFSHostDlg *dlg = new NFSHostDlg(this, &hostList, m_workEntry);
-  if (dlg->exec() == QDialog::Accepted &&
-      dlg->isModified())
-  {
-      setModified();
-  }
-
-  delete dlg;
-
-  NFSHost* host = hostList.first();
-  foreach ( Q3ListViewItem* item, items ) {
-      if (item && host)
-          updateItem( item,host);
-      host = hostList.next();
-  }
-}
-
-void NFSDialog::setModified()
-{
-  m_modified = true;
-}
-
-bool NFSDialog::modified() {
-  return m_modified;
-}
-
-#include "nfsdialog.moc"
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfsdialoggui.ui filesharing//advanced/nfs/nfsdialoggui.ui
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfsdialoggui.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfsdialoggui.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,141 +0,0 @@
-<ui version="4.0" stdsetdef="1" >
-  <class>NFSDialogGUI</class>
-  <widget class="QWidget" name="NFSDialogGUI" >
-    <property name="geometry" >
-      <rect>
-        <x>0</x>
-        <y>0</y>
-        <width>466</width>
-        <height>338</height>
-      </rect>
-    </property>
-    <layout class="QVBoxLayout" >
-      <property name="margin" >
-        <number>0</number>
-      </property>
-      <property name="spacing" >
-        <number>6</number>
-      </property>
-      <item>
-        <widget class="Q3GroupBox" name="groupBox" >
-          <property name="enabled" >
-            <bool>true</bool>
-          </property>
-          <property name="title" >
-            <string>Allowed &amp;Hosts</string>
-          </property>
-          <property name="toolTip" stdset="0" >
-            <string>A list of allowed hosts</string>
-          </property>
-          <property name="whatsThis" stdset="0" >
-            <string>Here you can see a list of hosts which are allowed to access this directory via NFS.
-The first column shows the name or address of the host, the second column shows the access parameters. The name '*' donates public access.</string>
-          </property>
-          <layout class="QGridLayout" >
-            <property name="margin" >
-              <number>11</number>
-            </property>
-            <property name="spacing" >
-              <number>6</number>
-            </property>
-            <item row="0" column="1" >
-              <widget class="QPushButton" name="addHostBtn" >
-                <property name="text" >
-                  <string>&amp;Add Host...</string>
-                </property>
-              </widget>
-            </item>
-            <item row="1" column="1" >
-              <widget class="QPushButton" name="modifyHostBtn" >
-                <property name="enabled" >
-                  <bool>false</bool>
-                </property>
-                <property name="text" >
-                  <string>Mo&amp;dify Host...</string>
-                </property>
-              </widget>
-            </item>
-            <item row="2" column="1" >
-              <widget class="QPushButton" name="removeHostBtn" >
-                <property name="enabled" >
-                  <bool>false</bool>
-                </property>
-                <property name="text" >
-                  <string>&amp;Remove Host</string>
-                </property>
-              </widget>
-            </item>
-            <item row="3" column="1" >
-              <spacer name="spacer3" >
-                <property name="sizeHint" >
-                  <size>
-                    <width>20</width>
-                    <height>40</height>
-                  </size>
-                </property>
-                <property name="sizeType" >
-                  <enum>QSizePolicy::Expanding</enum>
-                </property>
-                <property name="orientation" >
-                  <enum>Qt::Vertical</enum>
-                </property>
-              </spacer>
-            </item>
-            <item rowspan="4" row="0" column="0" colspan="1" >
-              <widget class="K3ListView" name="listView" >
-                <property name="selectionMode" stdset="0" >
-                  <enum>Extended</enum>
-                </property>
-                <property name="fullWidth" >
-                  <bool>true</bool>
-                </property>
-                <column>
-                  <property name="text" >
-                    <string>Name/Address</string>
-                  </property>
-                  <property name="clickable" >
-                    <bool>true</bool>
-                  </property>
-                  <property name="resizable" >
-                    <bool>true</bool>
-                  </property>
-                </column>
-                <column>
-                  <property name="text" >
-                    <string>Parameters</string>
-                  </property>
-                  <property name="clickable" >
-                    <bool>true</bool>
-                  </property>
-                  <property name="resizable" >
-                    <bool>true</bool>
-                  </property>
-                </column>
-              </widget>
-            </item>
-          </layout>
-        </widget>
-      </item>
-    </layout>
-  </widget>
-    <customwidgets>
-    <customwidget>
-      <class>K3ListView</class>
-      <extends>Q3ListView</extends>
-      <header location="global" >k3listview.h</header>
-    </customwidget>
-  </customwidgets>
-  <tabstops>
-    <tabstop>addHostBtn</tabstop>
-    <tabstop>modifyHostBtn</tabstop>
-    <tabstop>removeHostBtn</tabstop>
-  </tabstops>
-  <connections>
-    <connection>
-      <sender>listView</sender>
-      <signal>selectionChanged()</signal>
-      <receiver>NFSDialogGUI</receiver>
-      <slot>listView_selectionChanged()</slot>
-    </connection>
-  </connections>
-</ui>
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfsdialog.h filesharing//advanced/nfs/nfsdialog.h
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfsdialog.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfsdialog.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,68 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#ifndef NFSDIALOG_H
-#define NFSDIALOG_H
-
-#include <kdialog.h>
-#include "ui_nfsdialoggui.h"
-
-class NFSEntry;
-class NFSHost;
-class Q3ListViewItem;
-
-class NFSDialogGUI : public QWidget, public Ui::NFSDialogGUI
-{
-    Q_OBJECT
-public:
-    NFSDialogGUI( QWidget *parent );
-
-public slots:
-    void listView_selectionChanged();
-};
-
-
-class NFSDialog : public KDialog
-{
-Q_OBJECT
-public:
-  NFSDialog(QWidget * parent, NFSEntry* entry);
-  ~NFSDialog();
-  bool modified();
-protected:
-  NFSEntry * m_nfsEntry;
-  NFSEntry * m_workEntry;
-  NFSDialogGUI* m_gui;
-
-  bool m_modified;
-  Q3ListViewItem* createItemFromHost(NFSHost* host);
-  void updateItem(Q3ListViewItem* item, NFSHost* host);
-  void initGUI();
-  void initListView();
-  void initSlots();
-  void initWorkEntry();
-protected slots:
-  void slotAddHost();
-  void slotRemoveHost();
-  void slotModifyHost();
-  virtual void slotOk();
-  void setModified();
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfsentry.cpp filesharing//advanced/nfs/nfsentry.cpp
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfsentry.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfsentry.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,381 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#include <kdebug.h>
-
-#include "nfsentry.h"
-
-NFSHost::NFSHost(const QString & hostString)
-{
-  readonly = true;
-
-  QString s = hostString;
-
-  int l = s.indexOf('(');
-  int r = s.indexOf(')');
-
-  initParams();
-
-  // get hostname
-  if (l>=0)
-    name = s.left(l);
-  else
-    name = s;
-
-  kDebug(5009) << "NFSHost: name='" << name << "'";
-
-  if (l>=0 && r>=0)
-  {
-    QString params = s.mid(l+1,r-l-1);
-
-    parseParamsString(params);
-  }
-}
-
-NFSHost::NFSHost() {
-  initParams();
-  name="";
-}
-
-NFSHost::~NFSHost()
-{
-}
-
-/**
- * Set the parameters to their default values
- */
-void NFSHost::initParams()
-{
-  readonly = true;
-  sync = false;
-  secure = true;
-  wdelay = true;
-  hide = true;
-  subtreeCheck = true;
-  secureLocks = true;
-  allSquash = false;
-  rootSquash = true;
-
-  anonuid = 65534;
-  anongid = 65534;
-}
-
-
-void NFSHost::parseParamsString(const QString & s)
-{
-
-  if (s.isEmpty())
-      return;
-
-  int i;
-
-  QString rest = s;
-  QString p;
-
-  do
-  {
-    i = rest.indexOf(",",0);
-
-    if (i==-1)
-      p = rest;
-    else
-    {
-      p = rest.left( i );
-      rest = rest.mid(i+1);
-    }
-
-    setParam(p);
-  }
-  while (i>-1);
-
-}
-
-QString NFSHost::paramString() const
-{
-  QString s;
-
-  if (!readonly) s+="rw,";
-  if (!rootSquash) s+="no_root_squash,";
-  if (!secure) s+="insecure,";
-  if (!secureLocks) s+="insecure_locks,";
-  if (!subtreeCheck) s+="no_subtree_check,";
-  if (sync)
-    s+="sync,";
-  else
-    s+="async,";
-
-  if (!wdelay) s+="wdelay,";
-  if (allSquash) s+="all_squash,";
-  if (!hide) s+="nohide,";
-
-  if (anongid!=65534)
-     s+=QString("anongid=%1,").arg(anongid);
-
-  if (anonuid!=65534)
-     s+=QString("anonuid=%1,").arg(anonuid);
-
-  // get rid of the last ','
-  s.truncate(s.length()-1);
-
-  return s;
-}
-
-QString NFSHost::toString() const
-{
-  QString s = name;
-
-  s+='(';
-  s+=paramString();
-  s+=')';
-
-  return s;
-
-}
-
-NFSHost* NFSHost::copy() const {
-  NFSHost* result = new NFSHost();
-
-  result->name = name;
-
-  result->readonly = readonly;
-  result->sync = sync;
-  result->secure = secure;
-  result->wdelay = wdelay;
-  result->hide = hide;
-  result->subtreeCheck = subtreeCheck;
-  result->secureLocks = secureLocks;
-  result->allSquash = allSquash;
-  result->rootSquash = rootSquash;
-
-  result->anonuid = anonuid;
-  result->anongid = anongid;
-
-  return result;
-}
-
-bool NFSHost::isPublic() const {
-  return name == "*";
-}
-
-void NFSHost::setParam(const QString & s)
-{
-  QString p = s.toLower();
-
-  if (p=="ro") {
-     readonly = true;
-     return; }
-
-  if (p=="rw") {
-     readonly = false;
-     return; }
-
-  if (p=="sync") {
-     sync = true;
-     return; }
-
-  if (p=="async") {
-     sync = false;
-     return; }
-
-  if (p=="secure") {
-     secure = true;
-     return; }
-
-  if (p=="insecure") {
-     secure = false;
-     return; }
-
-  if (p=="wdelay") {
-     wdelay = true;
-     return; }
-
-  if (p=="no_wdelay") {
-     wdelay = false;
-     return; }
-
-  if (p=="hide") {
-     hide = true;
-     return; }
-
-  if (p=="nohide") {
-     hide = false;
-     return; }
-
-  if (p=="subtree_check") {
-     subtreeCheck = true;
-     return; }
-
-  if (p=="no_subtree_check") {
-     subtreeCheck = false;
-     return; }
-
-  if (p=="secure_locks" ||
-      p=="auth_nlm") {
-     secureLocks = true;
-     return; }
-
-  if (p=="insecure_locks" ||
-      p=="no_auth_nlm" ) {
-     secureLocks = true;
-     return; }
-
-  if (p=="all_squash") {
-     allSquash = true;
-     return; }
-
-  if (p=="no_all_squash") {
-     allSquash = false;
-     return; }
-
-  if (p=="root_squash") {
-     rootSquash = true;
-     return; }
-
-  if (p=="no_root_squash") {
-     rootSquash = false;
-     return; }
-
-  int i = p.indexOf('=',0);
-
-  // get anongid or anonuid
-  if (i>-1)
-  {
-     QString name = p.left(i).toLower();
-     kDebug(5009) << name;
-
-     QString value = p.mid(i+1);
-     kDebug(5009) << value;
-
-    if (name=="anongid")
-       anongid = value.toInt();
-
-    if (name=="anonuid")
-       anonuid = value.toInt();
-  }
-
-}
-
-NFSEntry::NFSEntry(const QString & path)
-{
-  _hosts.setAutoDelete(true);
-  setPath(path);
-}
-
-NFSEntry::~NFSEntry()
-{
-}
-
-void NFSEntry::clear() {
-  _hosts.clear();
-}
-
-NFSEntry* NFSEntry::copy() {
-  NFSEntry* result = new NFSEntry(path());
-  result->copyFrom(this);
-  return result;
-}
-
-void NFSEntry::copyFrom(NFSEntry* entry) {
-  clear();
-  HostIterator it = entry->getHosts();
-
-  NFSHost* host;
-  while ( (host = it.current()) != 0 )  {
-    ++it;
-    addHost(host->copy());
-  }
-}
-
-QString NFSEntry::toString() const
-{
-  QString s = _path.trimmed();
-
-  if (_path.contains(' ')) {
-    s = '"'+s+'"';
-  }
-
-  s += ' ';
-
-  HostIterator it = getHosts();
-
-  NFSHost* host;
-
-  while ( (host = it.current()) != 0 )
-  {
-    ++it;
-    s+= host->toString() ;
-    if (it.current())
-        s+= " \\\n\t ";
-  }
-
-
-  return s;
-}
-
-void NFSEntry::addHost(NFSHost * host)
-{
-  _hosts.append(host);
-}
-
-void NFSEntry::removeHost(NFSHost * host)
-{
-  _hosts.remove(host);
-}
-
-NFSHost* NFSEntry::getHostByName(const QString & name) const
-{
-  HostIterator it = getHosts();
-  NFSHost* host;
-
-  while ( (host = it.current()) != 0 )
-  {
-    ++it;
-
-    if (host->name==name)
-      return host;
-  }
-
-  return 0;
-}
-
-NFSHost* NFSEntry::getPublicHost() const
-{
-  NFSHost* result = getHostByName("*");
-  if (result)
-      return result;
-
-  return getHostByName(QString::null);	//krazy:exclude=nullstrassign for old broken gcc
-}
-
-
-HostIterator NFSEntry::getHosts() const
-{
-  return HostIterator(_hosts);
-}
-
-QString NFSEntry::path() const
-{
-  return _path;
-}
-
-void NFSEntry::setPath(const QString & path)
-{
-  _path = path;
-}
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfsentry.h filesharing//advanced/nfs/nfsentry.h
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfsentry.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfsentry.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,121 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#ifndef NFSENTRY_H
-#define NFSENTRY_H
-
-
-#include <qstring.h>
-#include <q3ptrlist.h>
-
-
-class NFSHost
-{
-public:
-  NFSHost(const QString & hostString);
-  ~NFSHost();
-  NFSHost();
-
-  bool readonly;
-  bool sync;
-  bool secure;
-  bool wdelay;
-  bool hide;
-  bool subtreeCheck;
-  bool secureLocks;
-  bool allSquash;
-  bool rootSquash;
-
-  int anonuid;
-  int anongid;
-
-  QString name;
-
-  QString paramString() const;
-  QString toString() const;
-  bool isPublic() const;
-  
-  /** returns a copy of this host */
-  NFSHost* copy() const;
-protected:
-  void parseParamsString(const QString &);
-  void setParam(const QString &);
-  void initParams();
-};
-
-
-
-typedef Q3PtrList<NFSHost> HostList;
-typedef Q3PtrListIterator<NFSHost> HostIterator;
-
-class NFSLine {
-public: 
-  virtual ~NFSLine(){}
-  virtual QString toString() const = 0;
-};
-
-typedef Q3PtrList<NFSLine> NFSLineList;
-typedef Q3PtrListIterator<NFSLine> NFSLineIterator;
-
-class NFSEmptyLine : public NFSLine {
-public:
-  virtual QString toString() const { return QString::fromLatin1("\n"); }
-  virtual ~NFSEmptyLine() {}
-};
-
-class NFSComment : public NFSLine {
-public:
-  NFSComment(const QString & s) { comment = s; }
-  virtual ~NFSComment() {}
-  QString comment;
-  virtual QString toString() const { return comment; }
-};
-
-class NFSEntry : public NFSLine {
-public:
-  NFSEntry(const QString & path);
-  virtual ~NFSEntry();
-
-  void addHost(NFSHost * host);
-  void removeHost(NFSHost * host);
-  NFSHost* getHostByName(const QString & name) const;
-  NFSHost* getPublicHost() const;
-  HostIterator getHosts() const;
-  
-  /** Creates a deep copy of this entry */
-  NFSEntry * copy();
-  
-  /** clears all hosts and makes a deep copy of 
-   *  the given entry
-   */
-  void copyFrom(NFSEntry* entry);
-  
-  /** removes all hosts */
-  void clear();
-  QString path() const;
-  void setPath(const QString &);
-
-  virtual QString toString() const;
-
-protected:
-  HostList _hosts;
-  QString _path;
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfsfile.cpp filesharing//advanced/nfs/nfsfile.cpp
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfsfile.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfsfile.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,264 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#include <pwd.h>
-#include <time.h>
-#include <unistd.h>
-
-#include <qfileinfo.h>
-#include <qfile.h>
-#include <qtextstream.h>
-#include <qstringlist.h>
-#include <KStandardDirs>
-#include <kdebug.h>
-#include <kmessagebox.h>
-#include <klocale.h>
-#include <knfsshare.h>
-#include <ktemporaryfile.h>
-#include <kprocess.h>
-#include <kshell.h>
-#include "nfsfile.h"
-
-NFSFile::NFSFile(const KUrl & url, bool readonly)
-{
-  _lines.setAutoDelete(true);
-  _entries.setAutoDelete(false);
-  _url = url;
-  _readonly = readonly;
-}
-
-NFSFile::~NFSFile()
-{
-}
-
-void NFSFile::addEntry(NFSEntry *entry)
-{
-  _lines.append(entry);
-  _entries.append(entry);
-}
-
-void NFSFile::removeEntry(NFSEntry *entry)
-{
-  _entries.remove(entry);
-  _lines.remove(entry);
-}
-
-bool NFSFile::hasEntry(NFSEntry *entry)
-{
-  return 0 < _entries.contains(entry);
-}
-
-
-NFSEntry* NFSFile::getEntryByPath(const QString & path)
-{
-  if( path.isEmpty())
-     return 0L;
-
-  QString testPath = path.trimmed();
-  if ( !testPath.endsWith('/') )
-       testPath += '/';
-
-  for (NFSEntry* entry = _entries.first(); entry; entry = _entries.next())
-  {
-    if (entry->path()==testPath)
-       return entry;
-  }
-
-  return 0L;
-}
-
-bool NFSFile::removeEntryByPath(const QString & path) {
-  NFSEntry* entry = getEntryByPath(path);
-  if (!entry)
-      return false;
-
-  removeEntry(entry);
-  return true;
-}
-
-EntryIterator NFSFile::getEntries()
-{
-  return EntryIterator(_entries);
-}
-
-
-
-
-bool NFSFile::load()
-{
-  QFile f(_url.path());
-
-  if ( !f.open(QIODevice::ReadOnly) ) {
-    kError() << "NFSFile::load: Could not open " << _url.path() << endl;
-    return false;
-  }
-
-  _entries.clear();
-  _lines.clear();
-
-  QTextStream s( &f );
-
-  bool continuedLine = false; // is true if the line before ended with a backslash
-  QString completeLine;
-
-  while ( !s.atEnd() )
-  {
-    QString currentLine = s.readLine().trimmed();
-
-    if (continuedLine) {
-      completeLine += currentLine;
-      continuedLine = false;
-    }
-    else
-      completeLine = currentLine;
-
-    // is the line continued in the next line ?
-    if ( completeLine.endsWith('\\') )
-    {
-      continuedLine = true;
-      // remove the ending backslash
-      completeLine.truncate( completeLine.length()-1 );
-      continue;
-    }
-
-    // empty lines
-    if (completeLine.isEmpty()) {
-      _lines.append(new NFSEmptyLine());
-      continue;
-    }
-
-    // comments
-    if (completeLine.startsWith('#') ) {
-      _lines.append(new NFSComment(completeLine));
-      continue;
-    }
-
-    QString path;
-    QString hosts;
-
-    // Handle quotation marks
-    if ( completeLine.startsWith('"') ) {
-      int i = completeLine.indexOf('"',1);
-      if (i == -1) {
-        kError() << "NFSFile: Parse error: Missing quotation mark: "
-                  << completeLine << endl;
-        continue;
-      }
-      path = completeLine.mid(1,i-1);
-      hosts = completeLine.mid(i+1);
-
-    } else { // no quotation marks
-      int i = completeLine.indexOf(' ');
-      if (i == -1)
-          i = completeLine.indexOf('\t');
-
-      if (i == -1)
-        path = completeLine;
-      else {
-        path = completeLine.left(i);
-        hosts = completeLine.mid(i+1).trimmed();
-      }
-    }
-
-    // normalize path
-    if ( !path.endsWith('/') )
-            path += '/';
-
-    kDebug(5009) << "KNFSShare: Found path: '" << path << "'";
-    NFSEntry *entry = new NFSEntry(path);
-    QStringList hostList = QStringList::split(' ', hosts);
-
-    if (hostList.isEmpty()) {
-        NFSHost* host = new NFSHost("*");
-        entry->addHost(host);
-    } else {
-      QStringList::iterator it;
-      for ( it = hostList.begin(); it != hostList.end(); ++it ) {
-         NFSHost* host = new NFSHost((*it).trimmed());
-         entry->addHost(host);
-         kDebug(5009) << "KNFSShare: Found host: " << (*it) << " name='"
-                  << host->name << "'" << endl;
-      }
-    }
-
-    kDebug(5009) << "KNFSShare: Found hosts: " << hosts << "'";
-    this->addEntry(entry);
-  }
-
-  f.close();
-
-
-  return true;
-
-}
-
-void NFSFile::saveTo(QTextStream * stream) {
-  Q3PtrListIterator<NFSLine> it(_lines);
-
-  NFSLine *line;
-  while ( (line = it.current()) != 0 ) {
-    ++it;
-    *stream << line->toString() << endl;
-  }
-}
-
-bool NFSFile::saveTo(const QString& fileName) {
-    QFile file(fileName);
-    if (!file.open(QIODevice::WriteOnly))
-        return false;
-
-    QTextStream stream(&file);
-    saveTo(&stream);
-    file.close();
-    return true;
-}
-
-bool NFSFile::save()
-{
-  if (QFileInfo(_url.path()).isWritable() ) {
-    saveTo(_url.path());
-  } else
-  {
-
-    KTemporaryFile tempFile;
-    tempFile.open();
-    saveTo(tempFile.fileName());
-
-    QString command = QString("cp %1 %2")
-        .arg(KShell::quoteArg( tempFile.fileName() ),
-             KShell::quoteArg( _url.path() ));
-
-    if (restartNFSServer)
-      command +=" && exportfs -ra";
-
-    KProcess proc;
-    if (!QFileInfo(_url.path()).isWritable() || restartNFSServer)
-      proc<<KStandardDirs::findExe("kdesu") << "-d" << "-c"<<command;
-    else
-      proc.setShellCommand(command);
-
-    if (proc.execute()) {
-      return false;
-    }
-
-
-  }
-  return true;
-}
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfsfile.h filesharing//advanced/nfs/nfsfile.h
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfsfile.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfsfile.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,62 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#ifndef NFSFILE_H
-#define NFSFILE_H
-
-
-#include <kurl.h>
-#include "nfsentry.h"
-//Added by qt3to4:
-#include <QTextStream>
-#include <Q3PtrList>
-
-typedef Q3PtrList<NFSEntry> EntryList;
-typedef Q3PtrListIterator<NFSEntry> EntryIterator;
-
-class QTextStream;
-
-class NFSFile {
-public:
-  NFSFile(const KUrl & , bool readonly = true);
-  ~NFSFile();
-
-  void addEntry(NFSEntry *);
-  void removeEntry(NFSEntry *);
-  bool hasEntry(NFSEntry *);
-  NFSEntry* getEntryByPath(const QString &);
-  bool removeEntryByPath(const QString &);
-  EntryIterator getEntries();
-
-  bool save();
-  bool saveTo(const QString& fileName);
-  void saveTo(QTextStream * stream);  
-  bool load();
-
-  bool restartNFSServer;
-
-
-protected:
-  KUrl _url;
-  bool _readonly;
-  EntryList _entries;
-  NFSLineList _lines;
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfshostdlg.cpp filesharing//advanced/nfs/nfshostdlg.cpp
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfshostdlg.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfshostdlg.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,233 +0,0 @@
-/***************************************************************************
-                          nfshostdlg.cpp  -  description
-                             -------------------
-    begin                : Mon Apr 29 2002
-    copyright            : (C) 2002 by Jan Sch�er
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <qcheckbox.h>
-#include <qlayout.h>
-#include <qlineedit.h>
-#include <q3whatsthis.h>
-#include <q3groupbox.h>
-//Added by qt3to4:
-#include <QVBoxLayout>
-#include <klocale.h>
-#include <kdebug.h>
-#include <kmessagebox.h>
-
-#include <assert.h>
-
-#include "nfshostdlg.h"
-#include "hostprops.h"
-#include "nfsentry.h"
-
-
-NFSHostDlg::NFSHostDlg(QWidget* parent, HostList* hosts, NFSEntry* entry)
-  : KDialog(parent),
-  m_hosts(hosts), m_nfsEntry(entry), m_modified(false)
-{
-  setCaption(i18n("Host Properties"));
-  setButtons(Ok|Cancel);
-  setDefaultButton(Ok);
-  
-  QWidget* page = new QWidget(this);
-  setMainWidget(page);
-
-  m_gui = new HostProps(page);
-
-  QVBoxLayout *layout = new QVBoxLayout( page );
-  layout->setSpacing( 6 );
-  layout->setMargin( 0 );
-  layout->addWidget( m_gui );
-
-  connect( m_gui, SIGNAL(modified()), this, SLOT(setModified()));
-  connect(this,SIGNAL(okClicked()),this,SLOT(slotOk()));
-  init();
-
-}
-
-NFSHostDlg::~NFSHostDlg()
-{
-}
-
-void NFSHostDlg::init()
-{  
-  if (m_hosts->count()==1) {
-    NFSHost* host = m_hosts->first();
-    assert(host);
-    m_gui->nameEdit->setText(host->name);
-    m_gui->publicChk->setChecked(host->isPublic());
-
-    setHostValues(host);  
-    
-    m_gui->nameEdit->setFocus();
-  } else {
-    m_gui->nameEdit->setDisabled(true);
-    m_gui->publicChk->setDisabled(true);
-    
-    m_gui->readOnlyChk->setTristate();
-    m_gui->allSquashChk->setTristate();
-    m_gui->rootSquashChk->setTristate();
-    m_gui->hideChk->setTristate();
-    m_gui->secureChk->setTristate();
-    m_gui->secureLocksChk->setTristate();
-    m_gui->subtreeChk->setTristate();
-    m_gui->syncChk->setTristate();
-    m_gui->wdelayChk->setTristate();
-    
-    for (NFSHost* host = m_hosts->first(); host; host = m_hosts->next()) {
-         setHostValues(host);
-    }
-  }   
-}
-
-void NFSHostDlg::setHostValues(NFSHost* host) {
-    setCheckBoxValue(m_gui->readOnlyChk, ! host->readonly);
-    setCheckBoxValue(m_gui->allSquashChk, host->allSquash);
-    setCheckBoxValue(m_gui->rootSquashChk, ! host->rootSquash);
-    setCheckBoxValue(m_gui->hideChk, ! host->hide);
-    setCheckBoxValue(m_gui->secureChk, ! host->secure);
-    setCheckBoxValue(m_gui->secureLocksChk, ! host->secureLocks);
-    setCheckBoxValue(m_gui->subtreeChk, ! host->subtreeCheck);
-    setCheckBoxValue(m_gui->syncChk, host->sync);
-    setCheckBoxValue(m_gui->wdelayChk, ! host->wdelay);
-
-    setEditValue(m_gui->anonuidEdit,QString::number(host->anonuid));
-    setEditValue(m_gui->anongidEdit,QString::number(host->anongid));
-}
-
-void NFSHostDlg::setEditValue(QLineEdit* edit, const QString & value) {
-  if (edit->text().isEmpty()) 
-      return;
-      
-  if (edit->text() == "FF")      
-      edit->setText(value);
-  else 
-  if (edit->text() != value)
-      edit->clear();
-}
-
-void NFSHostDlg::setCheckBoxValue(QCheckBox* chk, bool value) {
-  if (chk->checkState() == Qt::PartiallyChecked)
-      return;
-      
-  if (chk->isChecked()) {
-    if (! value)
-      chk->setCheckState(Qt::PartiallyChecked);       
-  } else {
-    if (value)
-      chk->setChecked(true);
-  }
-}
-
-
-void NFSHostDlg::slotOk()
-{
-  if (m_hosts->count()==1) {
-    NFSHost* host = m_hosts->first();
-    if (! saveName(host))
-      return;
-
-    saveValues(host);            
-  } else {
-    for (NFSHost* host = m_hosts->first(); host; host = m_hosts->next()) {
-        saveValues(host);
-    }
-  }    
-  
-  KDialog::accept();
-}
-
-bool NFSHostDlg::saveName(NFSHost* host) {
-  if (m_gui->publicChk->isChecked()) {
-     NFSHost* publicHost = m_nfsEntry->getPublicHost();
-     if (publicHost && publicHost != host) {
-       KMessageBox::sorry(this,i18n("There already exists a public entry."),
-                          i18n("Host Already Exists"));
-       m_gui->publicChk->setChecked(false);
-       return false;
-     }
-     host->name="*";
-  } else {   
-    QString name = m_gui->nameEdit->text().trimmed();
-    if (name.isEmpty()) {
-      KMessageBox::sorry(this,
-              i18n("Please enter a hostname or an IP address."),
-              i18n("No Hostname/IP-Address"));
-      m_gui->nameEdit->setFocus();
-      return false;
-    } else {
-      NFSHost* host2 = m_nfsEntry->getHostByName(name);
-      if (host2 && host2 != host) {
-        KMessageBox::sorry(this,i18n("The host '%1' already exists.", name),
-                          i18n("Host Already Exists"));
-        m_gui->nameEdit->setFocus();
-        return false;
-      }
-    }      
-    host->name=name;
-  }
-
-  return true;
-}
-
-
-void NFSHostDlg::saveValues(NFSHost* host) {
-  
-  saveCheckBoxValue(host->readonly,m_gui->readOnlyChk,true);
-  saveCheckBoxValue(host->allSquash,m_gui->allSquashChk,false);
-  saveCheckBoxValue(host->rootSquash,m_gui->rootSquashChk,true);
-  saveCheckBoxValue(host->hide,m_gui->hideChk,true);
-  saveCheckBoxValue(host->secure,m_gui->secureChk,true);
-  saveCheckBoxValue(host->secureLocks,m_gui->secureLocksChk,true);
-  saveCheckBoxValue(host->subtreeCheck,m_gui->subtreeChk,true);
-  saveCheckBoxValue(host->sync,m_gui->syncChk,false);
-  saveCheckBoxValue(host->wdelay,m_gui->wdelayChk,true);
-
-  saveEditValue(host->anonuid,m_gui->anonuidEdit);
-  saveEditValue(host->anongid,m_gui->anongidEdit);
-}
-
-void NFSHostDlg::saveEditValue(int & value, QLineEdit* edit) {
-  if ( edit->text().isEmpty())
-      return;
-  
-  value = edit->text().toInt();
-}
-
-void NFSHostDlg::saveCheckBoxValue(bool & value, QCheckBox* chk, bool neg) {
-  if (chk->checkState() == Qt::PartiallyChecked)
-    return;
-  
-  if (neg)      
-    value = ! chk->isChecked();    
-  else
-    value = chk->isChecked();            
-}
- 
-
-
-bool NFSHostDlg::isModified() {
-  return m_modified;
-}
-
-
-void NFSHostDlg::setModified()
-{
-  m_modified = true;
-}
-
-#include "nfshostdlg.moc"
-
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/nfs/nfshostdlg.h filesharing//advanced/nfs/nfshostdlg.h
--- kdenetwork-4.6.1/filesharing/advanced/nfs/nfshostdlg.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/nfs/nfshostdlg.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,59 +0,0 @@
-/***************************************************************************
-                          nfshostdlg.h  -  description
-                             -------------------
-    begin                : Mon Apr 29 2002
-    copyright            : (C) 2002 by Jan Schäfer
-    email                : janschaefer@users.sourceforge.net
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef NFSHOSTDLG_H
-#define NFSHOSTDLG_H
-
-#include <kdialog.h>
-#include "nfsentry.h"
-
-class NFSHost;
-class HostProps;
-class NFSEntry;
-class QCheckBox;
-class QLineEdit;
-
-
-class NFSHostDlg : public KDialog
-{
-Q_OBJECT
-public: 
-	NFSHostDlg(QWidget* parent, HostList* hosts, NFSEntry* entry);
-	virtual ~NFSHostDlg();
-    bool isModified();
-protected:
-  HostList* m_hosts;
-  NFSEntry* m_nfsEntry;
-  HostProps* m_gui;
-  bool m_modified;
-  
-  void init();
-protected slots:
-  virtual void slotOk();
-  void setModified();
-  
-private:
-  void setHostValues(NFSHost* host);
-  void setEditValue(QLineEdit* edit, const QString & value);
-  void setCheckBoxValue(QCheckBox* chk, bool value);
-  bool saveName(NFSHost* host);
-  void saveValues(NFSHost* host);
-  void saveEditValue(int & value, QLineEdit* edit);
-  void saveCheckBoxValue(bool & value, QCheckBox* chk, bool neg);
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/propsdlgplugin/CMakeLists.txt filesharing//advanced/propsdlgplugin/CMakeLists.txt
--- kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/CMakeLists.txt	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/CMakeLists.txt	1970-01-01 00:00:00.000000000 +0000
@@ -1,32 +0,0 @@
-include_directories(${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/ ${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/)
-
-########### next target ###############
-
-set(fileshare_propsdlgplugin_PART_SRCS propsdlgshareplugin.cpp ${libpropsdlgplugin_common_SRCS} ${libfilesharesamba_SRCS} ${libfilesharenfs_SRCS})
-
-kde4_add_ui3_files(fileshare_propsdlgplugin_PART_SRCS
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/hostprops.ui
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/socketoptionsdlg.ui
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/userselectdlg.ui
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/groupselectdlg.ui
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/usertab.ui
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/filemodedlg.ui
-)
-
-kde4_add_ui_files(fileshare_propsdlgplugin_PART_SRCS
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/share.ui
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/expertuserdlg.ui
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/nfsdialoggui.ui
-    propertiespagegui.ui
-)
-
-
-kde4_add_plugin(fileshare_propsdlgplugin ${fileshare_propsdlgplugin_PART_SRCS})
-
-target_link_libraries(fileshare_propsdlgplugin ${KDE4_KIO_LIBS} ${KDE4_KDE3SUPPORT_LIBS})
-
-install(TARGETS fileshare_propsdlgplugin DESTINATION ${PLUGIN_INSTALL_DIR})
-
-########### install files ###############
-
-install(FILES fileshare_propsdlgplugin.desktop DESTINATION ${SERVICES_INSTALL_DIR})
diff -urN kdenetwork-4.6.1/filesharing//advanced/propsdlgplugin/propertiespage.cpp filesharing//advanced/propsdlgplugin/propertiespage.cpp
--- kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propertiespage.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propertiespage.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,659 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#include <qcheckbox.h>
-#include <qbuttongroup.h>
-#include <qfileinfo.h>
-#include <qlabel.h>
-#include <kpushbutton.h>
-#include <qtimer.h>
-
-#include <kfileshare.h>
-#include <knfsshare.h>
-#include <ksambashare.h>
-#include <klocale.h>
-#include <kurl.h>
-#include <kdebug.h>
-#include <kfile.h>
-#include <kurlrequester.h>
-#include <kmessagebox.h>
-#include <klineedit.h>
-#include <kprocess.h>
-#include <ktemporaryfile.h>
-#include <kshell.h>
-#include <KStandardDirs>
-// NFS related
-#include "../nfs/nfsfile.h"
-#include "../nfs/nfsentry.h"
-#include "../nfs/nfsdialog.h"
-
-// Samba related
-#include "../kcm_sambaconf/sambafile.h"
-#include "../kcm_sambaconf/sambashare.h"
-#include "../kcm_sambaconf/sharedlgimpl.h"
-
-#include "propertiespage.h"
-
-#define FILESHARE_DEBUG 5009
-
-PropertiesPageGUI::PropertiesPageGUI( QWidget *parent )
-    : QWidget( parent )
-{
-    setupUi( this );
-}
-
-void PropertiesPageGUI::changedSlot()
-{
-    m_hasChanged = true;
-    emit changed();
-}
-
-void PropertiesPageGUI::moreNFSBtn_clicked()
-{
-
-}
-
-bool PropertiesPageGUI::hasChanged() const
-{
-    return m_hasChanged;
-}
-
-
-void PropertiesPageGUI::sambaChkToggled( bool )
-{
-
-}
-
-void PropertiesPageGUI::publicSambaChkToggled( bool b)
-{
-    if (!b) {
-	writableSambaChk->setChecked(false);
-    }
-}
-
-void PropertiesPageGUI::publicNFSChkToggled( bool b)
-{
-    if (!b) {
-	writableNFSChk->setChecked(false);
-    }
-
-}
-
-void PropertiesPageGUI::moreSambaBtnClicked()
-{
-
-}
-
-PropertiesPage::PropertiesPage(QWidget* parent, const KFileItemList &items,bool enterUrl)
-  : PropertiesPageGUI(parent),
-  m_enterUrl(enterUrl),
-  m_items(items),
-  m_nfsFile(0),
-  m_nfsEntry(0),
-  m_sambaFile(0),
-  m_sambaShare(0),
-  m_sambaChanged(false),
-  m_nfsChanged(false),
-  m_loaded(false)
-{
-  if (m_items.isEmpty()) {
-    shareFrame->setDisabled(true);
-  } else {
-    shareFrame->setEnabled(true);
-    // currently only one dir is allowed
-    m_path = m_items.first().url().path(KUrl::AddTrailingSlash);
-  }
-
-  if (m_enterUrl) {
-    shareChk->hide();
-    urlRq->setMode(KFile::Directory |
-                   KFile::ExistingOnly |
-                   KFile::LocalOnly );
-    urlRq->setUrl(m_path);
-    connect( urlRq, SIGNAL(textChanged(const QString&)),
-             this, SLOT(urlRqTextChanged(const QString&)));
-  } else {
-    urlRq->hide();
-    folderLbl->hide();
-  }
-
-
-  enableSamba(false,i18n("Reading Samba configuration file ..."));
-  enableNFS(false,i18n("Reading NFS configuration file ..."));
-
-
-  //QTimer::singleShot(1, this, SLOT(load));
-  load();
-}
-
-PropertiesPage::~PropertiesPage()
-{
-  delete m_nfsFile;
-  delete m_sambaFile;
-}
-
-void PropertiesPage::urlRqTextChanged(const QString&) {
-  if (!m_enterUrl)
-      return;
-
-  KUrl url(urlRq->url());
-  if (url.isLocalFile()) {
-      QFileInfo info(url.path(KUrl::AddTrailingSlash));
-      if (info.exists() &&
-          info.isDir())
-      {
-         shareFrame->setEnabled(true);
-         return;
-      }
-  }
-
-  shareFrame->setDisabled(true);
-}
-
-void PropertiesPage::load() {
-  loadNFS();
-  loadSamba();
-
-  bool nfsShared = KNFSShare::instance()->isDirectoryShared(m_path);
-  bool sambaShared = KSambaShare::instance()->isDirectoryShared(m_path);
-
-  nfsChk->setChecked(nfsShared);
-  sambaChk->setChecked(sambaShared);
-
-  if (!m_enterUrl)
-      shareChk->setChecked(nfsShared || sambaShared);
-
-  m_loaded = true;
-}
-
-void PropertiesPage::enableNFS(bool b, const QString & message) {
-   nfsChk->setEnabled(b);
-   nfsGrp->setEnabled(b);
-   nfsChk->setToolTip(message);
-   nfsGrp->setToolTip(message);
-}
-
-void PropertiesPage::enableSamba(bool b, const QString & message) {
-   sambaChk->setEnabled(b);
-   sambaGrp->setEnabled(b);
-   sambaChk->setToolTip(message);
-   sambaGrp->setToolTip(message);
-}
-
-
-bool PropertiesPage::save() {
-  if (!hasChanged()) {
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: nothing changed.";
-      return true;
-  }
-
-  if (!checkURL()) {
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: url check failed.";
-      return false;
-  }
-
-  updateNFSEntry();
-  if (!updateSambaShare()) {
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: updateSambaShare failed!";
-      return false;
-  }
-
-  return save(m_nfsFile, m_sambaFile, m_nfsChanged, m_sambaChanged);
-}
-
-bool PropertiesPage::save(NFSFile* nfsFile, SambaFile* sambaFile, bool nfs, bool samba)
-{
-  QString nfsFileName = KNFSShare::instance()->exportsPath();
-  bool nfsNeedsKDEsu = false;
-
-  if (nfs) {
-      if (QFileInfo(nfsFileName).isWritable()) {
-          nfsFile->saveTo(nfsFileName);
-      } else {
-          nfsNeedsKDEsu = true;
-          kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: nfs needs kdesu.";
-      }
-  } else
-    kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: nfs has not changed.";
-
-
-  QString sambaFileName = KSambaShare::instance()->smbConfPath();
-  bool sambaNeedsKDEsu = false;
-  if (samba) {
-      if (QFileInfo(sambaFileName).isWritable()) {
-          sambaFile->saveTo(sambaFileName);
-      } else {
-          sambaNeedsKDEsu = true;
-          kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: samba needs kdesu.";
-      }
-  } else
-    kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: samba has not changed.";
-
-
-  if (nfsNeedsKDEsu || sambaNeedsKDEsu) {
-     KTemporaryFile nfsTempFile;
-     nfsTempFile.open();
-     KTemporaryFile sambaTempFile;
-     sambaTempFile.open();
-
-     KProcess proc;
-
-     QString command;
-
-     if (nfsNeedsKDEsu) {
-         nfsFile->saveTo(nfsTempFile.fileName());
-         command += QString("cp %1 %2;exportfs -ra;")
-        .arg(KShell::quoteArg( nfsTempFile.fileName() ),
-             KShell::quoteArg( nfsFileName ));
-     }
-
-     if (sambaNeedsKDEsu) {
-         sambaFile->saveTo(sambaTempFile.fileName());
-         command += QString("cp %1 %2;")
-        .arg(KShell::quoteArg( sambaTempFile.fileName() ),
-             KShell::quoteArg( sambaFileName ));
-     }
-
-     proc<<KStandardDirs::findExe("kdesu") << "-d" << "-c"<<command;
-
-     if (proc.execute()) {
-       kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: kdesu command failed";
-       return false;
-     }
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::save: Saving successful.";
-  return true;
-}
-
-bool PropertiesPage::saveSamba() {
-  if (!updateSambaShare()) {
-    return false;
-  }
-
-  if (m_sambaChanged) {
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::saveSamba: saving...";
-      return m_sambaFile->save();
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::saveSamba: samba has not changed.";
-  return true;
-}
-
-bool PropertiesPage::saveNFS() {
-  updateNFSEntry();
-  if (!m_nfsChanged) {
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::saveNFS: NFS did not change.";
-      return true;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::saveNFS: saving...";
-  return m_nfsFile->save();
-}
-
-
-
-
-bool PropertiesPage::checkURL() {
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL";
-
-  if (!m_enterUrl)
-      return true;
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: enterUrl=true";
-
-  KUrl url(urlRq->url());
-  QString path = url.path(KUrl::AddTrailingSlash);
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: m_path='"
-        << m_path << "'" << endl;
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: path='"
-        << path << "'" << endl;
-
-  if (m_path == path) {
-    kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: paths are equal";
-    return true;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: different path";
-
-
-  if (!url.isValid()) {
-      KMessageBox::sorry(this,i18n("Please enter a valid path."));
-      urlRq->setFocus();
-      urlRq->lineEdit()->selectAll();
-      return false;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: url is valid";
-
-  if (!url.isLocalFile()) {
-      KMessageBox::sorry(this,i18n("Only local folders can be shared."));
-      urlRq->setFocus();
-      urlRq->lineEdit()->selectAll();
-      return false;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: url is local file";
-
-  QFileInfo info(path);
-
-  if (!info.exists())
-  {
-      KMessageBox::sorry(this,i18n("The folder does not exists."));
-      urlRq->setFocus();
-      urlRq->lineEdit()->selectAll();
-      return false;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: folder exits";
-
-
-  if (!info.isDir())
-  {
-      KMessageBox::sorry(this,i18n("Only folders can be shared."));
-      urlRq->setFocus();
-      urlRq->lineEdit()->selectAll();
-      return false;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: path is dir";
-
-  if (KSambaShare::instance()->isDirectoryShared(path) ||
-      KNFSShare::instance()->isDirectoryShared(path))
-  {
-      KMessageBox::sorry(this,i18n("The folder is already shared."));
-      urlRq->setFocus();
-      urlRq->lineEdit()->selectAll();
-      return false;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::checkURL: folder not shared yet";
-  m_path = path;
-
-  return true;
-}
-
-bool PropertiesPage::loadNFS() {
-  if (!KFileShare::nfsEnabled()) {
-      enableNFS(false,i18n("The administrator does not allow sharing with NFS."));
-      return false;
-  }
-
-  delete m_nfsFile;
-  m_nfsFile = new NFSFile(KNFSShare::instance()->exportsPath());
-
-  if (!m_nfsFile->load()) {
-      enableNFS(false,i18n("Error: could not read NFS configuration file."));
-      return false;
-  }
-
-  enableNFS(true,"");
-
-  loadNFSEntry();
-  return true;
-}
-
-void PropertiesPage::loadNFSEntry() {
-  m_nfsEntry = m_nfsFile->getEntryByPath(m_path);
-  m_nfsChanged = false;
-
-  if (!m_nfsEntry) {
-    nfsChk->setChecked(false);
-    return;
-  }
-
-
-  NFSHost* publicHost = m_nfsEntry->getPublicHost();
-
-  if (publicHost) {
-    publicNFSChk->setChecked(true);
-    writableNFSChk->setChecked(!publicHost->readonly);
-  } else
-    publicNFSChk->setChecked(false);
-}
-
-void PropertiesPage::updateNFSEntry() {
-  if (shareChk->isChecked() &&
-      nfsChk->isChecked())
-  {
-    if (!m_nfsEntry) {
-        m_nfsEntry = new NFSEntry(m_path);
-        m_nfsFile->addEntry(m_nfsEntry);
-        m_nfsChanged = true;
-    }
-
-    NFSHost* publicHost = m_nfsEntry->getPublicHost();
-
-    if (publicNFSChk->isChecked()) {
-      if (!publicHost) {
-          publicHost = new NFSHost("*");
-          publicHost->allSquash=true;
-          m_nfsEntry->addHost(publicHost);
-          m_nfsChanged = true;
-      }
-
-      if (publicHost->readonly != !writableNFSChk->isChecked()) {
-          publicHost->readonly  = !writableNFSChk->isChecked();
-          m_nfsChanged = true;
-      }
-    } else {
-      if (publicHost) {
-          m_nfsEntry->removeHost(publicHost);
-          m_nfsChanged = true;
-      }
-    }
-  } else { // unshare
-    if (m_nfsEntry) {
-      m_nfsFile->removeEntry(m_nfsEntry);
-      m_nfsEntry = 0;
-      m_nfsChanged = true;
-    }
-  }
-}
-
-void PropertiesPage::moreNFSBtn_clicked() {
-  updateNFSEntry();
-  NFSDialog* dlg = new NFSDialog(this,m_nfsEntry);
-  if (dlg->exec()==QDialog::Accepted &&
-      dlg->modified())
-  {
-    kDebug(FILESHARE_DEBUG) << "NFSDialog::ok";
-    loadNFSEntry();
-    m_nfsChanged = true;
-    emit changed();
-  }
-  delete dlg;
-}
-
-bool PropertiesPage::loadSamba() {
-  if (!KFileShare::sambaEnabled()) {
-      enableSamba(false,i18n("The administrator does not allow sharing with Samba."));
-      return false;
-  }
-
-  delete m_sambaFile;
-  m_sambaFile = new SambaFile(KSambaShare::instance()->smbConfPath(), false);
-  if (! m_sambaFile->load()) {
-      enableSamba(false,i18n("Error: could not read Samba configuration file."));
-      return false;
-  }
-
-  enableSamba(true,"");
-  QString shareName = m_sambaFile->findShareByPath(m_path);
-  if (shareName.isNull()) {
-      sambaChk->setChecked(false);
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::loadSamba: shareName is null!"
-          << endl;
-      return false;
-  }
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::loadSamba: shareName="
-        << shareName << endl;
-
-  m_sambaShare = m_sambaFile->getShare(shareName);
-
-  loadSambaShare();
-  return true;
-}
-
-
-void PropertiesPage::loadSambaShare() {
-  if (! m_sambaShare) {
-      sambaChk->setChecked(false);
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::loadSambaShare: m_sambaShare is null" << endl;
-      return;
-  }
-
-  if (m_sambaShare->getBoolValue("public")) {
-    publicSambaChk->setChecked(true);
-    writableSambaChk->setChecked(m_sambaShare->getBoolValue("writable"));
-  } else
-    publicSambaChk->setChecked(false);
-
-
-  sambaNameEdit->setText(m_sambaShare->getName() );
-}
-
-void PropertiesPage::sambaChkToggled( bool b ) {
-  if (!m_loaded)
-      return;
-
-  if (sambaNameEdit->text().isEmpty())
-      sambaNameEdit->setText(getNewSambaName());
-}
-
-bool PropertiesPage::updateSambaShare() {
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::updateSambaShare";
-
-  if (shareChk->isChecked() &&
-      sambaChk->isChecked())
-  {
-    if (m_enterUrl) {
-      if (m_path != urlRq->url().path()) {
-        m_path = urlRq->url().path();
-      }
-    }
-
-    kDebug(FILESHARE_DEBUG) << "PropertiesPage::updateSambaShare: m_path"
-          << m_path << endl;
-
-    if (!m_sambaShare) {
-      createNewSambaShare();
-      m_sambaChanged = true;
-    }
-
-    setSambaShareBoolValue("public", publicSambaChk);
-    setSambaShareBoolValue("writable", writableSambaChk);
-
-    if (sambaNameEdit->text().isEmpty()) {
-        KMessageBox::sorry(this, i18n("You have to enter a name for the Samba share."));
-        sambaNameEdit->setFocus();
-        return false;
-    }
-
-    if (sambaNameEdit->text() != m_sambaShare->getName()) {
-      SambaShare* otherShare = m_sambaFile->getShare(sambaNameEdit->text());
-      if (otherShare && otherShare != m_sambaShare) {
-        // There is another Share with the same name
-        KMessageBox::sorry(this, i18n("<qt>There is already a share with the name <strong>%1</strong>.<br /> Please choose another name.</qt>", sambaNameEdit->text()));
-        sambaNameEdit->selectAll();
-        sambaNameEdit->setFocus();
-        return false;
-      }
-      m_sambaShare->setName(sambaNameEdit->text());
-      m_sambaChanged = true;
-    }
-
-    if (m_sambaShare->getValue("path") != m_path) {
-      m_sambaShare->setValue("path", m_path);
-      m_sambaChanged = true;
-    }
-
-  } else {
-    if (m_sambaShare) {
-      kDebug(FILESHARE_DEBUG) << "PropertiesPage::updateSambaShare: removing share";
-      m_sambaFile->removeShare(m_sambaShare);
-      m_sambaShare = 0;
-      m_sambaChanged = true;
-    }
-  }
-  return true;
-}
-
-void PropertiesPage::setSambaShareBoolValue(const QString & value,
-                          QCheckBox* chk)
-{
-  bool v = m_sambaShare->getBoolValue(value);
-  if (v == chk->isChecked())
-      return;
-
-  m_sambaShare->setValue(value,chk->isChecked());
-  m_sambaChanged = true;
-}
-
-QString PropertiesPage::getNewSambaName() {
-  QString path = m_path;
-  if (path.isNull() && m_enterUrl) {
-    path = urlRq->url().path();
-  }
-
-  QString shareName = KUrl(path).fileName();
-
-  if (!sambaNameEdit->text().isEmpty())
-      shareName = sambaNameEdit->text();
-
-  // Windows could have problems with longer names
-  shareName = shareName.left(12).toUpper();
-
-  if ( m_sambaFile->getShare(shareName) )
-      shareName = m_sambaFile->getUnusedName(shareName);
-
-  return shareName;
-}
-
-void PropertiesPage::createNewSambaShare() {
-
-  m_sambaShare = m_sambaFile->newShare(getNewSambaName(),m_path);
-
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::createNewSambaShare: "
-              << m_sambaShare->getName() << endl;
-
-}
-
-
-void PropertiesPage::moreSambaBtnClicked() {
-  kDebug(FILESHARE_DEBUG) << "PropertiesPage::moreSambaBtnClicked()";
-  updateSambaShare();
-  ShareDlgImpl* dlg = new ShareDlgImpl(this,m_sambaShare);
-  dlg->directoryGrp->hide();
-  dlg->pixmapFrame->hide();
-  if (dlg->exec() == QDialog::Accepted &&
-      dlg->hasChanged()) {
-      m_sambaChanged = true;
-      changedSlot();
-      loadSambaShare();
-  }
-  delete dlg;
-}
-
-#include "propertiespage.moc"
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/propsdlgplugin/propertiespagegui.ui filesharing//advanced/propsdlgplugin/propertiespagegui.ui
--- kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propertiespagegui.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propertiespagegui.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,385 +0,0 @@
-<ui version="4.0" stdsetdef="1" >
-  <class>PropertiesPageGUI</class>
-  <widget class="QWidget" name="PropertiesPageGUI" >
-    <property name="geometry" >
-      <rect>
-        <x>0</x>
-        <y>0</y>
-        <width>433</width>
-        <height>348</height>
-      </rect>
-    </property>
-    <layout class="QVBoxLayout" >
-      <property name="margin" >
-        <number>0</number>
-      </property>
-      <item>
-        <layout class="QHBoxLayout" >
-          <item>
-            <widget class="QLabel" name="folderLbl" >
-              <property name="text" >
-                <string>Folder:</string>
-              </property>
-              <property name="wordWrap" >
-                <bool>false</bool>
-              </property>
-            </widget>
-          </item>
-          <item>
-            <widget class="KUrlRequester" name="urlRq" />
-          </item>
-        </layout>
-      </item>
-      <item>
-        <widget class="QCheckBox" name="shareChk" >
-          <property name="text" >
-            <string>S&amp;hare this folder in the local network</string>
-          </property>
-          <property name="checked" >
-            <bool>true</bool>
-          </property>
-        </widget>
-      </item>
-      <item>
-        <widget class="Line" name="line1" >
-          <property name="frameShape" >
-            <enum>QFrame::HLine</enum>
-          </property>
-          <property name="frameShadow" >
-            <enum>QFrame::Sunken</enum>
-          </property>
-        </widget>
-      </item>
-      <item>
-        <widget class="Q3Frame" name="shareFrame" >
-          <property name="frameShape" >
-            <enum>NoFrame</enum>
-          </property>
-          <property name="frameShadow" >
-            <enum>Raised</enum>
-          </property>
-          <layout class="QVBoxLayout" >
-            <property name="margin" >
-              <number>0</number>
-            </property>
-            <item>
-              <widget class="QCheckBox" name="nfsChk" >
-                <property name="text" >
-                  <string>Share with &amp;NFS (Linux/UNIX)</string>
-                </property>
-                <property name="checked" >
-                  <bool>true</bool>
-                </property>
-              </widget>
-            </item>
-            <item>
-              <widget class="Q3GroupBox" name="nfsGrp" >
-                <property name="title" >
-                  <string>NFS Options</string>
-                </property>
-                <layout class="QVBoxLayout" >
-                  <item>
-                    <layout class="QHBoxLayout" >
-                      <item>
-                        <widget class="QCheckBox" name="publicNFSChk" >
-                          <property name="text" >
-                            <string>Pu&amp;blic</string>
-                          </property>
-                          <property name="checked" >
-                            <bool>true</bool>
-                          </property>
-                        </widget>
-                      </item>
-                      <item>
-                        <widget class="QCheckBox" name="writableNFSChk" >
-                          <property name="text" >
-                            <string>W&amp;ritable</string>
-                          </property>
-                          <property name="checked" >
-                            <bool>false</bool>
-                          </property>
-                        </widget>
-                      </item>
-                      <item>
-                        <spacer name="spacer5" >
-                          <property name="sizeHint" >
-                            <size>
-                              <width>40</width>
-                              <height>20</height>
-                            </size>
-                          </property>
-                          <property name="sizeType" >
-                            <enum>QSizePolicy::Expanding</enum>
-                          </property>
-                          <property name="orientation" >
-                            <enum>Qt::Horizontal</enum>
-                          </property>
-                        </spacer>
-                      </item>
-                    </layout>
-                  </item>
-                  <item>
-                    <layout class="QHBoxLayout" >
-                      <item>
-                        <widget class="KPushButton" name="moreNFSBtn" >
-                          <property name="text" >
-                            <string>More NFS Op&amp;tions</string>
-                          </property>
-                        </widget>
-                      </item>
-                      <item>
-                        <spacer name="spacer3" >
-                          <property name="sizeHint" >
-                            <size>
-                              <width>156</width>
-                              <height>20</height>
-                            </size>
-                          </property>
-                          <property name="sizeType" >
-                            <enum>QSizePolicy::Expanding</enum>
-                          </property>
-                          <property name="orientation" >
-                            <enum>Qt::Horizontal</enum>
-                          </property>
-                        </spacer>
-                      </item>
-                    </layout>
-                  </item>
-                </layout>
-              </widget>
-            </item>
-            <item>
-              <widget class="QCheckBox" name="sambaChk" >
-                <property name="text" >
-                  <string>Share with S&amp;amba (Microsoft(R) Windows(R))</string>
-                </property>
-                <property name="checked" >
-                  <bool>true</bool>
-                </property>
-              </widget>
-            </item>
-            <item>
-              <widget class="Q3GroupBox" name="sambaGrp" >
-                <property name="title" >
-                  <string>Samba Options</string>
-                </property>
-                <layout class="QVBoxLayout" >
-                  <item>
-                    <layout class="QHBoxLayout" >
-                      <item>
-                        <widget class="QLabel" name="textLabel1" >
-                          <property name="text" >
-                            <string>Name:</string>
-                          </property>
-                          <property name="wordWrap" >
-                            <bool>false</bool>
-                          </property>
-                        </widget>
-                      </item>
-                      <item>
-                        <widget class="KLineEdit" name="sambaNameEdit" />
-                      </item>
-                    </layout>
-                  </item>
-                  <item>
-                    <layout class="QHBoxLayout" >
-                      <item>
-                        <widget class="QCheckBox" name="publicSambaChk" >
-                          <property name="text" >
-                            <string>P&amp;ublic</string>
-                          </property>
-                          <property name="checked" >
-                            <bool>true</bool>
-                          </property>
-                        </widget>
-                      </item>
-                      <item>
-                        <widget class="QCheckBox" name="writableSambaChk" >
-                          <property name="text" >
-                            <string>&amp;Writable</string>
-                          </property>
-                          <property name="checked" >
-                            <bool>false</bool>
-                          </property>
-                        </widget>
-                      </item>
-                      <item>
-                        <spacer name="spacer4_3" >
-                          <property name="sizeHint" >
-                            <size>
-                              <width>40</width>
-                              <height>20</height>
-                            </size>
-                          </property>
-                          <property name="sizeType" >
-                            <enum>QSizePolicy::Expanding</enum>
-                          </property>
-                          <property name="orientation" >
-                            <enum>Qt::Horizontal</enum>
-                          </property>
-                        </spacer>
-                      </item>
-                    </layout>
-                  </item>
-                  <item>
-                    <layout class="QHBoxLayout" >
-                      <item>
-                        <widget class="KPushButton" name="moreSambaBtn" >
-                          <property name="text" >
-                            <string>Mor&amp;e Samba Options</string>
-                          </property>
-                        </widget>
-                      </item>
-                      <item>
-                        <spacer name="spacer4_2" >
-                          <property name="sizeHint" >
-                            <size>
-                              <width>40</width>
-                              <height>20</height>
-                            </size>
-                          </property>
-                          <property name="sizeType" >
-                            <enum>QSizePolicy::Expanding</enum>
-                          </property>
-                          <property name="orientation" >
-                            <enum>Qt::Horizontal</enum>
-                          </property>
-                        </spacer>
-                      </item>
-                    </layout>
-                  </item>
-                </layout>
-              </widget>
-            </item>
-          </layout>
-        </widget>
-      </item>
-      <item>
-        <spacer name="spacer4" >
-          <property name="sizeHint" >
-            <size>
-              <width>20</width>
-              <height>1</height>
-            </size>
-          </property>
-          <property name="sizeType" >
-            <enum>QSizePolicy::Expanding</enum>
-          </property>
-          <property name="orientation" >
-            <enum>Qt::Vertical</enum>
-          </property>
-        </spacer>
-      </item>
-    </layout>
-  </widget>
-    <connections>
-    <connection>
-      <sender>sambaChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>sambaGrp</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>nfsChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>nfsGrp</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>publicSambaChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>writableSambaChk</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>publicNFSChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>writableNFSChk</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>shareChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>shareFrame</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>shareChk</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>sambaChk</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>publicSambaChk</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>writableSambaChk</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>nfsChk</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>publicNFSChk</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>writableNFSChk</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>moreNFSBtn</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>moreNFSBtn_clicked()</slot>
-    </connection>
-    <connection>
-      <sender>sambaChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>sambaChkToggled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>sambaNameEdit</sender>
-      <signal>textChanged(QString)</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>publicSambaChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>publicSambaChkToggled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>publicNFSChk</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>publicNFSChkToggled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>moreSambaBtn</sender>
-      <signal>clicked()</signal>
-      <receiver>PropertiesPageGUI</receiver>
-      <slot>moreSambaBtnClicked()</slot>
-    </connection>
-  </connections>
-</ui>
diff -urN kdenetwork-4.6.1/filesharing//advanced/propsdlgplugin/propertiespage.h filesharing//advanced/propsdlgplugin/propertiespage.h
--- kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propertiespage.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propertiespage.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,108 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#ifndef PROPERTIESPAGE_H
-#define PROPERTIESPAGE_H
-
-#include <kfileitem.h>
-#include "ui_propertiespagegui.h"
-
-class NFSFile;
-class NFSEntry;
-class SambaFile;
-class SambaShare;
-class QCheckBox;
-
-class PropertiesPageGUI : public QWidget, public Ui::PropertiesPageGUI
-{
-Q_OBJECT
-public:
-    PropertiesPageGUI( QWidget *parent );
-    bool hasChanged() const ;
-public slots:
-    void changedSlot();
-    virtual void moreNFSBtn_clicked();
-    virtual void sambaChkToggled( bool );
-    void publicSambaChkToggled( bool b );
-    void publicNFSChkToggled( bool b );
-    virtual void moreSambaBtnClicked();
-signals:
-    void changed();
-private:
-    bool m_hasChanged;
-};
-
-
-
-class PropertiesPage : public PropertiesPageGUI
-{
-Q_OBJECT
-public:
-  PropertiesPage(QWidget* parent, const KFileItemList &items, bool enterUrl=false);
-  virtual ~PropertiesPage();
-
-  bool save();
-
-  static bool save(NFSFile* nfsFile, SambaFile* sambFile, bool nfs, bool samba);
-public slots:
-  void load();
-
-protected:
-
-  bool m_enterUrl;
-  QString m_path;
-  KFileItemList m_items;
-  NFSFile *m_nfsFile;
-  NFSEntry *m_nfsEntry;
-
-  SambaFile *m_sambaFile;
-  SambaShare *m_sambaShare;
-  bool m_sambaChanged;
-  bool m_nfsChanged;
-  bool m_loaded;
-
-protected slots:
-  // inherited from PropertiesPageGUI
-  virtual void moreNFSBtn_clicked();
-  virtual void moreSambaBtnClicked();
-  virtual void sambaChkToggled( bool b );
-  virtual void urlRqTextChanged(const QString&);
-
-private:
-  bool loadNFS();
-  void loadNFSEntry();
-  void updateNFSEntry();
-  bool saveNFS();
-
-  bool loadSamba();
-  void loadSambaShare();
-  bool updateSambaShare();
-  bool saveSamba();
-
-  bool checkURL();
-  void setSambaShareBoolValue(const QString & value, QCheckBox* chk);
-  void createNewSambaShare();
-  QString getNewSambaName();
-
-  void enableNFS(bool b,const QString & message);
-  void enableSamba(bool b,const QString & message);
-
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//advanced/propsdlgplugin/propsdlgshareplugin.cpp filesharing//advanced/propsdlgplugin/propsdlgshareplugin.cpp
--- kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propsdlgshareplugin.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propsdlgshareplugin.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,126 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-#include <qstring.h>
-#include <kvbox.h>
-#include <qlayout.h>
-#include <qlabel.h>
-#include <QProcess>
-
-#include <kgenericfactory.h>
-#include <kdebug.h>
-#include <kpushbutton.h>
-#include <kfileshare.h>
-#include <kmessagebox.h>
-#include <kstandarddirs.h>
-#include <kdialog.h>
-#include <kglobal.h>
-
-#include "propertiespage.h"
-#include "propsdlgshareplugin.h"
-
-typedef KGenericFactory<PropsDlgSharePlugin, KPropertiesDialog> PropsDlgSharePluginFactory;
-
-K_EXPORT_COMPONENT_FACTORY( fileshare_propsdlgplugin,
-                            PropsDlgSharePluginFactory("fileshare_propsdlgplugin") )
-
-class PropsDlgSharePlugin::Private                            
-{
-  public:
-    PropertiesPage* page; 
-};
-                            
-PropsDlgSharePlugin::PropsDlgSharePlugin( KPropertiesDialog *dlg,
-                    const QStringList & )
-  : KPropertiesDialogPlugin(dlg), d(0)
-{
-  KGlobal::locale()->insertCatalog("kfileshare");                            
-                            
-  if (KFileShare::shareMode() == KFileShare::Simple) {     
-      kDebug(5009) << "PropsDlgSharePlugin: Sharing mode is simple. Aborting.";
-      return;
-  }
-
-  KVBox *vbox = new KVBox();
-  properties->addPage(vbox, i18n("&Share"));
-  properties->setFileSharingPage(vbox);
-
-  if (KFileShare::authorization() == KFileShare::UserNotAllowed) {
-  
-        QWidget* widget = new QWidget( vbox );
-        QVBoxLayout * vLayout = new QVBoxLayout( widget );
-        vLayout->setSpacing( KDialog::spacingHint() );
-        vLayout->setMargin( 0 );
-        
-        
-        if (KFileShare::sharingEnabled()) {
-          vLayout->addWidget(
-              new QLabel( i18n("You need to be authorized to share directories."), 
-                          widget ));
-        } else {
-          vLayout->addWidget(
-              new QLabel( i18n("File sharing is disabled."), widget));
-        }                    
-                    
-        KPushButton* btn = new KPushButton( i18n("Configure File Sharing..."), widget );
-        connect( btn, SIGNAL( clicked() ), SLOT( slotConfigureFileSharing() ) );
-        btn->setDefault(false);
-        QHBoxLayout* hBox = new QHBoxLayout( (QWidget *)0L );
-        hBox->addWidget( btn, 0, Qt::AlignLeft );
-        vLayout->addLayout(hBox);
-        vLayout->addStretch( 10 ); // align items on top
-        return;
-  }                    
-       
-
-  d = new Private();
-  
-  d->page = new PropertiesPage(vbox, properties->items(),false);
-  connect(d->page, SIGNAL(changed()), 
-          this, SIGNAL(changed()));
-  
-  kDebug(5009) << "Fileshare properties dialog plugin loaded";
-  
-}                            
-
-void PropsDlgSharePlugin::slotConfigureFileSharing()
-{
-    QStringList lst;
-    lst<<"kcmshell4" << "fileshare";
-    QProcess::startDetached(KStandardDirs::findExe("kdesu"),lst);
-}
-
-
-PropsDlgSharePlugin::~PropsDlgSharePlugin()
-{
-  delete d;
-}
-
-void PropsDlgSharePlugin::applyChanges() 
-{
-  if (!d->page->save()) {
-//    KMessageBox::sorry(d->page,
-//                i18n("Saving the changes failed"));
-
-    properties->abortApplying();
-  }
-}
-
-
-#include "propsdlgshareplugin.moc"
-
diff -urN kdenetwork-4.6.1/filesharing//advanced/propsdlgplugin/propsdlgshareplugin.h filesharing//advanced/propsdlgplugin/propsdlgshareplugin.h
--- kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propsdlgshareplugin.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/advanced/propsdlgplugin/propsdlgshareplugin.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,42 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#ifndef PROPSDLGPLUGIN_PROPSDLGSHAREPLUGIN_H
-#define PROPSDLGPLUGIN_PROPSDLGSHAREPLUGIN_H
-
-#include <kpropertiesdialog.h>
-
-class PropsDlgSharePlugin : public KPropertiesDialogPlugin
-{
-Q_OBJECT
-public:
-  PropsDlgSharePlugin( KPropertiesDialog *dlg, const QStringList & );
-  virtual ~PropsDlgSharePlugin();
-  virtual void applyChanges();
-
-protected slots:
-    void slotConfigureFileSharing();
-  
-private:
-  class Private;
-  Private *d;
-    
-};
-
-#endif // PROPSDLGPLUGIN_PROPSDLGSHAREPLUGIN_H
diff -urN kdenetwork-4.6.1/filesharing//CMakeLists.txt filesharing//CMakeLists.txt
--- kdenetwork-4.6.1/filesharing/CMakeLists.txt	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/CMakeLists.txt	2011-03-01 14:32:46.827068080 +0000
@@ -1,45 +1 @@
-add_definitions ( -DQT3_SUPPORT -DQT3_SUPPORT_WARNINGS)
-
-include_directories(
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/propsdlgplugin/
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/
-                ${CMAKE_BINARY_DIR}/filesharing/simple/
-                ${CMAKE_BINARY_DIR}/advanced/propsdlgplugin/
-		)
-
-set(libfilesharesamba_SRCS
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/sambafile.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/sharedlgimpl.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/sambashare.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/common.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/usertabimpl.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/filemodedlgimpl.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/smbpasswdfile.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/passwd.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/hiddenfileview.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/dictmanager.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/qmultichecklistitem.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/smbconfconfigwidget.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/linuxpermissionchecker.cpp
-)
-
-set(libfilesharenfs_SRCS
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/nfsdialog.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/nfshostdlg.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/nfsfile.cpp
-    ${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/nfsentry.cpp
-    )
-
-set(fileshare_propsdlgplugin_SRCS
-	${CMAKE_SOURCE_DIR}/filesharing/advanced/propsdlgplugin/propsdlgshareplugin.cpp
-	)
-
-set(libpropsdlgplugin_common_SRCS 
-		    ${CMAKE_SOURCE_DIR}/filesharing/advanced/propsdlgplugin/propertiespage.cpp)
-
-
-add_subdirectory( advanced ) 
-add_subdirectory( simple ) 
-
-
+add_subdirectory(samba)
diff -urN kdenetwork-4.6.1/filesharing//samba/CMakeLists.txt filesharing//samba/CMakeLists.txt
--- kdenetwork-4.6.1/filesharing/samba/CMakeLists.txt	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/CMakeLists.txt	2011-03-01 14:32:46.827068080 +0000
@@ -0,0 +1 @@
+add_subdirectory(filepropertiesplugin)
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/CMakeLists.txt filesharing//samba/filepropertiesplugin/CMakeLists.txt
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/CMakeLists.txt	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/CMakeLists.txt	2011-03-01 14:32:46.827068080 +0000
@@ -0,0 +1,16 @@
+########### next target ###############
+
+set(sambausershareplugin_PART_SRCS sambausershareplugin.cpp delegate.cpp model.cpp)
+
+kde4_add_ui_files(sambausershareplugin_PART_SRCS sambausershareplugin.ui)
+
+
+kde4_add_plugin(sambausershareplugin ${sambausershareplugin_PART_SRCS})
+
+target_link_libraries(sambausershareplugin ${KDE4_KIO_LIBS})
+
+install(TARGETS sambausershareplugin DESTINATION ${PLUGIN_INSTALL_DIR})
+
+########### install files ###############
+
+install(FILES sambausershareplugin.desktop DESTINATION ${SERVICES_INSTALL_DIR})
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/delegate.cpp filesharing//samba/filepropertiesplugin/delegate.cpp
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/delegate.cpp	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/delegate.cpp	2011-03-01 14:32:46.827068080 +0000
@@ -0,0 +1,80 @@
+/*
+ * Copyright 2011  Rodrigo Belem <rclbelem@gmail.com>
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation; either version 2 of
+ * the License or (at your option) version 3 or any later version
+ * accepted by the membership of KDE e.V. (or its successor approved
+ * by the membership of KDE e.V.), which shall act as a proxy
+ * defined in Section 14 of version 3 of the license.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+#include <QComboBox>
+#include <klocale.h>
+
+#include "delegate.h"
+
+UserPermissionDelegate::UserPermissionDelegate(QObject *parent)
+    : QItemDelegate(parent)
+{
+}
+
+QWidget *UserPermissionDelegate::createEditor(QWidget *parent,
+        const QStyleOptionViewItem & /* option */,
+        const QModelIndex &index) const
+{
+    if (index.column() != 1) {
+        return 0;
+    }
+
+    QComboBox *comboBox = new QComboBox(parent);
+    comboBox->addItem(i18n("---"));
+    comboBox->addItem(i18n("Full Control"), QLatin1String("F"));
+    comboBox->addItem(i18n("Read Only"), QLatin1String("R"));
+    comboBox->addItem(i18n("Deny"), QLatin1String("D"));
+
+    connect(comboBox, SIGNAL(activated(int)), this, SLOT(emitCommitData()));
+
+    return comboBox;
+}
+
+void UserPermissionDelegate::setEditorData(QWidget *editor,
+        const QModelIndex &index) const
+{
+    QComboBox *comboBox = qobject_cast<QComboBox *>(editor);
+    if (!comboBox || (index.column() != 1)) {
+        return;
+    }
+
+    int pos = comboBox->findData(index.model()->data(index, Qt::EditRole));
+    if (pos == -1) {
+        pos = 0;
+    }
+
+    comboBox->setCurrentIndex(pos);
+}
+
+void UserPermissionDelegate::setModelData(QWidget *editor, QAbstractItemModel *model,
+        const QModelIndex &index) const
+{
+    QComboBox *comboBox = qobject_cast<QComboBox *>(editor);
+    if (!comboBox || (index.column() != 1)) {
+        return;
+    }
+
+    model->setData(index, comboBox->itemData(comboBox->currentIndex()));
+}
+
+void UserPermissionDelegate::emitCommitData()
+{
+    emit commitData(qobject_cast<QWidget *>(sender()));
+}
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/delegate.h filesharing//samba/filepropertiesplugin/delegate.h
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/delegate.h	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/delegate.h	2011-03-01 14:32:46.823068498 +0000
@@ -0,0 +1,44 @@
+/*
+ * Copyright 2011  Rodrigo Belem <rclbelem@gmail.com>
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation; either version 2 of
+ * the License or (at your option) version 3 or any later version
+ * accepted by the membership of KDE e.V. (or its successor approved
+ * by the membership of KDE e.V.), which shall act as a proxy
+ * defined in Section 14 of version 3 of the license.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+#ifndef delegate_h
+#define delegate_h
+
+#include <QItemDelegate>
+
+
+class UserPermissionDelegate : public QItemDelegate
+{
+    Q_OBJECT
+
+public:
+    UserPermissionDelegate(QObject *parent = 0);
+
+    QWidget *createEditor(QWidget *parent, const QStyleOptionViewItem &option,
+                          const QModelIndex &index) const;
+    void setEditorData(QWidget *editor, const QModelIndex &index) const;
+    void setModelData(QWidget *editor, QAbstractItemModel *model,
+                      const QModelIndex &index) const;
+
+private slots:
+    void emitCommitData();
+};
+
+#endif
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/model.cpp filesharing//samba/filepropertiesplugin/model.cpp
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/model.cpp	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/model.cpp	2011-03-01 14:32:46.823068498 +0000
@@ -0,0 +1,178 @@
+/*
+ * Copyright 2011  Rodrigo Belem <rclbelem@gmail.com>
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation; either version 2 of
+ * the License or (at your option) version 3 or any later version
+ * accepted by the membership of KDE e.V. (or its successor approved
+ * by the membership of KDE e.V.), which shall act as a proxy
+ * defined in Section 14 of version 3 of the license.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+#include <kuser.h>
+
+#include <sys/stat.h>
+
+#include "model.h"
+
+UserPermissionModel::UserPermissionModel(KSambaShareData &shareData, QObject *parent)
+    : QAbstractTableModel(parent)
+    , userList(getUsersList())
+    , shareData(shareData)
+    , usersAcl()
+{
+    setupData();
+}
+
+void UserPermissionModel::setupData()
+{
+    QStringList acl = shareData.acl().split(",", QString::SkipEmptyParts);
+
+    QList<QString>::const_iterator itr;
+    for (itr = acl.constBegin(); itr != acl.constEnd(); ++itr) {
+        QStringList userInfo = (*itr).trimmed().split(":");
+        usersAcl.insert(userInfo.at(0), QVariant(userInfo.at(1)));
+    }
+    if (usersAcl.isEmpty()) {
+        usersAcl.insert("Everyone", QVariant("R"));
+    }
+}
+
+QStringList UserPermissionModel::getUsersList() const
+{
+    unsigned int defminuid;
+    unsigned int defmaxuid;
+
+#ifdef __linux__
+    struct stat st;
+    if (!stat("/etc/debian_version", &st)) { /* debian */
+        defminuid = 1000;
+        defmaxuid = 29999;
+    } else if (!stat("/usr/portage", &st)) { /* gentoo */
+        defminuid = 1000;
+        defmaxuid = 65000;
+    } else if (!stat("/etc/mandrake-release", &st)) { /* mandrake - check before redhat! */
+        defminuid = 500;
+        defmaxuid = 65000;
+    } else if (!stat("/etc/redhat-release", &st)) { /* redhat */
+        defminuid = 100;
+        defmaxuid = 65000;
+    } else /* if (!stat("/etc/SuSE-release", &st)) */ { /* suse */
+        defminuid = 500;
+        defmaxuid = 65000;
+    }
+#else
+    defminuid = 1000;
+    defmaxuid = 65000;
+#endif
+
+    QStringList userList;
+    userList.append("Everyone");
+    foreach (const QString &username, KUser::allUserNames()) {
+        if (username == "nobody") {
+            continue;
+        }
+        KUser user(username);
+        if (user.uid() >= defminuid) {
+            userList << username;
+        }
+    }
+
+    return userList;
+}
+
+int UserPermissionModel::rowCount(const QModelIndex &parent) const
+{
+    return userList.count();
+}
+
+int UserPermissionModel::columnCount(const QModelIndex &parent) const
+{
+    return 2;
+}
+
+QVariant UserPermissionModel::data(const QModelIndex &index, int role) const
+{
+    if ((role == Qt::DisplayRole) && (index.column() == 0)) {
+        return QVariant(userList.at(index.row()));
+    }
+
+    if ((role == Qt::DisplayRole || role == Qt::EditRole) && (index.column() == 1)) {
+        QMap<QString, QVariant>::ConstIterator itr;
+        for (itr = usersAcl.constBegin(); itr != usersAcl.constEnd(); ++itr) {
+            if (itr.key().endsWith(userList.at(index.row()))) {
+                return itr.value();
+            }
+        }
+    }
+
+    return QVariant();
+}
+
+Qt::ItemFlags UserPermissionModel::flags(const QModelIndex &index) const
+{
+    if (index.column() == 0) {
+        return Qt::ItemIsSelectable;
+    }
+
+    if (index.column() == 1) {
+        return (Qt::ItemIsEnabled | Qt::ItemIsEditable);
+    }
+
+    return Qt::NoItemFlags;
+}
+
+bool UserPermissionModel::setData(const QModelIndex &index, const QVariant &value, int role)
+{
+    if ((role != Qt::EditRole) || (index.column() != 1)) {
+        return false;
+    }
+
+    QString key("");
+    QMap<QString, QVariant>::ConstIterator itr;
+    for (itr = usersAcl.constBegin(); itr != usersAcl.constEnd(); ++itr) {
+        if (itr.key().endsWith(userList.at(index.row()))) {
+            key = itr.key();
+            break;
+        }
+    }
+
+    if (key.isEmpty()) {
+        key = userList.at(index.row());
+    }
+
+    if (value.isNull()) {
+        usersAcl.take(key);
+    } else {
+        usersAcl.insert(key, value);
+    }
+
+    emit dataChanged(index, index);
+    return true;
+}
+
+QString UserPermissionModel::getAcl() const
+{
+    QString result("");
+
+    QMap<QString, QVariant>::ConstIterator itr;
+    for (itr = usersAcl.constBegin(); itr != usersAcl.constEnd(); ++itr) {
+        if (!itr.value().toString().isEmpty()) {
+            result.append(itr.key() + ":" + itr.value().toString().toLower());
+            if (itr != (usersAcl.constEnd() - 1)) {
+                result.append(",");
+            }
+        }
+    }
+
+    return result;
+}
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/model.h filesharing//samba/filepropertiesplugin/model.h
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/model.h	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/model.h	2011-03-01 14:32:46.823068498 +0000
@@ -0,0 +1,56 @@
+/*
+ * Copyright 2011  Rodrigo Belem <rclbelem@gmail.com>
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation; either version 2 of
+ * the License or (at your option) version 3 or any later version
+ * accepted by the membership of KDE e.V. (or its successor approved
+ * by the membership of KDE e.V.), which shall act as a proxy
+ * defined in Section 14 of version 3 of the license.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+#ifndef model_h
+#define model_h
+
+#include <QStringList>
+#include <QAbstractTableModel>
+#include <ksambasharedata.h>
+
+class KSambaShareData;
+
+class UserPermissionModel : public QAbstractTableModel
+{
+    Q_OBJECT
+
+public:
+    UserPermissionModel(KSambaShareData &shareData, QObject *parent = 0);
+
+    int rowCount(const QModelIndex &parent = QModelIndex()) const;
+    int columnCount(const QModelIndex &parent = QModelIndex()) const;
+
+    QVariant data(const QModelIndex &index, int role = Qt::DisplayRole) const;
+
+    Qt::ItemFlags flags(const QModelIndex & index) const;
+    bool setData(const QModelIndex & index, const QVariant & value, int role = Qt::EditRole);
+
+    QString getAcl() const;
+
+private:
+    QStringList userList;
+    KSambaShareData shareData;
+    QVariantMap usersAcl;
+
+    void setupData();
+    QStringList getUsersList() const;
+};
+
+#endif
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/sambausershareplugin.cpp filesharing//samba/filepropertiesplugin/sambausershareplugin.cpp
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.cpp	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.cpp	2011-03-01 14:32:46.823068498 +0000
@@ -0,0 +1,238 @@
+/*
+  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
+  Copyright (c) 2011 Rodrigo Belem <rclbelem@gmail.com>
+
+  This program is free software; you can redistribute it and/or modify
+  it under the terms of the GNU General Public License as published by
+  the Free Software Foundation; either version 2 of the License, or
+  (at your option) any later version.
+
+  This program is distributed in the hope that it will be useful,
+  but WITHOUT ANY WARRANTY; without even the implied warranty of
+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+  GNU General Public License for more details.
+
+  You should have received a copy of the GNU General Public License
+  along with this program; if not, write to the Free Software
+  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
+
+*/
+
+#include <QFileInfo>
+#include <QStringList>
+#include <QStandardItemModel>
+#include <QDBusInterface>
+#include <QDBusReply>
+
+#include <kvbox.h>
+#include <kuser.h>
+#include <kdebug.h>
+#include <kpushbutton.h>
+#include <ksambashare.h>
+#include <ksambasharedata.h>
+#include <kmessagebox.h>
+#include <KDE/KPluginFactory>
+#include <KDE/KPluginLoader>
+
+#include "sambausershareplugin.h"
+#include "model.h"
+#include "delegate.h"
+
+K_PLUGIN_FACTORY(SambaUserSharePluginFactory, registerPlugin<SambaUserSharePlugin>();)
+K_EXPORT_PLUGIN(SambaUserSharePluginFactory("fileshare_propsdlgplugin"))
+
+SambaUserSharePlugin::SambaUserSharePlugin(QObject *parent, const QList<QVariant> &args)
+    : KPropertiesDialogPlugin(qobject_cast<KPropertiesDialog *>(parent))
+    , url()
+    , shareData()
+{
+    url = properties->kurl().path(KUrl::RemoveTrailingSlash);
+    if (url.isEmpty()) {
+        return;
+    }
+
+    QFileInfo pathInfo(url);
+    if (!pathInfo.permission(QFile::ReadUser | QFile::WriteUser)) {
+        return;
+    }
+
+    KGlobal::locale()->insertCatalog("kfileshare");
+
+    KVBox *vbox = new KVBox();
+    properties->addPage(vbox, i18n("&Share"));
+    properties->setFileSharingPage(vbox);
+
+    if (!QFile::exists("/usr/sbin/smbd")
+        && !QFile::exists("/usr/local/sbin/smbd")) {
+
+        QWidget *widget = new QWidget(vbox);
+        QVBoxLayout *vLayout = new QVBoxLayout(widget);
+        vLayout->setAlignment(Qt::AlignJustify);
+        vLayout->setSpacing(KDialog::spacingHint());
+        vLayout->setMargin(0);
+
+        vLayout->addWidget(new QLabel(i18n("Samba is not installed on your system."), widget));
+
+#ifdef SAMBA_INSTALL
+        KPushButton *btn = new KPushButton(i18n("Install Samba..."), widget);
+        btn->setDefault(false);
+        vLayout->addWidget(btn);
+        connect(btn, SIGNAL(clicked()), SLOT(installSamba()));
+#endif
+
+        // align items on top
+        vLayout->addStretch();
+
+        return;
+    }
+
+    QWidget *widget = new QWidget(vbox);
+    propertiesUi.setupUi(widget);
+
+    QList<KSambaShareData> shareList = KSambaShare::instance()->getSharesByPath(url);
+
+    if (!shareList.isEmpty()) {
+        shareData = shareList.at(0); // FIXME: using just the first in the list for a while
+    }
+
+    setupModel();
+    setupViews();
+    load();
+
+    connect(propertiesUi.sambaChk, SIGNAL(toggled(bool)), this, SLOT(toggleShareStatus(bool)));
+    connect(propertiesUi.sambaChk, SIGNAL(toggled(bool)), this, SIGNAL(changed()));
+    connect(propertiesUi.sambaNameEdit, SIGNAL(textChanged(QString)), this, SIGNAL(changed()));
+    connect(propertiesUi.sambaNameEdit, SIGNAL(textChanged(QString)), this, SLOT(checkShareName(const QString &)));
+    connect(propertiesUi.sambaAllowGuestChk, SIGNAL(toggled(bool)), this, SIGNAL(changed()));
+    connect(model, SIGNAL(dataChanged(const QModelIndex &, const QModelIndex &)), this, SIGNAL(changed()));
+
+    for (int i = 0; i < model->rowCount(); ++i) {
+        propertiesUi.tableView->openPersistentEditor(model->index(i, 1, QModelIndex()));
+    }
+}
+
+SambaUserSharePlugin::~SambaUserSharePlugin()
+{
+}
+
+void SambaUserSharePlugin::installSamba()
+{
+    unsigned int xid = 0;
+    QStringList packages;
+    packages << SAMBA_PACKAGE_NAME;
+    QString interaction("show-confirm-install,show-progress");
+
+    QDBusInterface device("org.freedesktop.PackageKit", "/org/freedesktop/PackageKit",
+                          "org.freedesktop.PackageKit.Modify");
+    if (!device.isValid()) {
+        KMessageBox::sorry(qobject_cast<KPropertiesDialog *>(this),
+                i18n("<qt><strong>Samba could not be installed.</strong><br />Please, check if kpackagekit is properly installed</qt>"));
+        return;
+    }
+    QDBusReply<int> reply = device.call("InstallPackageNames", xid, packages, interaction);
+}
+
+void SambaUserSharePlugin::setupModel()
+{
+    model = new UserPermissionModel(shareData, this);
+}
+
+void SambaUserSharePlugin::setupViews()
+{
+    propertiesUi.tableView->setModel(model);
+    propertiesUi.tableView->setSelectionMode(QAbstractItemView::NoSelection);
+    propertiesUi.tableView->setItemDelegate(new UserPermissionDelegate(this));
+}
+
+void SambaUserSharePlugin::load()
+{
+    bool guestAllowed = false;
+    bool sambaShared = KSambaShare::instance()->isDirectoryShared(url);
+
+    propertiesUi.sambaChk->setChecked(sambaShared);
+    toggleShareStatus(sambaShared);
+    if (sambaShared) {
+        guestAllowed = (bool) shareData.guestPermission();
+    }
+    propertiesUi.sambaAllowGuestChk->setChecked(guestAllowed);
+
+    propertiesUi.sambaNameEdit->setText(shareData.name());
+}
+
+void SambaUserSharePlugin::applyChanges()
+{
+    KSambaShareData::UserShareError result;
+
+    if (propertiesUi.sambaChk->isChecked()) {
+        if (shareData.setAcl(model->getAcl()) != KSambaShareData::UserShareAclOk) {
+            return;
+        }
+
+        shareData.setName(propertiesUi.sambaNameEdit->text());
+
+        shareData.setPath(url);
+
+        KSambaShareData::GuestPermission guestOk(shareData.guestPermission());
+
+        guestOk = (propertiesUi.sambaAllowGuestChk->isChecked() == false)
+                  ? KSambaShareData::GuestsNotAllowed : KSambaShareData::GuestsAllowed;
+
+        shareData.setGuestPermission(guestOk);
+
+        result = shareData.save();
+    } else if (KSambaShare::instance()->isDirectoryShared(url)) {
+        result = shareData.remove();
+    }
+}
+
+void SambaUserSharePlugin::toggleShareStatus(bool checked)
+{
+    propertiesUi.sambaNameEdit->setEnabled(checked);
+    propertiesUi.sambaAllowGuestChk->setCheckable(checked);
+    propertiesUi.tableView->setEnabled(checked);
+    if (checked && propertiesUi.sambaNameEdit->text().isEmpty()) {
+        propertiesUi.sambaNameEdit->setText(getNewShareName());
+    }
+}
+
+void SambaUserSharePlugin::checkShareName(const QString &name)
+{
+    bool disableButton = false;
+
+    if (name.isEmpty()) {
+        disableButton = true;
+    } else if (!KSambaShare::instance()->isShareNameAvailable(name)) {
+        // There is another Share with the same name
+        KMessageBox::sorry(qobject_cast<KPropertiesDialog *>(this),
+                i18n("<qt>There is already a share with the name <strong>%1</strong>.<br /> Please choose another name.</qt>",
+                    propertiesUi.sambaNameEdit->text()));
+        propertiesUi.sambaNameEdit->selectAll();
+        disableButton = true;
+    }
+
+    if (disableButton) {
+        properties->enableButtonOk(false);
+        propertiesUi.sambaNameEdit->setFocus();
+        return;
+    }
+
+    if (!properties->isButtonEnabled(KPropertiesDialog::Ok)) {
+        properties->enableButtonOk(true);
+    }
+}
+
+QString SambaUserSharePlugin::getNewShareName()
+{
+    QString shareName = KUrl(url).fileName();
+
+    if (!propertiesUi.sambaNameEdit->text().isEmpty()) {
+        shareName = propertiesUi.sambaNameEdit->text();
+    }
+
+    // Windows could have problems with longer names
+    shareName = shareName.left(12);
+
+    return shareName;
+}
+
+#include "moc_sambausershareplugin.cpp"
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/sambausershareplugin.desktop filesharing//samba/filepropertiesplugin/sambausershareplugin.desktop
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.desktop	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.desktop	2011-03-01 14:32:46.827068080 +0000
@@ -0,0 +1,133 @@
+[Desktop Entry]
+Type=Service
+Icon=preferences-system-network-share-windows
+Name=Fileshare Konqueror Directory Properties Page
+Name[ar]=صفحة دليل خصائص مشاركة ملفات كونكيورر 
+Name[ast]=Páxina de propiedaes del direutoriu pa compartir ficheros de Konqueror
+Name[bg]=Настройки за приставката за браузъра за споделяна на файлове
+Name[bn]=ফাইল ভাগাভাগি কনকরার ডিরেক্টরী বৈশিষ্ট্যাবলী পাতা
+Name[ca]=Pàgina de propietats del directori de compartició de fitxers del Konqueror
+Name[ca@valencia]=Pàgina de propietats del directori de compartició de fitxers del Konqueror
+Name[cs]=Stránka vlastností adresáře sdílení Konqueroru
+Name[da]=Fileshare Konqueror-mappens side med egenskaber
+Name[de]=Ordnerfreigabe-Eigenschaftenseite für Konqueror
+Name[el]=Σελίδα ιδιοτήτων κοινόχρηστου καταλόγου του Konqueror
+Name[en_GB]=Fileshare Konqueror Directory Properties Page
+Name[eo]=Paĝo de ecoj de la komunaj dosierujoj de Konkeranto
+Name[es]=Página de propiedades del directorio para compartir archivos de Konqueror
+Name[et]=Failijagamise Konquerori kataloogi omaduste lehekülg
+Name[eu]=Fitxategiak partekatzeko Konqueror direktorioaren propietateen orria
+Name[fa]=صفحۀ ویژگیهای فهرست راهنمای اشتراک پروندۀ Konqueror
+Name[fi]=Konquerorin tiedostojakojen ominaisuussivu
+Name[fr]=Page des propriétés d'un dossier de partage de Konqueror
+Name[ga]=Leathanach Airíonna Konqueror: Comhroinnt Comhadlainne
+Name[gl]=Páxina coas propiedades do directorio de ficheiros compartidos de Konqueror
+Name[he]=דף מאפייני ספרית קבצים משותפת של Konqueror
+Name[hi]=फ़ाइलशेयर कॉन्करर डिरेक्ट्रीज़ गुण पृष्ठ
+Name[hne]=फाइलसेयर कान्करर डिरेक्टरीज गुन पेज
+Name[hr]=Stranica sa postavkama svojstava Konqueror Directoryja za dijeljenje datoteka
+Name[hu]=Fájlmegosztási lap a Konqueror könyvtártulajdonságainál
+Name[ia]=Pagina de proprietates de directorio de Konqueror pro compartir de file
+Name[is]=Skráastjóraeiginleikar Konqueror
+Name[it]=Pagina delle proprietà di Konqueror per la condivisione
+Name[ja]=Konqueror でファイル共有するディレクトリのプロパティのページ
+Name[kk]=Konqueror файлдарын ортақтастыру каталогының қасиеттер беті
+Name[km]=ទំព័រ​លក្ខណៈ​សម្បត្តិ​ថត Konqueror សម្រាប់​ការ​ចែក​រំលែក
+Name[ko]=Konqueror 디렉터리 속성 페이지의 파일 공유 탭
+Name[lt]=Failų dalinimosi Konqueror aplanko nustatymų puslapis
+Name[lv]=Konqueror mapes koplietošanas īpašību lapa
+Name[mk]=Страница со параметри за делен именик во Konqueror
+Name[ml]=ഫയല്‍ഷെയര്‍ കോണ്‍ക്വറര്‍ തട്ടിന്റെ ഗുണവിശേഷങ്ങളുടെ താള്‍
+Name[nb]=Fildeler – Side i Konquerors mappegenskaper
+Name[nds]=Konqueror Ornerfreegaav-Egenschappensiet
+Name[ne]=फाइल साझेदारी कन्क्वेरर डाइरेक्टरी विशेषता पृष्ठ
+Name[nl]=Configuratiepagina Konqueror bestanden delen
+Name[nn]=Side for katalogeigenskapar til fildeling i Konqueror
+Name[pa]=ਫਾਇਲ ਸਾਂਝ ਕੋਨਕਿਊਰੋਰ ਡਾਇਰੈਕਟਰੀ ਵਿਸ਼ੇਸ਼ਤਾ ਪੇਜ਼
+Name[pl]=Strona współdzielenia we właściwościach katalogu w Konquerorze
+Name[pt]=Página de Propriedades da Pasta de Partilha do Konqueror
+Name[pt_BR]=Página de propriedades da pasta de compartilhamento de arquivos do Konqueror
+Name[ru]=Общий доступ к файлам - диалог Konqueror
+Name[sk]=Zdieľanie adresárov pre Konqueror
+Name[sl]=Stran z lastnostmi za souporabo mape
+Name[sr]=Страница К‑освајача са својствима фасцикле за дељење фајлова
+Name[sr@ijekavian]=Страница К‑освајача са својствима фасцикле за дељење фајлова
+Name[sr@ijekavianlatin]=Stranica K‑osvajača sa svojstvima fascikle za deljenje fajlova
+Name[sr@latin]=Stranica K‑osvajača sa svojstvima fascikle za deljenje fajlova
+Name[sv]=Konquerors fildelningssida med katalogegenskaper
+Name[ta]=Fileshare Konqueror அடைவு பண்புகளின் பக்கம்
+Name[tg]=Саҳифаи Феҳристи Хусусиятҳо оиди Konqueror Истифодабарии Муштараки Файлҳо
+Name[tr]=Dosya Paylaşımı Konqueror Dizin Özellikleri Sayfası
+Name[uk]=Сторінка властивостей каталогу для спільного доступу
+Name[vi]=Trang thuộc tính của chia sẻ thư mục Konqueror
+Name[x-test]=xxFileshare Konqueror Directory Properties Pagexx
+Name[zh_CN]=Konqueror 文件共享目录属性页
+Name[zh_HK]=檔案分享 Konqueror 目錄屬性頁
+Name[zh_TW]=Konqueror 檔案分享目錄屬性頁
+Comment=Konqueror properties dialog plugin to share a directory with the local network
+Comment[ar]=خصائص حوار إضافة كونكيورر لمشاركة مسار مع الشبكة المحلية
+Comment[ast]=Complementu de diálogu de propiedaes de Konqueror pa compartir un direutoriu cola rede llocal
+Comment[bg]=Настройка на приставката за браузъра Konqueror за споделяна на директории в локалната мрежа
+Comment[bn]=স্থানীয় নেটওয়ার্কের সঙ্গে একটি ডিরেক্টরী ভাগাভাগি করতে কনকরার বৈশিষ্ট্যাবলী ডায়ালগ প্লাগিন
+Comment[ca]=Diàleg de propietats del connector del Konqueror per compartir un directori amb la xarxa local
+Comment[ca@valencia]=Diàleg de propietats del connector del Konqueror per compartir un directori amb la xarxa local
+Comment[cs]=Modul dialogu vlastností Konqueroru pro sdílení adresářů v lokální síti
+Comment[da]=Konqueror egenskaber-dialog plugin til at dele en mappe med det lokale netværk
+Comment[de]=Modul für den Konqueror-Eigenschaftendialog zur Freigabe eines Ordners im Netzwerk
+Comment[el]=Πρόσθετος διάλογος ρυθμίσεων του Konqueror για την κοινή χρήση ενός καταλόγου με το τοπικό δίκτυο
+Comment[en_GB]=Konqueror properties dialogue plugin to share a directory with the local network
+Comment[eo]=Kromaĵo de Konkeranto por komunigi dosierujon sur la loka reto
+Comment[es]=Complemento de diálogo de propiedades de Konqueror para compartir un directorio con la red local
+Comment[et]=Konquerori omaduste dialoogi plugin kataloogi jagamiseks kohtvõrgus
+Comment[eu]=Konqueror-en propietateen elkarrizketa-koadro plugina direktorio bat sare lokalean partekatzeko
+Comment[fa]=ویژگیهای وصلۀ محاورۀ Konqueror برای اشتراک فهرست راهنما با شبکۀ محلی
+Comment[fi]=Konquerorin liitännäinen, jolla voi jakaa kansioita lähiverkossa
+Comment[fr]=Module de Konqueror pour le partage d'un dossier sur le réseau local
+Comment[ga]=Breiseán dialóige airíonna Konqueror lenar féidir comhadlann a chomhroinnt leis an líonra logánta
+Comment[gl]=Diálogo de propiedades do engadido de Konqueror para compartir un directorio pola rede local
+Comment[he]=תוסף מאפייני דו-שיח של Konqueror כדי לשתף סיפריה עם רשת מקומית
+Comment[hi]=स्थानीय नेटवर्क के साथ डिरेक्ट्री साझा करने के लिए कॉन्करर गुण संवाद प्लगइन
+Comment[hne]=लोकल नेटवर्क के साथ डिरेक्टरी साझा करे बर कान्करर गुन गोठ प्लगइन
+Comment[hr]=Dijalogni priključak postavki za Konqueror za dijeljenje direktorija na lokalnoj mreži
+Comment[hu]=Konqueror párbeszédablak könyvtár megosztásához a helyi hálózaton
+Comment[ia]=Plug-in de dialogo de proprietate de Konqueror pro compartir un directorio con le rete local
+Comment[is]=Konqueror properties dialog plugin to share a directory with the local network
+Comment[it]=Estensione delle proprietà di Konqueror per condividere una cartella con la rete locale
+Comment[ja]=ローカルネットワークでディレクトリを共有する Konqueror プロパティダイアログのプラグイン
+Comment[kk]=Каталогты жергілікті желімен ортақтастыратын Konqueror қасиеттер диалогының плагині
+Comment[km]=ប្រអប់​លក្ខណៈ​សម្បត្តិ Konqueror ដើម្បី​ចែក​រំលែក​ថត​នៅ​ក្នុង​បណ្ដាញ​មូលដ្ឋាន
+Comment[ko]=로컬 네트워크에서 파일을 공유하기 위한 Konqueror 속성 대화 상자 플러그인
+Comment[lt]=Konqueror nustatymų dialogo įskiepis, skirtas dalintis aplanku vietiniame tinkle
+Comment[lv]=Konqueror īpašību dialoga spraudnis mapes publicēšanai koplietošanai lokālajā tīklā
+Comment[mk]=Приклучок со дијалог за својства во Konqueror за делење на датотеки со локалната мрежа
+Comment[ml]=കോണ്‍ക്വററിലെ പ്രാദേശിക ശൃഖലയുമായി തട്ടു് പങ്കുവെക്കാനുള്ള സംയോജകത്തിന്റെ ഗുണവിശേഷങ്ങളുടെ സംവാദജാലകം
+Comment[nb]=Programtillegg for Konquerors egenskapsdialog for å dele en mappe på lokalnettet
+Comment[nds]=Moduul för en Konqueror-Egenschappendialoog för't Freegeven vun Ornern in't lokale Nettwark
+Comment[ne]=स्थानीय सञ्जालसँग डाइरेक्टरी साझेदार गर्न कन्क्वेरर विशेषता संवाद प्लगइन
+Comment[nl]=Konqueror-plugin met instellingen om bestanden te delen via het lokale netwerk
+Comment[nn]=Konqueror-vising av eigenskapar til ein delt katalog i det lokale nettverket
+Comment[pa]=ਕੋਨਕਿਉਰੋਰ ਵਿਸ਼ੇਸ਼ਤਾ ਡਾਈਲਾਗ ਪਲੱਗਇਨ ਜੋ ਲੋਕਲ ਨੈੱਟਵਰਕ ਨਾਲ ਡਾਇਰੈਕਟਰੀ ਸਾਂਝੀ ਕਰਦੀ ਹੈ
+Comment[pl]=Wtyczka właściwości dla Konquerora umożliwiająca współdzielenie katalogu w sieci lokalnej
+Comment[pt]='Plugin' de janela de propriedades do Konqueror para partilhar uma pasta na rede local
+Comment[pt_BR]=Plug-in de diálogo de propriedades do Konqueror para o compartilhamento de uma pasta em uma rede local
+Comment[ro]=Modul pentru dialogul de proprietăți Konqueror pentru a partaja un director cu rețeaua locală
+Comment[ru]=Модуль свойств Konqueror для организации общего доступа к каталогу по локальной сети
+Comment[sk]=Modul Konquerora pre zdieľanie adresára v lokálnej sieti
+Comment[sl]=Vstavek za Konqueror s pogovornim oknom za lastnosti za souporabo mape v krajevnem omrežju
+Comment[sr]=Прикључак дијалога К‑освајача за својства дељења фасцикли у локалној мрежи
+Comment[sr@ijekavian]=Прикључак дијалога К‑освајача за својства дијељења фасцикли у локалној мрежи
+Comment[sr@ijekavianlatin]=Priključak dijaloga K‑osvajača za svojstva dijeljenja fascikli u lokalnoj mreži
+Comment[sr@latin]=Priključak dijaloga K‑osvajača za svojstva deljenja fascikli u lokalnoj mreži
+Comment[sv]=Konqueror-insticksprogram med egenskapsdialogruta för att dela en katalog i det lokala nätverket
+Comment[ta]=Konqueror பண்புகளின் உரையாடல் செருகுகள் அடைவை சம்பா சேவையகத்துடன் பகிரவேண்டிய செருகுகள்
+Comment[tg]=Модули муколамаи хусусиятҳои Konqueror барои истифодабарии муштараки феҳрист бо шабакаи маҳалллӣ
+Comment[tr]=Yerel ağ ile dizin paylaşımı için Konqueror iletişim eklentisi özellikleri
+Comment[uk]=Додаток діалогового вікна властивостей Konqueror для уможливлення спільного доступу до каталогу з локальної мережі
+Comment[vi]=Phần bổ sung hộp thoại thuộc tính Konqueror dùng để chia sẻ một thư mục trên mạng nội bộ
+Comment[x-test]=xxKonqueror properties dialog plugin to share a directory with the local networkxx
+Comment[zh_CN]=可将目录与局域网共享的 Konqueror 属性页对话框插件
+Comment[zh_HK]=用於與本地網絡分享目錄的 Konqueror 屬性對話盒插件
+Comment[zh_TW]=Konqueror 屬性對話框外掛程式，用於在本地端網路上分享目錄
+X-KDE-Library=sambausershareplugin
+X-KDE-Protocol=file
+X-KDE-ServiceTypes=KPropertiesDialog/Plugin,inode/directory
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/sambausershareplugin.h filesharing//samba/filepropertiesplugin/sambausershareplugin.h
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.h	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.h	2011-03-01 14:32:46.823068498 +0000
@@ -0,0 +1,60 @@
+/*
+  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
+  Copyright (c) 2011 Rodrigo Belem <rclbelem@gmail.com>
+
+  This program is free software; you can redistribute it and/or modify
+  it under the terms of the GNU General Public License as published by
+  the Free Software Foundation; either version 2 of the License, or
+  (at your option) any later version.
+
+  This program is distributed in the hope that it will be useful,
+  but WITHOUT ANY WARRANTY; without even the implied warranty of
+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+  GNU General Public License for more details.
+
+  You should have received a copy of the GNU General Public License
+  along with this program; if not, write to the Free Software
+  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
+
+*/
+
+#ifndef SAMBAUSERSHAREPLUGIN_H
+#define SAMBAUSERSHAREPLUGIN_H
+
+#include <QVariant>
+#include <QComboBox>
+
+#include <kpropertiesdialog.h>
+
+#include "ui_sambausershareplugin.h"
+
+class UserPermissionModel;
+
+class SambaUserSharePlugin : public KPropertiesDialogPlugin
+{
+    Q_OBJECT
+
+public:
+    SambaUserSharePlugin(QObject *parent, const QList<QVariant> &args);
+    virtual ~SambaUserSharePlugin();
+    virtual void applyChanges();
+
+private Q_SLOTS:
+    void load();
+    void toggleShareStatus(bool checked);
+    void installSamba();
+    void checkShareName(const QString &name);
+
+private:
+    QString url;
+    KSambaShareData shareData;
+    UserPermissionModel *model;
+    Ui::PropertiesPageGUI propertiesUi;
+
+    void setupModel();
+    void setupViews();
+    QStringList getUsersList();
+    QString getNewShareName();
+};
+
+#endif // SAMBAUSERSHAREPLUGIN_H
diff -urN kdenetwork-4.6.1/filesharing//samba/filepropertiesplugin/sambausershareplugin.ui filesharing//samba/filepropertiesplugin/sambausershareplugin.ui
--- kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.ui	1970-01-01 00:00:00.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/samba/filepropertiesplugin/sambausershareplugin.ui	2011-03-01 14:32:46.823068498 +0000
@@ -0,0 +1,114 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<ui version="4.0">
+ <class>PropertiesPageGUI</class>
+ <widget class="QWidget" name="PropertiesPageGUI">
+  <property name="geometry">
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>433</width>
+    <height>353</height>
+   </rect>
+  </property>
+  <layout class="QVBoxLayout" name="verticalLayout_3">
+   <item>
+    <layout class="QVBoxLayout" name="verticalLayout">
+     <item>
+      <widget class="QCheckBox" name="sambaChk">
+       <property name="text">
+        <string>Share with S&amp;amba (Microsoft Windows)</string>
+       </property>
+       <property name="checked">
+        <bool>true</bool>
+       </property>
+      </widget>
+     </item>
+    </layout>
+   </item>
+   <item>
+    <layout class="QFormLayout" name="formLayout">
+     <property name="fieldGrowthPolicy">
+      <enum>QFormLayout::ExpandingFieldsGrow</enum>
+     </property>
+     <item row="0" column="0">
+      <widget class="QLabel" name="textLabel1">
+       <property name="text">
+        <string>Name:</string>
+       </property>
+       <property name="wordWrap">
+        <bool>false</bool>
+       </property>
+      </widget>
+     </item>
+     <item row="0" column="1">
+      <widget class="KLineEdit" name="sambaNameEdit"/>
+     </item>
+    </layout>
+   </item>
+   <item>
+    <layout class="QHBoxLayout">
+     <item>
+      <widget class="QCheckBox" name="sambaAllowGuestChk">
+       <property name="enabled">
+        <bool>true</bool>
+       </property>
+       <property name="text">
+        <string>Allow Guests</string>
+       </property>
+       <property name="checked">
+        <bool>false</bool>
+       </property>
+      </widget>
+     </item>
+     <item>
+      <spacer name="spacer1">
+       <property name="orientation">
+        <enum>Qt::Horizontal</enum>
+       </property>
+       <property name="sizeType">
+        <enum>QSizePolicy::Expanding</enum>
+       </property>
+       <property name="sizeHint" stdset="0">
+        <size>
+         <width>40</width>
+         <height>20</height>
+        </size>
+       </property>
+      </spacer>
+     </item>
+    </layout>
+   </item>
+   <item>
+    <widget class="QTableView" name="tableView">
+     <property name="selectionMode">
+      <enum>QAbstractItemView::NoSelection</enum>
+     </property>
+     <property name="showGrid">
+      <bool>false</bool>
+     </property>
+     <attribute name="horizontalHeaderVisible">
+      <bool>false</bool>
+     </attribute>
+     <attribute name="horizontalHeaderHighlightSections">
+      <bool>false</bool>
+     </attribute>
+     <attribute name="verticalHeaderVisible">
+      <bool>false</bool>
+     </attribute>
+     <attribute name="verticalHeaderHighlightSections">
+      <bool>false</bool>
+     </attribute>
+    </widget>
+   </item>
+  </layout>
+ </widget>
+ <customwidgets>
+  <customwidget>
+   <class>KLineEdit</class>
+   <extends>QLineEdit</extends>
+   <header>klineedit.h</header>
+  </customwidget>
+ </customwidgets>
+ <resources/>
+ <connections/>
+</ui>
diff -urN kdenetwork-4.6.1/filesharing//simple/CMakeLists.txt filesharing//simple/CMakeLists.txt
--- kdenetwork-4.6.1/filesharing/simple/CMakeLists.txt	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/CMakeLists.txt	1970-01-01 00:00:00.000000000 +0000
@@ -1,43 +0,0 @@
-
-
-
-
-########### next target ###############
-
-set(kcm_fileshare_PART_SRCS fileshare.cpp groupconfigdlg.cpp krichtextlabel.cpp ${libfilesharesamba_SRCS} ${libfilesharenfs_SRCS} ${fileshare_propsdlgplugin_SRCS} ${libpropsdlgplugin_common_SRCS})
-
-
-
-kde4_add_ui3_files(kcm_fileshare_PART_SRCS 
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/socketoptionsdlg.ui
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/userselectdlg.ui
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/groupselectdlg.ui
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/usertab.ui
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/filemodedlg.ui
-		${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/hostprops.ui
-		)
-
-kde4_add_ui_files(kcm_fileshare_PART_SRCS
-	${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/share.ui
-        groupconfiggui.ui
-        ${CMAKE_SOURCE_DIR}/filesharing/advanced/kcm_sambaconf/expertuserdlg.ui
-	${CMAKE_SOURCE_DIR}/filesharing/advanced/nfs/nfsdialoggui.ui
-        controlcenter.ui
-        ${CMAKE_SOURCE_DIR}/filesharing/advanced/propsdlgplugin/propertiespagegui.ui
-)
-
-
-kde4_add_plugin(kcm_fileshare ${kcm_fileshare_PART_SRCS})
-
-
-target_link_libraries(kcm_fileshare  ${KDE4_KIO_LIBS} ${KDE4_KDE3SUPPORT_LIBS})
-
-install(TARGETS kcm_fileshare  DESTINATION ${PLUGIN_INSTALL_DIR})
-
-
-########### install files ###############
-
-install( FILES fileshare.desktop DESTINATION  ${SERVICES_INSTALL_DIR} )
-
-
-
diff -urN kdenetwork-4.6.1/filesharing//simple/controlcenter.ui filesharing//simple/controlcenter.ui
--- kdenetwork-4.6.1/filesharing/simple/controlcenter.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/controlcenter.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,429 +0,0 @@
-<ui version="4.0" stdsetdef="1" >
-  <class>ControlCenterGUI</class>
-  <widget class="QWidget" name="ControlCenterGUI" >
-    <property name="geometry" >
-      <rect>
-        <x>0</x>
-        <y>0</y>
-        <width>525</width>
-        <height>535</height>
-      </rect>
-    </property>
-    <layout class="QVBoxLayout" >
-      <property name="margin" >
-        <number>0</number>
-      </property>
-      <item>
-        <widget class="KRichTextLabel" name="infoLbl" >
-          <property name="margin" >
-            <number>11</number>
-          </property>
-          <property name="text" >
-            <string>SMB and NFS servers are not installed on this machine, to enable this module the servers must be installed.</string>
-          </property>
-          <property name="alignment" >
-            <set>Qt::AlignVCenter</set>
-          </property>
-          <property name="wordWrap" >
-            <bool>true</bool>
-          </property>
-        </widget>
-      </item>
-      <item>
-        <widget class="Q3ButtonGroup" name="shareGrp" >
-          <property name="title" >
-            <string>Enable Local Networ&amp;k File Sharing</string>
-          </property>
-          <property name="checkable" >
-            <bool>true</bool>
-          </property>
-          <property name="checked" >
-            <bool>true</bool>
-          </property>
-          <layout class="QVBoxLayout" >
-            <item>
-              <widget class="QRadioButton" name="simpleRadio" >
-                <property name="text" >
-                  <string>Si&amp;mple sharing</string>
-                </property>
-                <property name="checked" >
-                  <bool>true</bool>
-                </property>
-                <property name="buttonGroupId" >
-                  <number>1</number>
-                </property>
-              </widget>
-            </item>
-            <item>
-              <layout class="QHBoxLayout" >
-                <item>
-                  <widget class="Q3Frame" name="frame4_2" >
-                    <property name="sizePolicy" >
-                      <sizepolicy>
-                        <hsizetype>0</hsizetype>
-                        <vsizetype>5</vsizetype>
-                        <horstretch>0</horstretch>
-                        <verstretch>0</verstretch>
-                      </sizepolicy>
-                    </property>
-                    <property name="minimumSize" >
-                      <size>
-                        <width>11</width>
-                        <height>0</height>
-                      </size>
-                    </property>
-                    <property name="frameShape" >
-                      <enum>NoFrame</enum>
-                    </property>
-                    <property name="frameShadow" >
-                      <enum>Raised</enum>
-                    </property>
-                    <property name="margin" >
-                      <number>0</number>
-                    </property>
-                  </widget>
-                </item>
-                <item>
-                  <widget class="KRichTextLabel" name="textLabel1" >
-                    <property name="font" >
-                      <font>
-                        <italic>true</italic>
-                      </font>
-                    </property>
-                    <property name="text" >
-                      <string>Enable simple sharing to allow users to share folders from their HOME folder, without knowing the root password.</string>
-                    </property>
-                    <property name="alignment" >
-                      <set>Qt::AlignVCenter</set>
-                    </property>
-                    <property name="wordWrap" >
-                      <bool>true</bool>
-                    </property>
-                  </widget>
-                </item>
-              </layout>
-            </item>
-            <item>
-              <widget class="QRadioButton" name="advancedRadio" >
-                <property name="text" >
-                  <string>Advanced sharin&amp;g</string>
-                </property>
-                <property name="buttonGroupId" >
-                  <number>1</number>
-                </property>
-              </widget>
-            </item>
-            <item>
-              <layout class="QHBoxLayout" >
-                <item>
-                  <widget class="Q3Frame" name="frame4_2_2" >
-                    <property name="sizePolicy" >
-                      <sizepolicy>
-                        <hsizetype>0</hsizetype>
-                        <vsizetype>5</vsizetype>
-                        <horstretch>0</horstretch>
-                        <verstretch>0</verstretch>
-                      </sizepolicy>
-                    </property>
-                    <property name="minimumSize" >
-                      <size>
-                        <width>11</width>
-                        <height>0</height>
-                      </size>
-                    </property>
-                    <property name="frameShape" >
-                      <enum>NoFrame</enum>
-                    </property>
-                    <property name="frameShadow" >
-                      <enum>Raised</enum>
-                    </property>
-                    <property name="margin" >
-                      <number>0</number>
-                    </property>
-                  </widget>
-                </item>
-                <item>
-                  <widget class="KRichTextLabel" name="textLabel1_2" >
-                    <property name="font" >
-                      <font>
-                        <italic>true</italic>
-                      </font>
-                    </property>
-                    <property name="text" >
-                      <string>Enable advanced sharing to allow users to share any folders, as long as they have write access to the needed configuration files, or they know the root password.</string>
-                    </property>
-                    <property name="alignment" >
-                      <set>Qt::AlignVCenter</set>
-                    </property>
-                    <property name="wordWrap" >
-                      <bool>true</bool>
-                    </property>
-                  </widget>
-                </item>
-              </layout>
-            </item>
-            <item>
-              <layout class="QGridLayout" >
-                <item rowspan="2" row="0" column="0" colspan="1" >
-                  <widget class="Q3Frame" name="frame4" >
-                    <property name="sizePolicy" >
-                      <sizepolicy>
-                        <hsizetype>0</hsizetype>
-                        <vsizetype>5</vsizetype>
-                        <horstretch>0</horstretch>
-                        <verstretch>0</verstretch>
-                      </sizepolicy>
-                    </property>
-                    <property name="minimumSize" >
-                      <size>
-                        <width>11</width>
-                        <height>0</height>
-                      </size>
-                    </property>
-                    <property name="frameShape" >
-                      <enum>NoFrame</enum>
-                    </property>
-                    <property name="frameShadow" >
-                      <enum>Raised</enum>
-                    </property>
-                    <property name="margin" >
-                      <number>0</number>
-                    </property>
-                  </widget>
-                </item>
-                <item row="1" column="1" >
-                  <widget class="QCheckBox" name="nfsChk" >
-                    <property name="enabled" >
-                      <bool>false</bool>
-                    </property>
-                    <property name="text" >
-                      <string>Use &amp;NFS (Linux/UNIX)</string>
-                    </property>
-                    <property name="checked" >
-                      <bool>true</bool>
-                    </property>
-                  </widget>
-                </item>
-                <item row="0" column="1" >
-                  <widget class="QCheckBox" name="sambaChk" >
-                    <property name="enabled" >
-                      <bool>false</bool>
-                    </property>
-                    <property name="text" >
-                      <string>Use Sam&amp;ba (Microsoft(R) Windows(R))</string>
-                    </property>
-                    <property name="checked" >
-                      <bool>true</bool>
-                    </property>
-                  </widget>
-                </item>
-              </layout>
-            </item>
-            <item>
-              <layout class="QHBoxLayout" >
-                <item>
-                  <widget class="KPushButton" name="allowedUsersBtn" >
-                    <property name="text" >
-                      <string>Allo&amp;wed Users</string>
-                    </property>
-                  </widget>
-                </item>
-                <item>
-                  <spacer name="spacer9" >
-                    <property name="sizeHint" >
-                      <size>
-                        <width>40</width>
-                        <height>20</height>
-                      </size>
-                    </property>
-                    <property name="sizeType" >
-                      <enum>QSizePolicy::Expanding</enum>
-                    </property>
-                    <property name="orientation" >
-                      <enum>Qt::Horizontal</enum>
-                    </property>
-                  </spacer>
-                </item>
-              </layout>
-            </item>
-          </layout>
-        </widget>
-      </item>
-      <item>
-        <widget class="Q3GroupBox" name="sharedFoldersGroupBox" >
-          <property name="title" >
-            <string>Shared Folders</string>
-          </property>
-          <layout class="QHBoxLayout" >
-            <item>
-              <widget class="K3ListView" name="listView" >
-                <property name="selectionMode" stdset="0" >
-                  <enum>NoSelection</enum>
-                </property>
-                <column>
-                  <property name="text" >
-                    <string>Path</string>
-                  </property>
-                  <property name="clickable" >
-                    <bool>true</bool>
-                  </property>
-                  <property name="resizable" >
-                    <bool>true</bool>
-                  </property>
-                </column>
-                <column>
-                  <property name="text" >
-                    <string>Samba</string>
-                  </property>
-                  <property name="clickable" >
-                    <bool>true</bool>
-                  </property>
-                  <property name="resizable" >
-                    <bool>true</bool>
-                  </property>
-                </column>
-                <column>
-                  <property name="text" >
-                    <string>NFS</string>
-                  </property>
-                  <property name="clickable" >
-                    <bool>true</bool>
-                  </property>
-                  <property name="resizable" >
-                    <bool>true</bool>
-                  </property>
-                </column>
-              </widget>
-            </item>
-            <item>
-              <widget class="Q3Frame" name="shareBtnPnl" >
-                <property name="enabled" >
-                  <bool>false</bool>
-                </property>
-                <property name="frameShape" >
-                  <enum>NoFrame</enum>
-                </property>
-                <property name="frameShadow" >
-                  <enum>Plain</enum>
-                </property>
-                <layout class="QVBoxLayout" >
-                  <property name="margin" >
-                    <number>0</number>
-                  </property>
-                  <item>
-                    <widget class="KPushButton" name="addShareBtn" >
-                      <property name="text" >
-                        <string>A&amp;dd...</string>
-                      </property>
-                    </widget>
-                  </item>
-                  <item>
-                    <widget class="KPushButton" name="changeShareBtn" >
-                      <property name="enabled" >
-                        <bool>false</bool>
-                      </property>
-                      <property name="text" >
-                        <string>Chang&amp;e...</string>
-                      </property>
-                    </widget>
-                  </item>
-                  <item>
-                    <widget class="KPushButton" name="removeShareBtn" >
-                      <property name="enabled" >
-                        <bool>false</bool>
-                      </property>
-                      <property name="text" >
-                        <string>Rem&amp;ove</string>
-                      </property>
-                    </widget>
-                  </item>
-                  <item>
-                    <spacer name="spacer2" >
-                      <property name="sizeHint" >
-                        <size>
-                          <width>20</width>
-                          <height>20</height>
-                        </size>
-                      </property>
-                      <property name="sizeType" >
-                        <enum>QSizePolicy::Expanding</enum>
-                      </property>
-                      <property name="orientation" >
-                        <enum>Qt::Vertical</enum>
-                      </property>
-                    </spacer>
-                  </item>
-                </layout>
-              </widget>
-            </item>
-          </layout>
-        </widget>
-      </item>
-    </layout>
-  </widget>
-    <customwidgets>
-    <customwidget>
-      <class>K3ListView</class>
-      <extends>Q3ListView</extends>
-      <header location="global" >k3listview.h</header>
-    </customwidget>
-  </customwidgets>
-  <tabstops>
-    <tabstop>sambaChk</tabstop>
-    <tabstop>nfsChk</tabstop>
-    <tabstop>listView</tabstop>
-  </tabstops>
-  <includes>
-    <include location="local" >krichtextlabel.h</include>
-  </includes>
-  <connections>
-    <connection>
-      <sender>advancedRadio</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>nfsChk</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>advancedRadio</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>sambaChk</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>shareGrp</sender>
-      <signal>clicked(int)</signal>
-      <receiver>ControlCenterGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>simpleRadio</sender>
-      <signal>clicked()</signal>
-      <receiver>ControlCenterGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>advancedRadio</sender>
-      <signal>clicked()</signal>
-      <receiver>ControlCenterGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>sambaChk</sender>
-      <signal>clicked()</signal>
-      <receiver>ControlCenterGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>nfsChk</sender>
-      <signal>clicked()</signal>
-      <receiver>ControlCenterGUI</receiver>
-      <slot>changedSlot()</slot>
-    </connection>
-    <connection>
-      <sender>listView</sender>
-      <signal>selectionChanged()</signal>
-      <receiver>ControlCenterGUI</receiver>
-      <slot>listView_selectionChanged()</slot>
-    </connection>
-  </connections>
-</ui>
diff -urN kdenetwork-4.6.1/filesharing//simple/fileshare.cpp filesharing//simple/fileshare.cpp
--- kdenetwork-4.6.1/filesharing/simple/fileshare.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/fileshare.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,473 +0,0 @@
-/*
-  Copyright (c) 2002 Laurent Montel <montel@kde.org>
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-*/
-#include <unistd.h>
-
-#include <qlayout.h>
-#include <qlabel.h>
-#include <qdir.h>
-#include <qradiobutton.h>
-#include <qcheckbox.h>
-
-//Added by qt3to4:
-#include <QPixmap>
-#include <QVBoxLayout>
-#include <QTextStream>
-#include <QBoxLayout>
-
-#include <kpushbutton.h>
-#include <kdebug.h>
-#include <kdialog.h>
-#include <kgenericfactory.h>
-#include <k3listview.h>
-#include <kiconloader.h>
-#include <knfsshare.h>
-#include <ksambashare.h>
-#include <kfileshare.h>
-#include <kstandarddirs.h>
-#include <kconfig.h>
-#include <kmessagebox.h>
-#include <kuser.h>
-#include <kurl.h>
-#include <kprocess.h>
-#include <krichtextlabel.h>
-#include <KVBox>
-
-#include "propertiespage.h"
-#include "nfsfile.h"
-#include "sambafile.h"
-
-#include "fileshare.h"
-#include "groupconfigdlg.h"
-
-
-K_PLUGIN_FACTORY(ShareFactory, registerPlugin<KFileShareConfig>();)
-K_EXPORT_PLUGIN(ShareFactory("kcmfileshare"))
-
-
-#define FILESHARECONF "/etc/security/fileshare.conf"
-#define FILESHARE_DEBUG 5009
-
-
-ControlCenterGUI::ControlCenterGUI( QWidget *parent )
-    :QWidget( parent )
-{
-    setupUi( this );
-    connect( listView, SIGNAL( selectionChanged() ), this, SLOT(listView_selectionChanged() ) );
-    connect( shareGrp, SIGNAL(clicked(int) ),this,SLOT(  changedSlot() ) );
-    connect( simpleRadio, SIGNAL(clicked() ),this,SLOT(  changedSlot() ) );
-    connect( advancedRadio, SIGNAL(clicked() ),this,SLOT(  changedSlot() ) );
-    connect( sambaChk, SIGNAL(clicked() ),this,SLOT(  changedSlot() ) );
-    connect( nfsChk, SIGNAL(clicked() ),this,SLOT(  changedSlot() ) );
-}
-
-void ControlCenterGUI::changedSlot()
-{
-    emit changed();
-}
-
-void ControlCenterGUI::listView_selectionChanged()
-{
-    bool empty = listView->selectedItems ().isEmpty();
-    changeShareBtn->setDisabled(empty );
-    removeShareBtn->setDisabled(empty );
-}
-
-
-KFileShareConfig::KFileShareConfig(QWidget *parent, const QVariantList &):
-    KCModule(ShareFactory::componentData(), parent/*, name*/)
-{
-  KGlobal::locale()->insertCatalog("kfileshare");
-
-  QBoxLayout* layout = new QVBoxLayout(this,0,
-				       KDialog::spacingHint());
-
-/*
-  QVButtonGroup *box = new QVButtonGroup( i18n("File Sharing"), this );
-  box->layout()->setSpacing( KDialog::spacingHint() );
-  layout->addWidget(box);
-  noSharing=new QRadioButton( i18n("Do &not allow users to share files"), box );
-  sharing=new QRadioButton( i18n("&Allow users to share files from their HOME folder"),  box);
-*/
-  m_ccgui = new ControlCenterGUI(this);
-  connect( m_ccgui, SIGNAL( changed()), this, SLOT(configChanged()));
-  connect( m_ccgui->allowedUsersBtn, SIGNAL( clicked()),
-           this, SLOT(allowedUsersBtnClicked()));
-
-  QString path = QString::fromLocal8Bit( getenv( "PATH" ) );
-  path += QString::fromLatin1( ":/usr/sbin" );
-  QString sambaExec = KStandardDirs::findExe( QString::fromLatin1("smbd"), path );
-  QString nfsExec = KStandardDirs::findExe( QString::fromLatin1("rpc.nfsd"), path );
-
-  if ( nfsExec.isEmpty() && sambaExec.isEmpty())
-  {
-      m_ccgui->shareGrp->setDisabled(true);
-      m_ccgui->sharedFoldersGroupBox->setDisabled(true);
-  }
-  else
-  {
-      if (nfsExec.isEmpty()) {
-        m_ccgui->nfsChk->setDisabled(true);
-        m_ccgui->nfsChk->setChecked(false);
-        m_ccgui->nfsChk->setToolTip(i18n("No NFS server installed on this system"));
-      }
-
-      if (sambaExec.isEmpty()) {
-        m_ccgui->sambaChk->setDisabled(true);
-        m_ccgui->sambaChk->setChecked(false);
-        m_ccgui->sambaChk->setToolTip(i18n("No Samba server installed on this system"));
-      }
-
-      m_ccgui->infoLbl->hide();
-      layout->addWidget(m_ccgui);
-      updateShareListView();
-      connect( KNFSShare::instance(), SIGNAL( changed()),
-               this, SLOT(updateShareListView()));
-      connect( KSambaShare::instance(), SIGNAL( changed()),
-               this, SLOT(updateShareListView()));
-
-
-  }
-
-  if((getuid() == 0) ||
-     ((KFileShare::shareMode() == KFileShare::Advanced) &&
-      (KFileShare::authorization() == KFileShare::Authorized)))
-  {
-      connect( m_ccgui->addShareBtn, SIGNAL(clicked()),
-               this, SLOT(addShareBtnClicked()));
-      connect( m_ccgui->changeShareBtn, SIGNAL(clicked()),
-               this, SLOT(changeShareBtnClicked()));
-      connect( m_ccgui->removeShareBtn, SIGNAL(clicked()),
-               this, SLOT(removeShareBtnClicked()));
-      m_ccgui->listView->setSelectionMode(Q3ListView::Extended);
-      m_ccgui->shareBtnPnl->setEnabled(true);
-  }
-
-
-  if (getuid()==0) {
-      setButtons(Help|Apply);
-  } else {
-      setButtons(Help);
-      m_ccgui->shareGrp->setDisabled( true );
-  }
-
-}
-
-void KFileShareConfig::updateShareListView()
-{
-      m_ccgui->listView->clear();
-      KNFSShare* nfs = KNFSShare::instance();
-      KSambaShare* samba = KSambaShare::instance();
-
-      QStringList dirs = nfs->sharedDirectories();
-      const QStringList sambaDirs = samba->sharedDirectories();
-
-      for ( QStringList::ConstIterator it = sambaDirs.constBegin(); it != sambaDirs.constEnd(); ++it ) {
-        // Do not insert duplicates
-        if (nfs->isDirectoryShared(*it))
-            continue;
-
-        dirs += *it;
-      }
-
-      QPixmap folderPix = SmallIcon("folder", 0, KIconLoader::DefaultState, QStringList());
-      QPixmap okPix = SmallIcon("dialog-ok");
-      QPixmap cancelPix = SmallIcon("dialog-cancel");
-
-      for ( QStringList::ConstIterator it = dirs.constBegin(); it != dirs.constEnd(); ++it ) {
-        K3ListViewItem* item = new K3ListViewItem(m_ccgui->listView);
-        item->setText(0,*it);
-        item->setPixmap(0, folderPix);
-
-        if (samba->isDirectoryShared(*it))
-          item->setPixmap(1,okPix);
-        else
-          item->setPixmap(1,cancelPix);
-
-        if (nfs->isDirectoryShared(*it))
-          item->setPixmap(2,okPix);
-        else
-          item->setPixmap(2,cancelPix);
-
-      }
-
-}
-
-void KFileShareConfig::allowedUsersBtnClicked() {
-  GroupConfigDlg dlg(this,m_fileShareGroup,m_restricted,m_rootPassNeeded,
-                     m_ccgui->simpleRadio->isChecked());
-  if (dlg.exec() == QDialog::Accepted) {
-      m_fileShareGroup = dlg.fileShareGroup().name();
-      m_restricted = dlg.restricted();
-      m_rootPassNeeded = dlg.rootPassNeeded();
-      configChanged();
-  }
-
-}
-
-
-void KFileShareConfig::load()
-{
-    KConfig config(QString::fromLatin1(FILESHARECONF), KConfig::SimpleConfig);
-
-    m_ccgui->shareGrp->setChecked( config.group("").readEntry("FILESHARING", "yes") == "yes" );
-
-    m_restricted = config.group("").readEntry("RESTRICT", "yes") == "yes";
-
-    if (config.group("").readEntry("SHARINGMODE", "simple") == "simple")
-        m_ccgui->simpleRadio->setChecked(true);
-    else
-        m_ccgui->advancedRadio->setChecked(true);
-
-    m_fileShareGroup = config.group("").readEntry("FILESHAREGROUP", "fileshare");
-
-    m_ccgui->sambaChk->setChecked(
-          config.group("").readEntry("SAMBA", "yes") == "yes");
-
-    m_ccgui->nfsChk->setChecked(
-          config.group("").readEntry("NFS", "yes") == "yes");
-
-    m_rootPassNeeded = config.group("").readEntry("ROOTPASSNEEDED", "yes") == "yes";
-
-    m_smbConf = KSambaShare::instance()->smbConfPath();
-}
-
-bool KFileShareConfig::addGroupAccessesToFile(const QString & file) {
-  KProcess chgrp;
-  chgrp << "chgrp" << m_fileShareGroup << file;
-  KProcess chmod;
-  chmod << "chmod" << "g=rw" << file;
-
-  if (chgrp.execute()) {
-      kDebug(FILESHARE_DEBUG) << "KFileShareConfig::addGroupAccessesToFile: chgrp failed";
-      return false;
-
-  }
-
-  if(chmod.execute()) {
-      kDebug(FILESHARE_DEBUG) << "KFileShareConfig::addGroupAccessesToFile: chmod failed";
-      return false;
-  }
-
-  return true;
-
-}
-
-bool KFileShareConfig::removeGroupAccessesFromFile(const QString & file) {
-  KProcess chgrp;
-  chgrp << "chgrp" << "root" << file;
-  KProcess chmod;
-  chmod << "chmod" << "g=r" << file;
-
-  if (chgrp.execute()) {
-      kDebug(FILESHARE_DEBUG) << "KFileShareConfig::removeGroupAccessesFromFile: chgrp failed";
-      return false;
-
-  }
-
-  if(chmod.execute()) {
-      kDebug(FILESHARE_DEBUG) << "KFileShareConfig::removeGroupAccessesFromFile: chmod failed";
-      return false;
-  }
-
-  return true;
-}
-
-
-bool KFileShareConfig::setGroupAccesses() {
-  if (m_rootPassNeeded || ! m_ccgui->sambaChk->isChecked()) {
-      if (!removeGroupAccessesFromFile(KSambaShare::instance()->smbConfPath()))
-          return false;
-  }
-
-  if (m_rootPassNeeded || ! m_ccgui->nfsChk->isChecked()) {
-      if (!removeGroupAccessesFromFile(KNFSShare::instance()->exportsPath()))
-          return false;
-  }
-
-  if (! m_rootPassNeeded && m_ccgui->sambaChk->isChecked()) {
-      if (!addGroupAccessesToFile(KSambaShare::instance()->smbConfPath()))
-          return false;
-  }
-
-  if (! m_rootPassNeeded && m_ccgui->nfsChk->isChecked()) {
-      if (!addGroupAccessesToFile(KNFSShare::instance()->exportsPath()))
-          return false;
-  }
-
-
-  return true;
-}
-
-void KFileShareConfig::save()
-{
-    setGroupAccesses();
-
-    QDir dir("/etc/security");
-    if ( !dir.exists())
-        dir.mkdir("/etc/security");
-
-    QFile file(FILESHARECONF);
-    if ( ! file.open(QIODevice::WriteOnly)) {
-        KMessageBox::detailedError(this,
-            i18n("Could not save settings."),
-            i18n("Could not open file '%1' for writing: %2", QString(FILESHARECONF),
-             file.errorString() ),
-            i18n("Saving Failed"));
-        return;
-    }
-
-
-    QTextStream stream(&file);
-
-    stream << "FILESHARING=";
-    stream << (m_ccgui->shareGrp->isChecked() ? "yes" : "no");
-
-    stream << "\nRESTRICT=";
-    stream << (m_restricted ? "yes" : "no");
-
-    stream << "\nSHARINGMODE=";
-    stream << (m_ccgui->simpleRadio->isChecked() ? "simple" : "advanced");
-
-    stream << "\nFILESHAREGROUP=";
-    stream << m_fileShareGroup;
-
-    stream << "\nSAMBA=";
-    stream << (m_ccgui->sambaChk->isChecked() ? "yes" : "no");
-
-    stream << "\nNFS=";
-    stream << (m_ccgui->nfsChk->isChecked() ? "yes" : "no");
-
-    stream << "\nROOTPASSNEEDED=";
-    stream << (m_rootPassNeeded ? "yes" : "no");
-
-    stream << "\nSMBCONF=";
-    stream << m_smbConf;
-
-    file.close();
-}
-
-void KFileShareConfig::defaults()
-{
-    m_ccgui->shareGrp->setChecked( false );
-}
-
-QString KFileShareConfig::quickHelp() const
-{
-    return i18n("<h1>File Sharing</h1><p>This module can be used "
-    		    "to enable file sharing over the network using "
-				"the \"Network File System\" (NFS) or SMB in Konqueror. "
-				"The latter enables you to share your files with Windows(R) "
-				"computers on your network.</p>");
-}
-
-void KFileShareConfig::addShareBtnClicked() {
-  showShareDialog(KFileItemList());
-}
-
-
-PropertiesPageDlg::PropertiesPageDlg(QWidget*parent, KFileItemList files)
-  : KDialog(parent)
-{
-  setObjectName("sharedlg");
-  setModal(true);
-  setButtons(Ok|Cancel);
-  setDefaultButton(Ok);
-  setCaption(i18n("Share Folder"));
-  showButtonSeparator(true);
-  KVBox* vbox = new KVBox(this);
-  setMainWidget(vbox);
-
-  m_page = new PropertiesPage(vbox,files,true);
-  connect(this,SIGNAL(okClicked()),this,SLOT(slotOk()));
-}
-
-bool PropertiesPageDlg::hasChanged() {
-  return m_page->hasChanged();
-}
-
-void PropertiesPageDlg::slotOk() {
-  if (hasChanged()) {
-    if (!m_page->save())
-        return;
-  }
-
-  KDialog::accept();
-}
-
-
-
-void KFileShareConfig::showShareDialog(const KFileItemList & files) {
-  PropertiesPageDlg* dlg = new PropertiesPageDlg(this,files);
-  if (dlg->exec() == QDialog::Accepted) {
-    if ( dlg->hasChanged() ) {
-         updateShareListView();
-    }
-  }
-  delete dlg;
-}
-
-void KFileShareConfig::changeShareBtnClicked() {
-  KFileItemList files;
-  QList<Q3ListViewItem *> items = m_ccgui->listView->selectedItems();
-
-  foreach ( Q3ListViewItem* item, items ) {
-      files.append(KFileItem(KUrl(item->text(0)),"",0));
-  }
-
-  showShareDialog(files);
-}
-
-void KFileShareConfig::removeShareBtnClicked() {
-
-  QList<Q3ListViewItem*> items = m_ccgui->listView->selectedItems();
-
-  bool nfs = false;
-  bool samba = false;
-
-  foreach ( Q3ListViewItem*item, items ) {
-
-      if (KNFSShare::instance()->isDirectoryShared(item->text(0)))
-          nfs = true;
-
-      if (KSambaShare::instance()->isDirectoryShared(item->text(0)))
-          samba = true;
-  }
-
-  NFSFile nfsFile(KNFSShare::instance()->exportsPath());
-  if (nfs) {
-    kDebug(FILESHARE_DEBUG) << "KFileShareConfig::removeShareBtnClicked: nfs = true";
-    nfsFile.load();
-  	foreach ( Q3ListViewItem*item, items ) {
-        nfsFile.removeEntryByPath(item->text(0));
-    }
-  }
-
-  SambaFile smbFile(KSambaShare::instance()->smbConfPath(),false);
-  if (samba) {
-    kDebug(FILESHARE_DEBUG) << "KFileShareConfig::removeShareBtnClicked: samba = true";
-    smbFile.load();
-	foreach ( Q3ListViewItem*item, items ) {
-        smbFile.removeShareByPath(item->text(0));
-    }
-  }
-
-  PropertiesPage::save(&nfsFile, &smbFile, nfs,samba);
-
-  updateShareListView();
-}
-
-#include "fileshare.moc"
diff -urN kdenetwork-4.6.1/filesharing//simple/fileshare.h filesharing//simple/fileshare.h
--- kdenetwork-4.6.1/filesharing/simple/fileshare.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/fileshare.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,98 +0,0 @@
-/*
-  Copyright (c) 2002,2009 Laurent Montel <montel@kde.org>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-*/
-
-#ifndef __fileshare_h__
-#define __fileshare_h__
-
-#include <kfileitem.h>
-#include <KPluginFactory>
-#include "kcmodule.h"
-//Added by qt3to4:
-#include <QLabel>
-#include <QBoxLayout>
-#include "ui_controlcenter.h"
-class QLabel;
-class QBoxLayout;
-
-class ControlCenterGUI : public QWidget, public Ui::ControlCenterGUI
-{
-    Q_OBJECT
-public:
-  ControlCenterGUI( QWidget *parent );
-private slots:
-    void changedSlot();
-public slots:
-    void listView_selectionChanged();
-signals:
-    void changed();
-};
-
-
-
-class KFileShareConfig  : public KCModule
-{
-  Q_OBJECT
-
- public:
-  KFileShareConfig(QWidget *parent, const QVariantList &);
-
-  virtual void load();
-  virtual void save();
-  virtual void defaults();
-  virtual QString quickHelp() const;
-
- protected:
-   ControlCenterGUI* m_ccgui;
-   QString m_fileShareGroup;
-   bool m_restricted;
-   bool m_rootPassNeeded;
-   QString m_smbConf;
-   void showShareDialog(const KFileItemList & files);
-   bool addGroupAccessesToFile(const QString & file);
-   bool removeGroupAccessesFromFile(const QString & file);
-   bool setGroupAccesses();
-
- protected slots:
-  void configChanged() { emit changed( true ); }
-  void updateShareListView();
-  void allowedUsersBtnClicked();
-
-  virtual void addShareBtnClicked();
-  virtual void changeShareBtnClicked();
-  virtual void removeShareBtnClicked();
-
-};
-
-class PropertiesPageDlg : public KDialog
-{
-Q_OBJECT
-public:
-  PropertiesPageDlg(QWidget * parent, KFileItemList files);
-  ~PropertiesPageDlg() {}
-  bool hasChanged();
-protected:
-  PropertiesPage* m_page;
-
-protected slots:
-  virtual void slotOk();
-
-};
-
-
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//simple/groupconfigdlg.cpp filesharing//simple/groupconfigdlg.cpp
--- kdenetwork-4.6.1/filesharing/simple/groupconfigdlg.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/groupconfigdlg.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,438 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-
-#include <qradiobutton.h>
-#include <qpushbutton.h>
-#include <q3groupbox.h>
-#include <qlabel.h>
-#include <qcheckbox.h>
-#include <kvbox.h>
-#include <khbox.h>
-//Added by qt3to4:
-
-#include <klocale.h>
-#include <kuser.h>
-#include <kdebug.h>
-#include <kmessagebox.h>
-#include <kinputdialog.h>
-#include <k3listbox.h>
-#include <kprocess.h>
-#include <kpushbutton.h>
-#include <kcombobox.h>
-
-#include "groupconfigdlg.h"
-
-
-static QString groupListToString(const QList<KUserGroup> & list);
-static QString prettyString(const KUser &user);
-static QString fromPrettyString(const QString & s);
-static void removeList(QList<KUser> & from, const QList<KUser> & that);
-static bool userMod(const QString & user, const QList<KUserGroup> & groups);
-
-
-GroupConfigGUI::GroupConfigGUI( QWidget *parent )
-    : QWidget( parent )
-{
-    setupUi( this );
-    connect( listBox, SIGNAL( selectionChanged(Q3ListBoxItem*) ), this, SLOT(listBox_selectionChanged(Q3ListBoxItem*) ) );
-}
-
-void GroupConfigGUI::listBox_selectionChanged( Q3ListBoxItem * i)
-{
-    removeBtn->setEnabled(i);
-}
-
-GroupConfigDlg::GroupConfigDlg(QWidget * parent,
-      const QString & fileShareGroup, bool restricted,
-      bool rootPassNeeded, bool simpleSharing)
-  : KDialog(parent),
-  m_fileShareGroup(fileShareGroup),
-  m_restricted(restricted) ,
-  m_rootPassNeeded(rootPassNeeded),
-  m_simpleSharing(simpleSharing)
-
-{
-  setCaption(i18n("Allowed Users"));
-  setButtons(Ok|Cancel);
-  setDefaultButton(Ok);
-  setModal(true);
-  showButtonSeparator(true);
-  initGUI();
-
-  setFileShareGroup(m_fileShareGroup);
-  connect(this,SIGNAL(okClicked()),this,SLOT(slotOk()));
-}
-
-GroupConfigDlg::~GroupConfigDlg() {
-}
-
-void GroupConfigDlg::initUsers() {
-  m_origUsers = m_fileShareGroup.users();
-  m_users = m_origUsers;
-}
-
-void GroupConfigDlg::initGUI() {
-  m_gui = new GroupConfigGUI(this);
-  setMainWidget(m_gui);
-  setFileShareGroup(m_fileShareGroup);
-
-  m_gui->allUsersRadio->setChecked(!m_restricted);
-  m_gui->groupUsersRadio->setChecked(m_restricted);
-  m_gui->writeAccessChk->setChecked(!m_rootPassNeeded);
-
-  connect( m_gui->addBtn, SIGNAL(clicked()),
-           this, SLOT(slotAddUser()));
-  connect( m_gui->removeBtn, SIGNAL(clicked()),
-           this, SLOT(slotRemoveUser()));
-  connect( m_gui->otherGroupBtn, SIGNAL(clicked()),
-           this, SLOT(slotChangeGroup()));
-
-  if (m_simpleSharing) {
-      // if simple sharing users never need the root password
-      m_gui->writeAccessChk->setDisabled(true);
-  }
-}
-
-void GroupConfigDlg::updateListBox() {
-  m_gui->listBox->clear();
-  QList<KUser>::iterator it;
-  for ( it = m_users.begin(); it != m_users.end(); ++it ) {
-     m_gui->listBox->insertItem(prettyString(*it));
-     kDebug(5009) << "GroupConfigDlg::updateListBox: " << (*it).loginName();
-  }
-}
-
-QString prettyString(const KUser &user) {
-  return user.fullName()+" ("+user.loginName()+')';
-}
-
-QString fromPrettyString(const QString & s) {
-  // Jan Schaefer (jan)
-  //              i   j
-  int i = s.indexOf('(');
-  int j = s.indexOf(')');
-  QString loginName = s.mid(i+1,j-i-1);
-  return loginName;
-}
-
-bool GroupConfigDlg::restricted() const {
-  return m_restricted;
-}
-
-void GroupConfigDlg::slotAddUser() {
-  QList<KUser> allUsers = KUser::allUsers();
-
-  removeList(allUsers,m_users);
-
-  if (allUsers.count()==0) {
-     KMessageBox::information(this,
-           i18n("All users are in the %1 group already.",
-            m_fileShareGroup.name()));
-     return;
-  }
-
-  QStringList stringList;
-
-  QList<KUser>::iterator it;
-  for ( it = allUsers.begin(); it != allUsers.end(); ++it ) {
-    QString s = (*it).fullName()+" ("+(*it).loginName()+')';
-    stringList.append(s);
-  }
-
-  stringList.sort();
-
-  bool ok;
-  QString userName = KInputDialog::getItem(
-            i18n("Select User"),
-            i18n("Select a user:"),
-            stringList,
-            0,
-            false,
-            &ok);
-
-  if (!ok)
-      return;
-
-  QString loginName = fromPrettyString(userName);
-  KUser user(loginName);
-  m_users.append(KUser(loginName));
-  updateListBox();
-}
-
-void removeList(QList<KUser> & from, const QList<KUser> & that) {
-  QList<KUser>::ConstIterator it;
-  for ( it = that.begin(); it != that.end(); ++it ) {
-    from.removeAll(*it);
-  }
-
-}
-
-bool GroupConfigDlg::addUser(const KUser & user, const KUserGroup & group) {
-  QList<KUserGroup> groups = user.groups();
-  groups.append(group);
-  if (!userMod(user.loginName(),groups)) {
-    KMessageBox::sorry(this,i18n("Could not add user '%1' to group '%2'",
-             user.loginName(), group.name()));
-    return false;
-  }
-  return true;
-}
-
-
-bool GroupConfigDlg::removeUser(const KUser & user, const KUserGroup & group) {
-  QList<KUserGroup> groups = user.groups();
-  groups.removeAll(group);
-  if (!userMod(user.loginName(),groups)) {
-    KMessageBox::sorry(this,i18n("Could not remove user '%1' from group '%2'",
-             user.loginName(), group.name()));
-    return false;
-  }
-  return true;
-}
-
-bool GroupConfigDlg::rootPassNeeded() const {
-  return m_rootPassNeeded;
-}
-
-void GroupConfigDlg::slotOk() {
-  m_restricted = m_gui->groupUsersRadio->isChecked();
-  m_rootPassNeeded = ! m_gui->writeAccessChk->isChecked();
-  if (m_restricted && !m_fileShareGroup.isValid()) {
-    KMessageBox::sorry(this,i18n("You have to choose a valid group."));
-    return;
-  }
-
-  QList<KUser> addedUsers = m_users;
-  removeList(addedUsers,m_origUsers);
-  QList<KUser> removedUsers = m_origUsers;
-  removeList(removedUsers,m_users);
-
-  QList<KUser>::ConstIterator it;
-  for ( it = addedUsers.constBegin(); it != addedUsers.constEnd(); ++it ) {
-    addUser(*it, m_fileShareGroup);
-  }
-
-  for ( it = removedUsers.constBegin(); it != removedUsers.constEnd(); ++it ) {
-    removeUser(*it, m_fileShareGroup);
-  }
-
-
-  KDialog::accept();
-}
-
-bool userMod(const QString & user, const QList<KUserGroup> & groups) {
-  KProcess proc;
-  proc << "usermod" << "-G" << groupListToString(groups) << user;
-  return !proc.execute();
-}
-
-void GroupConfigDlg::slotRemoveUser() {
-  Q3ListBoxItem* item = m_gui->listBox->selectedItem();
-  if (!item)
-      return;
-
-  QString loginName = fromPrettyString(item->text());
-  KUser user(loginName);
-  m_users.removeAll(KUser(loginName));
-  updateListBox();
-  m_gui->removeBtn->setEnabled(false);
-}
-
-QString groupListToString(const QList<KUserGroup> & list) {
-  QList<KUserGroup>::ConstIterator it;
-  QString result;
-
-  for ( it = list.begin(); it != list.end(); ++it ) {
-    result+=(*it).name()+',';
-  }
-
-  // remove last ,
-  result.truncate(result.length()-1);
-  return result;
-}
-
-void GroupConfigDlg::slotChangeGroup() {
-  QList<KUserGroup> allGroups = KUserGroup::allGroups();
-
-  QStringList stringList;
-
-  QList<KUserGroup>::iterator it;
-  for ( it = allGroups.begin(); it != allGroups.end(); ++it ) {
-    QString s = (*it).name();
-    stringList.append(s);
-  }
-
-  stringList.sort();
-
-  KDialog* dlg = new KDialog(this);
-  dlg->setCaption(i18n("Allowed Users"));
-  dlg->setButtons(Ok|Cancel);
-  dlg->setDefaultButton(Ok);
-  dlg->setModal(true);
-  dlg->showButtonSeparator(true);
-  KVBox* vbox = new KVBox(this);
-  dlg->setMainWidget(vbox);
-
-  KHBox* hbox = new KHBox(vbox);
-  QLabel* lbl = new QLabel(i18n("New file share group:"),hbox);
-  KComboBox* combo = new KComboBox(hbox);
-  combo->insertStringList(stringList);
-  combo->setEditable(true);
-  combo->setCurrentText(m_fileShareGroup.name());
-
-  QCheckBox* addChk = new QCheckBox(
-        i18n("Add users from the old file share group to the new one"),
-        vbox);
-
-  QCheckBox* removeUsersChk = new QCheckBox(
-        i18n("Remove users from old file share group"),
-        vbox);
-
-  QCheckBox* removeGroupChk = new QCheckBox(
-        i18n("Delete the old file share group"),
-        vbox);
-
-  if (dlg->exec() == QDialog::Accepted) {
-    QString groupName = combo->currentText();
-    if (groupName != m_fileShareGroup.name()) {
-      QString oldGroup = m_fileShareGroup.name();
-      if (allGroups.contains(KUserGroup(groupName)))
-        setFileShareGroup(KUserGroup(groupName));
-      else {
-        if (!createFileShareGroup(groupName)) {
-          delete dlg;
-          return;
-        }
-      }
-
-      if (removeGroupChk->isChecked())
-        deleteGroup(oldGroup);
-      else
-      if (removeUsersChk->isChecked())
-        emptyGroup(oldGroup);
-
-      if (addChk->isChecked()) {
-          addUsersToGroup(m_users,KUserGroup(groupName));
-          // reread the users
-          m_fileShareGroup = KUserGroup(groupName);
-      }
-
-
-      initUsers();
-      updateListBox();
-
-    }
-  }
-
-  delete dlg;
-
-}
-
-void GroupConfigDlg::setFileShareGroup(const KUserGroup & group) {
-  m_fileShareGroup = group;
-
-  if (m_fileShareGroup.isValid()) {
-    initUsers();
-    updateListBox();
-    m_gui->groupUsersRadio->setText(
-          i18n("Only users of the '%1' group are allowed to share folders",
-           m_fileShareGroup.name()));
-    m_gui->usersGrpBx->setTitle(i18n("Users of '%1' Group",
-           m_fileShareGroup.name()));
-    m_gui->otherGroupBtn->setText(i18n("Change Group..."));
-    m_gui->usersGrpBx->show();
-  } else {
-    m_gui->groupUsersRadio->setText(i18n("Only users of a certain group are allowed to share folders"));
-    m_gui->otherGroupBtn->setText(i18n("Choose Group..."));
-    m_gui->usersGrpBx->hide();
-  }
-
-
-
-}
-
-bool GroupConfigDlg::addUsersToGroup(QList<KUser> users,const KUserGroup & group) {
-  QList<KUser>::ConstIterator it;
-  bool result = true;
-  for ( it = users.constBegin(); it != users.constEnd(); ++it ) {
-    if (!addUser(*it, group))
-      result  = false;
-  }
-  return result;
-}
-
-bool GroupConfigDlg::emptyGroup(const QString & s) {
-  if (KMessageBox::No == KMessageBox::questionYesNo(this,
-        i18n("Do you really want to remove all users from group '%1'?", s), QString(), KStandardGuiItem::del(), KStandardGuiItem::cancel())) {
-      return false;
-  }
-
-  QList<KUser> allUsers = KUser::allUsers();
-  bool result = true;
-  KUserGroup group(s);
-  QList<KUser>::ConstIterator it;
-  for ( it = allUsers.constBegin(); it != allUsers.constEnd(); ++it ) {
-    if (!removeUser(*it, group))
-      result = false;
-  }
-  return result;
-}
-
-bool GroupConfigDlg::deleteGroup(const QString & s) {
-  if (KMessageBox::No == KMessageBox::questionYesNo(this,
-        i18n("Do you really want to delete group '%1'?", s), QString(), KStandardGuiItem::del(), KStandardGuiItem::cancel())) {
-      return false;
-  }
-
-  KProcess proc;
-  proc << "groupdel" << s;
-  if (proc.execute()) {
-    KMessageBox::sorry(this,i18n("Deleting group '%1' failed.", s));
-    return false;
-  }
-
-  return true;
-}
-
-bool GroupConfigDlg::createFileShareGroup(const QString & s) {
-  if (s.isEmpty()) {
-      KMessageBox::sorry(this,i18n("Please choose a valid group."));
-      return false;
-  }
-
-  if (KMessageBox::No == KMessageBox::questionYesNo(this,
-      i18n("This group '%1' does not exist. Should it be created?", s), QString(), KGuiItem(i18n("Create")), KGuiItem(i18n("Do Not Create"))))
-      return false;
-
-  //debug("CreateFileShareGroup: "+s);
-  KProcess proc;
-  proc << "groupadd" << s;
-  if (proc.execute()) {
-    KMessageBox::sorry(this,i18n("Creation of group '%1' failed.", s));
-    return false;
-  } else {
-    setFileShareGroup(KUserGroup(s));
-  }
-
-  return true;
-}
-
-
-#include "groupconfigdlg.moc"
diff -urN kdenetwork-4.6.1/filesharing//simple/groupconfigdlg.h filesharing//simple/groupconfigdlg.h
--- kdenetwork-4.6.1/filesharing/simple/groupconfigdlg.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/groupconfigdlg.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,78 +0,0 @@
-/*
-  Copyright (c) 2004 Jan Schaefer <j_schaef@informatik.uni-kl.de>
-
-  This program is free software; you can redistribute it and/or modify
-  it under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  This program is distributed in the hope that it will be useful,
-  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  GNU General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with this program; if not, write to the Free Software
-  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-
-*/
-
-#ifndef GROUPCONFIGDLG_H
-#define GROUPCONFIGDLG_H
-
-#include <kdialog.h>
-#include "ui_groupconfiggui.h"
-#include <kuser.h>
-class Q3ListBoxItem;
-
-class GroupConfigGUI : public QWidget, public Ui::GroupConfigGUI
-{
-Q_OBJECT
-public:
-    GroupConfigGUI( QWidget *parent );
-public slots:
-    void listBox_selectionChanged( Q3ListBoxItem * i);
-};
-
-
-
-class GroupConfigDlg : public KDialog
-{
-Q_OBJECT
-public:
-  GroupConfigDlg(QWidget * parent, const QString & fileShareGroup, bool restricted,
-                 bool rootPassNeeded, bool simpleSharing);
-  ~GroupConfigDlg();
-  KUserGroup fileShareGroup() const { return m_fileShareGroup; }
-  bool restricted() const;
-  bool rootPassNeeded() const;
-protected:
-  GroupConfigGUI* m_gui;
-
-  void initGUI();
-  void initUsers();
-protected slots:
-  void slotAddUser();
-  void slotRemoveUser();
-  void slotChangeGroup();
-  void updateListBox();
-  virtual void slotOk();
-
-private:
-  bool createFileShareGroup(const QString & s);
-  bool deleteGroup(const QString & s);
-  bool emptyGroup(const QString & s);
-  bool addUser(const KUser & user, const KUserGroup & group);
-  bool removeUser(const KUser & user, const KUserGroup & group);
-  bool addUsersToGroup(QList<KUser> users,const KUserGroup & group);
-  void setFileShareGroup(const KUserGroup & group);
-
-  QList<KUser> m_origUsers;
-  QList<KUser> m_users;
-  KUserGroup m_fileShareGroup;
-  bool m_restricted;
-  bool m_rootPassNeeded;
-  bool m_simpleSharing;
-};
-
-#endif
diff -urN kdenetwork-4.6.1/filesharing//simple/groupconfiggui.ui filesharing//simple/groupconfiggui.ui
--- kdenetwork-4.6.1/filesharing/simple/groupconfiggui.ui	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/groupconfiggui.ui	1970-01-01 00:00:00.000000000 +0000
@@ -1,170 +0,0 @@
-<ui version="4.0" stdsetdef="1" >
-  <class>GroupConfigGUI</class>
-  <widget class="QWidget" name="GroupConfigGUI" >
-    <property name="geometry" >
-      <rect>
-        <x>0</x>
-        <y>0</y>
-        <width>521</width>
-        <height>371</height>
-      </rect>
-    </property>
-    <layout class="QVBoxLayout" >
-      <property name="margin" >
-        <number>0</number>
-      </property>
-      <item>
-        <widget class="Q3ButtonGroup" name="buttonGroup1" >
-          <property name="frameShape" >
-            <enum>Q3GroupBox::NoFrame</enum>
-          </property>
-          <property name="title" >
-            <string/>
-          </property>
-          <layout class="QVBoxLayout" >
-            <property name="margin" >
-              <number>0</number>
-            </property>
-            <item>
-              <widget class="QRadioButton" name="allUsersRadio" >
-                <property name="text" >
-                  <string>Allow all users to share folders</string>
-                </property>
-                <property name="checked" >
-                  <bool>true</bool>
-                </property>
-              </widget>
-            </item>
-            <item>
-              <widget class="QRadioButton" name="groupUsersRadio" >
-                <property name="text" >
-                  <string>Only users of the '%1' group are allowed to share folders</string>
-                </property>
-              </widget>
-            </item>
-          </layout>
-        </widget>
-      </item>
-      <item>
-        <widget class="Q3GroupBox" name="usersGrpBx" >
-          <property name="enabled" >
-            <bool>false</bool>
-          </property>
-          <property name="title" >
-            <string>Users of '%1' Group</string>
-          </property>
-          <layout class="QGridLayout" >
-            <item rowspan="3" row="0" column="0" colspan="1" >
-              <widget class="K3ListBox" name="listBox" />
-            </item>
-            <item row="2" column="1" >
-              <spacer name="spacer6" >
-                <property name="sizeHint" >
-                  <size>
-                    <width>20</width>
-                    <height>20</height>
-                  </size>
-                </property>
-                <property name="sizeType" >
-                  <enum>QSizePolicy::Expanding</enum>
-                </property>
-                <property name="orientation" >
-                  <enum>Qt::Vertical</enum>
-                </property>
-              </spacer>
-            </item>
-            <item row="1" column="1" >
-              <widget class="KPushButton" name="removeBtn" >
-                <property name="enabled" >
-                  <bool>false</bool>
-                </property>
-                <property name="text" >
-                  <string>Remove User</string>
-                </property>
-              </widget>
-            </item>
-            <item row="0" column="1" >
-              <widget class="KPushButton" name="addBtn" >
-                <property name="text" >
-                  <string>Add User</string>
-                </property>
-              </widget>
-            </item>
-            <item rowspan="1" row="3" column="0" colspan="2" >
-              <widget class="QCheckBox" name="writeAccessChk" >
-                <property name="text" >
-                  <string>Group members can share folders without root password</string>
-                </property>
-              </widget>
-            </item>
-          </layout>
-        </widget>
-      </item>
-      <item>
-        <layout class="QHBoxLayout" >
-          <item>
-            <spacer name="spacer8" >
-              <property name="sizeHint" >
-                <size>
-                  <width>180</width>
-                  <height>20</height>
-                </size>
-              </property>
-              <property name="sizeType" >
-                <enum>QSizePolicy::Expanding</enum>
-              </property>
-              <property name="orientation" >
-                <enum>Qt::Horizontal</enum>
-              </property>
-            </spacer>
-          </item>
-          <item>
-            <widget class="KPushButton" name="otherGroupBtn" >
-              <property name="enabled" >
-                <bool>false</bool>
-              </property>
-              <property name="sizePolicy" >
-                <sizepolicy>
-                  <hsizetype>1</hsizetype>
-                  <vsizetype>0</vsizetype>
-                  <horstretch>0</horstretch>
-                  <verstretch>0</verstretch>
-                </sizepolicy>
-              </property>
-              <property name="text" >
-                <string>Change Group...</string>
-              </property>
-            </widget>
-          </item>
-        </layout>
-      </item>
-    </layout>
-  </widget>
-    <customwidgets>
-    <customwidget>
-      <class>K3ListBox</class>
-      <extends>Q3ListBox</extends>
-      <header location="global" >k3listbox.h</header>
-    </customwidget>
-  </customwidgets>
-  <connections>
-    <connection>
-      <sender>groupUsersRadio</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>usersGrpBx</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>groupUsersRadio</sender>
-      <signal>toggled(bool)</signal>
-      <receiver>otherGroupBtn</receiver>
-      <slot>setEnabled(bool)</slot>
-    </connection>
-    <connection>
-      <sender>listBox</sender>
-      <signal>selectionChanged(Q3ListBoxItem*)</signal>
-      <receiver>GroupConfigGUI</receiver>
-      <slot>listBox_selectionChanged(Q3ListBoxItem*)</slot>
-    </connection>
-  </connections>
-</ui>
diff -urN kdenetwork-4.6.1/filesharing//simple/krichtextlabel.cpp filesharing//simple/krichtextlabel.cpp
--- kdenetwork-4.6.1/filesharing/simple/krichtextlabel.cpp	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/krichtextlabel.cpp	1970-01-01 00:00:00.000000000 +0000
@@ -1,118 +0,0 @@
-/* This file is part of the KDE libraries
-   Copyright (C) 2005 Waldo Bastian <bastian@kde.org>
-
-   This library is free software; you can redistribute it and/or
-   modify it under the terms of the GNU Library General Public
-   License version 2 as published by the Free Software Foundation.
-
-   This library is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public License
-   along with this library; see the file COPYING.LIB.  If not, write to
-   the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
-   Boston, MA 02110-1301, USA.
-*/
-
-#include "krichtextlabel.h"
-#include <QTextDocument>
-
-
-#include <q3stylesheet.h>
-#include <q3simplerichtext.h>
-#include <qtextdocument.h>
-//Added by qt3to4:
-#include <QLabel>
-
-#include <kglobalsettings.h>
-
-static QString qrichtextify( const QString& text )
-{
-  if ( text.isEmpty() || text[0] == '<' )
-    return text;
-
-  QStringList lines = QStringList::split('\n', text);
-  for(QStringList::Iterator it = lines.begin(); it != lines.end(); ++it)
-  {
-    *it = Qt::convertFromPlainText( *it, Qt::WhiteSpaceNormal );
-  }
-
-  return lines.join(QString::null);	//krazy:exclude=nullstrassign for old broken gcc
-}
-
-KRichTextLabel::KRichTextLabel( const QString &text , QWidget *parent )
- : QLabel ( parent ) {
-  m_defaultWidth = qMin(400, KGlobalSettings::desktopGeometry(this).width()*2/5);
-  setWordWrap( true );
-  setText(text);
-}
-
-KRichTextLabel::KRichTextLabel( QWidget *parent )
- : QLabel ( parent ) {
-  m_defaultWidth = qMin(400, KGlobalSettings::desktopGeometry(this).width()*2/5);
-  setWordWrap( true );
-}
-
-void KRichTextLabel::setDefaultWidth(int defaultWidth)
-{
-  m_defaultWidth = defaultWidth;
-  updateGeometry();
-}
-
-QSizePolicy KRichTextLabel::sizePolicy() const
-{
-  return QSizePolicy(QSizePolicy::MinimumExpanding, QSizePolicy::Minimum, false);
-}
-
-QSize KRichTextLabel::minimumSizeHint() const
-{
-  QString qt_text = qrichtextify( text() );
-  int pref_width = 0;
-  int pref_height = 0;
-  QTextDocument rt;
-  rt.setHtml( qt_text );
-
-  pref_width = m_defaultWidth;
-  rt.setTextWidth(pref_width);
-  int used_width = rt.idealWidth();
-  if (used_width <= pref_width)
-  {
-    while(true)
-    {
-      int new_width = (used_width * 9) / 10;
-      rt.setTextWidth(new_width);
-      int new_height = rt.size().height();
-      if (new_height > pref_height)
-        break;
-      used_width = rt.idealWidth();
-      if (used_width > new_width)
-        break;
-    }
-    pref_width = used_width;
-  }
-  else
-  {
-    if (used_width > (pref_width *2))
-      pref_width = pref_width *2;
-    else
-      pref_width = used_width;
-  }
-
-  return QSize(pref_width, rt.size().height());
-}
-
-QSize KRichTextLabel::sizeHint() const
-{
-  return minimumSizeHint();
-}
-
-void KRichTextLabel::setText( const QString &text ) {
-  QLabel::setText(text);
-}
-
-void KRichTextLabel::virtual_hook( int, void* )
-{ /*BASE::virtual_hook( id, data );*/ }
-
-#include "krichtextlabel.moc"
diff -urN kdenetwork-4.6.1/filesharing//simple/krichtextlabel.h filesharing//simple/krichtextlabel.h
--- kdenetwork-4.6.1/filesharing/simple/krichtextlabel.h	2011-01-19 22:21:04.000000000 +0000
+++ kdenetwork-4.6.1/filesharing/simple/krichtextlabel.h	1970-01-01 00:00:00.000000000 +0000
@@ -1,63 +0,0 @@
-/* This file is part of the KDE libraries
-   Copyright (C) 2005 Waldo Bastian <bastian@kde.org>
-
-   This library is free software; you can redistribute it and/or
-   modify it under the terms of the GNU Library General Public
-   License version 2 as published by the Free Software Foundation.
-
-   This library is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   Library General Public License for more details.
-
-   You should have received a copy of the GNU Library General Public License
-   along with this library; see the file COPYING.LIB.  If not, write to
-   the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
-   Boston, MA 02110-1301, USA.
-*/
-
-#ifndef KRICHTEXTLABEL_H
-#define KRICHTEXTLABEL_H
-
-#include <qlabel.h>
-
-/**
- * @short A replacement for QLabel that supports richtext and proper layout management
- *
- * @author Waldo Bastian <bastian@kde.org>
- */
-
-/*
- * QLabel
- */
-class KRichTextLabel : public QLabel {
-  Q_OBJECT
-
-public:
-  /**
-   * Default constructor.
-   */
-  KRichTextLabel( QWidget *parent );
-  KRichTextLabel( const QString &text, QWidget *parent );
-
-  int defaultWidth() const { return m_defaultWidth; }
-  void setDefaultWidth(int defaultWidth);
-
-  virtual QSize minimumSizeHint() const;
-  virtual QSize sizeHint() const;
-  QSizePolicy sizePolicy() const;
-
-public slots:
-  void setText( const QString & );
-
-protected:
-  int m_defaultWidth;
-
-protected:
-  virtual void virtual_hook( int id, void* data );
-private:
-  class KRichTextLabelPrivate;
-  KRichTextLabelPrivate *d;
-};
-
-#endif // KRICHTEXTLABEL_H
--- kdenetwork-4.6.1/CMakeLists.txt	2011-01-19 22:21:09.000000000 +0000
+++ kdenetwork-4.6.1/CMakeLists.txt	2011-03-01 16:26:11.787064806 +0000
@@ -91,6 +91,18 @@
 
 macro_optional_add_subdirectory(kdnssd)
 
+option(SAMBA_INSTALL "Offer to install Samba for file sharing with PackageKit if it is not already installed, use -DSAMBA_INSTALL=off to disable, use -DSAMBA_PACKAGE_NAME= to set package name." ON)
+if(NOT SAMBA_PACKAGE_NAME)
+    set(SAMBA_PACKAGE_NAME \\\"samba\\\")
+endif(NOT SAMBA_PACKAGE_NAME)
+if(SAMBA_INSTALL)
+    message(STATUS "Samba install feature will be enabled.")
+    add_definitions(-DSAMBA_INSTALL)
+    add_definitions(-DSAMBA_PACKAGE_NAME=${SAMBA_PACKAGE_NAME})
+else(SAMBA_INSTALL)
+    message(STATUS "Samba install feature will NOT be enabled.")
+endif(SAMBA_INSTALL)
+
 if(NOT WIN32)
   macro_optional_add_subdirectory(filesharing)
 endif(NOT WIN32)
